<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 25. Remoting</title><link rel="stylesheet" href="css/seamframework.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="Seam - Contextual Components"/><link rel="up" href="index.html" title="Seam - Contextual Components"/><link rel="prev" href="webservices.html" title="Chapter 24. Web Services"/><link rel="next" href="gwt.html" title="Chapter 26. Seam and the Google Web Toolkit"/></head><body><p id="title"><a href="http://www.seamframework.org" class="site_href"><strong>SeamFramework.org</strong></a><a href="http://www.seamframework.org/Documentation" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="webservices.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="gwt.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="remoting"/>Chapter 25. Remoting</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="remoting.html#d0e22268">25.1. Configuration</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22300">25.2. The "Seam" object</a></span></dt><dd><dl><dt><span class="section"><a href="remoting.html#d0e22317">25.2.1. A Hello World example</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22406">25.2.2. Seam.Component</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22472">25.2.3. Seam.Remoting</a></span></dt></dl></dd><dt><span class="section"><a href="remoting.html#d0e22502">25.3. Client Interfaces</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22523">25.4. The Context</a></span></dt><dd><dl><dt><span class="section"><a href="remoting.html#d0e22528">25.4.1. Setting and reading the Conversation ID</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22544">25.4.2. Remote calls within the current conversation scope</a></span></dt></dl></dd><dt><span class="section"><a href="remoting.html#d0e22551">25.5. Batch Requests</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22577">25.6. Working with Data types</a></span></dt><dd><dl><dt><span class="section"><a href="remoting.html#d0e22580">25.6.1. Primitives / Basic Types</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22618">25.6.2. JavaBeans</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22660">25.6.3. Dates and Times</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22674">25.6.4. Enums</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22693">25.6.5. Collections</a></span></dt></dl></dd><dt><span class="section"><a href="remoting.html#d0e22743">25.7. Debugging</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22765">25.8. Handling Exceptions</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22787">25.9. The Loading Message</a></span></dt><dd><dl><dt><span class="section"><a href="remoting.html#d0e22792">25.9.1. Changing the message</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22802">25.9.2. Hiding the loading message</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22815">25.9.3. A Custom Loading Indicator</a></span></dt></dl></dd><dt><span class="section"><a href="remoting.html#d0e22828">25.10. Controlling what data is returned</a></span></dt><dd><dl><dt><span class="section"><a href="remoting.html#d0e22848">25.10.1. Constraining normal fields</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22883">25.10.2. Constraining Maps and Collections</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22942">25.10.3. Constraining objects of a specific type</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22949">25.10.4. Combining Constraints</a></span></dt></dl></dd><dt><span class="section"><a href="remoting.html#d0e22956">25.11. Transactional Requests</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22969">25.12. JMS Messaging</a></span></dt><dd><dl><dt><span class="section"><a href="remoting.html#d0e22974">25.12.1. Configuration</a></span></dt><dt><span class="section"><a href="remoting.html#d0e22993">25.12.2. Subscribing to a JMS Topic</a></span></dt><dt><span class="section"><a href="remoting.html#d0e23034">25.12.3. Unsubscribing from a Topic</a></span></dt><dt><span class="section"><a href="remoting.html#d0e23044">25.12.4. Tuning the Polling Process</a></span></dt></dl></dd></dl></div><p> Seam provides a convenient method of remotely accessing components from a web page, using AJAX (Asynchronous
    Javascript and XML). The framework for this functionality is provided with almost no up-front development effort -
    your components only require simple annotating to become accessible via AJAX. This chapter describes the steps
    required to build an AJAX-enabled web page, then goes on to explain the features of the Seam Remoting framework in
    more detail. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22268"/>25.1. Configuration</h2></div></div></div><p> To use remoting, the Seam Resource servlet must first be configured in your <code class="literal">web.xml</code> file: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamResourceServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/seam/resource/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The next step is to import the necessary Javascript into your web page. There are a minimum of two scripts
      that must be imported. The first one contains all the client-side framework code that enables remoting
      functionality: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/resource/remote.js&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The second script contains the stubs and type definitions for the components you wish to call. It is
      generated dynamically based on the local interface of your components, and includes type definitions for all of
      the classes that can be used to call the remotable methods of the interface. The name of the script reflects the
      name of your component. For example, if you have a stateless session bean annotated with
        <code class="literal">@Name("customerAction")</code>, then your script tag should look like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/interface.js?customerAction&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> If you wish to access more than one component from the same page, then include them all as parameters of your
      script tag: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/interface.js?customerAction&amp;accountAction&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      Alternatively, you may use the <code class="literal">s:remote</code> tag to import the required Javascript.  Separate each
      component or class name you wish to import with a comma: 
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerAction,accountAction&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22300"/>25.2. The "Seam" object</h2></div></div></div><p> Client-side interaction with your components is all performed via the <code class="literal">Seam</code> Javascript
      object. This object is defined in <code class="literal">remote.js</code>, and you'll be using it to make asynchronous calls
      against your component. It is split into two areas of functionality; <code class="literal">Seam.Component</code> contains
      methods for working with components and <code class="literal">Seam.Remoting</code> contains methods for executing remote
      requests. The easiest way to become familiar with this object is to start with a simple example. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22317"/>25.2.1. A Hello World example</h3></div></div></div><p> Let's step through a simple example to see how the <code class="literal">Seam</code> object works. First of all,
        let's create a new Seam component called <code class="literal">helloAction</code>. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;helloAction&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloAction</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">WebRemote</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;sayHello</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Hello,&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>Take special note of the
          <code class="literal">@WebRemote</code> annotation, as it's required to make our method accessible via remoting:</p><p> That's all the server-side code we need to write.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>If you are performing a persistence operation in the method marked <code class="literal">@WebRemote</code> you will
         also need to add a <code class="literal">@Transactional</code> annotation to the method. Otherwise, your method would
         execute outside of a transaction without this extra hint.That's because unlike a JSF request, Seam does not
         wrap the remoting request in a transaction automatically.</p></div><p>Now for our web page - create a new page and import the 
          <code class="literal">helloAction</code> component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helloAction&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> To make this a fully interactive user experience, let's add a button to our page: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">onclick</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javascript:sayHello()&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Say&nbsp;Hello</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">button</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> We'll also need to add some more script to make our button actually do something when it's clicked: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;//</span><span class="xml_char_data">&lt;![CDATA[</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;function&nbsp;sayHello()&nbsp;{</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;name&nbsp;=&nbsp;prompt(&quot;What&nbsp;is&nbsp;your&nbsp;name?&quot;);</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;&nbsp;Seam.Component.getInstance(&quot;helloAction&quot;).sayHello(name,&nbsp;sayHelloCallback);</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;}</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;function&nbsp;sayHelloCallback(result)&nbsp;{</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;&nbsp;alert(result);</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;}</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;//&nbsp;]]&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> We're done! Deploy your application and browse to your page. Click the button, and enter a name when
        prompted. A message box will display the hello message confirming that the call was successful. If you want to
        save some time, you'll find the full source code for this Hello World example in Seam's
          <code class="literal">/examples/remoting/helloworld</code> directory. </p><p> So what does the code of our script actually do? Let's break it down into smaller pieces. To start with,
        you can see from the Javascript code listing that we have implemented two methods - the first method is
        responsible for prompting the user for their name and then making a remote request. Take a look at the following
        line: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Component.getInstance(&quot;helloAction&quot;).sayHello(name,&nbsp;sayHelloCallback);</span><br />
</pre><p> The first section of this line, <code class="literal">Seam.Component.getInstance("helloAction")</code> returns a
        proxy, or "stub" for our <code class="literal">helloAction</code> component. We can invoke the methods of our component
        against this stub, which is exactly what happens with the remainder of the line: <code class="literal">sayHello(name,
          sayHelloCallback);</code>. </p><p> What this line of code in its completeness does, is invoke the <code class="literal">sayHello</code> method of our
        component, passing in <code class="literal">name</code> as a parameter. The second parameter,
        <code class="literal">sayHelloCallback</code> isn't a parameter of our component's <code class="literal">sayHello</code> method,
        instead it tells the Seam Remoting framework that once it receives the response to our request, it should pass
        it to the <code class="literal">sayHelloCallback</code> Javascript method. This callback parameter is entirely optional,
        so feel free to leave it out if you're calling a method with a <code class="literal">void</code> return type or if you
        don't care about the result. </p><p> The <code class="literal">sayHelloCallback</code> method, once receiving the response to our remote request then pops
        up an alert message displaying the result of our method call. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22406"/>25.2.2. Seam.Component</h3></div></div></div><p> The <code class="literal">Seam.Component</code> Javascript object provides a number of client-side methods for
        working with your Seam components. The two main methods, <code class="literal">newInstance()</code> and
          <code class="literal">getInstance()</code> are documented in the following sections however their main difference is
        that <code class="literal">newInstance()</code> will always create a new instance of a component type, and
          <code class="literal">getInstance()</code> will return a singleton instance. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22426"/>25.2.2.1. Seam.Component.newInstance()</h4></div></div></div><p> Use this method to create a new instance of an entity or Javabean component. The object returned by this
          method will have the same getter/setter methods as its server-side counterpart, or alternatively if you wish
          you can access its fields directly. Take the following Seam entity component for example: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;customer&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getCustomerId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCustomerId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">customerId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFirstName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setFirstName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">firstName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setLastName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">lastName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> To create a client-side Customer you would write the following code: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">var&nbsp;customer&nbsp;=&nbsp;Seam.Component.newInstance(&quot;customer&quot;);</span><br />
</pre><p> Then from here you can set the fields of the customer object: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">customer.setFirstName(&quot;John&quot;);</span><br />
<span class="xml_plain">//&nbsp;Or&nbsp;you&nbsp;can&nbsp;set&nbsp;the&nbsp;fields&nbsp;directly</span><br />
<span class="xml_plain">customer.lastName&nbsp;=&nbsp;&quot;Smith&quot;;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22441"/>25.2.2.2. Seam.Component.getInstance()</h4></div></div></div><p> The <code class="literal">getInstance()</code> method is used to get a reference to a Seam session bean component
          stub, which can then be used to remotely execute methods against your component. This method returns a
          singleton for the specified component, so calling it twice in a row with the same component name will return
          the same instance of the component. </p><p> To continue our example from before, if we have created a new <code class="literal">customer</code> and we now wish
          to save it, we would pass it to the <code class="literal">saveCustomer()</code> method of our
          <code class="literal">customerAction</code> component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Component.getInstance(&quot;customerAction&quot;).saveCustomer(customer);</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22462"/>25.2.2.3. Seam.Component.getComponentName()</h4></div></div></div><p> Passing an object into this method will return its component name if it is a component, or
          <code class="literal">null</code> if it is not. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">if&nbsp;(Seam.Component.getComponentName(instance)&nbsp;==&nbsp;&quot;customer&quot;)</span><br />
<span class="xml_plain">&nbsp;&nbsp;alert(&quot;Customer&quot;);</span><br />
<span class="xml_plain">else&nbsp;if&nbsp;(Seam.Component.getComponentName(instance)&nbsp;==&nbsp;&quot;staff&quot;)</span><br />
<span class="xml_plain">&nbsp;&nbsp;alert(&quot;Staff&nbsp;member&quot;);</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22472"/>25.2.3. Seam.Remoting</h3></div></div></div><p> Most of the client side functionality for Seam Remoting is contained within the
        <code class="literal">Seam.Remoting</code> object. While you shouldn't need to directly call most of its methods, there
        are a couple of important ones worth mentioning. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22480"/>25.2.3.1. Seam.Remoting.createType()</h4></div></div></div><p> If your application contains or uses Javabean classes that aren't Seam components, you may need to create
          these types on the client side to pass as parameters into your component method. Use the
          <code class="literal">createType()</code> method to create an instance of your type. Pass in the fully qualified Java
          class name as a parameter: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">var&nbsp;widget&nbsp;=&nbsp;Seam.Remoting.createType(&quot;com.acme.widgets.MyWidget&quot;);</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22490"/>25.2.3.2. Seam.Remoting.getTypeName()</h4></div></div></div><p> This method is the equivalent of <code class="literal">Seam.Component.getComponentName()</code> but for
          non-component types. It will return the name of the type for an object instance, or <code class="literal">null</code> if
          the type is not known. The name is the fully qualified name of the type's Java class. </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22502"/>25.3. Client Interfaces</h2></div></div></div><p> In the configuration section above, the interface, or "stub" for our component is imported into our page 
        either via <code class="literal">seam/resource/remoting/interface.js</code>: or using the <code class="literal">s:remote</code>
        tag:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/interface.js?customerAction&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerAction&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> By including this script in our page, the interface definitions for our component, plus any other components
      or types that are required to execute the methods of our component are generated and made available for the
      remoting framework to use. </p><p> There are two types of client stub that can be generated, "executable" stubs and "type" stubs. Executable
      stubs are behavioural, and are used to execute methods against your session bean components, while type stubs
      contain state and represent the types that can be passed in as parameters or returned as a result. </p><p> The type of client stub that is generated depends on the type of your Seam component. If the component is a
      session bean, then an executable stub will be generated, otherwise if it's an entity or JavaBean, then a type stub
      will be generated. There is one exception to this rule; if your component is a JavaBean (ie it is not a session
      bean nor an entity bean) and any of its methods are annotated with @WebRemote, then an executable stub will be
      generated for it instead of a type stub. This allows you to use remoting to call methods of your JavaBean
      components in a non-EJB environment where you don't have access to session beans. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22523"/>25.4. The Context</h2></div></div></div><p> The Seam Remoting Context contains additional information which is sent and received as part of a remoting
      request/response cycle. At this stage it only contains the conversation ID but may be expanded in the future. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22528"/>25.4.1. Setting and reading the Conversation ID</h3></div></div></div><p> If you intend on using remote calls within the scope of a conversation then you need to be able to read or
      set the conversation ID in the Seam Remoting Context. To read the conversation ID after making a remote request
      call <code class="literal">Seam.Remoting.getContext().getConversationId()</code>. To set the conversation ID before making a
      request, call <code class="literal">Seam.Remoting.getContext().setConversationId()</code>. </p><p> If the conversation ID hasn't been explicitly set with
        <code class="literal">Seam.Remoting.getContext().setConversationId()</code>, then it will be automatically assigned the
      first valid conversation ID that is returned by any remoting call. If you are working with multiple conversations
      within your page, then you may need to explicitly set the conversation ID before each call. If you are working
      with just a single conversation, then you don't need to do anything special. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22544"/>25.4.2. Remote calls within the current conversation scope</h3></div></div></div><p> In some circumstances it may be required to make a remote call within the scope of the
        current view's conversation.  To do this, you must explicitly set the conversation ID to that
        of the view before making the remote call.  This small snippet of JavaScript will set the
        conversation ID that is used for remoting calls to the current view's conversation ID: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.getContext().setConversationId(&nbsp;#{conversation.id}&nbsp;);</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22551"/>25.5. Batch Requests</h2></div></div></div><p> Seam Remoting allows multiple component calls to be executed within a single request. It is recommended that
      this feature is used wherever it is appropriate to reduce network traffic. </p><p> The method <code class="literal">Seam.Remoting.startBatch()</code> will start a new batch, and any component calls
      executed after starting a batch are queued, rather than being sent immediately. When all the desired component
      calls have been added to the batch, the <code class="literal">Seam.Remoting.executeBatch()</code> method will send a single
      request containing all of the queued calls to the server, where they will be executed in order. After the calls
      have been executed, a single response containning all return values will be returned to the client and the
      callback functions (if provided) triggered in the same order as execution. </p><p> If you start a new batch via the <code class="literal">startBatch()</code> method but then decide you don't want to
      send it, the <code class="literal">Seam.Remoting.cancelBatch()</code> method will discard any calls that were queued and
      exit the batch mode. </p><p> To see an example of a batch being used, take a look at <code class="literal">/examples/remoting/chatroom</code>.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22577"/>25.6. Working with Data types</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22580"/>25.6.1. Primitives / Basic Types</h3></div></div></div><p> This section describes the support for basic data types. On the server side these values are generally
        compatible with either their primitive type or their corresponding wrapper class. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22585"/>25.6.1.1. String</h4></div></div></div><p> Simply use Javascript String objects when setting String parameter values. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22590"/>25.6.1.2. Number</h4></div></div></div><p> There is support for all number types supported by Java. On the client side, number values are always
          serialized as their String representation and then on the server side they are converted to the correct
          destination type. Conversion into either a primitive or wrapper type is supported for <code class="literal">Byte</code>,
            <code class="literal">Double</code>, <code class="literal">Float</code>, <code class="literal">Integer</code>, <code class="literal">Long</code> and
            <code class="literal">Short</code> types. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22613"/>25.6.1.3. Boolean</h4></div></div></div><p> Booleans are represented client side by Javascript Boolean values, and server side by a Java boolean.
        </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22618"/>25.6.2. JavaBeans</h3></div></div></div><p> In general these will be either Seam entity or JavaBean components, or some other non-component class. Use
        the appropriate method (either <code class="literal">Seam.Component.newInstance()</code> for Seam components or
          <code class="literal">Seam.Remoting.createType()</code> for everything else) to create a new instance of the object. </p><p> It is important to note that only objects that are created by either of these two methods should be used as
        parameter values, where the parameter is not one of the other valid types mentioned anywhere else in this
        section. In some situations you may have a component method where the exact parameter type cannot be determined,
        such as: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;myAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">MyActionLocal</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doSomethingWithObject</span><span class="java_separator">(</span><span class="java_type">Object</span><span class="java_plain">&nbsp;obj</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> In this case you might want to pass in an instance of your <code class="literal">myWidget</code> component, however
        the interface for <code class="literal">myAction</code> won't include <code class="literal">myWidget</code> as it is not directly
        referenced by any of its methods. To get around this, <code class="literal">MyWidget</code> needs to be explicitly
        imported: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myAction,myWidget&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> This will then allow a <code class="literal">myWidget</code> object to be created with
          <code class="literal">Seam.Component.newInstance("myWidget")</code>, which can then be passed to
          <code class="literal">myAction.doSomethingWithObject()</code>. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22660"/>25.6.3. Dates and Times</h3></div></div></div><p> Date values are serialized into a String representation that is accurate to the millisecond. On the client
        side, use a Javascript Date object to work with date values. On the server side, use any
        <code class="literal">java.util.Date</code> (or descendent, such as <code class="literal">java.sql.Date</code> or
          <code class="literal">java.sql.Timestamp</code> class. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22674"/>25.6.4. Enums</h3></div></div></div><p> On the client side, enums are treated the same as Strings. When setting the value for an enum parameter,
        simply use the String representation of the enum. Take the following component as an example: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;paintAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;paintAction&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;paintLocal&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;enum&nbsp;</span><span class="java_type">Color</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">red</span><span class="java_separator">,</span><span class="java_plain">&nbsp;green</span><span class="java_separator">,</span><span class="java_plain">&nbsp;blue</span><span class="java_separator">,</span><span class="java_plain">&nbsp;yellow</span><span class="java_separator">,</span><span class="java_plain">&nbsp;orange</span><span class="java_separator">,</span><span class="java_plain">&nbsp;purple</span><span class="java_separator">};</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;paint</span><span class="java_separator">(</span><span class="java_type">Color</span><span class="java_plain">&nbsp;color</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></pre><p> To call the <code class="literal">paint()</code> method with the color <code class="literal">red</code>, pass the parameter
        value as a String literal: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Component.getInstance(&quot;paintAction&quot;).paint(&quot;red&quot;);</span><br />
</pre><p> The inverse is also true - that is, if a component method returns an enum parameter (or contains an enum
        field anywhere in the returned object graph) then on the client-side it will be represented as a String. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22693"/>25.6.5. Collections</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22696"/>25.6.5.1. Bags</h4></div></div></div><p> Bags cover all collection types including arrays, collections, lists, sets, (but excluding Maps - see the
          next section for those), and are implemented client-side as a Javascript array. When calling a component
          method that accepts one of these types as a parameter, your parameter should be a Javascript array. If a
          component method returns one of these types, then the return value will also be a Javascript array. The
          remoting framework is clever enough on the server side to convert the bag to an appropriate type for the
          component method call. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22701"/>25.6.5.2. Maps</h4></div></div></div><p> As there is no native support for Maps within Javascript, a simple Map implementation is provided with
          the Seam Remoting framework. To create a Map which can be used as a parameter to a remote call, create a new
            <code class="literal">Seam.Remoting.Map</code> object: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">var&nbsp;map&nbsp;=&nbsp;new&nbsp;Seam.Remoting.Map();</span><br />
</pre><p> This Javascript implementation provides basic methods for working with Maps: <code class="literal">size()</code>,
            <code class="literal">isEmpty()</code>, <code class="literal">keySet()</code>, <code class="literal">values()</code>,
          <code class="literal">get(key)</code>, <code class="literal">put(key, value)</code>, <code class="literal">remove(key)</code> and
            <code class="literal">contains(key)</code>. Each of these methods are equivalent to their Java counterpart. Where the
          method returns a collection, such as <code class="literal">keySet()</code> and <code class="literal">values()</code>, a Javascript
          Array object will be returned that contains the key or value objects (respectively). </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22743"/>25.7. Debugging</h2></div></div></div><p> To aid in tracking down bugs, it is possible to enable a debug mode which will display the contents of all
      the packets send back and forth between the client and server in a popup window. To enable debug mode, either
      execute the <code class="literal">setDebug()</code> method in Javascript: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.setDebug(true);</span><br />
</pre><p> Or configure it via components.xml: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">remoting:remoting</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">debug</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> To turn off debugging, call <code class="literal">setDebug(false)</code>. If you want to write your own messages to the
      debug log, call <code class="literal">Seam.Remoting.log(message)</code>. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22765"/>25.8. Handling Exceptions</h2></div></div></div><p>
      When invoking a remote component method, it is possible to specify an exception handler which will process
      the response in the event of an exception during component invocation.  To specify an exception handler function, 
      include a reference to it after the callback parameter in your JavaScript:
    </p><pre class="programlisting">var callback = function(result) { alert(result); };
var exceptionHandler = function(ex) { alert("An exception occurred: " + ex.getMessage()); };
Seam.Component.getInstance("helloAction").sayHello(name, callback, exceptionHandler);</pre><p>
      If you do not have a callback handler defined, you must specify <code class="literal">null</code> in its place:
    </p><pre class="programlisting">var exceptionHandler = function(ex) { alert("An exception occurred: " + ex.getMessage()); };
Seam.Component.getInstance("helloAction").sayHello(name, null, exceptionHandler);</pre><p>
      The exception object that is passed to the exception handler exposes one method, <code class="literal">getMessage()</code>
      that returns the exception message which is produced by the exception thrown by the <code class="literal">@WebRemote</code>
      method.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22787"/>25.9. The Loading Message</h2></div></div></div><p> The default loading message that appears in the top right corner of the screen can be modified, its rendering
      customised or even turned off completely. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22792"/>25.9.1. Changing the message</h3></div></div></div><p> To change the message from the default "Please Wait..." to something different, set the value of
          <code class="literal">Seam.Remoting.loadingMessage</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.loadingMessage&nbsp;=&nbsp;&quot;Loading...&quot;;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22802"/>25.9.2. Hiding the loading message</h3></div></div></div><p> To completely suppress the display of the loading message, override the implementation of
          <code class="literal">displayLoadingMessage()</code> and <code class="literal">hideLoadingMessage()</code> with functions that
        instead do nothing: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">//&nbsp;don't&nbsp;display&nbsp;the&nbsp;loading&nbsp;indicator</span><br />
<span class="xml_plain">Seam.Remoting.displayLoadingMessage&nbsp;=&nbsp;function()&nbsp;{};</span><br />
<span class="xml_plain">Seam.Remoting.hideLoadingMessage&nbsp;=&nbsp;function()&nbsp;{};</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22815"/>25.9.3. A Custom Loading Indicator</h3></div></div></div><p> It is also possible to override the loading indicator to display an animated icon, or anything else that
        you want. To do this override the <code class="literal">displayLoadingMessage()</code> and
        <code class="literal">hideLoadingMessage()</code> messages with your own implementation: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;Seam.Remoting.displayLoadingMessage&nbsp;=&nbsp;function()&nbsp;{</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;code&nbsp;here&nbsp;to&nbsp;display&nbsp;the&nbsp;indicator</span><br />
<span class="xml_plain">&nbsp;&nbsp;};</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;Seam.Remoting.hideLoadingMessage&nbsp;=&nbsp;function()&nbsp;{</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;code&nbsp;here&nbsp;to&nbsp;hide&nbsp;the&nbsp;indicator</span><br />
<span class="xml_plain">&nbsp;&nbsp;};</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22828"/>25.10. Controlling what data is returned</h2></div></div></div><p> When a remote method is executed, the result is serialized into an XML response that is returned to the
      client. This response is then unmarshaled by the client into a Javascript object. For complex types (i.e.
      Javabeans) that include references to other objects, all of these referenced objects are also serialized as part
      of the response. These objects may reference other objects, which may reference other objects, and so forth. If
      left unchecked, this object "graph" could potentially be enormous, depending on what relationships exist between
      your objects. And as a side issue (besides the potential verbosity of the response), you might also wish to
      prevent sensitive information from being exposed to the client. </p><p> Seam Remoting provides a simple means to "constrain" the object graph, by specifying the
      <code class="literal">exclude</code> field of the remote method's <code class="literal">@WebRemote</code> annotation. This field
      accepts a String array containing one or more paths specified using dot notation. When invoking a remote method,
      the objects in the result's object graph that match these paths are excluded from the serialized result packet. </p><p> For all our examples, we'll use the following <code class="literal">Widget</code> class: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;widget&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;secret</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;child</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Widget</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;widgetMap</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Widget</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;widgetList</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;getters&nbsp;and&nbsp;setters&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;all&nbsp;fields</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22848"/>25.10.1. Constraining normal fields</h3></div></div></div><p> If your remote method returns an instance of <code class="literal">Widget</code>, but you don't want to expose the
          <code class="literal">secret</code> field because it contains sensitive information, you would constrain it like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span></pre><p> The value "secret" refers to the <code class="literal">secret</code> field of the returned object. Now, suppose that
        we don't care about exposing this particular field to the client. Instead, notice that the
        <code class="literal">Widget</code> value that is returned has a field <code class="literal">child</code> that is also a
          <code class="literal">Widget</code>. What if we want to hide the <code class="literal">child</code>'s <code class="literal">secret</code>
        value instead? We can do this by using dot notation to specify this field's path within the result's object
        graph: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;child.secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22883"/>25.10.2. Constraining Maps and Collections</h3></div></div></div><p> The other place that objects can exist within an object graph are within a <code class="literal">Map</code> or some
        kind of collection (<code class="literal">List</code>, <code class="literal">Set</code>, <code class="literal">Array</code>, etc). Collections
        are easy, and are treated like any other field. For example, if our <code class="literal">Widget</code> contained a list
        of other <code class="literal">Widget</code>s in its <code class="literal">widgetList</code> field, to constrain the
        <code class="literal">secret</code> field of the <code class="literal">Widget</code>s in this list the annotation would look like
        this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;widgetList.secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span></pre><p> To constrain a <code class="literal">Map</code>'s key or value, the notation is slightly different. Appending
          <code class="literal">[key]</code> after the <code class="literal">Map</code>'s field name will constrain the
        <code class="literal">Map</code>'s key object values, while <code class="literal">[value]</code> will constrain the value object
        values. The following example demonstrates how the values of the <code class="literal">widgetMap</code> field have their
          <code class="literal">secret</code> field constrained: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;widgetMap[value].secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22942"/>25.10.3. Constraining objects of a specific type</h3></div></div></div><p> There is one last notation that can be used to constrain the fields of a type of object no matter where in
        the result's object graph it appears. This notation uses either the name of the component (if the object is a
        Seam component) or the fully qualified class name (only if the object is not a Seam component) and is expressed
        using square brackets: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;[widget].secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22949"/>25.10.4. Combining Constraints</h3></div></div></div><p> Constraints can also be combined, to filter objects from multiple paths within the object graph: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;widgetList.secret&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">&quot;widgetMap[value].secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span></pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22956"/>25.11. Transactional Requests</h2></div></div></div><p>
      By default there is no active transaction during a remoting request, so if you wish to perform database updates 
      during a remoting request, you need to annotate the <code class="literal">@WebRemote</code> method with 
      <code class="literal">@Transactional</code>, like so:
    </p><pre class="programlisting">  @WebRemote @Transactional(TransactionPropagationType.REQUIRED)
  public void updateOrder(Order order) {
    entityManager.merge(order);
  }</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22969"/>25.12. JMS Messaging</h2></div></div></div><p> Seam Remoting provides experimental support for JMS Messaging. This section describes the JMS support that is
      currently implemented, but please note that this may change in the future. It is currently not recommended that
      this feature is used within a production environment. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22974"/>25.12.1. Configuration</h3></div></div></div><p> Before you can subscribe to a JMS topic, you must first configure a list of the topics that can be
        subscribed to by Seam Remoting. List the topics under
          <code class="literal">org.jboss.seam.remoting.messaging.subscriptionRegistry.allowedTopics</code> in
          <code class="literal">seam.properties</code>, <code class="literal">web.xml</code> or <code class="literal">components.xml</code>. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">remoting:remoting</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-interval</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22993"/>25.12.2. Subscribing to a JMS Topic</h3></div></div></div><p> The following example demonstrates how to subscribe to a JMS Topic: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">function&nbsp;subscriptionCallback(message)</span><br />
<span class="xml_plain">{</span><br />
<span class="xml_plain">&nbsp;&nbsp;if&nbsp;(message&nbsp;instanceof&nbsp;Seam.Remoting.TextMessage)</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;Received&nbsp;message:&nbsp;&quot;&nbsp;+&nbsp;message.getText());</span><br />
<span class="xml_plain">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">Seam.Remoting.subscribe(&quot;topicName&quot;,&nbsp;subscriptionCallback);</span><br />
</pre><p> The <code class="literal">Seam.Remoting.subscribe()</code> method accepts two parameters, the first being the name of
        the JMS Topic to subscribe to, the second being the callback function to invoke when a message is received. </p><p> There are two types of messages supported, Text messages and Object messages. If you need to test for the
        type of message that is passed to your callback function you can use the <code class="literal">instanceof</code> operator
        to test whether the message is a <code class="literal">Seam.Remoting.TextMessage</code> or
          <code class="literal">Seam.Remoting.ObjectMessage</code>. A <code class="literal">TextMessage</code> contains the text value in
        its <code class="literal">text</code> field (or alternatively call <code class="literal">getText()</code> on it), while an
          <code class="literal">ObjectMessage</code> contains its object value in its <code class="literal">value</code> field (or call its
          <code class="literal">getValue()</code> method). </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23034"/>25.12.3. Unsubscribing from a Topic</h3></div></div></div><p> To unsubscribe from a topic, call <code class="literal">Seam.Remoting.unsubscribe()</code> and pass in the topic
        name: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.unsubscribe(&quot;topicName&quot;);</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23044"/>25.12.4. Tuning the Polling Process</h3></div></div></div><p> There are two parameters which you can modify to control how polling occurs. The first one is
          <code class="literal">Seam.Remoting.pollInterval</code>, which controls how long to wait between subsequent polls for
        new messages. This parameter is expressed in seconds, and its default setting is 10. </p><p> The second parameter is <code class="literal">Seam.Remoting.pollTimeout</code>, and is also expressed as seconds. It
        controls how long a request to the server should wait for a new message before timing out and sending an empty
        response. Its default is 0 seconds, which means that when the server is polled, if there are no messages ready
        for delivery then an empty response will be immediately returned. </p><p> Caution should be used when setting a high <code class="literal">pollTimeout</code> value; each request that has to
        wait for a message means that a server thread is tied up until a message is received, or until the request times
        out. If many such requests are being served simultaneously, it could mean a large number of threads become tied
        up because of this reason. </p><p> It is recommended that you set these options via components.xml, however they can be overridden via
        Javascript if desired. The following example demonstrates how to configure the polling to occur much more
        aggressively. You should set these parameters to suitable values for your application: </p><p> Via components.xml: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">remoting:remoting</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-interval</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> Via JavaScript: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">//&nbsp;Only&nbsp;wait&nbsp;1&nbsp;second&nbsp;between&nbsp;receiving&nbsp;a&nbsp;poll&nbsp;response&nbsp;and&nbsp;sending&nbsp;the&nbsp;next&nbsp;poll&nbsp;request.</span><br />
<span class="xml_plain">Seam.Remoting.pollInterval&nbsp;=&nbsp;1;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">//&nbsp;Wait&nbsp;up&nbsp;to&nbsp;5&nbsp;seconds&nbsp;on&nbsp;the&nbsp;server&nbsp;for&nbsp;new&nbsp;messages</span><br />
<span class="xml_plain">Seam.Remoting.pollTimeout&nbsp;=&nbsp;5;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="webservices.html"><strong>Prev</strong>Chapter 24. Web Services</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="gwt.html"><strong>Next</strong>Chapter 26. Seam and the Google Web Toolkit</a></li></ul></body></html>