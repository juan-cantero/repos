<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Seam - Contextual Components</title><link rel="stylesheet" href="css/seamframework-single.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/></head><body><div class="book" lang="en-US"><div class="titlepage"><div><p id="title"><a href="http://www.seamframework.org" class="site_href"><strong>SeamFramework.org</strong></a><a href="http://www.seamframework.org/Documentation" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e1"/>Seam - Contextual Components</h1></div><div><h2 class="subtitle">A Framework for Enterprise Java</h2></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Gavin</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">King</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Pete</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Muir</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Norman</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Richards</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Shane</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bryzak</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Michael</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Yuan</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Mike</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Youngstrom</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Christian</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bauer</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Jay</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Balunas</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Dan</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Allen</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Max</span> <span xmlns="http://www.w3.org/1999/xhtml" class="othername">Rydahl</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Andersen</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Emmanuel</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bernard</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Nicklas</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Karlsson</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Daniel</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Roth</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Matt</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Drees</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Jacob</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Orshalick</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Denis</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Forveille</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Marek</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Novotny</span>, and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Jozef</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Hartinger</span></div><div class="editors">edited by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Samson</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Kittoli</span></div><div class="others">and thanks to <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">James</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Cobb</span> (Graphic Design), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Cheyenne</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Weaver</span> (Graphic Design), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Mark</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Newton</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Steve</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Ebersole</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Michael</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Courcy</span> (French Translation), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Nicola</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Benaglia</span> (Italian Translation), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Stefano</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Travelli</span> (Italian Translation), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Francesco</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Milesi</span> (Italian Translation), and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Japan</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">JBoss User Group</span> (Japanese Translation)</div></div></div><div><p class="releaseinfo">2.3.0.CR1</p></div></div><hr/></div><div class="toc"><dl><dt><span class="preface"><a href="#Book-Preface">Introduction to JBoss Seam</a></span></dt><dd><dl><dt><span class="section"><a href="#Book-We_Need_Feedback">1. Contribute to Seam</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial">1. Seam Tutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#try-examples">1.1. Using the Seam examples</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e435">1.1.1. Running the examples on JBoss AS</a></span></dt><dt><span class="section"><a href="#d0e476">1.1.2. Running the example tests</a></span></dt></dl></dd><dt><span class="section"><a href="#registration-example">1.2. Your first Seam application: the registration example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e498">1.2.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e955">1.2.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#messages">1.3. Clickable lists in Seam: the messages example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1031">1.3.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e1250">1.3.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#todo">1.4. Seam and jBPM: the todo list example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1341">1.4.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e1533">1.4.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#numberguess">1.5. Seam pageflow: the numberguess example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1615">1.5.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e1732">1.5.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#booking">1.6. A complete Seam application: the Hotel Booking example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1834">1.6.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e1884">1.6.2. Overview of the booking example</a></span></dt><dt><span class="section"><a href="#d0e1951">1.6.3. Understanding Seam conversations</a></span></dt><dt><span class="section"><a href="#d0e2194">1.6.4. The Seam Debug Page</a></span></dt></dl></dd><dt><span class="section"><a href="#nestedbooking">1.7. Nested conversations: extending the Hotel Booking example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2226">1.7.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e2256">1.7.2. Understanding Nested Conversations</a></span></dt></dl></dd><dt><span class="section"><a href="#dvdstore">1.8. A complete application featuring Seam and jBPM: the DVD Store example</a></span></dt><dt><span class="section"><a href="#blog">1.9. Bookmarkable URLs with the Blog example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2475">1.9.1. Using "pull"-style MVC</a></span></dt><dt><span class="section"><a href="#d0e2534">1.9.2. Bookmarkable search results page</a></span></dt><dt><span class="section"><a href="#d0e2618">1.9.3. Using "push"-style MVC in a RESTful application</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#gettingstarted">2. Getting started with Seam, using seam-gen</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2691">2.1. Before you start</a></span></dt><dt><span class="section"><a href="#d0e2716">2.2. Setting up a new project</a></span></dt><dt><span class="section"><a href="#d0e2825">2.3. Creating a new action</a></span></dt><dt><span class="section"><a href="#d0e2874">2.4. Creating a form with an action</a></span></dt><dt><span class="section"><a href="#d0e2888">2.5. Generating an application from an existing database</a></span></dt><dt><span class="section"><a href="#d0e2903">2.6. Generating an application from existing JPA/EJB3 entities</a></span></dt><dt><span class="section"><a href="#d0e2918">2.7. Deploying the application as an EAR</a></span></dt><dt><span class="section"><a href="#gettingstarted-hotdeployment">2.8. Seam and incremental hot deployment</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gettingstartedwithjbosstools">3. Getting started with Seam, using JBoss Tools</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3058">3.1. Before you start</a></span></dt></dl></dd><dt><span class="chapter"><a href="#concepts">4. The contextual component model</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e3084">4.1. Seam contexts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3123">4.1.1. Stateless context</a></span></dt><dt><span class="sect2"><a href="#d0e3128">4.1.2. Event context</a></span></dt><dt><span class="sect2"><a href="#d0e3135">4.1.3. Page context</a></span></dt><dt><span class="sect2"><a href="#d0e3140">4.1.4. Conversation context</a></span></dt><dt><span class="sect2"><a href="#d0e3173">4.1.5. Session context</a></span></dt><dt><span class="sect2"><a href="#d0e3180">4.1.6. Business process context</a></span></dt><dt><span class="sect2"><a href="#d0e3188">4.1.7. Application context</a></span></dt><dt><span class="sect2"><a href="#d0e3193">4.1.8. Context variables</a></span></dt><dt><span class="sect2"><a href="#d0e3217">4.1.9. Context search priority</a></span></dt><dt><span class="sect2"><a href="#concurrency">4.1.10. Concurrency model</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e3277">4.2. Seam components</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3306">4.2.1. Stateless session beans</a></span></dt><dt><span class="sect2"><a href="#d0e3328">4.2.2. Stateful session beans</a></span></dt><dt><span class="sect2"><a href="#d0e3353">4.2.3. Entity beans</a></span></dt><dt><span class="sect2"><a href="#d0e3377">4.2.4. JavaBeans</a></span></dt><dt><span class="sect2"><a href="#d0e3399">4.2.5. Message-driven beans</a></span></dt><dt><span class="sect2"><a href="#d0e3408">4.2.6. Interception</a></span></dt><dt><span class="sect2"><a href="#d0e3422">4.2.7. Component names</a></span></dt><dt><span class="sect2"><a href="#d0e3486">4.2.8. Defining the component scope</a></span></dt><dt><span class="sect2"><a href="#d0e3501">4.2.9. Components with multiple roles</a></span></dt><dt><span class="sect2"><a href="#d0e3524">4.2.10. Built-in components</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e3539">4.3. Bijection</a></span></dt><dt><span class="sect1"><a href="#d0e3642">4.4. Lifecycle methods</a></span></dt><dt><span class="sect1"><a href="#d0e3694">4.5. Conditional installation</a></span></dt><dt><span class="sect1"><a href="#d0e3780">4.6. Logging</a></span></dt><dt><span class="sect1"><a href="#d0e3828">4.7. The Mutable interface and @ReadOnly</a></span></dt><dt><span class="sect1"><a href="#d0e3881">4.8. Factory and manager components</a></span></dt></dl></dd><dt><span class="chapter"><a href="#xml">5. Configuring Seam components</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3953">5.1. Configuring components via property settings</a></span></dt><dt><span class="section"><a href="#xml.descriptor">5.2. Configuring components via components.xml</a></span></dt><dt><span class="section"><a href="#d0e4168">5.3. Fine-grained configuration files</a></span></dt><dt><span class="section"><a href="#d0e4206">5.4. Configurable property types</a></span></dt><dt><span class="section"><a href="#d0e4302">5.5. Using XML Namespaces</a></span></dt></dl></dd><dt><span class="chapter"><a href="#events">6. Events, interceptors and exception handling</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4447">6.1. Seam events</a></span></dt><dt><span class="section"><a href="#d0e4481">6.2. Page actions</a></span></dt><dt><span class="section"><a href="#d0e4552">6.3. Page parameters</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4561">6.3.1. Mapping request parameters to the model</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4615">6.4. Propagating request parameters</a></span></dt><dt><span class="section"><a href="#d0e4648">6.5. URL rewriting with page parameters</a></span></dt><dt><span class="section"><a href="#d0e4715">6.6. Conversion and Validation</a></span></dt><dt><span class="section"><a href="#events.pageaction.navigation">6.7. Navigation</a></span></dt><dt><span class="section"><a href="#d0e4820">6.8. Fine-grained files for definition of navigation, page actions and parameters</a></span></dt><dt><span class="section"><a href="#d0e4836">6.9. Component-driven events</a></span></dt><dt><span class="section"><a href="#d0e4887">6.10. Contextual events</a></span></dt><dt><span class="section"><a href="#d0e5092">6.11. Seam interceptors</a></span></dt><dt><span class="section"><a href="#d0e5168">6.12. Managing exceptions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5176">6.12.1. Exceptions and transactions</a></span></dt><dt><span class="section"><a href="#d0e5202">6.12.2. Enabling Seam exception handling</a></span></dt><dt><span class="section"><a href="#d0e5220">6.12.3. Using annotations for exception handling</a></span></dt><dt><span class="section"><a href="#d0e5242">6.12.4. Using XML for exception handling</a></span></dt><dt><span class="section"><a href="#d0e5326">6.12.5. Some common exceptions</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#conversations">7. Conversations and workspace management</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5392">7.1. Seam's conversation model</a></span></dt><dt><span class="section"><a href="#d0e5491">7.2. Nested conversations</a></span></dt><dt><span class="section"><a href="#d0e5531">7.3. Starting conversations with GET requests</a></span></dt><dt><span class="section"><a href="#conversations.required">7.4. Requiring a long-running conversation</a></span></dt><dt><span class="section"><a href="#d0e5679">7.5. Using &lt;s:link&gt; and &lt;s:button&gt;</a></span></dt><dt><span class="section"><a href="#d0e5783">7.6. Success messages</a></span></dt><dt><span class="section"><a href="#d0e5811">7.7. Natural conversation ids</a></span></dt><dt><span class="section"><a href="#d0e5845">7.8. Creating a natural conversation</a></span></dt><dt><span class="section"><a href="#d0e5898">7.9. Redirecting to a natural conversation</a></span></dt><dt><span class="section"><a href="#d0e5941">7.10. Workspace management</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5956">7.10.1. Workspace management and JSF navigation</a></span></dt><dt><span class="section"><a href="#d0e5977">7.10.2. Workspace management and jPDL pageflow</a></span></dt><dt><span class="section"><a href="#d0e5993">7.10.3. The conversation switcher</a></span></dt><dt><span class="section"><a href="#d0e6012">7.10.4. The conversation list</a></span></dt><dt><span class="section"><a href="#d0e6030">7.10.5. Breadcrumbs</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6042">7.11. Conversational components and JSF component bindings</a></span></dt><dt><span class="section"><a href="#d0e6073">7.12. Concurrent calls to conversational components</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6096">7.12.1. How should we design our conversational AJAX application?</a></span></dt><dt><span class="section"><a href="#d0e6112">7.12.2. Dealing with errors</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#jbpm">8. Pageflows and business processes</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6179">8.1. Pageflow in Seam</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6199">8.1.1. The two navigation models</a></span></dt><dt><span class="section"><a href="#d0e6255">8.1.2. Seam and the back button</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6302">8.2. Using jPDL pageflows</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6305">8.2.1. Installing pageflows</a></span></dt><dt><span class="section"><a href="#d0e6325">8.2.2. Starting pageflows</a></span></dt><dt><span class="section"><a href="#d0e6366">8.2.3. Page nodes and transitions</a></span></dt><dt><span class="section"><a href="#d0e6424">8.2.4. Controlling the flow</a></span></dt><dt><span class="section"><a href="#d0e6436">8.2.5. Ending the flow</a></span></dt><dt><span class="section"><a href="#d0e6459">8.2.6. Pageflow composition</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6480">8.3. Business process management in Seam</a></span></dt><dt><span class="section"><a href="#d0e6520">8.4. Using jPDL business process definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6523">8.4.1. Installing process definitions</a></span></dt><dt><span class="section"><a href="#d0e6535">8.4.2. Initializing actor ids</a></span></dt><dt><span class="section"><a href="#d0e6551">8.4.3. Initiating a business process</a></span></dt><dt><span class="section"><a href="#d0e6565">8.4.4. Task assignment</a></span></dt><dt><span class="section"><a href="#d0e6576">8.4.5. Task lists</a></span></dt><dt><span class="section"><a href="#d0e6608">8.4.6. Performing a task</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#persistence">9. Seam and Object/Relational Mapping</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6649">9.1. Introduction</a></span></dt><dt><span class="section"><a href="#persistence.seam-managed-transactions">9.2. Seam managed transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6715">9.2.1. Disabling Seam-managed transactions</a></span></dt><dt><span class="section"><a href="#d0e6728">9.2.2. Configuring a Seam transaction manager</a></span></dt><dt><span class="section"><a href="#d0e6821">9.2.3. Transaction synchronization</a></span></dt></dl></dd><dt><span class="section"><a href="#persistence.seam-managed-persistence-contexts">9.3. Seam-managed persistence contexts</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6862">9.3.1. Using a Seam-managed persistence context with JPA</a></span></dt><dt><span class="section"><a href="#d0e6914">9.3.2. Using a Seam-managed Hibernate session</a></span></dt><dt><span class="section"><a href="#d0e6946">9.3.3. Seam-managed persistence contexts and atomic conversations</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7002">9.4. Using the JPA "delegate"</a></span></dt><dt><span class="section"><a href="#d0e7034">9.5. Using EL in EJB-QL/HQL</a></span></dt><dt><span class="section"><a href="#d0e7060">9.6. Using Hibernate filters</a></span></dt></dl></dd><dt><span class="chapter"><a href="#validation">10. JSF form validation in Seam</a></span></dt><dt><span class="chapter"><a href="#groovy">11. Groovy integration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7187">11.1. Groovy introduction</a></span></dt><dt><span class="section"><a href="#d0e7199">11.2. Writing Seam applications in Groovy</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7204">11.2.1. Writing Groovy components</a></span></dt><dt><span class="section"><a href="#d0e7227">11.2.2. seam-gen</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7244">11.3. Deployment</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7254">11.3.1. Deploying Groovy code</a></span></dt><dt><span class="section"><a href="#d0e7265">11.3.2. Native .groovy file deployment at development time</a></span></dt><dt><span class="section"><a href="#d0e7299">11.3.3. seam-gen</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#wicket">12. Writing your presentation layer using Apache Wicket</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7326">12.1. Adding Seam to your wicket application</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7346">12.1.1. Bijection</a></span></dt><dt><span class="section"><a href="#d0e7385">12.1.2. Orchestration</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7468">12.2. Setting up your project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7473">12.2.1. Runtime instrumentation</a></span></dt><dt><span class="section"><a href="#d0e7522">12.2.2. Compile-time instrumentation</a></span></dt><dt><span class="section"><a href="#SeamWicketComponent">12.2.3. 
                The
                @SeamWicketComponent
                annotation
            </a></span></dt><dt><span class="section"><a href="#d0e7601">12.2.4. Defining the Application</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#framework">13. The Seam Application Framework</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7664">13.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e7721">13.2. Home objects</a></span></dt><dt><span class="section"><a href="#d0e7889">13.3. Query objects</a></span></dt><dt><span class="section"><a href="#d0e7947">13.4. Controller objects</a></span></dt></dl></dd><dt><span class="chapter"><a href="#drools">14. Seam and JBoss Rules</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7978">14.1. Installing rules</a></span></dt><dt><span class="section"><a href="#d0e8072">14.2. Using rules from a Seam component</a></span></dt><dt><span class="section"><a href="#d0e8082">14.3. Using rules from a jBPM process definition</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">15. Security</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e8144">15.1. Overview</a></span></dt><dt><span class="sect1"><a href="#d0e8170">15.2. Disabling Security</a></span></dt><dt><span class="sect1"><a href="#d0e8196">15.3. Authentication</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e8201">15.3.1. Configuring an Authenticator component</a></span></dt><dt><span class="sect2"><a href="#d0e8231">15.3.2. Writing an authentication method</a></span></dt><dt><span class="sect2"><a href="#d0e8327">15.3.3. Writing a login form</a></span></dt><dt><span class="sect2"><a href="#d0e8351">15.3.4. Configuration Summary</a></span></dt><dt><span class="sect2"><a href="#d0e8369">15.3.5. Remember Me</a></span></dt><dt><span class="sect2"><a href="#d0e8448">15.3.6. Handling Security Exceptions</a></span></dt><dt><span class="sect2"><a href="#d0e8484">15.3.7. Login Redirection</a></span></dt><dt><span class="sect2"><a href="#d0e8506">15.3.8. HTTP Authentication</a></span></dt><dt><span class="sect2"><a href="#d0e8556">15.3.9. Advanced Authentication Features</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e8585">15.4. Identity Management</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e8606">15.4.1. Configuring IdentityManager</a></span></dt><dt><span class="sect2"><a href="#d0e8677">15.4.2. JpaIdentityStore</a></span></dt><dt><span class="sect2"><a href="#d0e9042">15.4.3. LdapIdentityStore</a></span></dt><dt><span class="sect2"><a href="#d0e9574">15.4.4. Writing your own IdentityStore</a></span></dt><dt><span class="sect2"><a href="#d0e9587">15.4.5. Authentication with Identity Management</a></span></dt><dt><span class="sect2"><a href="#d0e9607">15.4.6. Using IdentityManager</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e10599">15.5. Error Messages</a></span></dt><dt><span class="sect1"><a href="#d0e10682">15.6. Authorization</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e10690">15.6.1. Core concepts</a></span></dt><dt><span class="sect2"><a href="#d0e10726">15.6.2. Securing components</a></span></dt><dt><span class="sect2"><a href="#d0e10884">15.6.3. Security in the user interface</a></span></dt><dt><span class="sect2"><a href="#d0e10927">15.6.4. Securing pages</a></span></dt><dt><span class="sect2"><a href="#d0e10967">15.6.5. Securing Entities</a></span></dt><dt><span class="sect2"><a href="#d0e11130">15.6.6. Typesafe Permission Annotations</a></span></dt><dt><span class="sect2"><a href="#d0e11195">15.6.7. Typesafe Role Annotations</a></span></dt><dt><span class="sect2"><a href="#d0e11219">15.6.8. The Permission Authorization Model</a></span></dt><dt><span class="sect2"><a href="#d0e11477">15.6.9. RuleBasedPermissionResolver</a></span></dt><dt><span class="sect2"><a href="#d0e11765">15.6.10. PersistentPermissionResolver</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e12566">15.7. Permission Management</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e12574">15.7.1. PermissionManager</a></span></dt><dt><span class="sect2"><a href="#d0e12795">15.7.2. Permission checks for PermissionManager operations</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e12981">15.8. SSL Security</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e13051">15.8.1. Overriding the default ports</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e13070">15.9. CAPTCHA</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e13096">15.9.1. Configuring the CAPTCHA Servlet</a></span></dt><dt><span class="sect2"><a href="#d0e13106">15.9.2. Adding a CAPTCHA to a form</a></span></dt><dt><span class="sect2"><a href="#d0e13121">15.9.3. Customising the CAPTCHA algorithm</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e13128">15.10. Security Events</a></span></dt><dt><span class="sect1"><a href="#d0e13294">15.11. Run As</a></span></dt><dt><span class="sect1"><a href="#d0e13341">15.12. Extending the Identity component</a></span></dt><dt><span class="sect1"><a href="#d0e13369">15.13. OpenID</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e13384">15.13.1. Configuring OpenID</a></span></dt><dt><span class="sect2"><a href="#d0e13416">15.13.2. Presenting an OpenIdDLogin form</a></span></dt><dt><span class="sect2"><a href="#d0e13440">15.13.3. Logging in immediately</a></span></dt><dt><span class="sect2"><a href="#d0e13464">15.13.4. Deferring login</a></span></dt><dt><span class="sect2"><a href="#d0e13478">15.13.5. Logging out</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#i18n">16. Internationalization, localization and themes</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e13498">16.1. Internationalizing your app</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e13508">16.1.1. Application server configuration</a></span></dt><dt><span class="section"><a href="#d0e13524">16.1.2. Translated application strings</a></span></dt><dt><span class="section"><a href="#d0e13552">16.1.3. Other encoding settings</a></span></dt></dl></dd><dt><span class="section"><a href="#locales">16.2. Locales</a></span></dt><dt><span class="section"><a href="#labels">16.3. Labels</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e13649">16.3.1. Defining labels</a></span></dt><dt><span class="section"><a href="#d0e13722">16.3.2. Displaying labels</a></span></dt><dt><span class="section"><a href="#d0e13748">16.3.3. Faces messages</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e13766">16.4. Timezones</a></span></dt><dt><span class="section"><a href="#d0e13795">16.5. Themes</a></span></dt><dt><span class="section"><a href="#d0e13840">16.6. Persisting locale and theme preferences via cookies</a></span></dt></dl></dd><dt><span class="chapter"><a href="#text">17. Seam Text</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e13864">17.1. Basic fomatting</a></span></dt><dt><span class="section"><a href="#d0e13907">17.2. Entering code and text with special characters</a></span></dt><dt><span class="section"><a href="#d0e13949">17.3. Links</a></span></dt><dt><span class="section"><a href="#d0e13962">17.4. Entering HTML</a></span></dt><dt><span class="section"><a href="#d0e13975">17.5. Using the SeamTextParser</a></span></dt></dl></dd><dt><span class="chapter"><a href="#itext">18. iText PDF generation</a></span></dt><dd><dl><dt><span class="section"><a href="#itext.intro">18.1. Using PDF Support</a></span></dt><dd><dl><dt><span class="section"><a href="#itext.document">18.1.1. Creating a document</a></span></dt><dt><span class="section"><a href="#itext.text">18.1.2. Basic Text Elements</a></span></dt><dt><span class="section"><a href="#itext.header">18.1.3. Headers and Footers</a></span></dt><dt><span class="section"><a href="#itext.chapters">18.1.4. Chapters and Sections</a></span></dt><dt><span class="section"><a href="#itext.list">18.1.5. Lists</a></span></dt><dt><span class="section"><a href="#itext.tables">18.1.6. Tables</a></span></dt><dt><span class="section"><a href="#itext.constant">18.1.7. Document Constants</a></span></dt></dl></dd><dt><span class="section"><a href="#itext.charting">18.2. Charting</a></span></dt><dt><span class="section"><a href="#itext.barcodes">18.3. Bar codes</a></span></dt><dt><span class="section"><a href="#itext.fillinforms">18.4. Fill-in-forms</a></span></dt><dt><span class="section"><a href="#itext.swingcomponents">18.5. Rendering Swing/AWT components</a></span></dt><dt><span class="section"><a href="#itext.configuration">18.6. Configuring iText</a></span></dt><dt><span class="section"><a href="#itext.links">18.7. Further documentation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#excel">19. The Microsoft® Excel® spreadsheet application</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.intro">19.1. The Microsoft® Excel® spreadsheet application support</a></span></dt><dt><span class="section"><a href="#excel.usage">19.2. Creating a simple workbook</a></span></dt><dt><span class="section"><a href="#excel.workbook">19.3. Workbooks</a></span></dt><dt><span class="section"><a href="#excel.worksheet">19.4. Worksheets</a></span></dt><dt><span class="section"><a href="#excel.columns">19.5. Columns</a></span></dt><dt><span class="section"><a href="#excel.cells">19.6. Cells</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.cells.validation">19.6.1. Validation</a></span></dt><dt><span class="section"><a href="#excel.cells.formatmasks">19.6.2. Format masks</a></span></dt></dl></dd><dt><span class="section"><a href="#excel.formulas">19.7. Formulas</a></span></dt><dt><span class="section"><a href="#excel.images">19.8. Images</a></span></dt><dt><span class="section"><a href="#excel.hyperlinks">19.9. Hyperlinks</a></span></dt><dt><span class="section"><a href="#excel.headersfooters">19.10. Headers and footers</a></span></dt><dt><span class="section"><a href="#excel.printareatitles">19.11. Print areas and titles</a></span></dt><dt><span class="section"><a href="#excel.worksheetcommands">19.12. Worksheet Commands</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.worksheetcommands.grouping">19.12.1. Grouping</a></span></dt><dt><span class="section"><a href="#excel.worksheetcommands.pagebreaks">19.12.2. Page breaks</a></span></dt><dt><span class="section"><a href="#excel.worksheetcommands.merging">19.12.3. Merging</a></span></dt></dl></dd><dt><span class="section"><a href="#excel.datatableexporter">19.13. Datatable exporter</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout">19.14. Fonts and layout</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.fontsandlayout.link">19.14.1. Stylesheet links</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.fonts">19.14.2. Fonts</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.borders">19.14.3. Borders</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.background">19.14.4. Background</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.columnsettings">19.14.5. Column settings</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.cellsettings">19.14.6. Cell settings</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.datatableexporter">19.14.7. The datatable exporter</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.examples">19.14.8. Layout examples</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.limitations">19.14.9. Limitations</a></span></dt></dl></dd><dt><span class="section"><a href="#excel.i18n">19.15. Internationalization</a></span></dt><dt><span class="section"><a href="#excel.links">19.16. Links and further documentation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#rss">20. RSS support</a></span></dt><dd><dl><dt><span class="section"><a href="#rss.installation">20.1. Installation</a></span></dt><dt><span class="section"><a href="#rss.usage">20.2. Generating feeds</a></span></dt><dt><span class="section"><a href="#rss.feeds">20.3. Feeds</a></span></dt><dt><span class="section"><a href="#rss.entries">20.4. Entries</a></span></dt><dt><span class="section"><a href="#rss.links">20.5. Links and further documentation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">21. Email</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e20280">21.1. Creating a message</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e20321">21.1.1. Attachments</a></span></dt><dt><span class="section"><a href="#d0e20399">21.1.2. HTML/Text alternative part</a></span></dt><dt><span class="section"><a href="#d0e20406">21.1.3. Multiple recipients</a></span></dt><dt><span class="section"><a href="#d0e20416">21.1.4. Multiple messages</a></span></dt><dt><span class="section"><a href="#d0e20426">21.1.5. Templating</a></span></dt><dt><span class="section"><a href="#d0e20461">21.1.6. Internationalisation</a></span></dt><dt><span class="section"><a href="#d0e20472">21.1.7. Other Headers</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e20488">21.2. Receiving emails</a></span></dt><dt><span class="section"><a href="#d0e20535">21.3. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e20560">21.3.1. mailSession</a></span></dt></dl></dd><dt><span class="section"><a href="#mail.tags">21.4. Tags</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jms">22. Asynchronicity and messaging</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e20932">22.1. Messaging in Seam</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e20939">22.1.1. Configuration</a></span></dt><dt><span class="sect2"><a href="#d0e20983">22.1.2. Sending messages</a></span></dt><dt><span class="sect2"><a href="#d0e21000">22.1.3. Receiving messages using a message-driven bean</a></span></dt><dt><span class="sect2"><a href="#d0e21024">22.1.4. Receiving messages in the client</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e21031">22.2. Asynchronicity</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e21076">22.2.1. Asynchronous methods</a></span></dt><dt><span class="sect2"><a href="#d0e21151">22.2.2. Asynchronous methods with the Quartz Dispatcher</a></span></dt><dt><span class="sect2"><a href="#d0e21226">22.2.3. Asynchronous events</a></span></dt><dt><span class="sect2"><a href="#d0e21246">22.2.4. Handling exceptions from asynchronous calls</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#cache">23. Caching</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e21318">23.1. Using Caching in Seam</a></span></dt><dt><span class="section"><a href="#d0e21520">23.2. Page fragment caching</a></span></dt></dl></dd><dt><span class="chapter"><a href="#webservices">24. Web Services</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e21563">24.1. Configuration and Packaging</a></span></dt><dt><span class="sect1"><a href="#d0e21587">24.2. Conversational Web Services</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e21617">24.2.1. A Recommended Strategy</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e21632">24.3. An example web service</a></span></dt><dt><span class="sect1"><a href="#d0e21700">24.4. RESTful HTTP webservices with RESTEasy</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e21715">24.4.1. RESTEasy configuration and request serving</a></span></dt><dt><span class="sect2"><a href="#d0e21903">24.4.2. Resources as Seam components</a></span></dt><dt><span class="sect2"><a href="#d0e21977">24.4.3. Securing resources</a></span></dt><dt><span class="sect2"><a href="#d0e22000">24.4.4. Mapping exceptions to HTTP responses</a></span></dt><dt><span class="sect2"><a href="#d0e22057">24.4.5. Exposing entities via RESTful API</a></span></dt><dt><span class="sect2"><a href="#d0e22225">24.4.6. Testing resources and providers</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#remoting">25. Remoting</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22268">25.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e22300">25.2. The "Seam" object</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22317">25.2.1. A Hello World example</a></span></dt><dt><span class="section"><a href="#d0e22406">25.2.2. Seam.Component</a></span></dt><dt><span class="section"><a href="#d0e22472">25.2.3. Seam.Remoting</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22502">25.3. Client Interfaces</a></span></dt><dt><span class="section"><a href="#d0e22523">25.4. The Context</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22528">25.4.1. Setting and reading the Conversation ID</a></span></dt><dt><span class="section"><a href="#d0e22544">25.4.2. Remote calls within the current conversation scope</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22551">25.5. Batch Requests</a></span></dt><dt><span class="section"><a href="#d0e22577">25.6. Working with Data types</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22580">25.6.1. Primitives / Basic Types</a></span></dt><dt><span class="section"><a href="#d0e22618">25.6.2. JavaBeans</a></span></dt><dt><span class="section"><a href="#d0e22660">25.6.3. Dates and Times</a></span></dt><dt><span class="section"><a href="#d0e22674">25.6.4. Enums</a></span></dt><dt><span class="section"><a href="#d0e22693">25.6.5. Collections</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22743">25.7. Debugging</a></span></dt><dt><span class="section"><a href="#d0e22765">25.8. Handling Exceptions</a></span></dt><dt><span class="section"><a href="#d0e22787">25.9. The Loading Message</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22792">25.9.1. Changing the message</a></span></dt><dt><span class="section"><a href="#d0e22802">25.9.2. Hiding the loading message</a></span></dt><dt><span class="section"><a href="#d0e22815">25.9.3. A Custom Loading Indicator</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22828">25.10. Controlling what data is returned</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22848">25.10.1. Constraining normal fields</a></span></dt><dt><span class="section"><a href="#d0e22883">25.10.2. Constraining Maps and Collections</a></span></dt><dt><span class="section"><a href="#d0e22942">25.10.3. Constraining objects of a specific type</a></span></dt><dt><span class="section"><a href="#d0e22949">25.10.4. Combining Constraints</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22956">25.11. Transactional Requests</a></span></dt><dt><span class="section"><a href="#d0e22969">25.12. JMS Messaging</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22974">25.12.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e22993">25.12.2. Subscribing to a JMS Topic</a></span></dt><dt><span class="section"><a href="#d0e23034">25.12.3. Unsubscribing from a Topic</a></span></dt><dt><span class="section"><a href="#d0e23044">25.12.4. Tuning the Polling Process</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#gwt">26. Seam and the Google Web Toolkit</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23082">26.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e23089">26.2. Preparing your component</a></span></dt><dt><span class="section"><a href="#d0e23123">26.3. Hooking up a GWT widget to the Seam component</a></span></dt><dt><span class="section"><a href="#d0e23158">26.4. GWT Ant Targets</a></span></dt><dt><span class="section"><a href="#d0e23188">26.5. GWT Maven plugin</a></span></dt></dl></dd><dt><span class="chapter"><a href="#spring">27. Spring Framework integration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23250">27.1. Injecting Seam components into Spring beans</a></span></dt><dt><span class="section"><a href="#d0e23297">27.2. Injecting Spring beans into Seam components</a></span></dt><dt><span class="section"><a href="#d0e23336">27.3. Making a Spring bean into a Seam component</a></span></dt><dt><span class="section"><a href="#d0e23377">27.4. Seam-scoped Spring beans</a></span></dt><dt><span class="section"><a href="#spring-transactions">27.5. Using Spring PlatformTransactionManagement</a></span></dt><dt><span class="section"><a href="#spring-persistence">27.6. Using a Seam Managed Persistence Context in Spring</a></span></dt><dt><span class="section"><a href="#spring-hibernate">27.7. Using a Seam Managed Hibernate Session in Spring</a></span></dt><dt><span class="section"><a href="#d0e23553">27.8. Spring Application Context as a Seam Component</a></span></dt><dt><span class="section"><a href="#d0e23593">27.9. Using a Spring TaskExecutor for @Asynchronous</a></span></dt></dl></dd><dt><span class="chapter"><a href="#guice">28. Guice integration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23632">28.1. Creating a hybrid Seam-Guice component</a></span></dt><dt><span class="section"><a href="#d0e23654">28.2. Configuring an injector</a></span></dt><dt><span class="section"><a href="#d0e23680">28.3. Using multiple injectors</a></span></dt></dl></dd><dt><span class="chapter"><a href="#search">29. Hibernate Search</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23695">29.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e23707">29.2. Configuration</a></span></dt><dt><span class="section"><a href="#d0e23755">29.3. Usage</a></span></dt></dl></dd><dt><span class="chapter"><a href="#configuration">30. Configuring Seam and packaging Seam applications</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23834">30.1. Basic Seam configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23839">30.1.1. Integrating Seam with JSF and your servlet container</a></span></dt><dt><span class="section"><a href="#d0e23889">30.1.2. Seam Resource Servlet</a></span></dt><dt><span class="section"><a href="#d0e23899">30.1.3. Seam servlet filters</a></span></dt><dt><span class="section"><a href="#config.integration.ejb.container">30.1.4. Integrating Seam with your EJB container</a></span></dt><dt><span class="section"><a href="#d0e24358">30.1.5. Don't forget!</a></span></dt></dl></dd><dt><span class="section"><a href="#alt-jpa-providers">30.2. Using Alternate JPA Providers</a></span></dt><dt><span class="section"><a href="#d0e24436">30.3. Configuring Seam in Java EE 6</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24446">30.3.1. Packaging</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e24502">30.4. Configuring Seam without EJB</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24525">30.4.1. Boostrapping Hibernate in Seam</a></span></dt><dt><span class="section"><a href="#d0e24548">30.4.2. Boostrapping JPA in Seam</a></span></dt><dt><span class="section"><a href="#d0e24571">30.4.3. Packaging</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e24580">30.5. Configuring Seam in Java SE</a></span></dt><dt><span class="section"><a href="#d0e24596">30.6. Configuring jBPM in Seam</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24618">30.6.1. Packaging</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e24625">30.7. Deployment in JBoss AS 7</a></span></dt><dt><span class="section"><a href="#d0e24677">30.8. Configuring SFSB and Session Timeouts in JBoss AS 7</a></span></dt><dt><span class="section"><a href="#d0e24710">30.9. Running Seam in a Portlet</a></span></dt><dt><span class="section"><a href="#d0e24718">30.10. Deploying custom resources</a></span></dt></dl></dd><dt><span class="chapter"><a href="#annotations">31. Seam annotations</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24790">31.1. Annotations for component definition</a></span></dt><dt><span class="section"><a href="#d0e25047">31.2. Annotations for bijection</a></span></dt><dt><span class="section"><a href="#d0e25273">31.3. Annotations for component lifecycle methods</a></span></dt><dt><span class="section"><a href="#d0e25321">31.4. Annotations for context demarcation</a></span></dt><dt><span class="section"><a href="#d0e25642">31.5. Annotations for use with Seam JavaBean components in a J2EE environment</a></span></dt><dt><span class="section"><a href="#d0e25732">31.6. Annotations for exceptions</a></span></dt><dt><span class="section"><a href="#d0e25807">31.7. Annotations for Seam Remoting</a></span></dt><dt><span class="section"><a href="#d0e25829">31.8. Annotations for Seam interceptors</a></span></dt><dt><span class="section"><a href="#d0e25860">31.9. Annotations for asynchronicity</a></span></dt><dt><span class="section"><a href="#d0e25914">31.10. Annotations for use with JSF</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e25964">31.10.1. Annotations for use with dataTable</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e26118">31.11. Meta-annotations for databinding</a></span></dt><dt><span class="section"><a href="#d0e26152">31.12. Annotations for packaging</a></span></dt><dt><span class="section"><a href="#d0e26182">31.13. Annotations for integrating with the servlet container</a></span></dt></dl></dd><dt><span class="chapter"><a href="#components">32. Built-in Seam components</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e26230">32.1. Context injection components</a></span></dt><dt><span class="section"><a href="#d0e26260">32.2. JSF-related components</a></span></dt><dt><span class="section"><a href="#d0e26393">32.3. Utility components</a></span></dt><dt><span class="section"><a href="#d0e26496">32.4. Components for internationalization and themes</a></span></dt><dt><span class="section"><a href="#d0e26697">32.5. Components for controlling conversations</a></span></dt><dt><span class="section"><a href="#d0e26845">32.6. jBPM-related components</a></span></dt><dt><span class="section"><a href="#d0e27074">32.7. Security-related components</a></span></dt><dt><span class="section"><a href="#d0e27100">32.8. JMS-related components</a></span></dt><dt><span class="section"><a href="#components.mail">32.9. Mail-related components</a></span></dt><dt><span class="section"><a href="#d0e27202">32.10. Infrastructural components</a></span></dt><dt><span class="section"><a href="#d0e27495">32.11. Miscellaneous components</a></span></dt><dt><span class="section"><a href="#d0e27532">32.12. Special components</a></span></dt></dl></dd><dt><span class="chapter"><a href="#controls">33. Seam JSF controls</a></span></dt><dd><dl><dt><span class="section"><a href="#controls.tags">33.1. Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e27808">33.1.1. Navigation Controls</a></span></dt><dt><span class="section"><a href="#d0e28167">33.1.2. Converters and Validators</a></span></dt><dt><span class="section"><a href="#d0e28477">33.1.3. Formatting</a></span></dt><dt><span class="section"><a href="#d0e28670">33.1.4. Seam Text</a></span></dt><dt><span class="section"><a href="#d0e28709">33.1.5. Form support</a></span></dt><dt><span class="section"><a href="#d0e28980">33.1.6. Other</a></span></dt></dl></dd><dt><span class="section"><a href="#controls.annotations">33.2. Annotations</a></span></dt></dl></dd><dt><span class="chapter"><a href="#elenhancements">34. JBoss EL</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29346">34.1. Parameterized Expressions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29374">34.1.1. Usage</a></span></dt><dt><span class="section"><a href="#d0e29438">34.1.2. Limitations and Hints</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e29537">34.2. Projection</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ClusteringAndEJBPassivation">35. Clustering and EJB Passivation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e29586">35.1. Clustering</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e29600">35.1.1. Programming for clustering</a></span></dt><dt><span class="sect2"><a href="#d0e29630">35.1.2. Deploying a Seam application to a JBoss AS cluster with session replication</a></span></dt><dt><span class="sect2"><a href="#d0e29709">35.1.3. Validating the distributable services of an application running in a JBoss AS cluster </a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e29754">35.2. EJB Passivation and the ManagedEntityInterceptor</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e29769">35.2.1. The friction between passivation and persistence</a></span></dt><dt><span class="sect2"><a href="#d0e29785">35.2.2. Case #1: Surviving EJB passivation</a></span></dt><dt><span class="sect2"><a href="#d0e29802">35.2.3. Case #2: Surviving HTTP session replication</a></span></dt><dt><span class="sect2"><a href="#d0e29810">35.2.4. ManagedEntityInterceptor wrap-up</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#performance">36. Performance Tuning</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29821">36.1. Bypassing Interceptors</a></span></dt></dl></dd><dt><span class="chapter"><a href="#testing">37. Testing Seam applications</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29861">37.1. Unit testing Seam components</a></span></dt><dt><span class="section"><a href="#d0e29878">37.2. Integration testing Seam components</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29934">37.2.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e29948">37.2.2. Using JUnitSeamTest with Arquillian</a></span></dt><dt><span class="section"><a href="#d0e30011">37.2.3. Integration testing Seam application user interactions</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#dependencies">38. Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#jdk_dependencies">38.1. JDK Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#jdk6_dependencies">38.1.1. Oracle's JDK 6 Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e30244">38.2. Project Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e30269">38.2.1. Core</a></span></dt><dt><span class="section"><a href="#d0e30573">38.2.2. RichFaces</a></span></dt><dt><span class="section"><a href="#d0e30695">38.2.3. Seam Mail</a></span></dt><dt><span class="section"><a href="#d0e30799">38.2.4. Seam PDF</a></span></dt><dt><span class="section"><a href="#d0e30921">38.2.5. Seam Microsoft Excel</a></span></dt><dt><span class="section"><a href="#dependencies.rss">38.2.6. Seam RSS support</a></span></dt><dt><span class="section"><a href="#d0e31226">38.2.7. Drools</a></span></dt><dt><span class="section"><a href="#d0e31436">38.2.8. JBPM</a></span></dt><dt><span class="section"><a href="#d0e31491">38.2.9. GWT</a></span></dt><dt><span class="section"><a href="#d0e31549">38.2.10. Spring</a></span></dt><dt><span class="section"><a href="#d0e31607">38.2.11. Groovy</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e31665">38.3. Dependency Management using Maven</a></span></dt></dl></dd></dl></div><div class="preface" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="Book-Preface"/>Introduction to JBoss Seam</h2></div></div></div><p>
            Seam is an application framework for Enterprise Java. It is inspired by the following principles:
        </p><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>One kind of "stuff"</em></span></span></dt><dd><p>
                        Seam defines a uniform component model for all business logic in your application. 
                        A Seam component may be stateful, with the state associated with any one of several
                        well-defined contexts, including the long-running, persistent, <span class="emphasis"><em>business process 
                        context</em></span> and the <span class="emphasis"><em>conversation context</em></span>, which is
                        preserved across multiple web requests in a user interaction.
                    </p><p>
                        There is no distinction between presentation tier components and business logic
                        components in Seam. You can layer your application according to whatever architecture
                        you devise, rather than being forced to shoehorn your application logic into an
                        unnatural layering scheme forced upon you by whatever combination of stovepipe 
                        frameworks you're using today.
                    </p><p>
                        Unlike plain Java EE or Java EE components, Seam components may <span class="emphasis"><em>simultaneously</em></span>
                        access state associated with the web request and state held in transactional resources (without
                        the need to propagate web request state manually via method parameters). You might object
                        that the application layering imposed upon you by the old Java EE platform was a Good Thing.
                        Well, nothing stops you creating an equivalent layered architecture using Seam — the difference
                        is that <span class="emphasis"><em>you</em></span> get to architect your own application and decide what the
                        layers are and how they work together.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Integrate JSF with EJB 3.0</em></span></span></dt><dd><p>
                        JSF and EJB 3 are two of the best new features of Java EE 5. EJB3 is a brand new
                        component model for server side business and persistence logic. Meanwhile, JSF is a
                        great component model for the presentation tier. Unfortunately, neither component
                        model is able to solve all problems in computing by itself. Indeed, JSF and EJB3
                        work best used together. But the Java EE 5 specification provides no standard way
                        to integrate the two component models. Fortunately, the creators of both models
                        foresaw this situation and provided standard extension points to allow extension
                        and integration with other frameworks.
                    </p><p>
                        Seam unifies the component models of JSF and EJB 3, eliminating glue code, and letting
                        the developer think about the business problem.
                    </p><p>
                        It is possible to write Seam applications where "everything" is an EJB. This may come 
                        as a surprise if you're used to thinking of EJBs as coarse-grained, so-called 
                        "heavyweight" objects. However, version 3.0 has completely changed the nature of EJB 
                        from the point of view of the developer. An EJB is a fine-grained object — nothing 
                        more complex than an annotated JavaBean. Seam even encourages you to use session beans 
                        as JSF action listeners!                    
                    </p><p>
                        On the other hand, if you prefer not to adopt EJB 3.0 at this time, you don't have to.
                        Virtually any Java class may be a Seam component, and Seam provides all the functionality
                        that you expect from a "lightweight" container, and more, for any component, EJB or 
                        otherwise.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Integrated with Java EE6</em></span></span></dt><dd><p>
                        While Seam 2.2 was targeted Java EE 5 mainly, you can use some Java EE 6 technologies
                        also on Seam 2.3.x.
                    </p><p>
                        Seam 2 and some of its extensions/implementations were added into Java EE 6 as CDI technology.
                        So this should be a current focus of majority users. But for previous Seam 2.2 users who 
                        doesn't want or can't use pure Java EE 6, we bring some new features from the Java EE 6 set like JSF 2,
                        JPA 2 and Bean Validation integrations into Seam 2.3.x.
                    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Be warned - Seam 2.3 should work only on Java EE 6 certified server like JBoss AS 7 is.</p></div></dd><dt><span class="term"><span class="emphasis"><em>Integrated AJAX</em></span></span></dt><dd><p>
                        Seam supports the best open source JSF-based AJAX solutions: RichFaces and 
                        ICEfaces. These solutions let you add AJAX capability to your user interface without 
                        the need to write any JavaScript code.
                    </p><p>
                        Alternatively, Seam provides a built-in JavaScript remoting layer that lets you call 
                        components asynchronously from client-side JavaScript without the need for an intermediate 
                        action layer. You can even subscribe to server-side JMS topics and receive messages via AJAX
                        push.
                    </p><p>
                        Neither of these approaches would work well, were it not for Seam's built-in concurrency 
                        and state management, which ensures that many concurrent fine-grained, asynchronous AJAX 
                        requests are handled safely and efficiently on the server side.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Business process as a first class construct</em></span></span></dt><dd><p>
                        Optionally, Seam provides transparent business process management via jBPM. You won't 
                        believe how easy it is to implement complex workflows, collaboration and task management 
                        using jBPM and Seam.
                    </p><p>
                        Seam even allows you to define presentation tier pageflow using the same language (jPDL)
                        that jBPM uses for business process definition.
                    </p><p>
                        JSF provides an incredibly rich event model for the presentation tier. Seam enhances this
                        model by exposing jBPM's business process related events via exactly the same event handling
                        mechanism, providing a uniform event model for Seam's uniform component model.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Declarative state management</em></span></span></dt><dd><p>
                        We're all used to the concept of declarative transaction management and declarative
                        security from the early days of EJB. EJB 3.0 even introduces declarative persistence context
                        management. These are three examples of a broader problem of managing state that is
                        associated with a particular <span class="emphasis"><em>context</em></span>, while ensuring that all needed
                        cleanup occurs when the context ends. Seam takes the concept of declarative state
                        management much further and applies it to <span class="emphasis"><em>application state</em></span>.
                        Traditionally, Java EE applications implement state management manually, by getting
                        and setting servlet session and request attributes. This approach to state management is the
                        source of many bugs and memory leaks when applications fail to clean up session attributes,
                        or when session data associated with different workflows collides in a multi-window
                        application. Seam has the potential to almost entirely eliminate this class of bugs.
                    </p><p>
                        Declarative application state management is made possible by the richness of the
                        <span class="emphasis"><em>context model</em></span> defined by Seam. Seam extends the context model defined 
                        by the servlet spec — request, session, application — with two new
                        contexts — conversation and business process — that are more meaningful from the
                        point of view of the business logic.
                    </p><p>
                        You'll be amazed at how many things become easier once you start using conversations.
                        Have you ever suffered pain dealing with lazy association fetching in an ORM solution
                        like Hibernate or JPA? Seam's conversation-scoped persistence contexts mean you'll
                        rarely have to see a <code class="literal">LazyInitializationException</code>. Have you ever
                        had problems with the refresh button? The back button? With duplicate form submission?
                        With propagating messages across a post-then-redirect? Seam's conversation management 
                        solves these problems without you even needing to really think about them. They're all
                        symptoms of the broken state management architecture that has been prevalent since the 
                        earliest days of the web.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Bijection</em></span></span></dt><dd><p>
                        The notion of <span class="emphasis"><em>Inversion of Control</em></span> or <span class="emphasis"><em>dependency injection</em></span>
                        exists in both JSF and EJB3, as well as in numerous so-called "lightweight containers". Most of
                        these containers emphasize injection of components that implement <span class="emphasis"><em>stateless services</em></span>.
                        Even when injection of stateful components is supported (such as in JSF), it is virtually useless
                        for handling application state because the scope of the stateful component cannot be defined with
                        sufficient flexibility, and because components belonging to wider scopes may not be injected into 
                        components belonging to narrower scopes.
                    </p><p>
                        <span class="emphasis"><em>Bijection</em></span> differs from IoC in that it is <span class="emphasis"><em>dynamic</em></span>, 
                        <span class="emphasis"><em>contextual</em></span>, and <span class="emphasis"><em>bidirectional</em></span>.
                        You can think of it as a mechanism for aliasing contextual variables (names in the various contexts
                        bound to the current thread) to attributes of the component. Bijection allows auto-assembly of stateful
                        components by the container. It even allows a component to safely and easily manipulate the
                        value of a context variable, just by assigning it to an attribute of the component.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Workspace management and multi-window browsing</em></span></span></dt><dd><p>
                        Seam applications let the user freely switch between multiple browser tabs, each associated with a
                        different, safely isolated, conversation. Applications may even take advantage of <span class="emphasis"><em>workspace 
                        management</em></span>, allowing the user to switch between conversations (workspaces) in a single
                        browser tab. Seam provides not only correct multi-window operation, but also multi-window-like
                        operation in a single window!
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Prefer annotations to XML</em></span></span></dt><dd><p>
                        Traditionally, the Java community has been in a state of deep confusion about precisely 
                        what kinds of meta-information counts as configuration. Java EE and popular "lightweight"
                        containers have provided XML-based deployment descriptors both for things which are
                        truly configurable between different deployments of the system, and for any other kinds
                        or declaration which can not easily be expressed in Java. Java 5 annotations changed
                        all this.
                    </p><p>
                        EJB 3.0 embraces annotations and "configuration by exception" as the easiest way to provide
                        information to the container in a declarative form. Unfortunately, JSF is still heavily
                        dependent on verbose XML configuration files. Seam extends the annotations provided by
                        EJB 3.0 with a set of annotations for declarative state management and declarative
                        context demarcation. This lets you eliminate the noisy JSF managed bean declarations
                        and reduce the required XML to just that information which truly belongs in XML
                        (the JSF navigation rules).
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Integration testing is easy</em></span></span></dt><dd><p>
                        Seam components, being plain Java classes, are by nature unit testable. But for complex applications,
                        unit testing alone is insufficient. Integration testing has traditionally been a messy and
                        difficult task for Java web applications. Therefore, Seam provides for testability of Seam
                        applications as a core feature of the framework. You can easily write JUnit or TestNG tests
                        that reproduce a whole interaction with a user, exercising all components of the system
                        apart from the view. You can run these tests directly inside your
                        IDE, where Seam will automatically deploy EJB components using Arquillian.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>The specs ain't perfect</em></span></span></dt><dd><p>
                        We think the latest incarnation of Java EE is great. But we know it's never going to be 
                        perfect. Where there are holes in the specifications (for example, limitations in the
                        JSF lifecycle for GET requests), Seam fixes them. And the authors of Seam are working
                        with the JCP expert groups to make sure those fixes make their way back into the next
                        revision of the standards.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>There's more to a web application than serving HTML pages</em></span></span></dt><dd><p>
                        Today's web frameworks think too small. They let you get user input off a form and
                        into your Java objects. And then they leave you hanging. A truly complete web application
                        framework should address problems like persistence, concurrency, asynchronicity, state 
                        management, security, email, messaging, PDF and chart generation, workflow, wikitext
                        rendering, webservices, caching and more. Once you scratch the surface of Seam, you'll
                        be amazed at how many problems become simpler...
                    </p><p>
                        Seam integrates JPA and Hibernate for persistence, the EJB Timer Service and Quartz 
                        for lightweight asychronicity, jBPM for workflow, JBoss Rules for business rules, Meldware 
                        Mail for email, Hibernate Search and Lucene for full text search, JMS for messaging and JBoss 
                        Cache for page fragment caching. Seam layers an innovative rule-based security framework over
                        JAAS and JBoss Rules. There's even JSF tag libraries for rendering PDF, outgoing email, charts 
                        and wikitext. Seam components may be called synchronously as a Web Service, asynchronously 
                        from client-side JavaScript or Google Web Toolkit or, of course, directly from JSF.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>Get started now!</em></span></span></dt><dd><p>
                        Seam should work in any Java EE application server, and even works in Tomcat. If your environment
                        supports EJB 3.0 or 3.1, great! If it doesn't, no problem, you can use Seam's built-in transaction
                        management with JPA or Hibernate for persistence.
                    </p></dd></dl></div><div class="mediaobject"><img src="images/architecture.png"/></div><p>
            It turns out that the combination of Seam, JSF and EJB is <span class="emphasis"><em>the</em></span> simplest way
            to write a complex web application in Java. You won't believe how little code is required!
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="Book-We_Need_Feedback"/>1. Contribute to Seam</h2></div></div></div><p>
      Visit
      <a class="ulink" href="http://www.seamframework.org/Community/Contribute">
         SeamFramework.org
      </a>
      to find out how to contribute to Seam!
   </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="tutorial"/>Chapter 1. Seam Tutorial</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#try-examples">1.1. Using the Seam examples</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e435">1.1.1. Running the examples on JBoss AS</a></span></dt><dt><span class="section"><a href="#d0e476">1.1.2. Running the example tests</a></span></dt></dl></dd><dt><span class="section"><a href="#registration-example">1.2. Your first Seam application: the registration example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e498">1.2.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e955">1.2.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#messages">1.3. Clickable lists in Seam: the messages example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1031">1.3.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e1250">1.3.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#todo">1.4. Seam and jBPM: the todo list example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1341">1.4.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e1533">1.4.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#numberguess">1.5. Seam pageflow: the numberguess example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1615">1.5.1. Understanding the code</a></span></dt><dt><span class="section"><a href="#d0e1732">1.5.2. How it works</a></span></dt></dl></dd><dt><span class="section"><a href="#booking">1.6. A complete Seam application: the Hotel Booking example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1834">1.6.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e1884">1.6.2. Overview of the booking example</a></span></dt><dt><span class="section"><a href="#d0e1951">1.6.3. Understanding Seam conversations</a></span></dt><dt><span class="section"><a href="#d0e2194">1.6.4. The Seam Debug Page</a></span></dt></dl></dd><dt><span class="section"><a href="#nestedbooking">1.7. Nested conversations: extending the Hotel Booking example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2226">1.7.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e2256">1.7.2. Understanding Nested Conversations</a></span></dt></dl></dd><dt><span class="section"><a href="#dvdstore">1.8. A complete application featuring Seam and jBPM: the DVD Store example</a></span></dt><dt><span class="section"><a href="#blog">1.9. Bookmarkable URLs with the Blog example</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2475">1.9.1. Using "pull"-style MVC</a></span></dt><dt><span class="section"><a href="#d0e2534">1.9.2. Bookmarkable search results page</a></span></dt><dt><span class="section"><a href="#d0e2618">1.9.3. Using "push"-style MVC in a RESTful application</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="try-examples"/>1.1. Using the Seam examples</h2></div></div></div><p>Seam provides a number of example applications demonstrating how to use the various features
        of Seam.  This tutorial will guide you through a few of those examples to help you get started
        learning Seam. The Seam examples are located in the <code class="filename">examples</code> subdirectory
        of the Seam distribution.  The registration example, which will be the first example we look at,
        is in the <code class="filename">examples/registration</code> directory.</p><p>Each example has the very similar directory structure which is based on <a class="ulink" href="http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">
        Maven project structure defaults</a>:</p><div class="itemizedlist"><ul><li><p> The <code class="filename">&lt;example&gt;-ear</code> directory contains enterprise application submodule files such as 
                    aggregator for web application files, EJB project.
                </p></li><li><p> The <code class="filename">&lt;example&gt;-web</code> directory contains web application submodule view-related files such as 
                    web page templates, images and stylesheets.
                </p></li><li><p> The <code class="filename">&lt;example&gt;-ejb</code> directory contains Enterprise Java Beans components.
                </p></li><li><p> The <code class="filename">&lt;example&gt;-tests</code> directory contains integration and functional tests.
                </p></li></ul></div><div class="itemizedlist"><ul><li><p> The <code class="filename">&lt;example&gt;-web/src/main/webapp</code> directory contains view-related files such as 
                    web page templates, images and stylesheets.                        
                </p></li><li><p> The <code class="filename">&lt;example&gt;-[ear|ejb]/src/main/resources</code> directory contains deployment descriptors and
                    other configuration files.                            
                </p></li><li><p> The <code class="filename">&lt;example&gt;-ejb/src/main/java</code> directory contains the application source code. </p></li></ul></div><p>
            The example applications run on JBoss AS 7.1.1 with no additional configuration.
            The following sections will explain the procedure.  Note that all the examples
            are built and run from the Maven <code class="filename">pom.xml</code>, so you'll need at least version 3.x
            of Maven installed before you get started. At the time of writing this text recent version of Maven was 3.0.4.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e435"/>1.1.1. Running the examples on JBoss AS</h3></div></div></div><p>The examples are configured for use on JBoss AS 7.1. You'll need to set <code class="literal">JBOSS_HOME</code>,
                in your environment, to the location of your JBoss AS installation.</p><p>Once you've set the location of JBoss AS and started the application server, you can build
                any example by typing <code class="literal">mvn install</code> in the example root directory. Any example is deployed by changing directory 
                to *-ear or *-web directory in case of existence only *-web submodule. Type in that submodule <code class="literal">mvn jboss-as:deploy</code>. 
                Any example  that is packaged as an EAR deploys to a URL like
                <code class="literal">/seam-<em class="replaceable"><code>example</code></em></code>, where <em class="replaceable"><code>example</code></em> is
                the name of the example folder, with one exception. If the example folder begins with seam, the prefix
                "seam" is ommitted. For instance, if JBoss AS is running on port 8080, the URL for the registration
                example is <a class="ulink" href="http://localhost:8080/seam-registration/">
                <code class="literal">http://localhost:8080/seam-registration/</code></a>, whereas the URL for the seamspace
                example is <a class="ulink" href="http://localhost:8080/seam-space/">
                <code class="literal">http://localhost:8080/seam-space/</code></a>.</p><p>If, on the other hand, the example gets packaged as a WAR, then it deploys to a URL like
                <code class="literal">/jboss-seam-<em class="replaceable"><code>example</code></em></code>. Several of the examples
                can only be deployed as a WAR. Those examples are groovybooking, hibernate, jpa, and spring.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e476"/>1.1.2. Running the example tests</h3></div></div></div><p> 
                Most of the examples come with a suite of Arquillian JUnit integration tests. The easiest way to run the tests is
                to run <code class="literal">mvn verify -Darquillian=jbossas-managed-7</code>.  It is also possible to run the tests inside your IDE using the
                JUnit plugin. Consult the readme.txt in the examples directory of the Seam distribution for more
                information.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="registration-example"/>1.2. Your first Seam application: the registration example</h2></div></div></div><p> The registration example is a simple application that lets a new user store his username, real
            name and password in the database. The example isn't intended to show off all of the cool functionality of
            Seam. However, it demonstrates the use of an EJB3 session bean as a JSF action listener, and basic
            configuration of Seam. </p><p> We'll go slowly, since we realize you might not yet be familiar with EJB 3.0. </p><p> The start page displays a very basic form with three input fields. Try filling them in and then
            submitting the form. This will save a user object in the database. </p><div class="mediaobject" align="center"><img src="images/registration.png" align="middle"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e498"/>1.2.1. Understanding the code</h3></div></div></div><p> The example is implemented with two Facelets templates, one entity bean and one 
                stateless session bean.   Let's take a look at the code, starting from the "bottom".
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e503"/>1.2.1.1. The entity bean: <code class="literal">User.java</code></h4></div></div></div><p> We need an EJB entity bean for user data. This class defines <span class="emphasis"><em>persistence</em></span> and
                        <span class="emphasis"><em>validation</em></span> declaratively, via annotations. It also needs some extra
                    annotations that define the class as a Seam component. </p><div class="example"><a id="d0e517"/><p class="title"><b>Example 1.1. User.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="co" id="registration-entity-annotation"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="co" id="registration-name-annotation"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;user&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="registration-scope-annotation"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="registration-table-annotation"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">@</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;users&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;serialVersionUID&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">1881413500711441951L</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="registration-attributes"><img src="images/seamframework/docbook/callouts/5.png" alt="(5)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;password</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;password</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">password&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;password</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">username&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="registration-empty-constructor"><img src="images/seamframework/docbook/callouts/6.png" alt="(6)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="registration-notnull"><img src="images/seamframework/docbook/callouts/7.png" alt="(7)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span><span class="java_plain">&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">min</span><span class="java_operator">=</span><span class="java_literal">5</span><span class="java_separator">,</span><span class="java_plain">&nbsp;max</span><span class="java_operator">=</span><span class="java_literal">15</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getPassword</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;password</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setPassword</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;password</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">password&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;password</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="registration-id-annotation"><img src="images/seamframework/docbook/callouts/8.png" alt="(8)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span><span class="java_plain">&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">min</span><span class="java_operator">=</span><span class="java_literal">5</span><span class="java_separator">,</span><span class="java_plain">&nbsp;max</span><span class="java_operator">=</span><span class="java_literal">15</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getUsername</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUsername</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">username&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB3 standard <code class="literal">@Entity</code> annotation indicates that the
                                        <code class="literal">User</code> class is an entity bean. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> A Seam component needs a <span class="emphasis"><em>component name</em></span> specified by the
                                        <a class="link" href="#name-annotation">
                                        <code class="literal">@Name</code>
                                    </a> annotation. This name must be unique within the Seam application. When JSF
                                    asks Seam to resolve a context variable with a name that is the same as a Seam
                                    component name, and the context variable is currently undefined (null), Seam will
                                    instantiate that component, and bind the new instance to the context variable. In
                                    this case, Seam will instantiate a <code class="literal">User</code> the first time JSF
                                    encounters a variable named <code class="literal">user</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> Whenever Seam instantiates a component, it binds the new instance to a context
                                    variable in the component's <span class="emphasis"><em>default context</em></span>. The default
                                    context is specified using the <a class="link" href="#scope-annotation">
                                        <code class="literal">@Scope</code>
                                    </a> annotation. The <code class="literal">User</code> bean is a session scoped component.
                                </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB standard <code class="literal">@Table</code> annotation indicates that the
                                        <code class="literal">User</code> class is mapped to the <code class="literal">users</code> table.
                                </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/5.png" alt="5" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>
                                    <code class="literal">name</code>, <code class="literal">password</code> and <code class="literal">username</code>
                                    are the persistent attributes of the entity bean. All of our persistent attributes
                                    define accessor methods. These are needed when this component is used by JSF in the
                                    render response and update model values phases. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/6.png" alt="6" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> An empty constructor is both required by both the EJB specification and by Seam.
                                </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/7.png" alt="7" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">@NotNull</code> and <code class="literal">@Size</code> annotations are
                                    part of the Bean Validation annotations specification (JSR-303). Seam integrates
                                     Bean Validation through Hibernate Validator, which is the reference implementation,
                                      and lets you use it for data validation (even if you are not using Hibernate for
                                    persistence). </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/8.png" alt="8" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB standard <code class="literal">@Id</code> annotation indicates the primary key
                                    attribute of the entity bean. </p></td></tr></table></div></div></div></div><br class="example-break"/><p> The most important things to notice in this example are the <code class="literal">@Name</code> and
                            <code class="literal">@Scope</code> annotations. These annotations establish that this class is a Seam component. </p><p> We'll see below that the properties of our <code class="literal">User</code> class are bound
                        directly to JSF components and are populated by JSF during the update model values phase. We
                        don't need any tedious glue code to copy data back and forth between the JSF pages and the
                        entity bean domain model. </p><p> However, entity beans shouldn't do transaction management or database access. So we can't use
                        this component as a JSF action listener. For that we need a session bean. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e632"/>1.2.1.2. The stateless session bean class: <code class="literal">RegisterAction.java</code></h4></div></div></div><p> Most Seam application use session beans as JSF action listeners (you can use JavaBeans instead if
                    you like). </p><p> We have exactly one JSF action in our application, and one session bean method attached to it. In
                    this case, we'll use a stateless session bean, since all the state associated with our action is
                    held by the <code class="literal">User</code> bean. </p><p> This is the only really interesting code in the example! </p><div class="example"><a id="d0e647"/><p class="title"><b>Example 1.2. RegisterAction.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="co" id="registration-stateless-annotation"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;register&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegisterAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Register</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="co" id="registration-in-annotation"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PersistenceContext</span>
<!--  --><br/><span class="co" id="registration-persistencecontext-annotation"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span>
<!--  --><br/><span class="co" id="registration-logger-annotation"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;register</span><span class="java_separator">()</span>
<!--  --><br/><span class="co" id="registration-action-listener"><img src="images/seamframework/docbook/callouts/5.png" alt="(5)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_plain">&nbsp;existing&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;select&nbsp;username&nbsp;from&nbsp;User&nbsp;where&nbsp;username&nbsp;=&nbsp;#{user.username}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="registration-query"><img src="images/seamframework/docbook/callouts/6.png" alt="(6)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">existing</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()</span><span class="java_operator">==</span><span class="java_literal">0</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">persist</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Registered&nbsp;new&nbsp;user&nbsp;#{user.username}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="registration-log"><img src="images/seamframework/docbook/callouts/7.png" alt="(7)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/registered.xhtml&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="co" id="registration-outcome"><img src="images/seamframework/docbook/callouts/8.png" alt="(8)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;User&nbsp;#{user.username}&nbsp;already&nbsp;exists&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="registration-builtin"><img src="images/seamframework/docbook/callouts/9.png" alt="(9)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB <code class="literal">@Stateless</code> annotation marks this class as
                                    a stateless session bean. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <a class="link" href="#in-annotation">
                                        <code class="literal">@In</code>
                                    </a> annotation marks an attribute of the bean as injected by Seam. In this case,
                                    the attribute is injected from a context variable named <code class="literal">user</code> (the
                                    instance variable name). </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB standard <code class="literal">@PersistenceContext</code> annotation is used to
                                    inject the EJB3 entity manager. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The Seam <code class="literal">@Logger</code> annotation is used to inject the component's
                                        <code class="literal">Log</code> instance. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/5.png" alt="5" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The action listener method uses the standard EJB3
                                    <code class="literal">EntityManager</code> API to interact with the database, and returns the
                                    JSF outcome. Note that, since this is a session bean, a transaction is automatically
                                    begun when the <code class="literal">register()</code> method is called, and committed when it
                                    completes. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/6.png" alt="6" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> Notice that Seam lets you use a JSF EL expression inside EJB-QL. Under the
                                    covers, this results in an ordinary JPA <code class="literal">setParameter()</code> call on
                                    the standard JPA <code class="literal">Query</code> object. Nice, huh? </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/7.png" alt="7" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">Log</code> API lets us easily display templated log messages which
                                can also make use of JSF EL expressions.
                                </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/8.png" alt="8" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> JSF action listener methods return a string-valued outcome that determines what
                                    page will be displayed next. A null outcome (or a void action listener method)
                                    redisplays the previous page. In plain JSF, it is normal to always use a JSF
                                        <span class="emphasis"><em>navigation rule</em></span> to determine the JSF view id from the
                                    outcome. For complex application this indirection is useful and a good practice.
                                    However, for very simple examples like this one, Seam lets you use the JSF view id
                                    as the outcome, eliminating the requirement for a navigation rule. <span class="emphasis"><em>Note
                                        that when you use a view id as an outcome, Seam always performs a browser
                                        redirect.</em></span>
                                </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/9.png" alt="9" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> Seam provides a number of <span class="emphasis"><em>built-in components</em></span> to help solve
                                    common problems. The <code class="literal">FacesMessages</code> component makes it easy to
                                    display templated error or success messages. (As of Seam 2.1, you can use
                                    <code class="literal">StatusMessages</code> instead to remove the semantic dependency on JSF).
                                    Built-in Seam components may be obtained by injection, or by calling the
                                    <code class="literal">instance()</code> method on the class of the built-in component.
                                </p></td></tr></table></div></div></div></div><br class="example-break"/><p> Note that we did not explicitly specify a <code class="literal">@Scope</code> this time. Each Seam
                        component type has a default scope if not explicitly specified. For stateless session beans, the
                        default scope is the stateless context, which is the only sensible value.</p><p> Our session bean action listener performs the business and persistence logic for our
                        mini-application. In more complex applications, we might need require a separate service
                        layer.  This is easy to achieve with Seam, but it's overkill for most web applications. 
                        Seam does not force you into any particular strategy for application layering, allowing 
                        your application to be as simple, or as complex, as you want. 
                    </p><p>Note that in this simple
                        application, we've actually made it far more complex than it needs to be.  If we had
                        used the Seam application framework controllers, we would have eliminated all of our 
                        application code.  However, then we wouldn't have had much of an application to explain.
                    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e754"/>1.2.1.3. The session bean local interface: <code class="literal">Register.java</code></h4></div></div></div><p>Naturally, our session bean needs a local interface.</p><div class="example"><a id="d0e761"/><p class="title"><b>Example 1.3. Register.java</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Local</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">Register</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;register</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p> That's the end of the Java code. Now we'll look at the view.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e768"/>1.2.1.4. The view: <code class="literal">register.xhtml</code> and <code class="literal">registered.xhtml</code></h4></div></div></div><p> The view pages for a Seam application could be implemented using any technology that supports
                    JSF. In this example we use Facelets, because we think it's better than JSF.</p><div class="example"><a id="d0e778"/><p class="title"><b>Example 1.4. register.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Register&nbsp;New&nbsp;User</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">f:view&gt;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:panelGrid</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Username:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.username}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Real&nbsp;Name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.name}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputSecret</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.password}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:panelGrid</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Register&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{register.register}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> The only thing here that is specific to Seam is the
                    <code class="literal">&lt;s:validateAll&gt;</code> tag. This JSF component tells JSF to validate all
                    the contained input fields against the Bean Validation annotations specified on the entity bean. </p><div class="example"><a id="d0e788"/><p class="title"><b>Example 1.5. registered.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Successfully&nbsp;Registered&nbsp;New&nbsp;User</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Welcome,&nbsp;#{user.name},&nbsp;you&nbsp;are&nbsp;successfully&nbsp;registered&nbsp;as&nbsp;#{user.username}.</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> This is a simple Facelets page using some inline EL. There's nothing specific to Seam here. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e795"/>1.2.1.5. The Seam component deployment descriptor: <code class="literal">components.xml</code></h4></div></div></div><p>Since this is the first Seam app we've seen, we'll take a look at the deployment
                    descriptors. Before we get into them, it is worth noting that Seam strongly values 
                    minimal configuration. These configuration files will be created for you when you create a Seam 
                    application.  You'll never need to touch most of these files.  We're presenting them
                    now only to help you understand what all the pieces in the example are doing.  
                </p><p> If you've used many Java frameworks before, you'll be used to having to declare all your
                    component classes in some kind of XML file that gradually grows more and more unmanageable as your
                    project matures. You'll be relieved to know that Seam does not require that application components
                    be accompanied by XML. Most Seam applications require a very small amount of XML that does not grow
                    very much as the project gets bigger. </p><p> Nevertheless, it is often useful to be able to provide for <span class="emphasis"><em>some</em></span> external
                    configuration of <span class="emphasis"><em>some</em></span> components (particularly the components built in to
                    Seam). You have a couple of options here, but the most flexible option is to provide this
                    configuration in a file called <code class="literal">components.xml</code>, located in the
                    <code class="literal">WEB-INF</code> directory. We'll use the <code class="literal">components.xml</code> file to tell
                    Seam how to find our EJB components in JNDI: </p><div class="example"><a id="d0e821"/><p class="title"><b>Example 1.6. components.xml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:core</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/core</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/core-2.3.xsd&nbsp;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jndi-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${jndiPattern}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> This code configures a property named <code class="literal">jndiPattern</code> of a built-in Seam component
                    named <code class="literal">org.jboss.seam.core.init</code>. The funny <code class="literal">@</code> symbols are
                    there because our Maven build puts the correct JNDI pattern in when we deploy the application,
                    which it reads from the components.properties file. You learn more about how this process works in
                    <a class="xref" href="#xml.descriptor" title="5.2. Configuring components via components.xml">Section 5.2, “Configuring components via components.xml”</a>.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Eclipse M2e Web tools plugin can't use the <code class="literal">@</code> for token property filtering.  Fortunately
                        there works the other way which is in Maven filtering defined - <code class="literal">${property}</code>.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e848"/>1.2.1.6. The web deployment description: <code class="literal">web.xml</code></h4></div></div></div><p> The presentation layer for our mini-application will be deployed in a WAR. So we'll need a web
                    deployment descriptor. </p><div class="example"><a id="d0e855"/><p class="title"><b>Example 1.7. web.xml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web-app</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;3.0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">javax.faces.DEFAULT_SUFFIX</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Faces&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">javax.faces.webapp.FacesServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">load-on-startup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">load-on-startup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Faces&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-timeout</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">10</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-timeout</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">web-app</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> This <code class="literal">web.xml</code> file configures Seam and JSF. The configuration you see here is
                    pretty much identical in all Seam applications. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e865"/>1.2.1.7. The JSF configuration: <code class="literal">faces-config.xml</code></h4></div></div></div><p> Most Seam applications use JSF views as the presentation layer. So usually we'll need
                        <code class="literal">faces-config.xml</code>. In our case, we are going to use Facelets for
                        defining our views, so we need to tell JSF to use Facelets as its templating engine. </p><div class="example"><a id="d0e875"/><p class="title"><b>Example 1.8. faces-config.xml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">faces-config</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2.1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">faces-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> Note that we don't need
                    any JSF managed bean declarations and neither FaceletViewHandler definition as Facelets are default view technology 
                    in JSF 2! Our managed beans are annotated Seam components. So basically we don't need <code class="filename">faces-config.xml</code> at all,
                    but here is the <code class="filename">faces-config.xml</code> as the template for advanced JSF configurations.</p><p> In fact, once you have all the basic descriptors set up, the <span class="emphasis"><em>only</em></span> XML you
                    need to write as you add new functionality to a Seam application is orchestration: navigation rules 
                    or jBPM process definitions. Seam's stand is that <span class="emphasis"><em>process flow</em></span> and
                        <span class="emphasis"><em>configuration data</em></span> are the only things that truly belong in XML. </p><p> In this simple example, we don't even need a navigation rule, since we decided to embed the view
                    id in our action code. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e901"/>1.2.1.8. The EJB deployment descriptor: <code class="literal">ejb-jar.xml</code></h4></div></div></div><p> The <code class="literal">ejb-jar.xml</code> file integrates Seam with EJB3, by attaching the
                        <code class="literal">SeamInterceptor</code> to all session beans in the archive. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-jar</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;3.0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptors</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.ejb.SeamInterceptor</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptors</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assembly-descriptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-binding</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.ejb.SeamInterceptor</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-binding</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assembly-descriptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-jar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e916"/>1.2.1.9. The EJB persistence deployment descriptor: <code class="literal">persistence.xml</code></h4></div></div></div><p> The <code class="literal">persistence.xml</code> file tells the EJB persistence provider where to find the
                    datasource, and contains some vendor-specific settings. In this case, enables automatic schema
                    export at startup time. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/persistence&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/persistence</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2.0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userDatabase&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">provider</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.ejb.HibernatePersistence</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">provider</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jta-data-source</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:jboss/datasources/ExampleDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jta-data-source</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.hbm2ddl.auto&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;create-drop&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e928"/>1.2.1.10. The EAR deployment descriptor: <code class="literal">application.xml</code></h4></div></div></div><p> Finally, since our application is deployed as an EAR, we need a deployment descriptor there, too. </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>This file can be generated by Maven EAR plugin and registration application has got this set up in registration-ear/pom.xml.</p></div><p>Just for clarity, the following is the result of that generation:</p><div class="example"><a id="registration-application-xml"/><p class="title"><b>Example 1.9. registration application</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/application_6.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;6&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">registration-ear</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web-uri</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">registration-web.war</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">web-uri</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">context-root</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/seam-registration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">context-root</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">web</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">registration-ejb.jar</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam.jar</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> This deployment descriptor links modules in the enterprise archive and binds the web application
                    to the context root <code class="literal">/seam-registration</code>. </p><p> We've now seen <span class="emphasis"><em>all</em></span> the files in the entire application! </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e955"/>1.2.2. How it works</h3></div></div></div><p> When the form is submitted, JSF asks Seam to resolve the variable named <code class="literal">user</code>.
                Since there is no value already bound to that name (in any Seam context), Seam instantiates the
                    <code class="literal">user</code> component, and returns the resulting <code class="literal">User</code> entity bean
                instance to JSF after storing it in the Seam session context. </p><p> The form input values are now validated against the Bean Validator constraints specified on the
                    <code class="literal">User</code> entity. If the constraints are violated, JSF redisplays the page. Otherwise,
                JSF binds the form input values to properties of the <code class="literal">User</code> entity bean. </p><p> Next, JSF asks Seam to resolve the variable named <code class="literal">register</code>. Seam uses the JNDI
                pattern mentioned earlier to locate the stateless session bean, wraps it as a Seam component, and
                returns it. Seam then presents this component to JSF and JSF invokes the <code class="literal">register()</code>
                action listener method.</p><p> But Seam is not done yet. Seam intercepts the method call and injects the <code class="literal">User</code>
                entity from the Seam session context, before allowing the invocation to continue. </p><p> The <code class="literal">register()</code> method checks if a user with the entered username already exists.
                If so, an error message is queued with the <code class="literal">FacesMessages</code> component, and a null
                outcome is returned, causing a page redisplay. The <code class="literal">FacesMessages</code> component
                interpolates the JSF expression embedded in the message string and adds a JSF
                <code class="literal">FacesMessage</code> to the view. </p><p> If no user with that username exists, the <code class="literal">"/registered.xhtml"</code> outcome triggers a
                browser redirect to the <code class="literal">registered.xhtml</code> page. When JSF comes to render the page, it
                asks Seam to resolve the variable named <code class="literal">user</code> and uses property values of the returned
                    <code class="literal">User</code> entity from Seam's session scope. </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="messages"/>1.3. Clickable lists in Seam: the messages example</h2></div></div></div><p> Clickable lists of database search results are such an important part of any online application that Seam
            provides special functionality on top of JSF to make it easier to query data using EJB-QL or HQL and display
            it as a clickable list using a JSF <code class="literal">&lt;h:dataTable&gt;</code>. The messages example
            demonstrates this functionality. </p><div class="mediaobject" align="center"><img src="images/messages.png" align="middle"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1031"/>1.3.1. Understanding the code</h3></div></div></div><p> The message list example has one entity bean, <code class="literal">Message</code>, one session bean,
                    <code class="literal">MessageListBean</code> and one JSF. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1042"/>1.3.1.1. The entity bean: <code class="literal">Message.java</code></h4></div></div></div><p> The <code class="literal">Message</code> entity defines the title, text, date and time of a message, and a
                    flag indicating whether the message has been read: </p><div class="example"><a id="d0e1052"/><p class="title"><b>Example 1.10. Message.java</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;message&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">EVENT</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Message</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;title</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;text</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;read</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;datetime</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span><span class="java_plain">&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">100</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getTitle</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;title</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setTitle</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;title</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">title&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;title</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span><span class="java_plain">&nbsp;@</span><span class="java_type">Lob</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getText</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;text</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setText</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;text</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">text&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;text</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRead</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;read</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRead</span><span class="java_separator">(</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;read</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">read&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;read</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Basic</span><span class="java_plain">&nbsp;@</span><span class="java_type">Temporal</span><span class="java_separator">(</span><span class="java_type">TemporalType</span><span class="java_separator">.</span><span class="java_plain">TIMESTAMP</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;getDatetime</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;datetime</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setDatetime</span><span class="java_separator">(</span><span class="java_type">Date</span><span class="java_plain">&nbsp;datetime</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">datetime&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;datetime</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1057"/>1.3.1.2. The stateful session bean: <code class="literal">MessageManagerBean.java</code></h4></div></div></div><p> Just like in the previous example, we have a session bean, <code class="literal">MessageManagerBean</code>,
                    which defines the action listener methods for the two buttons on our form. One of the buttons
                    selects a message from the list, and displays that message. The other button deletes a message. So
                    far, this is not so different to the previous example. </p><p> But <code class="literal">MessageManagerBean</code> is also responsible for fetching the list of messages
                    the first time we navigate to the message list page. There are various ways the user could navigate
                    to the page, and not all of them are preceded by a JSF action — the user might have
                    bookmarked the page, for example. So the job of fetching the message list takes place in a Seam
                        <span class="emphasis"><em>factory method</em></span>, instead of in an action listener method. </p><p> We want to cache the list of messages in memory between server requests, so we will make this a
                    stateful session bean. </p><div class="example"><a id="d0e1078"/><p class="title"><b>Example 1.11. MessageManagerBean.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;messageManager&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MessageManagerBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">MessageManager</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModel</span>
<!--  --><br/><span class="co" id="messages-datamodel"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Message</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;messageList</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModelSelection</span>
<!--  --><br/><span class="co" id="messages-datamodelselection"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="messages-out"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Message</span><span class="java_plain">&nbsp;message</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PersistenceContext</span><span class="java_separator">(</span><span class="java_plain">type</span><span class="java_operator">=</span><span class="java_plain">EXTENDED</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="messages-persistencecontext"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;messageList&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="messages-factory"><img src="images/seamframework/docbook/callouts/5.png" alt="(5)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;findMessages</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messageList&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;msg&nbsp;from&nbsp;Message&nbsp;msg&nbsp;order&nbsp;by&nbsp;msg.datetime&nbsp;desc&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;select</span><span class="java_separator">()</span>
<!--  --><br/><span class="co" id="messages-select"><img src="images/seamframework/docbook/callouts/6.png" alt="(6)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message</span><span class="java_separator">.</span><span class="java_plain">setRead</span><span class="java_separator">(</span><span class="java_literal">true</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;delete</span><span class="java_separator">()</span>
<!--  --><br/><span class="co" id="messages-delete"><img src="images/seamframework/docbook/callouts/7.png" alt="(7)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messageList</span><span class="java_separator">.</span><span class="java_plain">remove</span><span class="java_separator">(</span><span class="java_plain">message</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">remove</span><span class="java_separator">(</span><span class="java_plain">message</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message</span><span class="java_operator">=</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Remove</span>
<!--  --><br/><span class="co" id="messages-remove"><img src="images/seamframework/docbook/callouts/8.png" alt="(8)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">@DataModel</code> annotation exposes an attribute of type
                                        <code class="literal">java.util.List</code> to the JSF page as an instance of
                                        <code class="literal">javax.faces.model.DataModel</code>. This allows us to use the list
                                    in a JSF <code class="literal">&lt;h:dataTable&gt;</code> with clickable links for
                                    each row. In this case, the <code class="literal">DataModel</code> is made available in a
                                    session context variable named <code class="literal">messageList</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">@DataModelSelection</code> annotation tells Seam to inject the
                                        <code class="literal">List</code> element that corresponded to the clicked link. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">@Out</code> annotation then exposes the selected value directly
                                    to the page. So every time a row of the clickable list is selected, the
                                        <code class="literal">Message</code> is injected to the attribute of the stateful bean,
                                    and the subsequently <span class="emphasis"><em>outjected</em></span> to the event context variable
                                    named <code class="literal">message</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> This stateful bean has an EJB3 <span class="emphasis"><em>extended persistence context</em></span>.
                                    The messages retrieved in the query remain in the managed state as long as the bean
                                    exists, so any subsequent method calls to the stateful bean can update them without
                                    needing to make any explicit call to the <code class="literal">EntityManager</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/5.png" alt="5" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The first time we navigate to the JSF page, there will be no value in the
                                        <code class="literal">messageList</code> context variable. The <code class="literal">@Factory</code>
                                    annotation tells Seam to create an instance of <code class="literal">MessageManagerBean</code>
                                    and invoke the <code class="literal">findMessages()</code> method to initialize the value. We
                                    call <code class="literal">findMessages()</code> a <span class="emphasis"><em>factory method</em></span> for
                                        <code class="literal">messages</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/6.png" alt="6" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">select()</code> action listener method marks the selected
                                        <code class="literal">Message</code> as read, and updates it in the database. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/7.png" alt="7" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">delete()</code> action listener method removes the selected
                                        <code class="literal">Message</code> from the database. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/8.png" alt="8" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> All stateful session bean Seam components <span class="emphasis"><em>must</em></span> have a method
                                    with no parameters marked <code class="literal">@Remove</code> that Seam uses to remove 
                                    the stateful bean when the Seam context ends, and clean up any server-side state.
                                </p></td></tr></table></div></div></div></div><br class="example-break"/><p> Note that this is a session-scoped Seam component. It is associated with the user login session,
                    and all requests from a login session share the same instance of the component. (In Seam
                    applications, we usually use session-scoped components sparingly.) </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1201"/>1.3.1.3. The session bean local interface: <code class="literal">MessageManager.java</code></h4></div></div></div><p> All session beans have a business interface, of course. </p><div class="example"><a id="d0e1208"/><p class="title"><b>Example 1.12. MessageManager.java</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Local</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">MessageManager</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;findMessages</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;select</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;delete</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p> From now on, we won't show local interfaces in our code examples. </p><p> Let's skip over <code class="literal">components.xml</code>, <code class="literal">persistence.xml</code>,
                        <code class="literal">web.xml</code>, <code class="literal">ejb-jar.xml</code>, <code class="literal">faces-config.xml</code>
                    and <code class="literal">application.xml</code> since they are much the same as the previous example, and go
                    straight to the JSF. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1235"/>1.3.1.4. The view: <code class="literal">messages.xhtml</code></h4></div></div></div><p> The JSF page is a straightforward use of the JSF <code class="literal">&lt;h:dataTable&gt;</code>
                    component. Again, nothing specific to Seam. </p><div class="example"><a id="d0e1245"/><p class="title"><b>Example 1.13. messages.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Messages</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h2</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Message&nbsp;List</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h2</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;noMessages&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;No&nbsp;messages&nbsp;to&nbsp;display&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messageList.rowCount==0}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;messages&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;msg&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messageList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messageList.rowCount</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">0}</span><span class="xml_attribute_value">&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="xml_attribute_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Read&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectBooleanCheckbox</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{msg.read}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">disabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Title&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;link&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{msg.title}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messageManager.select}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Date/Time&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{msg.datetime}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;both&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dateStyle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;medium&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">timeStyle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;short&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;delete&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Delete&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messageManager.delete}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;title&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{message.title}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{message.text}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1250"/>1.3.2. How it works</h3></div></div></div><p> The first time we navigate to the <code class="literal">messages.xhtml</code> page, the page will try to resolve the
                    <code class="literal">messageList</code> context variable. Since this context variable is not initialized,
                Seam will call the factory method <code class="literal">findMessages()</code>, which performs a query against the
                database and results in a <code class="literal">DataModel</code> being outjected. This
                <code class="literal">DataModel</code> provides the row data needed for rendering the
                    <code class="literal">&lt;h:dataTable&gt;</code>. </p><p> When the user clicks the <code class="literal">&lt;h:commandLink&gt;</code>, JSF calls the
                    <code class="literal">select()</code> action listener. Seam intercepts this call and injects the selected row
                data into the <code class="literal">message</code> attribute of the <code class="literal">messageManager</code> component.
                The action listener fires, marking the selected <code class="literal">Message</code> as read. At the end of the
                call, Seam outjects the selected <code class="literal">Message</code> to the context variable named
                    <code class="literal">message</code>. Next, the EJB container commits the transaction, and the change to the
                    <code class="literal">Message</code> is flushed to the database. Finally, the page is re-rendered,
                redisplaying the message list, and displaying the selected message below it. </p><p> If the user clicks the <code class="literal">&lt;h:commandButton&gt;</code>, JSF calls the
                    <code class="literal">delete()</code> action listener. Seam intercepts this call and injects the selected row
                data into the <code class="literal">message</code> attribute of the <code class="literal">messageList</code> component. The
                action listener fires, removing the selected <code class="literal">Message</code> from the list, and also calling
                    <code class="literal">remove()</code> on the <code class="literal">EntityManager</code>. At the end of the call, Seam
                refreshes the <code class="literal">messageList</code> context variable and clears the context variable named
                    <code class="literal">message</code>. The EJB container commits the transaction, and deletes the
                    <code class="literal">Message</code> from the database. Finally, the page is re-rendered, redisplaying the
                message list. </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="todo"/>1.4. Seam and jBPM: the todo list example</h2></div></div></div><p> jBPM provides sophisticated functionality for workflow and task management. To get a small taste of how
            jBPM integrates with Seam, we'll show you a simple "todo list" application. Since managing lists of tasks is
            such core functionality for jBPM, there is hardly any Java code at all in this example. </p><div class="mediaobject" align="center"><img src="images/todo.png" align="middle"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1341"/>1.4.1. Understanding the code</h3></div></div></div><p> The center of this example is the jBPM process definition. There are also two JSFs and two trivial
                JavaBeans (There was no reason to use session beans, since they do not access the database, or have any
                other transactional behavior). Let's start with the process definition: </p><div class="example"><a id="d0e1347"/><p class="title"><b>Example 1.14. todo.jpdl.xml</b></p><div class="example-contents"><div class="programlistingco"><pre class="programlisting">&lt;process-definition name="todo"&gt;
   
   &lt;start-stat<span xmlns="" class="co" id="todo-startstate"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span>e name="start"&gt;
      &lt;transition to="todo"/&gt;
   &lt;/start-state&gt;
   
   &lt;task-node <span xmlns="" class="co" id="todo-tasknode"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span>name="todo"&gt;
      &lt;task na<span xmlns="" class="co" id="todo-task"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span>me="todo" description="#{todoList.description}"&gt;
         &lt;assi<span xmlns="" class="co" id="todo-assignment"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span>gnment actor-id="#{actor.id}"/&gt;
      &lt;/task&gt;
      &lt;transition to="done"/&gt;
   &lt;/task-node&gt;
   
   &lt;end-state <span xmlns="" class="co" id="todo-endstate"><img src="images/seamframework/docbook/callouts/5.png" alt="(5)"/></span>name="done"/&gt;
   
&lt;/process-definition&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">&lt;start-state&gt;</code> node represents the logical start
                                of the process. When the process starts, it immediately transitions to the
                                <code class="literal">todo</code> node. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">&lt;task-node&gt;</code> node represents a <span class="emphasis"><em>wait
                                    state</em></span>, where business process execution pauses, waiting for one or more
                                tasks to be performed. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">&lt;task&gt;</code> element defines a task to be performed by
                                a user. Since there is only one task defined on this node, when it is complete,
                                execution resumes, and we transition to the end state. The task gets its description
                                from a Seam component named <code class="literal">todoList</code> (one of the JavaBeans). </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> Tasks need to be assigned to a user or group of users when they are created. In this
                                case, the task is assigned to the current user, which we get from a built-in Seam
                                component named <code class="literal">actor</code>. Any Seam component may be used to perform task
                                assignment. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/5.png" alt="5" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">&lt;end-state&gt;</code> node defines the logical end of the
                                business process. When execution reaches this node, the process instance is destroyed.
                            </p></td></tr></table></div></div></div></div><br class="example-break"/><p> This document defines our <span class="emphasis"><em>business process</em></span> as a graph of nodes. This is the most
                trivial possible business process: there is one <span class="emphasis"><em>task</em></span> to be performed, and when that
                task is complete, the business process ends. </p><p> The first JavaBean handles the login screen <code class="literal">login.xhtml</code>. Its job is just to
                initialize the jBPM actor id using the <code class="literal">actor</code> component. In a real application, it
                would also need to authenticate the user.</p><div class="example"><a id="d0e1415"/><p class="title"><b>Example 1.15. Login.java</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;login&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Actor</span><span class="java_plain">&nbsp;actor</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getUser</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUser</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;user</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">user&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;login</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actor</span><span class="java_separator">.</span><span class="java_plain">setId</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/todo.xhtml&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p> Here we see the use of <code class="literal">@In</code> to inject the built-in <code class="literal">Actor</code>
                component. </p><p> The JSF itself is trivial: </p><div class="example"><a id="d0e1430"/><p class="title"><b>Example 1.16. login.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Login</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Login</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;login&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;username&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{login.user}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;submit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Login&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{login.login}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> The second JavaBean is responsible for starting business process instances, and ending tasks. </p><div class="example"><a id="d0e1438"/><p class="title"><b>Example 1.17. TodoList.java</b></p><div class="example-contents"><div class="programlistingco"><pre class="programlisting">@Name("todoList")
public class TodoList
{
   private String description;
   
   public Stri<span xmlns="" class="co" id="todo-description"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span>ng getDescription()
   {
      return description;
   }

   public void setDescription(String description)
   {
      this.description = description;
   }
              <span xmlns="" class="co" id="todo-createprocess-annotation"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span>
   @CreateProcess(definition="todo")
   public void createTodo() {}
              <span xmlns="" class="co" id="todo-task-annotations"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span>
   @StartTask @EndTask
   public void done() {}

}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The description property accepts user input from the JSF page, and exposes it to the
                                process definition, allowing the task description to be set. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The Seam <code class="literal">@CreateProcess</code> annotation creates a new jBPM process
                                instance for the named process definition. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The Seam <code class="literal">@StartTask</code> annotation starts work on a task. The
                                    <code class="literal">@EndTask</code> ends the task, and allows the business process execution
                                to resume. </p></td></tr></table></div></div></div></div><br class="example-break"/><p> In a more realistic example, <code class="literal">@StartTask</code> and <code class="literal">@EndTask</code> would not
                appear on the same method, because there is usually work to be done using the application in order to
                complete the task. </p><p> Finally, the core of the application is in <code class="literal">todo.xhtml</code>: </p><div class="example"><a id="d0e1480"/><p class="title"><b>Example 1.18. todo.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Todo&nbsp;List</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Todo&nbsp;List</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;list&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;noItems&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;There&nbsp;are&nbsp;no&nbsp;todo&nbsp;items.&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{empty&nbsp;taskInstancePriorityList}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;items&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{taskInstancePriorityList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;task&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;empty&nbsp;taskInstancePriorityList}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Description&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.description}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;width:&nbsp;400&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Created&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.taskMgmtInstance.processInstance.start}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Priority&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;priority&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.priority}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;width:&nbsp;30&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Due&nbsp;Date&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dueDate&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.dueDate}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;width:&nbsp;100&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dateStyle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;short&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;done&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.done}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">taskInstance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Done&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;update&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Update&nbsp;Items&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;empty&nbsp;taskInstanceList}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;new&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.description}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;width:&nbsp;400&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;create&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;New&nbsp;Item&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.createTodo}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> Let's take this one piece at a time. </p><p> The page renders a list of tasks, which it gets from a built-in Seam component named
                    <code class="literal">taskInstanceList</code>. The list is defined inside a JSF form. </p><div class="example"><a id="d0e1492"/><p class="title"><b>Example 1.19. todo.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;list&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;There&nbsp;are&nbsp;no&nbsp;todo&nbsp;items.&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{empty&nbsp;taskInstanceList}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{taskInstanceList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;task&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;empty&nbsp;taskInstanceList}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> Each element of the list is an instance of the jBPM class <code class="literal">TaskInstance</code>. The
                following code simply displays the interesting properties of each task in the list. For the description,
                priority and due date, we use input controls, to allow the user to update these values. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Description&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.description}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Created&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.taskMgmtInstance.processInstance.start}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Priority&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.priority}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;width:&nbsp;30&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Due&nbsp;Date&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.dueDate}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;width:&nbsp;100&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dateStyle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;short&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>Seam provides a default JSF date converter for converting a string to a date (no time).
            Thus, the converter is not necessary for the field bound to <code class="literal">#{task.dueDate}</code>.</div><p> This button ends the task by calling the action method annotated <code class="literal">@StartTask
                @EndTask</code>. It passes the task id to Seam as a request parameter: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Done&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.done}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">taskInstance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Note that this is using a Seam <code class="literal">&lt;s:button&gt;</code> JSF control from the
                <code class="literal">seam-ui.jar</code> package. This button is used to update the properties of the
                tasks. When the form is submitted, Seam and jBPM will make any changes to the tasks persistent.
                There is no need for any action listener method: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Update&nbsp;Items&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;update&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> A second form on the page is used to create new items, by calling the action method annotated
                    <code class="literal">@CreateProcess</code>. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;new&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.description}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;New&nbsp;Item&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.createTodo}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1533"/>1.4.2. How it works</h3></div></div></div><p>After logging in, todo.xhtml uses the <code class="literal">taskInstanceList</code> component to display a table
            of outstanding todo items for a the current user.  Initially there are none.  It
            also presents a form to enter a new entry.  When the user types the todo item and
            hits the "Create New Item" button, <code class="literal">#{todoList.createTodo}</code> is called.  This starts
            the todo process, as defined in <code class="literal">todo.jpdl.xml</code>.  </p><p>The process instance is created, starting in the start state and immediately transition to
                the <code class="literal">todo</code> state, where a new task is created.  The task description is set 
                based on the user's
                input, which was saved to <code class="literal">#{todoList.description}</code>.  Then, the task is 
                assigned to
                the current user, which was stored in the seam actor component.  Note that in
                this example, the process has no extra process state.  All the state in this example
                is stored in the task definition.  The process and task information is stored in the database
                at the end of the request.
            </p><p>
                When <code class="literal">todo.xhtml</code> is redisplayed, <code class="literal">taskInstanceList</code> now finds 
                the task that was just created.
                The task is shown in an <code class="literal">h:dataTable</code>.  The internal state of the task is 
                displayed in 
                each column: <code class="literal">#{task.description}</code>, <code class="literal">#{task.priority}</code>, 
                <code class="literal">#{task.dueDate}</code>, etc...  These fields 
                can all be edited and saved back to the database.
            </p><p>Each todo item also has "Done" button, which calls <code class="literal">#{todoList.done}</code>.  The 
                <code class="literal">todoList</code> component
            knows which task the button is for because each s:button specificies 
                <code class="literal">taskInstance="#{task}"</code>, referring
            to the task for that particular line of the table.  The <code class="literal">@StartTast</code> and 
                <code class="literal">@EndTask</code> annotations
            cause seam to make the task active and immediately complete the task.  The original process then
            transitions into the <code class="literal">done</code> state, according to the process definition, where it ends.
            The state of the task and process are both updated in the database.
            </p><p>When <code class="literal">todo.xhtml</code> is displayed again, the now-completed task is no longer 
                displayed in the
            <code class="literal">taskInstanceList</code>, since that component only display active tasks for the user.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="numberguess"/>1.5. Seam pageflow: the numberguess example</h2></div></div></div><p> For Seam applications with relatively freeform (ad hoc) navigation, JSF/Seam navigation rules are a
            perfectly good way to define the page flow. For applications with a more constrained style of navigation,
            especially for user interfaces which are more stateful, navigation rules make it difficult to really
            understand the flow of the system. To understand the flow, you need to piece it together from the view
            pages, the actions and the navigation rules. </p><p> Seam allows you to use a jPDL process definition to define pageflow. The simple number guessing example
            shows how this is done. </p><div class="mediaobject" align="center"><img src="images/numberguess.png" align="middle"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1615"/>1.5.1. Understanding the code</h3></div></div></div><p> The example is implemented using one JavaBean, three JSF pages and a jPDL pageflow definition. Let's
                begin with the pageflow: </p><div class="example"><a id="d0e1621"/><p class="title"><b>Example 1.20. pageflow.jpdl.xml</b></p><div class="example-contents"><div class="programlistingco"><pre class="programlisting">&lt;pageflow-definition 
        xmlns="http://jboss.org/schema/seam/pageflow"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://jboss.org/schema/seam/pageflow 
                            http://jboss.org/schema/seam/pageflow-2.3.xsd"
        name="numberGuess"&gt;
   
   &lt;start-page<span xmlns="" class="co" id="numberguess-page"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span> name="displayGuess" view-id="/numberGuess.xhtml"&gt;
      &lt;redirect/&gt;
      &lt;transit<span xmlns="" class="co" id="numberguess-transition"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span>ion name="guess" to="evaluateGuess"&gt;
         &lt;acti<span xmlns="" class="co" id="numberguess-action"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span>on expression="#{numberGuess.guess}"/&gt;
      &lt;/transition&gt;
      &lt;transition name="giveup" to="giveup"/&gt;
      &lt;transition name="cheat" to="cheat"/&gt;
   &lt;/start-page&gt;
              <span xmlns="" class="co" id="numberguess-decision"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span>
   &lt;decision name="evaluateGuess" expression="#{numberGuess.correctGuess}"&gt;
      &lt;transition name="true" to="win"/&gt;
      &lt;transition name="false" to="evaluateRemainingGuesses"/&gt;
   &lt;/decision&gt;
   
   &lt;decision name="evaluateRemainingGuesses" expression="#{numberGuess.lastGuess}"&gt;
      &lt;transition name="true" to="lose"/&gt;
      &lt;transition name="false" to="displayGuess"/&gt;
   &lt;/decision&gt;
   
   &lt;page name="giveup" view-id="/giveup.xhtml"&gt;
      &lt;redirect/&gt;
      &lt;transition name="yes" to="lose"/&gt;
      &lt;transition name="no" to="displayGuess"/&gt;
   &lt;/page&gt;
   
   &lt;process-state name="cheat"&gt;
      &lt;sub-process name="cheat"/&gt;
      &lt;transition to="displayGuess"/&gt;
   &lt;/process-state&gt;
   
   &lt;page name="win" view-id="/win.xhtml"&gt;
      &lt;redirect/&gt;
      &lt;end-conversation/&gt;
   &lt;/page&gt;
   
   &lt;page name="lose" view-id="/lose.xhtml"&gt;
      &lt;redirect/&gt;
      &lt;end-conversation/&gt;
   &lt;/page&gt;
   
&lt;/pageflow-definition&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">&lt;page&gt;</code> element defines a wait state where the
                                system displays a particular JSF view and waits for user input. The
                                <code class="literal">view-id</code> is the same JSF view id used in plain JSF navigation rules.
                                The <code class="literal">redirect</code> attribute tells Seam to use post-then-redirect when
                                navigating to the page. (This results in friendly browser URLs.) </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">&lt;transition&gt;</code> element names a JSF outcome. The
                                transition is triggered when a JSF action results in that outcome. Execution will then
                                proceed to the next node of the pageflow graph, after invocation of any jBPM transition
                                actions. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> A transition <code class="literal">&lt;action&gt;</code> is just like a JSF action,
                                except that it occurs when a jBPM transition occurs. The transition action can invoke
                                any Seam component. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> A <code class="literal">&lt;decision&gt;</code> node branches the pageflow, and
                                determines the next node to execute by evaluating a JSF EL expression. </p></td></tr></table></div></div></div></div><br class="example-break"/><p> Now that we have seen the pageflow, it is very, very easy to understand the rest of the application! </p><p> Here is the main page of the application, <code class="literal">numberGuess.xhtml</code>: </p><div class="example"><a id="d0e1671"/><p class="title"><b>Example 1.21. numberGuess.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Guess&nbsp;a&nbsp;number...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;niceforms.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">language</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javascript&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;niceforms.js&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_comment">&lt;!--&nbsp;--&gt;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Guess&nbsp;a&nbsp;number...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;NumberGuessMain&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;niceform&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;messages&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">globalOnly</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Higher&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Higher!&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.randomNumber&nbsp;gt&nbsp;numberGuess.currentGuess}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Lower&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Lower!&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.randomNumber&nbsp;lt&nbsp;numberGuess.currentGuess}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;thinking&nbsp;of&nbsp;a&nbsp;number&nbsp;between&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Smallest&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.smallest}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;and</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Biggest&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.biggest}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">.&nbsp;You&nbsp;have</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;RemainingGuesses&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.remainingGuesses}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;guesses.</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Your&nbsp;guess:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;inputGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.currentGuess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">size</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;3&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{(numberGuess.biggest-numberGuess.smallest)&nbsp;gt&nbsp;20}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:validateLongRange</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">maximum</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.biggest}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">minimum</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.smallest}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;selectGuessMenu&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.currentGuess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{(numberGuess.biggest-numberGuess.smallest)&nbsp;le&nbsp;20&nbsp;and&nbsp;(numberGuess.biggest-numberGuess.smallest)&nbsp;gt&nbsp;4}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PossibilitiesMenuItems&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.possibilities}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;i&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{i}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneRadio</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;selectGuessRadio&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.currentGuess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{(numberGuess.biggest-numberGuess.smallest)&nbsp;le&nbsp;4}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PossibilitiesRadioItems&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.possibilities}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;i&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{i}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneRadio</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;GuessButton&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Guess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;guess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CheatButton&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Cheat&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cheat&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;GiveUpButton&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Give&nbsp;up&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;giveup&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;message&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;inputGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;color:&nbsp;red&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> Notice how the command button names the <code class="literal">guess</code> transition instead of calling an
                action directly. </p><p> The <code class="literal">win.xhtml</code> page is predictable: </p><div class="example"><a id="d0e1686"/><p class="title"><b>Example 1.22. win.xhtml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;won!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;niceforms.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;won!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes,&nbsp;the&nbsp;answer&nbsp;was&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CurrentGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.currentGuess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">.</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;took&nbsp;you&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;GuessCount&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.guessCount}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;guesses.</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CheatedMessage&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;But&nbsp;you&nbsp;cheated,&nbsp;so&nbsp;it&nbsp;doesn't&nbsp;count!&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.cheat}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Would&nbsp;you&nbsp;like&nbsp;to&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;numberGuess.seam&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">play&nbsp;again</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">?</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p>The <code class="literal">lose.xhtml</code> looks roughly the same, so we'll skip over it.</p><p>Finally, we'll look at the actual application code: </p><div class="example"><a id="d0e1699"/><p class="title"><b>Example 1.23. NumberGuess.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;numberGuess&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">CONVERSATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">NumberGuess</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;randomNumber</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;currentGuess</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;biggest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;smallest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;guessCount</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;maxGuesses</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;cheated</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="numberguess-create"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;begin</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;randomNumber&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Random</span><span class="java_separator">().</span><span class="java_plain">nextInt</span><span class="java_separator">(</span><span class="java_literal">100</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guessCount&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">0</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;biggest&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">100</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smallest&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCurrentGuess</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;guess</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">currentGuess&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;guess</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getCurrentGuess</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;currentGuess</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;guess</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">currentGuess</span><span class="java_operator">&gt;</span><span class="java_plain">randomNumber</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;biggest&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;currentGuess&nbsp;</span><span class="java_operator">-</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">currentGuess</span><span class="java_operator">&lt;</span><span class="java_plain">randomNumber</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smallest&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;currentGuess&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guessCount&nbsp;</span><span class="java_operator">++</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isCorrectGuess</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;currentGuess</span><span class="java_operator">==</span><span class="java_plain">randomNumber</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getBiggest</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;biggest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getSmallest</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;smallest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getGuessCount</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;guessCount</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isLastGuess</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;guessCount</span><span class="java_operator">==</span><span class="java_plain">maxGuesses</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getRemainingGuesses</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;maxGuesses</span><span class="java_operator">-</span><span class="java_plain">guessCount</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setMaxGuesses</span><span class="java_separator">(</span><span class="java_type">int</span><span class="java_plain">&nbsp;maxGuesses</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">maxGuesses&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;maxGuesses</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getMaxGuesses</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;maxGuesses</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getRandomNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;randomNumber</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;cheated</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cheated&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isCheat</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;cheated</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Integer</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getPossibilities</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Integer</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;result&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_operator">&lt;</span><span class="java_type">Integer</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_separator">(</span><span class="java_type">int</span><span class="java_plain">&nbsp;i</span><span class="java_operator">=</span><span class="java_plain">smallest</span><span class="java_separator">;</span><span class="java_plain">&nbsp;i</span><span class="java_operator">&lt;=</span><span class="java_plain">biggest</span><span class="java_separator">;</span><span class="java_plain">&nbsp;i</span><span class="java_operator">++</span><span class="java_separator">)</span><span class="java_plain">&nbsp;result</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">i</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;result</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The first time a JSF page asks for a <code class="literal">numberGuess</code> component, Seam
                                will create a new one for it, and the <code class="literal">@Create</code> method will be invoked,
                                allowing the component to initialize itself. </p></td></tr></table></div></div></div></div><br class="example-break"/><p>The <code class="literal">pages.xml</code> file starts a Seam
                <span class="emphasis"><em>conversation</em></span> (much more about that later), and specifies the
                pageflow definition to use for the conversation's page flow. 
            </p><div class="example"><a id="d0e1725"/><p class="title"><b>Example 1.24. pages.xml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pages&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pages&nbsp;http://jboss.org/schema/seam/pages-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">begin-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">join</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pageflow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;numberGuess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><p> As you can see, this Seam component is pure business logic! It doesn't need to know anything at all
                about the user interaction flow. This makes the component potentially more reuseable. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1732"/>1.5.2. How it works</h3></div></div></div><p>We'll step through basic flow of the application.  The game starts with the 
                <code class="literal">numberGuess.xhtml</code> view.  When the page is first displayed, the 
                <code class="literal">pages.xml</code> configuration causes conversation to begin and associates
                the <code class="literal">numberGuess</code> pageflow 
                with that conversation.  The pageflow starts with a <code class="literal">start-page</code> tag, 
                which is a wait state, so the <code class="literal">numberGuess.xhtml</code> is rendered.  
            </p><p>The view references the <code class="literal">numberGuess</code> component, causing a new
                instance to be created and stored in the conversation.  The <code class="literal">@Create</code> method 
                is called, initializing the state of the game.  The view displays an <code class="literal">h:form</code>
                that allows the user to edit <code class="literal">#{numberGuess.currentGuess}</code>.  
            </p><p>The "Guess" button triggers the <code class="literal">guess</code> action. Seam defers to the pageflow
            to handle the action, which says that the pageflow should transition to the <code class="literal">evaluateGuess</code>
            state, first invoking <code class="literal">#{numberGuess.guess}</code>, which updates the guess count
                and highest/lowest suggestions in the <code class="literal">numberGuess</code> component.
            </p><p> The <code class="literal">evaluateGuess</code> state checks the value of <code class="literal">#{numberGuess.correctGuess}</code>
            and transitions either to the <code class="literal">win</code> or <code class="literal">evaluatingRemainingGuesses</code>
            state.  We'll assume the number was incorrect, in which case the pageflow transitions to 
            <code class="literal">evaluatingRemainingGuesses</code>.  That is also a decision state, which
                tests the <code class="literal">#{numberGuess.lastGuess}</code> state to determine whether or not the user has 
                more guesses.  If there are more guesses (<code class="literal">lastGuess</code> is <code class="literal">false</code>),
                we transition back to the original <code class="literal">displayGuess</code> state.  Finally we've
                reached a page state, so the associated page <code class="literal">/numberGuess.xhtml</code> is displayed.  
                Since the page has a redirect element, Seam sends a redirect to the user's browser, 
                starting the process over.
            </p><p>
                We won't follow the state any more except to note that if on a future request either the 
                <code class="literal">win</code> or the <code class="literal">lose</code> transition were taken, the user would 
                be taken to either the <code class="literal">/win.xhtml</code> or <code class="literal">/lose.xhtml</code>. 
                Both states specify that Seam should end the conversation, tossing away all the game state and 
                pageflow state, before redirecting the user to the
                final page.  
                
            </p><p>The numberguess example also contains Giveup and Cheat buttons.  You should be able to 
                trace the pageflow state for both actions relatively easily.  Pay particular attention
                to the <code class="literal">cheat</code> transition, which loads a sub-process to handle that flow.  
                Although it's 
                overkill for this application, it does demonstrate how complex pageflows can be broken down into
                smaller parts to make them easier to understand. 
                </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="booking"/>1.6. A complete Seam application: the Hotel Booking example</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1834"/>1.6.1. Introduction</h3></div></div></div><p> The booking application is a complete hotel room reservation system incorporating the following
                features: </p><div class="itemizedlist"><ul><li><p>User registration</p></li><li><p>Login</p></li><li><p>Logout</p></li><li><p>Set password</p></li><li><p>Hotel search</p></li><li><p>Hotel selection</p></li><li><p>Room reservation</p></li><li><p>Reservation confirmation</p></li><li><p>Existing reservation list</p></li></ul></div><div class="screenshot"><div class="mediaobject" align="center"><img src="images/booking.png" align="middle"/></div></div><p> The booking application uses JSF 2, EJB 3.0 and Seam, together with Facelets for the view. There is
                also a port of this application to JSF 2, Seam, JavaBeans and Hibernate4. </p><p> One of the things you'll notice if you play with this application for long enough is that it is
                extremely <span class="emphasis"><em>robust</em></span>. You can play with back buttons and browser refresh and opening
                multiple windows and entering nonsensical data as much as you like and you will find it very difficult
                to make the application crash. You might think that we spent weeks testing and fixing bugs to achieve
                this. Actually, this is not the case. Seam was designed to make it very straightforward to build robust
                web applications and a lot of robustness that you are probably used to having to code yourself comes
                naturally and automatically with Seam. </p><p> As you browse the sourcecode of the example application, and learn how the application works, observe
                how the declarative state management and integrated validation has been used to achieve this robustness. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1884"/>1.6.2. Overview of the booking example</h3></div></div></div><p> The project structure is identical to the previous one, to install and deploy this application,
                please refer to <a class="xref" href="#try-examples" title="1.1. Using the Seam examples">Section 1.1, “Using the Seam examples”</a>. Once you've successfully started the application, you
                can access it by pointing your browser to <a class="ulink" href="http://localhost:8080/seam-booking/">
                    <code class="literal">http://localhost:8080/seam-booking/</code>
                </a>
            </p><p>The application uses six session beans for to implement the business logic for the listed features. </p><div class="itemizedlist"><ul><li><p><code class="literal">AuthenticatorAction</code> provides the login authentication logic.</p></li><li><p><code class="literal">BookingListAction</code> retrieves existing bookings for the currently logged in user. </p></li><li><p><code class="literal">ChangePasswordAction</code> updates the password of the currently logged in user.</p></li><li><p><code class="literal">HotelBookingAction</code> implements booking and confirmation
                        functionality.  This functionality is implemented as a
                        <span class="emphasis"><em>conversation</em></span>, so this is one of the most interesting classes in the 
                        application.</p></li><li><p><code class="literal">HotelSearchingAction</code> implements the hotel search functionality. 
                    </p></li><li><p><code class="literal">RegisterAction</code> registers a new system user.</p></li></ul></div><p> Three entity beans implement the application's persistent domain model. </p><div class="itemizedlist"><ul><li><p><code class="literal">Hotel</code> is an entity bean that represent a hotel </p></li><li><p><code class="literal">Booking</code> is an entity bean that represents an existing booking </p></li><li><p><code class="literal">User</code> is an entity bean to represents a user who can make hotel bookings</p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1951"/>1.6.3. Understanding Seam conversations</h3></div></div></div><p> We encourage you browse the sourcecode at your pleasure. In this tutorial we'll concentrate upon one
                particular piece of functionality: hotel search, selection, booking and confirmation. From the point of
                view of the user, everything from selecting a hotel to confirming a booking is one continuous unit of
                work, a <span class="emphasis"><em>conversation</em></span>. Searching, however, is <span class="emphasis"><em>not</em></span> part of the
                conversation. The user can select multiple hotels from the same search results page, in different
                browser tabs. </p><p> Most web application architectures have no first class construct to represent a conversation. This
                causes enormous problems managing conversational state. Usually, Java web applications
                use a combination of several techniques.  Some state can be transfered in the URL.
                What can't is either thrown into the
                <code class="literal">HttpSession</code>  or flushed to the database after every
                request, and reconstructed from the database at the beginning of each new request. </p><p> Since the database is the least scalable tier, this often results in an utterly unacceptable lack of
                scalability. Added latency is also a problem, due to the extra traffic to and from the database on every
                request. To reduce this redundant traffic, Java applications often introduce a data (second-level) cache
                that keeps commonly accessed data between requests. This cache is necessarily inefficient, because
                invalidation is based upon an LRU policy instead of being based upon when the user has finished working
                with the data. Furthermore, because the cache is shared between many concurrent transactions, we've
                introduced a whole raft of problem's associated with keeping the cached state consistent with the
                database. </p><p> Now consider the state held in the <code class="literal">HttpSession</code>.  The HttpSession is great
                place for true session data, data that is common to all requests that the user has with the application.
                However, it's a bad place to store data related to individual series of requests.  Using the session of 
                conversational quickly breaks down when dealing with the back button and multiple windows.  
                On top of that, without careful
                programming, data in the HTTP Session can grow quite large, making the HTTP session difficult 
                to cluster.  Developing mechanisms to isolate session state associated with different concurrent
                conversations, and incorporating failsafes to ensure that conversation state is destroyed when 
                the user aborts one of the
                conversations by closing a browser window or tab is not for the faint hearted. Fortunately, with Seam,
                you don't have to worry about that.
            </p><p> Seam introduces the <span class="emphasis"><em>conversation context</em></span> as a first class construct. You can
                safely keep conversational state in this context, and be assured that it will have a well-defined
                lifecycle. Even better, you won't need to be continually pushing data back and forth between the
                application server and the database, since the conversation context is a natural cache of data that the
                user is currently working with. </p><p> In this application, we'll use the conversation context to store stateful session beans.                
                There is an ancient canard in the Java
                community that stateful session beans are a scalability killer. This may have been true in the
                early days of enterprise Java, but it is no longer true today. Modern application servers have 
                extremely
                sophisticated mechanisms for stateful session bean state replication. JBoss AS, for example, performs 
                fine-grained replication, replicating only those bean attribute values which actually
                changed. Note that all the traditional technical arguments for why stateful beans are inefficient apply
                equally to the <code class="literal">HttpSession</code>, so the practice of shifting state from business tier
                stateful session bean components to the web session to try and improve performance is unbelievably
                misguided. It is certainly possible to write unscalable applications using stateful session beans, by
                using stateful beans incorrectly, or by using them for the wrong thing. But that doesn't mean you should
                <span class="emphasis"><em>never</em></span> use them. 
                If you remain unconvinced, Seam allows the use of POJOs instead of stateful session beans.
                With Seam, the choice is yours. 
            </p><p> The booking example application shows how stateful components with different scopes can collaborate
                together to achieve complex behaviors. The main page of the booking application allows the user to
                search for hotels. The search results are kept in the Seam session scope. When the user navigates to one
                of these hotels, a conversation begins, and a conversation scoped component calls back to the session
                scoped component to retrieve the selected hotel. </p><p> The booking example also demonstrates the use of RichFaces Ajax to implement rich client behavior without
                the use of handwritten JavaScript. </p><p> The search functionality is implemented using a session-scope stateful session bean, similar to the
                one we saw in the message list example. </p><div class="example"><a id="d0e1993"/><p class="title"><b>Example 1.25. HotelSearchingAction.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="co" id="booking-stateful-annotation"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;hotelSearch&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="booking-restrict-annotation"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">@</span><span class="java_type">Restrict</span><span class="java_separator">(</span><span class="java_literal">&quot;#{identity.loggedIn}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelSearchingAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelSearching</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PersistenceContext</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;pageSize&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">10</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;page</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="booking-datamodel-annotation"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModel</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Hotel</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;hotels</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;find</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">0</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queryHotels</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;nextPage</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page</span><span class="java_operator">++</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queryHotels</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;queryHotels</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hotels&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;h&nbsp;from&nbsp;Hotel&nbsp;h&nbsp;where&nbsp;lower(h.name)&nbsp;like&nbsp;#{pattern}&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;or&nbsp;lower(h.city)&nbsp;like&nbsp;#{pattern}&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;or&nbsp;lower(h.zip)&nbsp;like&nbsp;#{pattern}&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;or&nbsp;lower(h.address)&nbsp;like&nbsp;#{pattern}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setMaxResults</span><span class="java_separator">(</span><span class="java_plain">pageSize</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setFirstResult</span><span class="java_separator">(</span><span class="java_plain">&nbsp;page&nbsp;</span><span class="java_operator">*</span><span class="java_plain">&nbsp;pageSize&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isNextPageAvailable</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;hotels</span><span class="java_operator">!=</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_operator">&amp;&amp;</span><span class="java_plain">&nbsp;hotels</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()</span><span class="java_operator">==</span><span class="java_plain">pageSize</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getPageSize</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;pageSize</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setPageSize</span><span class="java_separator">(</span><span class="java_type">int</span><span class="java_plain">&nbsp;pageSize</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;pageSize</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_plain">value</span><span class="java_operator">=</span><span class="java_literal">&quot;pattern&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope</span><span class="java_operator">=</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">EVENT</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getSearchPattern</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;searchString</span><span class="java_operator">==</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_operator">?</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;%&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_literal">'%'</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">.</span><span class="java_plain">toLowerCase</span><span class="java_separator">().</span><span class="java_plain">replace</span><span class="java_separator">(</span><span class="java_literal">'*'</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">'%'</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">'%'</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getSearchString</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setSearchString</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">searchString&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="co" id="booking-destroy-annotation"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Remove</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB standard <code class="literal">@Stateful</code> annotation identifies this class as a
                                stateful session bean. Stateful session beans are scoped to the conversation context by
                                default. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">@Restrict</code> annotation applies a security restriction to the
                                component. It restricts access to the component allowing only logged-in users. The
                                security chapter explains more about security in Seam. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <a class="link" href="#datamodel-annotation">
                                    <code class="literal">@DataModel</code>
                                </a> annotation exposes a <code class="literal">List</code> as a JSF
                                <code class="literal">ListDataModel</code>. This makes it easy to implement clickable lists for
                                search screens. In this case, the list of hotels is exposed to the page as a
                                    <code class="literal">ListDataModel</code> in the conversation variable named
                                <code class="literal">hotels</code>. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The EJB standard <code class="literal">@Remove</code> annotation specifies that a stateful
                                session bean should be removed and its state destroyed after invocation of the annotated
                                method. In Seam, all stateful session beans must define a method with no parameters marked
                                    <code class="literal">@Remove</code>. This method will be
                                called when Seam destroys the session context.</p></td></tr></table></div></div></div></div><br class="example-break"/><p> The main page of the application is a Facelets page. Let's look at the fragment which relates to
                searching for hotels: </p><div class="example"><a id="d0e2050"/><p class="title"><b>Example 1.26. main.xhtml</b></p><div class="example-contents"><div class="programlistingco"><pre class="programlisting">
&lt;div class="section"&gt;
  
    &lt;span class="errors"&gt;
       &lt;h:messages id="messages" globalOnly="true"/&gt;
    &lt;/span&gt;
    
    &lt;h1&gt;Search Hotels&lt;/h1&gt;

    &lt;h:form id="searchCriteria"&gt;
    &lt;fieldset&gt;
       &lt;h:inputText id="searchString" value="#{hotelSearch.searchString}" style="width: 165px;"&gt;
        &lt;a:ajax event="keyup" render="searchResults" listener="#{hotelSearch.find}"/&gt;
       &lt;/h:inp<span xmlns="" class="co" id="booking-support-element"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span>utText&gt;                     
       &amp;#160;
       &lt;a:commandButton id="findHotels" value="Find Hotels" actionListener="#{hotelSearch.find}"  render="searchResults"/&gt;
       &amp;#160;
       &lt;a:status id="status"&gt;
          &lt;f:facet id="StartStatus" name="start"&gt;
             &lt;<span xmlns="" class="co" id="booking-status-element"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span>h:graphicImage id="SpinnerGif" value="/img/spinner.gif"/&gt;
          &lt;/f:facet&gt;
       &lt;/a:status&gt;
       &lt;br/&gt;
       &lt;h:outputLabel id="MaximumResultsLabel" for="pageSize"&gt;Maximum results:&lt;/h:outputLabel&gt;&amp;#160;
       &lt;h:selectOneMenu id="pageSize" value="#{hotelSearch.pageSize}"&gt;
          &lt;f:selectItem id="PageSize5" itemLabel="5" itemValue="5"/&gt;
          &lt;f:selectItem id="PageSize10" itemLabel="10" itemValue="10"/&gt;
          &lt;f:selectItem id="PageSize20" itemLabel="20" itemValue="20"/&gt;
       &lt;/h:selectOneMenu&gt;
    &lt;/fieldset&gt;
    &lt;/h:form&gt;
    
&lt;/div&gt;

&lt;a:outputPanel id="searchResults"&gt;
  &lt;div class="section"&gt;
    &lt;h:outputT<span xmlns="" class="co" id="booking-outputpanel-element"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span>ext id="NoHotelsFoundMessage" value="No Hotels Found" rendered="#{hotels != null and hotels.rowCount==0}"/&gt;
    &lt;h:dataTable id="hotels" value="#{hotels}" var="hot" rendered="#{hotels.rowCount&gt;0}"&gt;
        &lt;h:column id="column1"&gt;
            &lt;f:facet id="NameFacet" name="header"&gt;Name&lt;/f:facet&gt;
            #{hot.name}
        &lt;/h:column&gt;
        &lt;h:column id="column2"&gt;
            &lt;f:facet id="AddressFacet" name="header"&gt;Address&lt;/f:facet&gt;
            #{hot.address}
        &lt;/h:column&gt;
        &lt;h:column id="column3"&gt;
            &lt;f:facet id="CityStateFacet" name="header"&gt;City, State&lt;/f:facet&gt;
            #{hot.city}, #{hot.state}, #{hot.country}
        &lt;/h:column&gt; 
        &lt;h:column id="column4"&gt;
            &lt;f:facet id="ZipFacet" name="header"&gt;Zip&lt;/f:facet&gt;
            #{hot.zip}
        &lt;/h:column&gt;
        &lt;h:column id="column5"&gt;
            &lt;f:facet id="ActionFacet" name="header"&gt;Action&lt;/f:facet&gt;
            &lt;s:link id="viewHotel" value="View Hotel" action="#{hotelBooking.selectHotel(hot)}"/&gt;
        &lt;/h:column&gt;
    &lt;/h:dataTable&gt;
    &lt;s:link id="MoreResultsLink" value="More results" action="#{hotelSearch.nextPage}" rendered="#{hotelSearch.nextPageAvailable}"/&gt;
  &lt;/div&gt;      <span xmlns="" class="co" id="booking-link-element"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span>
&lt;/a:outputPanel&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The RichFaces <code class="literal">&lt;a:ajax&gt;</code> tag allows a JSF action
                                event listener to be called by asynchronous <code class="literal">XMLHttpRequest</code> when a
                                JavaScript event like <code class="literal">onkeyup</code> occurs. Even better, the
                                    <code class="literal">render</code> attribute lets us render a fragment of the JSF page and
                                perform a partial page update when the asynchronous response is received. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The RichFaces <code class="literal">&lt;a:status&gt;</code> tag lets us display an
                                animated image while we wait for asynchronous requests to return. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The RichFaces <code class="literal">&lt;a:outputPanel&gt;</code> tag defines a region of
                                the page which can be re-rendered by an asynchronous request. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The Seam <code class="literal">&lt;s:link&gt;</code> tag lets us attach a JSF action
                                listener to an ordinary (non-JavaScript) HTML link. The advantage of this over the
                                standard JSF <code class="literal">&lt;h:commandLink&gt;</code> is that it preserves the
                                operation of "open in new window" and "open in new tab". </p><p> If you're wondering how navigation occurs,
                                you can find all the rules in <code class="literal">WEB-INF/pages.xml</code>;
                                this is discussed in <a class="xref" href="#events.pageaction.navigation" title="6.7. Navigation">Section 6.7, “Navigation”</a>. </p></td></tr></table></div></div></div></div><br class="example-break"/><p> This page displays the search results dynamically as we type, and lets us choose a hotel and pass it
                to the <code class="literal">selectHotel()</code> method of the <code class="literal">HotelBookingAction</code>, which is
                where the <span class="emphasis"><em>really</em></span> interesting stuff is going to happen. </p><p> Now let's see how the booking example application uses a conversation-scoped stateful session bean to
                achieve a natural cache of persistent data related to the conversation. The following code example is
                pretty long. But if you think of it as a list of scripted actions that implement the various steps of
                the conversation, it's understandable. Read the class from top to bottom, as if it were a story. </p><div class="example"><a id="d0e2119"/><p class="title"><b>Example 1.27. HotelBookingAction.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;hotelBooking&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Restrict</span><span class="java_separator">(</span><span class="java_literal">&quot;#{identity.loggedIn}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelBookingAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelBooking</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="booking-extendedpersistencecontext-annotation"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PersistenceContext</span><span class="java_separator">(</span><span class="java_plain">type</span><span class="java_operator">=</span><span class="java_plain">EXTENDED</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">Out</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;hotel</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="co" id="booking-out-annotation"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Booking</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_plain">&nbsp;facesMessages</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Events</span><span class="java_plain">&nbsp;events</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;bookingValid</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="booking-begin-annotation"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Begin</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;selectHotel</span><span class="java_separator">(</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;selectedHotel</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hotel&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">merge</span><span class="java_separator">(</span><span class="java_plain">selectedHotel</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;bookHotel</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Booking</span><span class="java_separator">(</span><span class="java_plain">hotel</span><span class="java_separator">,</span><span class="java_plain">&nbsp;user</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Calendar</span><span class="java_plain">&nbsp;calendar&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">setCheckinDate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">DAY_OF_MONTH</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">setCheckoutDate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setBookingDetails</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Calendar</span><span class="java_plain">&nbsp;calendar&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">DAY_OF_MONTH</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_operator">-</span><span class="java_literal">1</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">getCheckinDate</span><span class="java_separator">().</span><span class="java_plain">before</span><span class="java_separator">(</span><span class="java_plain">&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">addToControl</span><span class="java_separator">(</span><span class="java_literal">&quot;checkinDate&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Check&nbsp;in&nbsp;date&nbsp;must&nbsp;be&nbsp;a&nbsp;future&nbsp;date&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bookingValid</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_operator">!</span><span class="java_plain">booking</span><span class="java_separator">.</span><span class="java_plain">getCheckinDate</span><span class="java_separator">().</span><span class="java_plain">before</span><span class="java_separator">(</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">getCheckoutDate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">addToControl</span><span class="java_separator">(</span><span class="java_literal">&quot;checkoutDate&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;Check&nbsp;out&nbsp;date&nbsp;must&nbsp;be&nbsp;later&nbsp;than&nbsp;check&nbsp;in&nbsp;date&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bookingValid</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bookingValid</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isBookingValid</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;bookingValid</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="booking-end-annotation"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">End</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;confirm</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">persist</span><span class="java_separator">(</span><span class="java_plain">booking</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Thank&nbsp;you,&nbsp;#{user.name},&nbsp;your&nbsp;confimation&nbsp;number&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;&nbsp;for&nbsp;#{hotel.name}&nbsp;is&nbsp;#{booki&nbsp;g.id}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;New&nbsp;booking:&nbsp;#{booking.id}&nbsp;for&nbsp;#{user.username}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events</span><span class="java_separator">.</span><span class="java_plain">raiseTransactionSuccessEvent</span><span class="java_separator">(</span><span class="java_literal">&quot;bookingConfirmed&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">End</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;cancel</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="booking-dest-annotation"><img src="images/seamframework/docbook/callouts/5.png" alt="(5)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Remove</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> This bean uses an EJB3 <span class="emphasis"><em>extended persistence context</em></span>, so that any
                                entity instances remain managed for the whole lifecycle of the stateful session bean.
                            </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <a class="link" href="#out-annotation">
                                    <code class="literal">@Out</code>
                                </a> annotation declares that an attribute value is <span class="emphasis"><em>outjected</em></span> to
                                a context variable after method invocations. In this case, the context variable named
                                    <code class="literal">hotel</code> will be set to the value of the <code class="literal">hotel</code>
                                instance variable after every action listener invocation completes. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <a class="link" href="#begin-annotation" title="???TITLE???">
                                    <code class="literal">@Begin</code>
                                </a> annotation specifies that the annotated method begins a <span class="emphasis"><em>long-running
                                    conversation</em></span>, so the current conversation context will not be destroyed
                                at the end of the request. Instead, it will be reassociated with every request from the
                                current window, and destroyed either by timeout due to conversation inactivity or
                                invocation of a matching <code class="literal">@End</code> method. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <a class="link" href="#end-annotation">
                                    <code class="literal">@End</code>
                                </a> annotation specifies that the annotated method ends the current long-running
                                conversation, so the current conversation context will be destroyed at the end of the
                                request. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/5.png" alt="5" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> This EJB remove method will be called when Seam destroys the conversation context.
                                Don't forget to define this method! </p></td></tr></table></div></div></div></div><br class="example-break"/><p>
                <code class="literal">HotelBookingAction</code> contains all the action listener methods that implement selection,
                booking and booking confirmation, and holds state related to this work in its instance variables. We
                think you'll agree that this code is much cleaner and simpler than getting and setting
                    <code class="literal">HttpSession</code> attributes. </p><p> Even better, a user can have multiple isolated conversations per login session. Try it! Log in, run a
                search, and navigate to different hotel pages in multiple browser tabs. You'll be able to work on
                creating two different hotel reservations at the same time. If you leave any one conversation inactive
                for long enough, Seam will eventually time out that conversation and destroy its state. If, after ending
                a conversation, you backbutton to a page of that conversation and try to perform an action, Seam will
                detect that the conversation was already ended, and redirect you to the search page. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2194"/>1.6.4. The Seam Debug Page</h3></div></div></div><p> The WAR also includes <code class="literal">seam-debug.jar</code>.  The Seam debug page will be available
                if this jar is deployed in
                    <code class="literal">WEB-INF/lib</code>, along with the Facelets, and if you set the debug property
                of the <code class="literal">init</code> component:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jndi-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;@jndiPattern@&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">debug</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>  This page lets you browse and inspect the Seam components
                in any of the Seam contexts associated with your current login session. Just point your browser at
                    <a class="ulink" href="http://localhost:8080/seam-booking/debug.seam">
                    <code class="literal">http://localhost:8080/seam-booking/debug.seam</code>
                </a>. </p><div class="mediaobject" align="center"><img src="images/debug.png" align="middle"/></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="nestedbooking"/>1.7. Nested conversations: extending the Hotel Booking example</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2226"/>1.7.1. Introduction</h3></div></div></div><p>Long-running conversations make it simple to maintain consistency of state in an application
even in the face of multi-window operation and back-buttoning. Unfortunately, simply beginning and ending a 
long-running conversation is not always enough. Depending on the requirements of the application, inconsistencies 
between what the user's expectations and the reality of the application’s state can still result.</p><p>The nested booking application extends the features of the hotel booking application to incorporate 
the selection of rooms.  Each hotel has available rooms with descriptions for a user to select from.  This requires
the addition of a room selection page in the hotel reservation flow.</p><div class="mediaobject" align="center"><img src="images/nested-booking.png" align="middle"/></div><p>The user now has the option to select any available room to be included in the booking.  As with the
hotel booking application we saw previously, this can lead to issues with state consistency.  As with storing state
in the <code class="varname">HTTPSession</code>, if a conversation variable changes it affects all windows operating within
the same conversation context.</p><p>To demonstrate this, let’s suppose the user clones the room selection screen in a new window.  The 
user then selects the <span class="emphasis"><em>Wonderful Room</em></span> and proceeds to the confirmation screen. To see just how much
it would cost to live the high-life, the user returns to the original window, selects the <span class="emphasis"><em>Fantastic 
Suite</em></span> for booking, and again proceeds to confirmation. After reviewing the total cost, the user decides
that practicality wins out and returns to the window showing <span class="emphasis"><em>Wonderful Room</em></span> to confirm.</p><p>In this scenario, if we simply store all state in the conversation, we are not protected from 
multi-window operation within the same conversation.  Nested conversations allow us to achieve correct behavior even 
when context can vary within the same conversation.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2256"/>1.7.2. Understanding Nested Conversations</h3></div></div></div><p>Now let's see how the nested booking example extends the behavior of the hotel booking application through
use of nested conversations.  Again, we can read the class from top to bottom, as if it were a story.</p><div class="example"><a id="d0e2261"/><p class="title"><b>Example 1.28. RoomPreferenceAction.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;roomPreference&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Restrict</span><span class="java_separator">(</span><span class="java_literal">&quot;#{identity.loggedIn}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RoomPreferenceAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">RoomPreference</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;hotel</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Booking</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModel</span><span class="java_separator">(</span><span class="java_plain">value</span><span class="java_operator">=</span><span class="java_literal">&quot;availableRooms&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Room</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;availableRooms</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModelSelection</span><span class="java_separator">(</span><span class="java_plain">value</span><span class="java_operator">=</span><span class="java_literal">&quot;availableRooms&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Room</span><span class="java_plain">&nbsp;roomSelection</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value</span><span class="java_operator">=</span><span class="java_literal">&quot;roomSelection&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value</span><span class="java_operator">=</span><span class="java_literal">&quot;roomSelection&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Room</span><span class="java_plain">&nbsp;room</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;availableRooms&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="nested-booking-load-rooms"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;loadAvailableRooms</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;availableRooms&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;hotel</span><span class="java_separator">.</span><span class="java_plain">getAvailableRooms</span><span class="java_separator">(</span><span class="java_plain">booking</span><span class="java_separator">.</span><span class="java_plain">getCheckinDate</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">getCheckoutDate</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Retrieved&nbsp;#0&nbsp;available&nbsp;rooms&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;availableRooms</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;getExpectedPrice</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Retrieving&nbsp;price&nbsp;for&nbsp;room&nbsp;#0&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;roomSelection</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">getTotal</span><span class="java_separator">(</span><span class="java_plain">roomSelection</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="co" id="nested-booking-nested-conversation"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Begin</span><span class="java_separator">(</span><span class="java_plain">nested</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;selectPreference</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Room&nbsp;selected&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="nested-booking-select-preference"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">room&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">roomSelection</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;payment&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;requestConfirmation</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;all&nbsp;validations&nbsp;are&nbsp;performed&nbsp;through&nbsp;the&nbsp;s</span><span class="java_operator">:</span><span class="java_plain">validateAll</span><span class="java_separator">,</span><span class="java_plain">&nbsp;so&nbsp;checks&nbsp;are&nbsp;already</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;performed</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Request&nbsp;confirmation&nbsp;from&nbsp;user&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;confirm&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">End</span><span class="java_separator">(</span><span class="java_plain">beforeRedirect</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="nested-booking-end-annotation"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;cancel</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;ending&nbsp;conversation&quot;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;cancel&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Destroy</span><span class="java_plain">&nbsp;@</span><span class="java_type">Remove</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="varname">hotel</code> instance is injected from the conversation context.  The hotel 
                                    is loaded through an <span class="emphasis"><em>extended persistence context</em></span> so that the entity 
                                    remains managed throughout the conversation.  This allows us to lazily load the 
                                    <code class="varname">availableRooms</code> through an <code class="varname">@Factory</code> method by
                                    simply walking the association.
                                </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> When <a class="link" href="#begin-annotation" title="???TITLE???">
                                        <code class="literal">@Begin(nested=true)</code>
                                    </a> is encountered, a nested conversation is pushed onto the conversation stack.  When 
                                    executing within a nested conversation, components still have access to all outer conversation 
                                    state, but setting any values in the nested conversation’s state container does not affect 
                                    the outer conversation. In addition, nested conversations can exist concurrently stacked on the 
                                    same outer conversation, allowing independent state for each.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>The <code class="varname">roomSelection</code> is outjected to the conversation based on the 
                                    <code class="varname">@DataModelSelection</code>.  Note that because the nested conversation has an
                                    independent context, the <code class="varname">roomSelection</code> is only set into the new nested
                                    conversation.  Should the user select a different preference in another window or tab a new 
                                    nested conversation would be started.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <a class="link" href="#end-annotation">
                                        <code class="literal">@End</code>
                                    </a> annotation pops the conversation stack and resumes the outer conversation.  The
                                    <code class="varname">roomSelection</code> is destroyed along with the conversation context.</p></td></tr></table></div></div></div></div><br class="example-break"/><p>When we begin a nested conversation it is pushed onto the conversation stack. In the <code class="varname">nestedbooking</code> 
example, the conversation stack consists of the outer long-running conversation (the booking) and each of the nested conversations (room 
selections).</p><div class="example"><a id="d0e2327"/><p class="title"><b>Example 1.29. rooms.xhtml</b></p><div class="example-contents"><div class="programlistingco"><pre class="programlisting">&lt;div class="section"&gt;
  &lt;h1&gt;Room Preference&lt;/h1&gt;
&lt;/div&gt;
&lt;div class="section"&gt;
  &lt;h:form id="room_selections_form"&gt;
    &lt;div class="section"&gt;
        &lt;h:outputText styleClass="output" value="No rooms available for the dates selected: " rendered="#{availableRooms != null and availableRooms.rowCount == 0}"/&gt;
        &lt;h:outputText styleClass="output" value="Rooms available for the dates selected: " rendered="#{availableRooms != null and availableRooms.rowCount &gt; 0}"/&gt;
        &lt;h:outputText styleClass="output" value="#{booking.checkinDate}"/&gt; -
        &lt;h:outputText styleClass="output" value="#{booking.checkoutDate}"/&gt;
            
        &lt;h:dat<span xmlns="" class="co" id="nested-booking-available-rooms"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span>aTable id="rooms" value="#{availableRooms}" var="room" rendered="#{availableRooms.rowCount &amp;gt; 0}"&gt;
            &lt;h:column&gt;
              &lt;f:facet name="header"&gt;Name&lt;/f:facet&gt;
              #{room.name}
            &lt;/h:column&gt;
            &lt;h:column&gt;
              &lt;f:facet name="header"&gt;Description&lt;/f:facet&gt;
              #{room.description}
            &lt;/h:column&gt;
            &lt;h:column&gt;
              &lt;f:facet name="header"&gt;Per Night&lt;/f:facet&gt;
              &lt;h:outputText value="#{room.price}"&gt;
                &lt;f:convertNumber type="currency" currencySymbol="$"/&gt;
              &lt;/h:outputText&gt;
            &lt;/h:column&gt;
            &lt;h:column&gt;
              &lt;f:facet name="header"&gt;Action&lt;/f:facet&gt;
              <span xmlns="" class="co" id="nested-booking-selection-action"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span>&lt;h:commandLink id="selectRoomPreference" action="#{roomPreference.selectPreference}"&gt;Select&lt;/h:commandLink&gt;
            &lt;/h:column&gt;
        &lt;/h:dataTable&gt;
      &lt;/div&gt;
      &lt;div class="entry"&gt;
        &lt;div class="label"&gt;&amp;#160;&lt;/div&gt;
        &lt;div class="input"&gt;
          &lt;s:b<span xmlns="" class="co" id="nested-booking-cancel-action"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span>utton id="cancel" value="Revise Dates" view="/book.xhtml"/&gt;
        &lt;/div&gt;
      &lt;/div&gt;  
    &lt;/h:form&gt;
&lt;/div&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>When requested from EL, the <code class="varname">#{availableRooms}</code> are loaded by the <code class="varname">@Factory</code>
method defined in <code class="varname">RoomPreferenceAction</code>.  The <code class="varname">@Factory</code> method will only be executed once to load the values
into the current context as a <a class="link" href="#datamodel-annotation">
  <code class="varname">@DataModel</code>
</a> instance.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>Invoking the <code class="varname">#{roomPreference.selectPreference}</code> action results in the row being selected
and set into the <code class="varname">@DataModelSelection</code>.  This value is then outjected to the nested conversation context.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>Revising the dates simply returns to the <code class="varname">/book.xhtml</code>.  Note that we have not yet nested 
a conversation (no room preference has been selected), so the current conversation can simply be resumed.  The <code class="varname">&lt;s:button&gt;</code>
component simply propagates the current conversation when displaying the <code class="varname">/book.xhtml</code> view.</p></td></tr></table></div></div></div></div><br class="example-break"/><p>Now that we have seen how to nest a conversation, let's see how we can confirm the booking once a room has been selected.  This 
can be achieved by simply extending the behavior of the <code class="varname">HotelBookingAction</code>.</p><div class="example"><a id="d0e2386"/><p class="title"><b>Example 1.30. HotelBookingAction.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;hotelBooking&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Restrict</span><span class="java_separator">(</span><span class="java_literal">&quot;#{identity.loggedIn}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelBookingAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelBooking</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PersistenceContext</span><span class="java_separator">(</span><span class="java_plain">type</span><span class="java_operator">=</span><span class="java_plain">EXTENDED</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">Out</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;hotel</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Booking</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Room</span><span class="java_plain">&nbsp;roomSelection</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_plain">&nbsp;facesMessages</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Events</span><span class="java_plain">&nbsp;events</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Begin</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;selectHotel</span><span class="java_separator">(</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;selectedHotel</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Selected&nbsp;hotel&nbsp;#0&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;selectedHotel</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hotel&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">merge</span><span class="java_separator">(</span><span class="java_plain">selectedHotel</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;setBookingDates</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;the&nbsp;result&nbsp;will&nbsp;indicate&nbsp;whether&nbsp;or&nbsp;not&nbsp;to&nbsp;begin&nbsp;the&nbsp;nested&nbsp;conversation</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;navigation</span><span class="java_separator">.</span><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;a&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;result&nbsp;is&nbsp;returned</span><span class="java_separator">,</span><span class="java_plain">&nbsp;the&nbsp;nested</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;conversation&nbsp;will&nbsp;not&nbsp;begin</span><span class="java_separator">,</span><span class="java_plain">&nbsp;and&nbsp;the&nbsp;user&nbsp;will&nbsp;be&nbsp;returned&nbsp;to&nbsp;the&nbsp;current</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;page&nbsp;to&nbsp;fix&nbsp;validation&nbsp;issues</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;result&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Calendar</span><span class="java_plain">&nbsp;calendar&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">DAY_OF_MONTH</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_operator">-</span><span class="java_literal">1</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;validate&nbsp;what&nbsp;we&nbsp;have&nbsp;received&nbsp;from&nbsp;the&nbsp;user&nbsp;so&nbsp;far</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">getCheckinDate</span><span class="java_separator">().</span><span class="java_plain">before</span><span class="java_separator">(</span><span class="java_plain">&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">addToControl</span><span class="java_separator">(</span><span class="java_literal">&quot;checkinDate&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Check&nbsp;in&nbsp;date&nbsp;must&nbsp;be&nbsp;a&nbsp;future&nbsp;date&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_operator">!</span><span class="java_plain">booking</span><span class="java_separator">.</span><span class="java_plain">getCheckinDate</span><span class="java_separator">().</span><span class="java_plain">before</span><span class="java_separator">(</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">getCheckoutDate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">addToControl</span><span class="java_separator">(</span><span class="java_literal">&quot;checkoutDate&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Check&nbsp;out&nbsp;date&nbsp;must&nbsp;be&nbsp;later&nbsp;than&nbsp;check&nbsp;in&nbsp;date&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;rooms&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;result</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;bookHotel</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Booking</span><span class="java_separator">(</span><span class="java_plain">hotel</span><span class="java_separator">,</span><span class="java_plain">&nbsp;user</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Calendar</span><span class="java_plain">&nbsp;calendar&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">setCheckinDate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">DAY_OF_MONTH</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">setCheckoutDate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;calendar</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">End</span><span class="java_separator">(</span><span class="java_plain">root</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="nested-booking-end-root"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;confirm</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;on&nbsp;confirmation&nbsp;we&nbsp;set&nbsp;the&nbsp;room&nbsp;preference&nbsp;in&nbsp;the&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">&nbsp;&nbsp;the&nbsp;room&nbsp;preference</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;will&nbsp;be&nbsp;injected&nbsp;based&nbsp;on&nbsp;the&nbsp;nested&nbsp;conversation&nbsp;we&nbsp;are&nbsp;in</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">setRoomPreference</span><span class="java_separator">(</span><span class="java_plain">roomSelection</span><span class="java_separator">);</span>
</span>       <span class="co" id="nested-booking-confirm"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">persist</span><span class="java_separator">(</span><span class="java_plain">booking</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Thank&nbsp;you,&nbsp;#{user.name},&nbsp;your&nbsp;confimation&nbsp;number&nbsp;for&nbsp;#{hotel.name}&nbsp;is&nbsp;#{booking.id}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;New&nbsp;booking:&nbsp;#{booking.id}&nbsp;for&nbsp;#{user.username}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events</span><span class="java_separator">.</span><span class="java_plain">raiseTransactionSuccessEvent</span><span class="java_separator">(</span><span class="java_literal">&quot;bookingConfirmed&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="nested-booking-cancel"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">End</span><span class="java_separator">(</span><span class="java_plain">root</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">,</span><span class="java_plain">&nbsp;beforeRedirect</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;cancel</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Destroy</span><span class="java_plain">&nbsp;@</span><span class="java_type">Remove</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>Annotating an action with  <a class="link" href="#end-annotation">
                                <code class="varname">@End(root=true)</code> 
                            </a> ends the root conversation which effectively destroys the entire conversation stack.  
                            When any conversation is ended, its nested conversations are ended as well.  As the root is 
                            the conversation that started it all, this is a simple way to destroy and release all state 
                            associated with a workspace once the booking is confirmed.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>The <code class="varname">roomSelection</code> is only associated with the <code class="varname">booking</code>
                            on user confirmation.  While outjecting values to the nested conversation context will not
                            impact the outer conversation, any objects injected from the outer conversation are injected
                            by reference.  This means that any changing to these objects will be reflected in the parent 
                            conversation as well as other concurrent nested conversations.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p>By simply annotating the cancellation action with  <a class="link" href="#end-annotation">
                                <code class="varname">@End(root=true, beforeRedirect=true)</code> 
                            </a>
                            we can easily destroy and release all state associated with the 
                            workspace prior to redirecting the user back to the hotel selection view.</p></td></tr></table></div></div></div></div><br class="example-break"/><p>Feel free to deploy the application, open many windows or tabs and attempt combinations of various hotels with
various room preferences.  Confirming a booking always results in the correct hotel and room preference thanks to the nested 
conversation model.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="dvdstore"/>1.8. A complete application featuring Seam and jBPM: the DVD Store example</h2></div></div></div><p> The DVD Store demo application shows the practical usage of jBPM for both task management and pageflow. </p><p> The user screens take advantage of a jPDL pageflow to implement searching and shopping cart
            functionality. </p><div class="screenshot"><div class="mediaobject" align="center"><img src="images/dvdsearch.png" align="middle"/></div></div><p> The administration screens take use jBPM to manage the approval and shipping cycle for orders. The
            business process may even be changed dynamically, by selecting a different process definition! </p><div class="screenshot"><div class="mediaobject" align="center"><img src="images/dvdtasks.png" align="middle"/></div></div><p>The Seam DVD Store demo can be run from <code class="literal">dvdstore</code> directory,
        just like the other demo applications.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="blog"/>1.9. Bookmarkable URLs with the Blog example</h2></div></div></div><p> Seam makes it very easy to implement applications which keep state on the server-side. However,
            server-side state is not always appropriate, especially in for functionality that serves up
            <span class="emphasis"><em>content</em></span>. For this kind of problem we often want to keep
            application state in the URL so that any page can be accessed at any time through
            a bookmark.  The blog example shows how to a implement an 
            application that supports bookmarking throughout, even on the search results page. This
            example
            demonstrates how Seam can manage application state in the URL as well as how Seam can rewrite 
            those URLs to be even
        
        </p><div class="screenshot"><div class="mediaobject" align="center"><img src="images/blog.png" align="middle"/></div></div><p> The Blog example demonstrates the use of "pull"-style MVC, where instead of using action listener methods
            to retrieve data and prepare the data for the view, the view pulls data from components as it is being
            rendered. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2475"/>1.9.1. Using "pull"-style MVC</h3></div></div></div><p> This snippet from the <code class="literal">index.xhtml</code> facelets page displays a list of recent blog
                entries: </p><div class="example"><a id="d0e2483"/><p class="title"><b>Example 1.31. </b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.recentBlogEntries}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntry&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rows</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;3&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{blogEntry.title}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:formattedText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.excerpt==null&nbsp;?&nbsp;blogEntry.body&nbsp;:&nbsp;blogEntry.excerpt}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.excerpt!=null}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">propagation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;none&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Read&nbsp;more...&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntryId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Posted&nbsp;on&amp;#160;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.date}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">timeZone</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.timeZone}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">locale</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.locale}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;both&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">]</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;#160;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">propagation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;none&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;[Link]&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntryId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> If we navigate to this page from a bookmark, how does the <code class="literal">#{blog.recentBlogEntries}</code>
                data used by the <code class="literal">&lt;h:dataTable&gt;</code> actually get initialized? 
                The <code class="literal">Blog</code> is retrieved lazily — "pulled" — when needed, by a Seam
                component named <code class="literal">blog</code>. This is the opposite flow of control to what is used in
                traditional action-based web frameworks like Struts. </p><div class="example"><a id="d0e2501"/><p class="title"><b>Example 1.32. </b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;blog&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">STATELESS</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">AutoCreate</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">BlogService</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="blog-seampc"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="co" id="blog-unwrap"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Unwrap</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Blog</span><span class="java_plain">&nbsp;getBlog</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Blog</span><span class="java_separator">)</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;distinct&nbsp;b&nbsp;from&nbsp;Blog&nbsp;b&nbsp;left&nbsp;join&nbsp;fetch&nbsp;b.blogEntries&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setHint</span><span class="java_separator">(</span><span class="java_literal">&quot;org.hibernate.cacheable&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getSingleResult</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> This component uses a <span class="emphasis"><em>seam-managed persistence context</em></span>. Unlike
                                the other examples we've seen, this persistence context is managed by Seam, instead of
                                by the EJB3 container. The persistence context spans the entire web request, allowing us
                                to avoid any exceptions that occur when accessing unfetched associations in the view.
                            </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The <code class="literal">@Unwrap</code> annotation tells Seam to provide the return value of
                                the method — the <code class="literal">Blog</code> — instead of the actual
                                    <code class="literal">BlogService</code> component to clients. This is the Seam
                                    <span class="emphasis"><em>manager component pattern</em></span>. </p></td></tr></table></div></div></div></div><br class="example-break"/><p> This is good so far, but what about bookmarking the result of form submissions, such as a search
                results page? </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2534"/>1.9.2. Bookmarkable search results page</h3></div></div></div><p> The blog example has a tiny form in the top right of each page that allows the user to search for
                blog entries. This is defined in a file, <code class="literal">menu.xhtml</code>, included by the facelets
                template, <code class="literal">template.xhtml</code>: </p><div class="example"><a id="d0e2545"/><p class="title"><b>Example 1.33. </b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;search&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{searchAction.searchPattern}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Search&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> To implement a bookmarkable search results page, we need to perform a browser redirect after
                processing the search form submission. Because we used the JSF view id as the action outcome, Seam
                automatically redirects to the view id when the form is submitted. Alternatively, we could have defined
                a navigation rule like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">searchResults</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/search.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p> Then the form would have looked like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;search&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{searchAction.searchPattern}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Search&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;searchResults&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> But when we redirect, we need to include the values submitted with the form
                in the URL to get a bookmarkable URL like
                <code class="literal">http://localhost:8080/seam-blog/search/</code>. JSF does not provide
                an easy way to do this, but Seam does. We use two Seam features
                to accomplish this: <span class="emphasis"><em>page parameters</em></span> and <span class="emphasis"><em>URL rewriting</em></span>.
                Both are defined in <code class="literal">WEB-INF/pages.xml</code>: </p><div class="example"><a id="d0e2571"/><p class="title"><b>Example 1.34. </b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search/{searchPattern}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;searchPattern&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{searchService.searchPattern}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p>
                The page parameter instructs Seam to link the request parameter named <code class="literal">searchPattern</code>
                to the value of <code class="literal">#{searchService.searchPattern}</code>, both whenever a request for 
                the Search page comes in and whenever a link to the search page is generated. Seam
                takes responsibility for maintaining the link between URL state and application state, and you,
                the developer, don't have to worry about it.</p><p>Without URL rewriting, the URL for a search on the term <code class="literal">book</code>
                would be <code class="literal">http://localhost:8080/seam-blog/seam/search.xhtml?searchPattern=book</code>.
                This is nice, but Seam can make the URL even simpler using a rewrite rule.  The first
                rewrite rule, for the pattern <code class="literal">/search/{searchPattern}</code>, says that 
                any time we have a URL for search.xhtml with a searchPattern request parameter, we can 
                fold that URL into the simpler URL.  So,the URL we saw earlier, 
                <code class="literal">http://localhost:8080/seam-blog/seam/search.xhtml?searchPattern=book</code> 
                can be written instead as <code class="literal">http://localhost:8080/seam-blog/search/book</code>.
            </p><p>Just like with page parameters, URL rewriting is bi-directional.  That means that Seam 
                forwards requests for the simpler URL to the right view, and it also automatically generates
                the simpler view for you.  You never need to worry about constructing URLs.  It's 
                all handled transparently behind the scenes.  The only requirement is that to use URL rewriting, 
                the rewrite filter needs to be enabled in <code class="literal">components.xml</code>.         
                </p><pre class="programlisting">&lt;web:rewrite-filter view-mapping="/seam/*" /&gt;</pre><p> The redirect takes us to the <code class="literal">search.xhtml</code> page: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{searchResults}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">propagation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;none&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.title}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntryId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posted&nbsp;on&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.date}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">timeZone</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.timeZone}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">locale</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.locale}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;both&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Which again uses "pull"-style MVC to retrieve the actual search results using 
            Hibernate Search.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;searchService&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">SearchService</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextEntityManager</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchPattern</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;searchResults&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">BlogEntry</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getSearchResults</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">searchPattern</span><span class="java_operator">==</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_operator">||</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;&quot;</span><span class="java_separator">.</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_plain">searchPattern</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchPattern&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;be&nbsp;from&nbsp;BlogEntry&nbsp;be&nbsp;order&nbsp;by&nbsp;date&nbsp;desc&quot;</span><span class="java_separator">).</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Float</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;boostPerField&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">HashMap</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Float</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boostPerField</span><span class="java_separator">.</span><span class="java_plain">put</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;title&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">4f</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boostPerField</span><span class="java_separator">.</span><span class="java_plain">put</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;body&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">1f</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;productFields&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_literal">&quot;title&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;body&quot;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">QueryParser</span><span class="java_plain">&nbsp;parser&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">MultiFieldQueryParser</span><span class="java_separator">(</span><span class="java_plain">productFields</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">StandardAnalyzer</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;boostPerField</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser</span><span class="java_separator">.</span><span class="java_plain">setAllowLeadingWildcard</span><span class="java_separator">(</span><span class="java_literal">true</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">apache</span><span class="java_separator">.</span><span class="java_plain">lucene</span><span class="java_separator">.</span><span class="java_plain">search</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;luceneQuery</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;luceneQuery&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;parser</span><span class="java_separator">.</span><span class="java_plain">parse</span><span class="java_separator">(</span><span class="java_plain">searchPattern</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">ParseException</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">createFullTextQuery</span><span class="java_separator">(</span><span class="java_plain">luceneQuery</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">BlogEntry</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setMaxResults</span><span class="java_separator">(</span><span class="java_literal">100</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getSearchPattern</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;searchPattern</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setSearchPattern</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchPattern</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">searchPattern&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;searchPattern</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span>
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2618"/>1.9.3. Using "push"-style MVC in a RESTful application</h3></div></div></div><p> Very occasionally, it makes more sense to use push-style MVC for processing RESTful pages, and so
                Seam provides the notion of a <span class="emphasis"><em>page action</em></span>. The Blog example uses a page action for
                the blog entry page, <code class="literal">entry.xhtml</code>. Note that this is a little bit contrived, it would
                have been easier to use pull-style MVC here as well. </p><p> The <code class="literal">entryAction</code> component works much like an action class in a traditional
                push-MVC action-oriented framework like Struts: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;entryAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">STATELESS</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryAction</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Blog</span><span class="java_plain">&nbsp;blog</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span><span class="java_plain">&nbsp;</span><span class="java_type">BlogEntry</span><span class="java_plain">&nbsp;blogEntry</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;loadBlogEntry</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryNotFoundException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blogEntry&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;blog</span><span class="java_separator">.</span><span class="java_plain">getBlogEntry</span><span class="java_separator">(</span><span class="java_plain">id</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">blogEntry</span><span class="java_operator">==</span><span class="java_literal">null</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryNotFoundException</span><span class="java_separator">(</span><span class="java_plain">id</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> Page actions are also declared in <code class="literal">pages.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry/{blogEntryId}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntryId&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entryAction.loadBlogEntry(blogEntry.id)}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/post.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">login-required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/post&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{postAction.post}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{validation.succeeded}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{postAction.invalid}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{validation.failed}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{postAction.post}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/index.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.hitCount.hit}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Notice that the example is using page actions for post validation 
                and the pageview counter. Also notice the use of a parameter in the page action method
                binding. This was not a standard feature of JSF EL in Java EE 5, but now it is and works
                like Seam lets you use it before, not just for page actions but also in JSF method bindings.
           </p><p> When the <code class="literal">entry.xhtml</code> page is requested, Seam first binds the page parameter
                    <code class="literal">blogEntryId</code> to the model.  Keep in mind that because of the URL rewriting,
                the blogEntryId parameter name won't show up in the URL.  Seam then runs the page action, which retrieves 
                the needed
                data — the <code class="literal">blogEntry</code> — and places it in the Seam event context.
                Finally, the following is rendered: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{blogEntry.title}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:formattedText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.body}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;[Posted&nbsp;on&amp;#160;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.date}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">timeZone</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.timeZone}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">locale</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.locale}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;both&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">]</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> If the blog entry is not found in the database, the <code class="literal">EntryNotFoundException</code>
                exception is thrown. We want this exception to result in a 404 error, not a 505, so we annotate the
                exception class: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">ApplicationException</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">rollback</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">HttpError</span><span class="java_separator">(</span><span class="java_plain">errorCode</span><span class="java_operator">=</span><span class="java_type">HttpServletResponse</span><span class="java_separator">.</span><span class="java_plain">SC_NOT_FOUND</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryNotFoundException</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">EntryNotFoundException</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">super</span><span class="java_separator">(</span><span class="java_literal">&quot;entry&nbsp;not&nbsp;found:&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;id</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> An alternative implementation of the example does not use the parameter in the method binding: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;entryAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">STATELESS</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryAction</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Blog</span><span class="java_plain">&nbsp;blog</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;@</span><span class="java_type">Out</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">BlogEntry</span><span class="java_plain">&nbsp;blogEntry</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;loadBlogEntry</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryNotFoundException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blogEntry&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;blog</span><span class="java_separator">.</span><span class="java_plain">getBlogEntry</span><span class="java_separator">(</span><span class="java_plain">&nbsp;blogEntry</span><span class="java_separator">.</span><span class="java_plain">getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">blogEntry</span><span class="java_operator">==</span><span class="java_literal">null</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">EntryNotFoundException</span><span class="java_separator">(</span><span class="java_plain">id</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/entry.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entryAction.loadBlogEntry}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntryId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> It is a matter of taste which implementation you prefer. </p><p>
                The blog demo also demonstrates very simple password authentication, posting to
                the blog, page fragment caching and atom feed generation.  
            </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="gettingstarted"/>Chapter 2. Getting started with Seam, using seam-gen</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e2691">2.1. Before you start</a></span></dt><dt><span class="section"><a href="#d0e2716">2.2. Setting up a new project</a></span></dt><dt><span class="section"><a href="#d0e2825">2.3. Creating a new action</a></span></dt><dt><span class="section"><a href="#d0e2874">2.4. Creating a form with an action</a></span></dt><dt><span class="section"><a href="#d0e2888">2.5. Generating an application from an existing database</a></span></dt><dt><span class="section"><a href="#d0e2903">2.6. Generating an application from existing JPA/EJB3 entities</a></span></dt><dt><span class="section"><a href="#d0e2918">2.7. Deploying the application as an EAR</a></span></dt><dt><span class="section"><a href="#gettingstarted-hotdeployment">2.8. Seam and incremental hot deployment</a></span></dt></dl></div><p>The Seam distribution includes a command line utility that makes it really easy to set up an Eclipse project,
        generate some simple Seam skeleton code, and reverse engineer an application from a preexisting database.</p><p>This is the easy way to get your feet wet with Seam, and gives you some ammunition for next time you find
        yourself trapped in an elevator with one of those tedious Ruby guys ranting about how great and wonderful his
        new toy is for building totally trivial applications that put things in databases.</p><p>In this release, seam-gen works best for people with JBoss AS. You can use the generated project with other
        J2EE or Java EE 5 application servers by making a few manual changes to the project configuration.</p><p>You <span class="emphasis"><em>can</em></span> use seam-gen without Eclipse, but in this tutorial, we want to show you how to
        use it in conjunction with Eclipse for debugging and integration testing. If you don't want to install Eclipse,
        you can still follow along with this tutorial—all steps can be performed from the command line.</p><p>seam-gen is basically just an intricate Ant script wrapped around Hibernate Tools, together with some templates.
        That makes it easy to customize if you need to.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2691"/>2.1. Before you start</h2></div></div></div><p>Make sure you have JDK 6 (see <a class="xref" href="#jdk_dependencies" title="38.1. JDK Dependencies">Section 38.1, “JDK Dependencies”</a> for details), JBoss AS 7.1.1 and Maven 3.x, along with recent versions of
            Eclipse, the JBoss IDE plugin for Eclipse correctly installed before
            starting. Add your JBoss installation to the JBoss Server View in Eclipse. Start JBoss in debug mode.
            Finally, start a command prompt in the directory where you unzipped the Seam distribution.</p><p>JBoss has sophisticated support for hot re-deployment of WARs and EARs. Unfortunately, due to bugs in the
            JVM, repeated redeployment of an EAR—which is common during development—eventually causes the JVM to run out
            of perm gen space. For this reason, we recommend running JBoss in a JVM with a large perm gen space at
            development time. If you're running JBoss from JBoss IDE, you can configure this in the server launch
            configuration, under "VM arguments". We suggest the following values:</p><pre class="programlisting">-Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m</pre><p>If you don't have so much memory available, the following is our minimum recommendation:</p><pre class="programlisting">-Xms256m -Xmx512m -XX:PermSize=128m -XX:MaxPermSize=256m</pre><p>If you're running JBoss from the command line, you can configure the JVM options in
            <code class="literal">bin/standalone.conf</code>.</p><p>If you don't want to bother with this stuff now, you don't have to—come back to it later, when you get
            your first <code class="literal">OutOfMemoryException</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2716"/>2.2. Setting up a new project</h2></div></div></div><p>The first thing we need to do is configure seam-gen for your environment: JBoss AS installation directory,
            project workspace, and database connection. It's easy, just type:</p><pre class="programlisting">cd jboss-seam-2.3.0
seam setup</pre><p>And you will be prompted for the needed information:</p><pre class="programlisting">~/workspace/jboss-seam$ ./seam setup
Buildfile: build.xml

init:

setup:
     [echo] Welcome to seam-gen :-)
    [input] Enter your project workspace (the directory that contains your Seam projects) [C:/Projects] [C:/Projects]
/Users/pmuir/workspace
    [input] Enter your JBoss AS home directory [C:/Program Files/jboss-as-7.1.1.Final] [C:/Program Files/jboss-as-7.1.1.Final]
/Applications/jboss-as-7.1.1.Final
    [input] Enter the project name [myproject] [myproject]
helloworld
     [echo] Accepted project name as: helloworld
    [input] Select a RichFaces skin [blueSky] ([blueSky], emeraldTown, ruby, classic, japanCherry, wine, deepMarine, DEFAULT, plain)

    [input] Is this project deployed as an EAR (with EJB components) or a WAR (with no EJB support) [ear]  ([ear], war, )

    [input] Enter the Java package name for your session beans [com.mydomain.helloworld] [com.mydomain.helloworld]
org.jboss.helloworld
    [input] Enter the Java package name for your entity beans [org.jboss.helloworld] [org.jboss.helloworld]

    [input] Enter the Java package name for your test cases [org.jboss.helloworld.test] [org.jboss.helloworld.test]

    [input] What kind of database are you using? [h2]  ([h2], hsql, mysql, oracle, postgres, mssql, db2, sybase, enterprisedb)
mysql
    [input] Enter the Hibernate dialect for your database [org.hibernate.dialect.MySQLDialect] [org.hibernate.dialect.MySQLDialect]

    [input] Enter the filesystem path to the JDBC driver jar [lib/hsqldb.jar] [lib/hsqldb.jar]
/Users/pmuir/java/mysql.jar
    [input] Enter JDBC driver class for your database [com.mysql.jdbc.Driver] [com.mysql.jdbc.Driver]

    [input] Enter the JDBC URL for your database [jdbc:mysql:///test] [jdbc:mysql:///test]
jdbc:mysql:///helloworld
    [input] Enter database username [sa] [sa]
pmuir
    [input] Enter database password [] []

    [input] skipping input as property hibernate.default_schema.new has already been set.
    [input] Enter the database catalog name (it is OK to leave this blank) [] []

    [input] Are you working with tables that already exist in the database? [n]  (y, [n], )
y
    [input] Do you want to drop and recreate the database tables and data in import.sql each time you deploy? [n]  (y, [n], )
n    

[propertyfile] Creating new property file: /Users/pmuir/workspace/jboss-seam/seam-gen/build.properties
     [echo] Installing JDBC driver jar to JBoss server
     [echo] Type 'seam create-project' to create the new project

BUILD SUCCESSFUL
Total time: 1 minute 32 seconds
~/workspace/jboss-seam $ </pre><p>The tool provides sensible defaults, which you can accept by just pressing enter at the prompt.</p><p>The most important choice you need to make is between EAR deployment and WAR deployment of your project.
            EAR projects support EJB 3.0 and require Java EE 5. WAR projects do not support EJB 3.0, but may be deployed
            to a J2EE environment. The packaging of a WAR is also simpler to understand. If you installed an EJB3-ready
            application server like JBoss, choose <code class="literal">ear</code>. Otherwise, choose <code class="literal">war</code>.
            We'll assume that you've chosen an EAR deployment for the rest of the tutorial, but you can follow exactly
            the same steps for a WAR deployment.</p><p>If you are working with an existing data model, make sure you tell seam-gen that the tables already exist
            in the database.</p><p>The settings are stored in <code class="literal">seam-gen/build.properties</code>, but you can also modify them
            simply by running <code class="literal">seam setup</code> a second time.</p><p>Now we can create a new project in our Eclipse workspace directory, by typing:</p><pre class="programlisting">seam new-project</pre><pre class="programlisting">C:\Projects\jboss-seam&gt;seam new-project
Buildfile: build.xml

...

new-project:
     [echo] A new Seam project named 'helloworld' was created in the C:\Projects directory
     [echo] Type 'seam explode' and go to http://localhost:8080/helloworld
     [echo] Eclipse Users: Add the project into Eclipse using File &gt; New &gt; Project and select General &gt; Project (not Java Project)
     [echo] NetBeans Users: Open the project in NetBeans

BUILD SUCCESSFUL
Total time: 7 seconds
C:\Projects\jboss-seam&gt;</pre><p>This copies the Seam jars, dependent jars and the JDBC driver jar to a new Eclipse project, and generates
            all needed resources and configuration files, a facelets template file and stylesheet, along with Eclipse
            metadata and an Ant build script. The Eclipse project will be automatically deployed to an exploded
            directory structure in JBoss AS as soon as you add the project using <code class="literal">New -&gt; Project...
                -&gt; General -&gt; Project -&gt; Next</code>, typing the <code class="literal">Project name</code>
                (<code class="literal">helloworld</code> in this case), and then clicking <code class="literal">Finish</code>. Do not select
                <code class="literal">Java Project</code> from the New Project wizard.</p><p>If your default JDK in Eclipse is not a Java SE 6 JDK, you will need to select a Java SE 6
            compliant JDK using <code class="literal">Project -&gt; Properties -&gt; Java Compiler</code>.</p><p>Alternatively, you can deploy the project from outside Eclipse by typing <code class="literal">seam explode</code>.</p><p>Go to <code class="literal">http://localhost:8080/helloworld</code> to see a welcome page. This is a facelets page,
                <code class="literal">view/home.xhtml</code>, using the template <code class="literal">view/layout/template.xhtml</code>.
            You can edit this page, or the template, in Eclipse, and see the results <span class="emphasis"><em>immediately</em></span>,
            by clicking refresh in your browser.</p><p>Don't get scared by the XML configuration documents that were generated into the project directory. They
            are mostly standard Java EE stuff, the stuff you need to create once and then never look at again, and they
            are 90% the same between all Seam projects. (They are so easy to write that even seam-gen can do it.)</p><p>The generated project includes three database and persistence configurations. The
            <code class="literal">persistence-test.xml</code> and
            <code class="literal">import-test.sql</code> files are used when running the TestNG unit tests against HSQLDB. The
            database schema and the test data in <code class="literal">import-test.sql</code> is always exported to the database
            before running tests. The <code class="literal">myproject-dev-ds.xml</code>, <code class="literal">persistence-dev.xml</code>and
                <code class="literal">import-dev.sql</code> files are for use when deploying the application to your development
            database. The schema might be exported automatically at deployment, depending upon whether you told seam-gen
            that you are working with an existing database. The <code class="literal">myproject-prod-ds.xml</code>,
                <code class="literal">persistence-prod.xml</code>and <code class="literal">import-prod.sql</code> files are for use when
            deploying the application to your production database. The schema is not exported automatically at
            deployment.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2825"/>2.3. Creating a new action</h2></div></div></div><p>If you're used to traditional action-style web frameworks, you're probably wondering how you can create a
            simple web page with a stateless action method in Java. If you type:</p><pre class="programlisting">seam new-action</pre><p>Seam will prompt for some information, and generate a new facelets page and Seam component for your
            project.</p><pre class="programlisting">C:\Projects\jboss-seam&gt;seam new-action
Buildfile: build.xml

validate-workspace:

validate-project:

action-input:
    [input] Enter the Seam component name
ping
    [input] Enter the local interface name [Ping]

    [input] Enter the bean class name [PingBean]

    [input] Enter the action method name [ping]

    [input] Enter the page name [ping]


setup-filters:

new-action:
     [echo] Creating a new stateless session bean component with an action method
     [copy] Copying 1 file to C:\Projects\helloworld\src\hot\org\jboss\helloworld
     [copy] Copying 1 file to C:\Projects\helloworld\src\hot\org\jboss\helloworld
     [copy] Copying 1 file to C:\Projects\helloworld\src\hot\org\jboss\helloworld\test
     [copy] Copying 1 file to C:\Projects\helloworld\src\hot\org\jboss\helloworld\test
     [copy] Copying 1 file to C:\Projects\helloworld\view
     [echo] Type 'seam restart' and go to http://localhost:8080/helloworld/ping.seam

BUILD SUCCESSFUL
Total time: 13 seconds
C:\Projects\jboss-seam&gt;</pre><p>Because we've added a new Seam component, we need to restart the exploded directory deployment. You can do
            this by typing <code class="literal">seam restart</code>, or by running the <code class="literal">restart</code> target in the
            generated project <code class="literal">build.xml</code> file from inside Eclipse. Another way to force a restart is
            to edit the file <code class="literal">resources/META-INF/application.xml</code> in Eclipse. <span class="emphasis"><em>Note that you
                do not need to restart JBoss each time you change the application.</em></span></p><p>Now go to <code class="literal">http://localhost:8080/helloworld/ping.seam</code> and click the button. You can see
            the code behind this action by looking in the project <code class="literal">src</code> directory. Put a breakpoint in
            the <code class="literal">ping()</code> method, and click the button again.</p><p>Finally, locate the <code class="literal">PingTest.xml</code> file in the test package and run the integration tests
            using the TestNG plugin for Eclipse. Alternatively, run the tests using <code class="literal">seam test</code> or the
                <code class="literal">test</code> target of the generated build.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2874"/>2.4. Creating a form with an action</h2></div></div></div><p>The next step is to create a form. Type:</p><pre class="programlisting">seam new-form</pre><pre class="programlisting">C:\Projects\jboss-seam&gt;seam new-form
Buildfile: C:\Projects\jboss-seam\seam-gen\build.xml

validate-workspace:

validate-project:

action-input:
    [input] Enter the Seam component name
hello
    [input] Enter the local interface name [Hello]

    [input] Enter the bean class name [HelloBean]

    [input] Enter the action method name [hello]

    [input] Enter the page name [hello]


setup-filters:

new-form:
     [echo] Creating a new stateful session bean component with an action method
     [copy] Copying 1 file to C:\Projects\hello\src\hot\com\hello
     [copy] Copying 1 file to C:\Projects\hello\src\hot\com\hello
     [copy] Copying 1 file to C:\Projects\hello\src\hot\com\hello\test
     [copy] Copying 1 file to C:\Projects\hello\view
     [copy] Copying 1 file to C:\Projects\hello\src\hot\com\hello\test
     [echo] Type 'seam restart' and go to http://localhost:8080/hello/hello.seam

BUILD SUCCESSFUL
Total time: 5 seconds
C:\Projects\jboss-seam&gt;</pre><p>Restart the application again, and go to <code class="literal">http://localhost:8080/helloworld/hello.seam</code>.
            Then take a look at the generated code. Run the test. Try adding some new fields to the form and Seam
            component (remember to restart the deployment each time you change the Java code).</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2888"/>2.5. Generating an application from an existing database</h2></div></div></div><p>Manually create some tables in your database. (If you need to switch to a different database, just run
                <code class="literal">seam setup</code> again.) Now type:</p><pre class="programlisting">seam generate-entities</pre><p>Restart the deployment, and go to <code class="literal">http://localhost:8080/helloworld</code>. You can browse the
            database, edit existing objects, and create new objects. If you look at the generated code, you'll probably
            be amazed how simple it is! Seam was designed so that data access code is easy to write by hand, even for
            people who don't want to cheat by using seam-gen.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2903"/>2.6. Generating an application from existing JPA/EJB3 entities</h2></div></div></div><p>Place your existing, valid entity classes inside the <code class="literal">src/main</code>. Now type</p><pre class="programlisting">seam generate-ui</pre><p>Restart the deployment, and go to <code class="literal">http://localhost:8080/helloworld</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2918"/>2.7. Deploying the application as an EAR</h2></div></div></div><p>Finally, we want to be able to deploy the application using standard Java EE 5 packaging. First, we need
            to remove the exploded directory by running <code class="literal">seam unexplode</code>. To deploy the EAR, we can
            type <code class="literal">seam deploy</code> at the command prompt, or run the <code class="literal">deploy</code> target of
            the generated project build script. You can undeploy using <code class="literal">seam undeploy</code> or the
                <code class="literal">undeploy</code> target.</p><p>By default, the application will be deployed with the <span class="emphasis"><em>dev profile</em></span>. The EAR will
            include the <code class="literal">persistence-dev.xml</code> and <code class="literal">import-dev.sql</code> files, and the
                <code class="literal">myproject-dev-ds.xml</code> file will be deployed. You can change the profile, and use the
                <span class="emphasis"><em>prod profile</em></span>, by typing</p><pre class="programlisting">seam -Dprofile=prod deploy</pre><p>You can even define new deployment profiles for your application. Just add appropriately named files to
            your project—for example, <code class="literal">persistence-staging.xml</code>, <code class="literal">import-staging.sql</code>
            and <code class="literal">myproject-staging-ds.xml</code>—and select the name of the profile using
                <code class="literal">-Dprofile=staging</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="gettingstarted-hotdeployment"/>2.8. Seam and incremental hot deployment</h2></div></div></div><p>When you deploy your Seam application as an exploded directory, you'll get some support for incremental
            hot deployment at development time. You need to enable debug mode in both Seam and Facelets, by adding this
            line to <code class="literal">components.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">debug</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Now, the following files may be redeployed without requiring a full restart of the web application:</p><div class="itemizedlist"><ul><li><p>any facelets page</p></li><li><p>any <code class="literal">pages.xml</code> file</p></li></ul></div><p>But if we want to change any Java code, we still need to do a full restart of the application. (In JBoss
         this can be handled by configuring 
         <a class="ulink" href="https://docs.jboss.org/author/display/AS7/Deployment+Scanner+configuration">deployment scanner mode</a>
        - more details how to do that are in <code class="filename">$JBOSS_HOME/standalone/deployments/README.txt</code></p><p>But if you really want a fast edit/compile/test cycle, Seam supports incremental redeployment of JavaBean
            components. To make use of this functionality, you must deploy the JavaBean components into the
                <code class="literal">WEB-INF/dev</code> directory, so that they will be loaded by a special Seam classloader,
            instead of by the WAR or EAR classloader.</p><p>You need to be aware of the following limitations:</p><div class="itemizedlist"><ul><li><p>the components must be JavaBean components, they cannot be EJB3 beans (we are working on fixing
                    this limitation)</p></li><li><p>entities can never be hot-deployed</p></li><li><p>components deployed via <code class="literal">components.xml</code> may not be hot-deployed</p></li><li><p>the hot-deployable components will not be visible to any classes deployed outside of
                        <code class="literal">WEB-INF/dev</code></p></li><li><p>Seam debug mode must be enabled and <code class="literal">jboss-seam-debug.jar</code>
                   must be in <code class="literal">WEB-INF/lib</code></p></li><li><p>You must have the Seam filter installed in web.xml</p></li><li><p>You may see errors if the system is placed under any load and debug is enabled.</p></li></ul></div><p>If you create a WAR project using seam-gen, incremental hot deployment is available out of the box for
            classes in the <code class="literal">src/hot</code> source directory. However, seam-gen does not support
            incremental hot deployment for EAR projects.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="gettingstartedwithjbosstools"/>Chapter 3. Getting started with Seam, using JBoss Tools</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e3058">3.1. Before you start</a></span></dt></dl></div><p>
      JBoss Tools is a collection of Eclipse plugins. JBoss Tools a project
      creation wizard for Seam, Content Assist for the Unified Expression
      Language (EL) in both facelets and Java code, 
      a graphical editor for Seam configuration files, support for running Seam
      integration tests from within Eclipse, and much more.
   </p><p>
      In short, if you are an Eclipse user, then you'll want JBoss Tools!
   </p><p>Please read the latest JBoss Tools documentation at 
   <a class="ulink" href="http://docs.jboss.org/tools/latest/en/seam/html_single/">http://docs.jboss.org/tools/latest/en/seam/html_single/</a>
   </p><p>
      JBoss Tools, as with seam-gen, works best with JBoss AS, but it's possible
      with a few tweaks to get your app running on other application servers.
      The changes are much like those described for seam-gen later in this
      reference manual.
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3058"/>3.1. Before you start</h2></div></div></div><p>
         Make sure you have JDK 6, JBoss AS 7.1.1.Final, Eclipse 3.7, the JBoss
         Tools plugins (at least Seam Tools, the Visual Page Editor
         and JBoss AS Tools) and the JUnit plugin for Eclipse correctly
         installed before starting.
      </p><p>
         Please see the official <a class="ulink" href="http://docs.jboss.org/tools/latest/en/GettingStartedGuide/html_single/index.html">JBoss Tools
         Getting started</a> page for the quickest way to get JBoss Tools setup
         in Eclipse.
      </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="concepts"/>Chapter 4. The contextual component model</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#d0e3084">4.1. Seam contexts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3123">4.1.1. Stateless context</a></span></dt><dt><span class="sect2"><a href="#d0e3128">4.1.2. Event context</a></span></dt><dt><span class="sect2"><a href="#d0e3135">4.1.3. Page context</a></span></dt><dt><span class="sect2"><a href="#d0e3140">4.1.4. Conversation context</a></span></dt><dt><span class="sect2"><a href="#d0e3173">4.1.5. Session context</a></span></dt><dt><span class="sect2"><a href="#d0e3180">4.1.6. Business process context</a></span></dt><dt><span class="sect2"><a href="#d0e3188">4.1.7. Application context</a></span></dt><dt><span class="sect2"><a href="#d0e3193">4.1.8. Context variables</a></span></dt><dt><span class="sect2"><a href="#d0e3217">4.1.9. Context search priority</a></span></dt><dt><span class="sect2"><a href="#concurrency">4.1.10. Concurrency model</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e3277">4.2. Seam components</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3306">4.2.1. Stateless session beans</a></span></dt><dt><span class="sect2"><a href="#d0e3328">4.2.2. Stateful session beans</a></span></dt><dt><span class="sect2"><a href="#d0e3353">4.2.3. Entity beans</a></span></dt><dt><span class="sect2"><a href="#d0e3377">4.2.4. JavaBeans</a></span></dt><dt><span class="sect2"><a href="#d0e3399">4.2.5. Message-driven beans</a></span></dt><dt><span class="sect2"><a href="#d0e3408">4.2.6. Interception</a></span></dt><dt><span class="sect2"><a href="#d0e3422">4.2.7. Component names</a></span></dt><dt><span class="sect2"><a href="#d0e3486">4.2.8. Defining the component scope</a></span></dt><dt><span class="sect2"><a href="#d0e3501">4.2.9. Components with multiple roles</a></span></dt><dt><span class="sect2"><a href="#d0e3524">4.2.10. Built-in components</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e3539">4.3. Bijection</a></span></dt><dt><span class="sect1"><a href="#d0e3642">4.4. Lifecycle methods</a></span></dt><dt><span class="sect1"><a href="#d0e3694">4.5. Conditional installation</a></span></dt><dt><span class="sect1"><a href="#d0e3780">4.6. Logging</a></span></dt><dt><span class="sect1"><a href="#d0e3828">4.7. The Mutable interface and @ReadOnly</a></span></dt><dt><span class="sect1"><a href="#d0e3881">4.8. Factory and manager components</a></span></dt></dl></div><p> 
        The two core concepts in Seam are the notion of a <span class="emphasis"><em>context</em></span> and the notion of a
        <span class="emphasis"><em>component</em></span>. Components are stateful objects, usually EJBs, and an instance of a
        component is associated with a context, and given a name in that context. <span class="emphasis"><em>Bijection</em></span>
        provides a mechanism for aliasing internal component names (instance variables) to contextual names, allowing
        component trees to be dynamically assembled, and reassembled by Seam.
    </p><p>
        Let's start by describing the contexts built in to Seam.
    </p><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3084"/>4.1. Seam contexts</h2></div></div></div><p> Seam contexts are created and destroyed by the framework. The application does not control context
            demarcation via explicit Java API calls. Context are usually implicit. In some cases, however, contexts are
            demarcated via annotations. </p><p> The basic Seam contexts are: </p><div class="itemizedlist"><ul><li><p> Stateless context </p></li><li><p> Event (i.e., request) context </p></li><li><p> Page context </p></li><li><p> Conversation context </p></li><li><p> Session context </p></li><li><p> Business process context </p></li><li><p> Application context </p></li></ul></div><p> 
            You will recognize some of these contexts from servlet and related specifications. However, two of them
            might be new to you: <span class="emphasis"><em>conversation context</em></span>, and <span class="emphasis"><em>business process
            context</em></span>. One reason state management in web applications is so fragile and error-prone is that
            the three built-in contexts (request, session and application) are not especially meaningful from the point
            of view of the business logic. A user login session, for example, is a fairly arbitrary construct in terms
            of the actual application work flow. Therefore, most Seam components are scoped to the conversation or
            business process contexts, since they are the contexts which are most meaningful in terms of the
            application.
        </p><p>
            Let's look at each context in turn.
        </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3123"/>4.1.1. Stateless context</h3></div></div></div><p>
                Components which are truly stateless (stateless session beans, primarily) always live in the stateless
                context (which is basically the absence of a context since the instance Seam resolves is not stored).
                Stateless components are not very interesting, and are arguably not very object-oriented. Nevertheless,
                they do get developed and used and are thus an important part of any Seam application.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3128"/>4.1.2. Event context</h3></div></div></div><p>
                The event context is the "narrowest" stateful context, and is a generalization of the notion of the
                web request context to cover other kinds of events. Nevertheless, the event context associated with the
                lifecycle of a JSF request is the most important example of an event context, and the one you will work
                with most often. Components associated with the event context are destroyed at the end of the request,
                but their state is available and well-defined for at least the lifecycle of the request.
            </p><p> 
                When you invoke a Seam component via RMI, or Seam Remoting, the event context is created and
                destroyed just for the invocation.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3135"/>4.1.3. Page context</h3></div></div></div><p>
                The page context allows you to associate state with a particular instance of a rendered page. You can
                initialize state in your event listener, or while actually rendering the page, and then have access to
                it from any event that originates from that page. This is especially useful for functionality like
                clickable lists, where the list is backed by changing data on the server side. The state is actually
                serialized to the client, so this construct is extremely robust with respect to multi-window operation
                and the back button.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3140"/>4.1.4. Conversation context</h3></div></div></div><p>
                The conversation context is a truly central concept in Seam. A <span class="emphasis"><em>conversation</em></span> is a
                unit of work from the point of view of the user. It might span several interactions with the user,
                several requests, and several database transactions. But to the user, a conversation solves a single
                problem. For example, "book hotel", "approve contract", "create order" are all conversations. You might
                like to think of a conversation implementing a single "use case" or "user story", but the relationship 
                is not necessarily quite exact.
            </p><p>
                A conversation holds state associated with "what the user is doing now, in this window". A single
                user may have multiple conversations in progress at any point in time, usually in multiple windows. The
                conversation context allows us to ensure that state from the different conversations does not collide
                and cause bugs.
            </p><p>
                It might take you some time to get used to thinking of applications in terms of conversations. But
                once you get used to it, we think you'll love the notion, and never be able to not think in terms of
                conversations again!
            </p><p>
                Some conversations last for just a single request. Conversations that span multiple requests must be
                demarcated using annotations provided by Seam.
            </p><p>
                Some conversations are also <span class="emphasis"><em>tasks</em></span>. A task is a conversation that is significant
                in terms of a long-running business process, and has the potential to trigger a business process state
                transition when it is successfully completed. Seam provides a special set of annotations for task
                demarcation.
            </p><p>
                Conversations may be <span class="emphasis"><em>nested</em></span>, with one conversation taking place "inside" a wider
                conversation. This is an advanced feature.
            </p><p>
                Usually, conversation state is actually held by Seam in the servlet session between requests. Seam
                implements configurable <span class="emphasis"><em>conversation timeout</em></span>, automatically destroying inactive
                conversations, and thus ensuring that the state held by a single user login session does not grow
                without bound if the user abandons conversations.
            </p><p>
                Seam serializes processing of concurrent requests that take place in the same long-running
                conversation context, in the same process.
            </p><p>
                Alternatively, Seam may be configured to keep conversational state in the client browser.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3173"/>4.1.5. Session context</h3></div></div></div><p>
                A session context holds state associated with the user login session. While there are some cases
                where it is useful to share state between several conversations, we generally frown on the use of
                session context for holding components other than global information about the logged in user.
            </p><p> 
                In a JSR-168 portal environment, the session context represents the portlet session. 
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3180"/>4.1.6. Business process context</h3></div></div></div><p> 
                The business process context holds state associated with the long running business process. This
                state is managed and made persistent by the BPM engine (JBoss jBPM). The business process spans multiple
                interactions with multiple users, so this state is shared between multiple users, but in a well-defined
                manner. The current task determines the current business process instance, and the lifecycle of the
                business process is defined externally using a <span class="emphasis"><em>process definition language</em></span>, so
                there are no special annotations for business process demarcation. 
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3188"/>4.1.7. Application context</h3></div></div></div><p> 
                The application context is the familiar servlet context from the servlet spec. Application context is
                mainly useful for holding static information such as configuration data, reference data or metamodels.
                For example, Seam stores its own configuration and metamodel in the application context. 
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3193"/>4.1.8. Context variables</h3></div></div></div><p> 
                A context defines a namespace, a set of <span class="emphasis"><em>context variables</em></span>. These work much the
                same as session or request attributes in the servlet spec. You may bind any value you like to a context
                variable, but usually we bind Seam component instances to context variables. 
            </p><p> 
                So, within a context, a component instance is identified by the context variable name (this is
                usually, but not always, the same as the component name). You may programmatically access a named
                component instance in a particular scope via the <code class="literal">Contexts</code> class, which provides
                access to several thread-bound instances of the <code class="literal">Context</code> interface: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">User</span><!-- <br/> --><span class="java_plain">&nbsp;user&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">User</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Contexts</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getSessionContext</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">get</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;user&quot;</span><!-- <br/> --><span class="java_separator">);</span></pre><p>
                You may also set or change the value associated with a name: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Contexts</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getSessionContext</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">set</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;user&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;user</span><!-- <br/> --><span class="java_separator">);</span></pre><p> 
                Usually, however, we obtain components from a context via injection, and put component instances into
                a context via outjection. 
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3217"/>4.1.9. Context search priority</h3></div></div></div><p> 
                Sometimes, as above, component instances are obtained from a particular known scope. Other times, all
                stateful scopes are searched, in <span class="emphasis"><em>priority order</em></span>. The order is as follows: 
            </p><div class="itemizedlist"><ul><li><p> Event context </p></li><li><p> Page context </p></li><li><p> Conversation context </p></li><li><p> Session context </p></li><li><p> Business process context </p></li><li><p> Application context </p></li></ul></div><p> 
                You can perform a priority search by calling <code class="literal">Contexts.lookupInStatefulContexts()</code>.
                Whenever you access a component by name from a JSF page, a priority search occurs. 
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="concurrency"/>4.1.10. Concurrency model</h3></div></div></div><p> 
                Neither the servlet nor EJB specifications define any facilities for managing concurrent requests
                originating from the same client. The servlet container simply lets all threads run concurrently and
                leaves enforcing thread safeness to application code. The EJB container allows stateless components to be
                accessed concurrently, and throws an exception if multiple threads access a stateful session bean. 
            </p><p> 
                This behavior might have been okay in old-style web applications which were based around
                fine-grained, synchronous requests. But for modern applications which make heavy use of many
                fine-grained, asynchronous (AJAX) requests, concurrency is a fact of life, and must be supported by the
                programming model. Seam weaves a concurrency management layer into its context model. 
            </p><p> 
                The Seam session and application contexts are multithreaded. Seam will allow concurrent requests in a
                context to be processed concurrently. The event and page contexts are by nature single threaded. The
                business process context is strictly speaking multi-threaded, but in practice concurrency is
                sufficiently rare that this fact may be disregarded most of the time. Finally, Seam enforces a
                <span class="emphasis"><em>single thread per conversation per process</em></span> model for the conversation context
                by serializing concurrent requests in the same long-running conversation context. 
            </p><p> 
                Since the session context is multithreaded, and often contains volatile state, session scope
                components are always protected by Seam from concurrent access so long as the Seam interceptors 
                are not disabled for that component.  If interceptors are disabled, then any thread-safety that is
                required must be implemented by the component itself. Seam serializes requests to session
                scope JavaBeans by default (and detects and breaks any deadlocks that occur). This is
                not the default behaviour for application scoped components however, since application scoped components
                do not usually hold volatile state and because synchronization at the global level is
                <span class="emphasis"><em>extremely</em></span> expensive. However, you can force a serialized threading model on any
                JavaBean component by adding the <code class="literal">@Synchronized</code> annotation. 
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Seam 2.3 removed the serialization of Stateful 
               session beans by Seam synchronization interceptor 
               because stateful session beans are serialized by EJB 3.1 
               container by default .</p></div><p> 
                This concurrency model means that AJAX clients can safely use volatile session and conversational
                state, without the need for any special work on the part of the developer.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
                    Be warned that Statefull session Beans are not serialized by Seam anymore. 
                    Serialization of Statefull session beans are controlled by EJB container, 
                    so there is no need for Seam to duplicate that. So @Synchronized annotation
                    is ignored on Statefull session beans. 
                </p></div></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3277"/>4.2. Seam components</h2></div></div></div><p> 
            Seam components are POJOs (Plain Old Java Objects). In particular, they are JavaBeans or EJB 3.0
            enterprise beans. While Seam does not require that components be EJBs and can even be used without an EJB
            3.0 compliant container, Seam was designed with EJB 3.0 in mind and includes deep integration with EJB 3.0.
            Seam supports the following <span class="emphasis"><em>component types</em></span>. 
        </p><div class="itemizedlist"><ul><li><p> EJB 3.0 stateless session beans </p></li><li><p> EJB 3.0 stateful session beans </p></li><li><p> EJB 3.0 entity beans (i.e., JPA entity classes)</p></li><li><p> JavaBeans </p></li><li><p> EJB 3.0 message-driven beans </p></li><li><p> Spring beans (see <a class="xref" href="#spring" title="Chapter 27. Spring Framework integration">Chapter 27, <i>Spring Framework integration</i></a>)</p></li></ul></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3306"/>4.2.1. Stateless session beans</h3></div></div></div><p> 
                Stateless session bean components are not able to hold state across multiple invocations. Therefore,
                they usually work by operating upon the state of other components in the various Seam contexts. They may
                be used as JSF action listeners, but cannot provide properties to JSF components for display. 
            </p><p> 
                Stateless session beans always live in the stateless context. 
            </p><p> 
                Stateless session beans can be accessed concurrently as a new instance is used for each request. 
                Assigning the instance to the request is the responsibility of the EJB3 container (normally instances
                will be allocated from a reusable pool meaning that you may find any instance variables contain data
                from previous uses of the bean). 
            </p><p> 
                Stateless session beans are the least interesting kind of Seam component. 
            </p><p>
                Seam stateless session bean components may be instantiated using <code class="literal">Component.getInstance()</code>
                or <code class="literal">@In(create=true)</code>. They should not be directly instantiated via JNDI lookup
                or the <code class="literal">new</code> operator.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3328"/>4.2.2. Stateful session beans</h3></div></div></div><p> 
                Stateful session bean components are able to hold state not only across multiple invocations of the
                bean, but also across multiple requests. Application state that does not belong in the database should
                usually be held by stateful session beans. This is a major difference between Seam and many other web
                application frameworks. Instead of sticking information about the current conversation directly in the
                <code class="literal">HttpSession</code>, you should keep it in instance variables of a stateful session bean
                that is bound to the conversation context. This allows Seam to manage the lifecycle of this state for
                you, and ensure that there are no collisions between state relating to different concurrent
                conversations. 
            </p><p> 
                Stateful session beans are often used as JSF action listener, and as backing beans that provide
                properties to JSF components for display or form submission. 
            </p><p> 
                By default, stateful session beans are bound to the conversation context. They may never be bound to
                the page or stateless contexts. 
            </p><p> 
                Concurrent requests to session-scoped stateful session beans are not serialized by Seam as long
                as EJB 3.1 has changed that. This is a difference in comparison to previous Seam 2.2.x.
                
            </p><p>
                Seam stateful session bean components may be instantiated using <code class="literal">Component.getInstance()</code>
                or <code class="literal">@In(create=true)</code>. They should not be directly instantiated via JNDI lookup
                or the <code class="literal">new</code> operator.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3353"/>4.2.3. Entity beans</h3></div></div></div><p> 
                Entity beans may be bound to a context variable and function as a seam component. Because entities
                have a persistent identity in addition to their contextual identity, entity instances are usually bound
                explicitly in Java code, rather than being instantiated implicitly by Seam. 
            </p><p> 
                Entity bean components do not support bijection or context demarcation. Nor does invocation of an
                entity bean trigger validation. 
            </p><p> 
                Entity beans are not usually used as JSF action listeners, but do often function as backing beans
                that provide properties to JSF components for display or form submission. In particular, it is common to
                use an entity as a backing bean, together with a stateless session bean action listener to implement
                create/update/delete type functionality. 
            </p><p>
                By default, entity beans are bound to the conversation context. They may never be bound to the
                stateless context. 
            </p><p> 
                Note that it in a clustered environment is somewhat less efficient to bind an entity bean directly to
                a conversation or session scoped Seam context variable than it would be to hold a reference to the
                entity bean in a stateful session bean. For this reason, not all Seam applications define entity beans
                to be Seam components. 
            </p><p>
                Seam entity bean components may be instantiated using <code class="literal">Component.getInstance()</code>,
                <code class="literal">@In(create=true)</code> or directly using the <code class="literal">new</code> operator.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3377"/>4.2.4. JavaBeans</h3></div></div></div><p> 
                JavaBeans may be used just like a stateless or stateful session bean. However, they do not provide
                the functionality of a session bean (declarative transaction demarcation, declarative security,
                efficient clustered state replication, EJB 3.0 persistence, timeout methods, etc). 
            </p><p> 
                In a later chapter, we show you how to use Seam and Hibernate without an EJB container. In this use
                case, components are JavaBeans instead of session beans. Note, however, that in many application servers
                it is somewhat less efficient to cluster conversation or session scoped Seam JavaBean components than it
                is to cluster stateful session bean components. 
            </p><p> 
                By default, JavaBeans are bound to the event context. 
            </p><p> 
                Concurrent requests to session-scoped JavaBeans are always serialized by Seam. 
            </p><p>
                Seam JavaBean components may be instantiated using <code class="literal">Component.getInstance()</code>
                or <code class="literal">@In(create=true)</code>. They should not be directly instantiated using the 
                <code class="literal">new</code> operator.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3399"/>4.2.5. Message-driven beans</h3></div></div></div><p> 
                Message-driven beans may function as a seam component. However, message-driven beans are called quite
                differently to other Seam components - instead of invoking them via the context variable, they listen
                for messages sent to a JMS queue or topic. 
            </p><p> 
                Message-driven beans may not be bound to a Seam context. Nor do they have access to the session or
                conversation state of their "caller". However, they do support bijection and some other Seam
                functionality. 
            </p><p>
                Message-driven beans are never instantiated by the application. They are instantiated by the EJB
                container when a message is received.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3408"/>4.2.6. Interception</h3></div></div></div><p> 
                In order to perform its magic (bijection, context demarcation, validation, etc), Seam must intercept
                component invocations. For JavaBeans, Seam is in full control of instantiation of the component, and no
                special configuration is needed. For entity beans, interception is not required since bijection and
                context demarcation are not defined. For session beans, we must register an EJB interceptor for the
                session bean component. We could use an annotation, as follows: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Interceptors</span><span class="java_separator">(</span><span class="java_type">SeamInterceptor</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
                But a much better way is to define the interceptor in <code class="literal">ejb-jar.xml</code>. 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptors</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.ejb.SeamInterceptor</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptors</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assembly-descriptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-binding</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.ejb.SeamInterceptor</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-binding</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assembly-descriptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3422"/>4.2.7. Component names</h3></div></div></div><p> 
                All seam components need a name. We can assign a name to a component using the
                <code class="literal">@Name</code> annotation: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
                This name is the <span class="emphasis"><em>seam component name</em></span> and is not related to any other name
                defined by the EJB specification. However, seam component names work just like JSF managed bean names
                and you can think of the two concepts as identical. 
            </p><p>
                <code class="literal">@Name</code> is not the only way to define a component name, but we always need
                to specify the name <span class="emphasis"><em>somewhere</em></span>. If we don't, then none of the other
                Seam annotations will function.
            </p><p> 
                Whenever Seam instantiates a component, it binds the new instance to a variable in the scope configured
                for the component that matches the component name. This behavior is identical to how JSF managed beans
                work, except that Seam allows you to configure this mapping using annotations rather than XML. You can
                also programmatically bind a component to a context variable. This is useful if a particular component
                serves more than one role in the system. For example, the currently logged in <code class="literal">User</code>
                might be bound to the <code class="literal">currentUser</code> session context variable, while a
                <code class="literal">User</code> that is the subject of some administration functionality might be bound to the
                <code class="literal">user</code> conversation context variable. Be careful, though, because through a
                programmatic assignment, it's possible to overwrite a context variable that has a reference to a Seam
                component, potentially confusing matters.  </p><p> 
                For very large applications, and for built-in seam components, qualified component names are often used
                to avoid naming conflicts. 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;com.jboss.myapp.loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
                We may use the qualified component name both in Java code and in JSF's expression language: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;submit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Login&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{com.jboss.myapp.loginAction.login}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                Since this is noisy, Seam also provides a means of aliasing a qualified name to a simple name. Add a
                line like this to the <code class="literal">components.xml</code> file: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;loginAction&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;STATELESS&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{com.jboss.myapp.loginAction}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                All of the built-in Seam components have qualified names but can be accessed through 
                their unqualified names due to the namespace import feature of Seam. 
                The <code class="literal">components.xml</code> file included in the Seam JAR defines the following
                namespaces.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.core</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.cache</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.transaction</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.framework</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.faces</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.international</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.theme</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.pageflow</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.bpm</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.jms</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.mail</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.security</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.security.management</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.security.permission</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.captcha</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.excel.exporter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;...&nbsp;---&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                When attempting to resolve an unqualified name, Seam will check each of those namespaces, in order.
                You can include additional namespaces in your application's <code class="literal">components.xml</code> file
                for application-specific namespaces.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3486"/>4.2.8. Defining the component scope</h3></div></div></div><p> 
                We can override the default scope (context) of a component using the <code class="literal">@Scope</code>
                annotation. This lets us define what context a component instance is bound to, when it is instantiated
                by Seam. 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;user&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                <code class="literal">org.jboss.seam.ScopeType</code> defines an enumeration of possible scopes.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3501"/>4.2.9. Components with multiple roles</h3></div></div></div><p> 
                Some Seam component classes can fulfill more than one role in the system. For example, we often have
                a <code class="literal">User</code> class which is usually used as a session-scoped component representing the
                current user but is used in user administration screens as a conversation-scoped component. The
                <code class="literal">@Role</code> annotation lets us define an additional named role for a component, with a
                different scope — it lets us bind the same component class to different context variables. (Any
                Seam component <span class="emphasis"><em>instance</em></span> may be bound to multiple context variables, but this lets
                us do it at the class level, and take advantage of auto-instantiation.) 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;user&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">CONVERSATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Role</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;currentUser&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope</span><span class="java_operator">=</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                The <code class="literal">@Roles</code> annotation lets us specify as many additional roles as we like.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;user&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">CONVERSATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Roles</span><span class="java_separator">({</span><span class="java_plain">@</span><span class="java_type">Role</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;currentUser&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope</span><span class="java_operator">=</span><span class="java_plain">SESSION</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Role</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;tempUser&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope</span><span class="java_operator">=</span><span class="java_plain">EVENT</span><span class="java_separator">)})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3524"/>4.2.10. Built-in components</h3></div></div></div><p>
                Like many good frameworks, Seam eats its own dogfood and is implemented mostly as a set of built-in
                Seam interceptors (see later) and Seam components. This makes it easy for applications to interact with
                built-in components at runtime or even customize the basic functionality of Seam by replacing the
                built-in components with custom implementations. The built-in components are defined in the Seam
                namespace <code class="literal">org.jboss.seam.core</code> and the Java package of the same name.
            </p><p> 
                The built-in components may be injected, just like any Seam components, but they also provide
                convenient static <code class="literal">instance()</code> methods: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">FacesMessages</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">instance</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">add</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;Welcome&nbsp;back,&nbsp;#{user.name}!&quot;</span><!-- <br/> --><span class="java_separator">);</span></pre></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3539"/>4.3. Bijection</h2></div></div></div><p>
            <span class="emphasis"><em>Dependency injection</em></span> or <span class="emphasis"><em>inversion of control</em></span> is by now a familiar
            concept to most Java developers. Dependency injection allows a component to obtain a reference to another
            component by having the container "inject" the other component to a setter method or instance variable. In
            all dependency injection implementations that we have seen, injection occurs when the component is
            constructed, and the reference does not subsequently change for the lifetime of the component instance. For
            stateless components, this is reasonable. From the point of view of a client, all instances of a particular
            stateless component are interchangeable. On the other hand, Seam emphasizes the use of stateful components.
            So traditional dependency injection is no longer a very useful construct. Seam introduces the notion of
            <span class="emphasis"><em>bijection</em></span> as a generalization of injection. In contrast to injection, bijection is: 
        </p><div class="itemizedlist"><ul><li><p>
                    <span class="emphasis"><em>contextual</em></span> - bijection is used to assemble stateful components from various
                    different contexts (a component from a "wider" context may even have a reference to a component from
                    a "narrower" context)
                </p></li><li><p>
                    <span class="emphasis"><em>bidirectional</em></span> - values are injected from context variables into attributes of
                    the component being invoked, and also <span class="emphasis"><em>outjected</em></span> from the component attributes
                    back out to the context, allowing the component being invoked to manipulate the values of contextual
                    variables simply by setting its own instance variables 
                </p></li><li><p>
                    <span class="emphasis"><em>dynamic</em></span> - since the value of contextual variables changes over time, and since
                    Seam components are stateful, bijection takes place every time a component is invoked 
                </p></li></ul></div><p> 
            In essence, bijection lets you alias a context variable to a component instance variable, by specifying
            that the value of the instance variable is injected, outjected, or both. Of course, we use annotations to
            enable bijection.
        </p><p> 
            The <code class="literal">@In</code> annotation specifies that a value should be injected, either into an instance
            variable: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            or into a setter method: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUser</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">user</span><span class="java_operator">=</span><span class="java_plain">user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            By default, Seam will do a priority search of all contexts, using the name of the property or instance
            variable that is being injected. You may wish to specify the context variable name explicitly, using, for
            example, <code class="literal">@In("currentUser")</code>. 
        </p><p> 
            If you want Seam to create an instance of the component when there is no existing component instance
            bound to the named context variable, you should specify <code class="literal">@In(create=true)</code>. If the value is
            optional (it can be null), specify <code class="literal">@In(required=false)</code>. 
        </p><p>
            For some components, it can be repetitive to have to specify <code class="literal">@In(create=true)</code> everywhere
            they are used. In such cases, you can annotate the component <code class="literal">@AutoCreate</code>, and then it
            will always be created, whenever needed, even without the explicit use of <code class="literal">create=true</code>.
        </p><p> 
            You can even inject the value of an expression: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.username}&quot;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Injected values are disinjected (i.e., set to <code class="literal">null</code>) immediately after method 
            completion and outjection.
        </p><p> 
            (There is much more information about component lifecycle and injection in the next chapter.) 
        </p><p> 
            The <code class="literal">@Out</code> annotation specifies that an attribute should be outjected, either from an
            instance variable: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            or from a getter method: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;getUser</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            An attribute may be both injected and outjected: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;@</span><span class="java_type">Out</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            or: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;loginAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoginAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Login</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUser</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">user</span><span class="java_operator">=</span><span class="java_plain">user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Out</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;getUser</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3642"/>4.4. Lifecycle methods</h2></div></div></div><p> 
            Session bean and entity bean Seam components support all the usual EJB 3.0 lifecycle callback
            (<code class="literal">@PostConstruct</code>, <code class="literal">@PreDestroy</code>, etc). But Seam also supports 
            the use of any of these callbacks with JavaBean components. However, since these annotations are
            not available in a J2EE environment, Seam defines two additional component lifecycle callbacks,
            equivalent to <code class="literal">@PostConstruct</code> and <code class="literal">@PreDestroy</code>.
        </p><p> 
            The <code class="literal">@Create</code> method is called after Seam instantiates a component. 
            Components may define only one <code class="literal">@Create</code> method. 
        </p><p> 
            The <code class="literal">@Destroy</code> method is called when the context that the Seam component is bound to
            ends. Components may define only one <code class="literal">@Destroy</code> method.
        </p><p>
            In addition, stateful session bean components <span class="emphasis"><em>must</em></span> define a method with no parameters 
            annotated <code class="literal">@Remove</code>. This method is called by Seam when the context ends.
        </p><p> 
            Finally, a related annotation is the <code class="literal">@Startup</code> annotation, which may be applied to any
            application or session scoped component. The <code class="literal">@Startup</code> annotation tells Seam to
            instantiate the component immediately, when the context begins, instead of waiting until it is first
            referenced by a client. It is possible to control the order of instantiation of startup components by
            specifying <code class="literal">@Startup(depends={....})</code>. 
        </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3694"/>4.5. Conditional installation</h2></div></div></div><p>
            The <code class="literal">@Install</code> annotation lets you control conditional installation of components that
            are required in some deployment scenarios and not in others. This is useful if:
        </p><div class="itemizedlist"><ul><li><p>
        		    You want to mock out some infrastructural component in tests.
        		</p></li><li><p>
        		    You want change the implementation of a component in certain
        		    deployment scenarios.
        		</p></li><li><p>
        		    You want to install some components only if their dependencies are
        		    available (useful for framework authors).
        		</p></li></ul></div><p>
            <code class="literal">@Install</code> works by letting you specify <span class="emphasis"><em>precedence</em></span>
            and <span class="emphasis"><em>dependencies</em></span>. 
        </p><p>
            The precedence of a component is a number that Seam uses to decide which component to
            install when there are multiple classes with the same component name in the classpath.
            Seam will choose the component with the higher precedence. There are some predefined
            precedence values (in ascending order):
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>
        		    <code class="literal">BUILT_IN</code> — the lowest precedence components are
        		    the components built in to Seam. 
        		</p></li><li><p>
        		    <code class="literal">FRAMEWORK</code> — components defined by third-party 
        		    frameworks may override built-in components, but are overridden by
        		    application components. 
        		</p></li><li><p>
        		    <code class="literal">APPLICATION</code> — the default precedence. This is 
                    appropriate for most application components.
        		</p></li><li><p>
        		    <code class="literal">DEPLOYMENT</code> — for application components which
        		    are deployment-specific. 
        		</p></li><li><p>
        		    <code class="literal">MOCK</code> — for mock objects used in testing. 
        		</p></li></ol></div><p>
            Suppose we have a component named <code class="literal">messageSender</code> that talks to
            a JMS queue. 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;messageSender&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MessageSender</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sendMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;something&nbsp;with&nbsp;JMS</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            In our unit tests, we don't have a JMS queue available, so we would like to stub
            out this method. We'll create a <span class="emphasis"><em>mock</em></span> component that exists
            in the classpath when unit tests are running, but is never deployed with the
            application:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;messageSender&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Install</span><span class="java_separator">(</span><span class="java_plain">precedence</span><span class="java_operator">=</span><span class="java_plain">MOCK</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MockMessageSender</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">MessageSender</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sendMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;nothing</span><span class="java_operator">!</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            The <code class="literal">precedence</code> helps Seam decide which version to use when it finds
            both components in the classpath.
        </p><p>
            This is nice if we are able to control exactly which classes are in the classpath. But
            if I'm writing a reusable framework with many dependencies, I don't want to have to 
            break that framework across many jars. I want to be able to decide which components
            to install depending upon what other components are installed, and upon what classes
            are available in the classpath. The <code class="literal">@Install</code> annotation also 
            controls this functionality. Seam uses this mechanism internally to enable conditional 
            installation of many of the built-in components. However, you probably won't need to
            use it in your application.
        </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3780"/>4.6. Logging</h2></div></div></div><p> 
            Who is not totally fed up with seeing noisy code like this? 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">static</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">final</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Log</span><!-- <br/> --><span class="java_plain">&nbsp;log&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">LogFactory</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getLog</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">CreateOrderAction</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;createOrder</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Product</span><span class="java_plain">&nbsp;product</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">isDebugEnabled</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">debug</span><span class="java_separator">(</span><span class="java_literal">&quot;Creating&nbsp;new&nbsp;order&nbsp;for&nbsp;user:&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">username</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;&nbsp;product:&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;product</span><span class="java_separator">.</span><span class="java_plain">name</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;&nbsp;quantity:&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">,</span><span class="java_plain">&nbsp;product</span><span class="java_separator">,</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            It is difficult to imagine how the code for a simple log message could possibly be more verbose. There is
            more lines of code tied up in logging than in the actual business logic! I remain totally astonished that
            the Java community has not come up with anything better in 10 years. 
        </p><p> 
            Seam provides a logging API that simplifies this code significantly: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Logger</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Log</span><!-- <br/> --><span class="java_plain">&nbsp;log</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;createOrder</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Product</span><span class="java_plain">&nbsp;product</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">debug</span><span class="java_separator">(</span><span class="java_literal">&quot;Creating&nbsp;new&nbsp;order&nbsp;for&nbsp;user:&nbsp;#0&nbsp;product:&nbsp;#1&nbsp;quantity:&nbsp;#2&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">username</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;product</span><span class="java_separator">.</span><span class="java_plain">name</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">,</span><span class="java_plain">&nbsp;product</span><span class="java_separator">,</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            It doesn't matter if you declare the <code class="literal">log</code> variable static or not — it will work 
            either way, except for entity bean components which require the <code class="literal">log</code> variable to be
            static.
        </p><p> 
            Note that we don't need the noisy <code class="literal">if ( log.isDebugEnabled() )</code> guard, since string
            concatenation happens <span class="emphasis"><em>inside</em></span> the <code class="literal">debug()</code> method. Note also that we
            don't usually need to specify the log category explicitly, since Seam knows what component it is injecting
            the <code class="literal">Log</code> into. 
        </p><p> 
            If <code class="literal">User</code> and <code class="literal">Product</code> are Seam components available in the current
            contexts, it gets even better: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Logger</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Log</span><!-- <br/> --><span class="java_plain">&nbsp;log</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;createOrder</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Product</span><span class="java_plain">&nbsp;product</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">debug</span><span class="java_separator">(</span><span class="java_literal">&quot;Creating&nbsp;new&nbsp;order&nbsp;for&nbsp;user:&nbsp;#{user.username}&nbsp;product:&nbsp;#{product.name}&nbsp;quantity:&nbsp;#0&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">,</span><span class="java_plain">&nbsp;product</span><span class="java_separator">,</span><span class="java_plain">&nbsp;quantity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Seam logging automagically chooses whether to send output to log4j or JDK logging. If log4j is in the
            classpath, Seam with use it. If it is not, Seam will use JDK logging.
        </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3828"/>4.7. The <code class="literal">Mutable</code> interface and <code class="literal">@ReadOnly</code></h2></div></div></div><p> 
            Many application servers feature an amazingly broken implementation of <code class="literal">HttpSession</code>
            clustering, where changes to the state of mutable objects bound to the session are only replicated when the
            application calls <code class="literal">setAttribute()</code> explicitly. This is a source of bugs that can not
            effectively be tested for at development time, since they will only manifest when failover occurs.
            Furthermore, the actual replication message contains the entire serialized object graph bound to the session
            attribute, which is inefficient. 
        </p><p> 
            Of course, EJB stateful session beans must perform automatic dirty checking and replication of mutable
            state and a sophisticated EJB container can introduce optimizations such as attribute-level replication.
            Unfortunately, not all Seam users have the good fortune to be working in an environment that supports EJB
            3.0. So, for session and conversation scoped JavaBean and entity bean components, Seam provides an extra
            layer of cluster-safe state management over the top of the web container session clustering. 
        </p><p> 
            For session or conversation scoped JavaBean components, Seam automatically forces replication to occur by
            calling <code class="literal">setAttribute()</code> once in every request that the component was invoked by the
            application. Of course, this strategy is inefficient for read-mostly components. You can control this
            behavior by implementing the <code class="literal">org.jboss.seam.core.Mutable</code> interface, or by extending
            <code class="literal">org.jboss.seam.core.AbstractMutable</code>, and writing your own dirty-checking logic inside
            the component. For example, 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;account&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Account</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">AbstractMutable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setBalance</span><span class="java_separator">(</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setDirty</span><span class="java_separator">(</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">balance</span><span class="java_separator">,</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">balance&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;getBalance</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            Or, you can use the <code class="literal">@ReadOnly</code> annotation to achieve a similar effect: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;account&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Account</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setBalance</span><span class="java_separator">(</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">balance&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ReadOnly</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;getBalance</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;balance</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            For session or conversation scoped entity bean components, Seam automatically forces replication to occur
            by calling <code class="literal">setAttribute()</code> once in every request, <span class="emphasis"><em>unless the (conversation-scoped) 
            entity is currently associated with a Seam-managed persistence context, in which case no replication is 
            needed</em></span>. This strategy is not necessarily efficient, so session or conversation scope entity beans 
            should be used with care. You can always write a stateful session bean or JavaBean component to "manage" the 
            entity bean instance. For example, 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;account&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AccountManager</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">AbstractMutable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Account</span><span class="java_plain">&nbsp;account</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;an&nbsp;entity&nbsp;bean</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Unwrap</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Account</span><span class="java_plain">&nbsp;getAccount</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;account</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            Note that the <code class="literal">EntityHome</code> class in the Seam Application Framework provides a great example 
            of managing an entity bean instance using a Seam component. 
        </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3881"/>4.8. Factory and manager components</h2></div></div></div><p> 
            We often need to work with objects that are not Seam components. But we still want to be able to inject
            them into our components using <code class="literal">@In</code> and use them in value and method binding expressions,
            etc. Sometimes, we even need to tie them into the Seam context lifecycle (<code class="literal">@Destroy</code>, for
            example). So the Seam contexts can contain objects which are not Seam components, and Seam provides a couple
            of nice features that make it easier to work with non-component objects bound to contexts. 
        </p><p> 
            The <span class="emphasis"><em>factory component pattern</em></span> lets a Seam component act as the instantiator for a
            non-component object. A <span class="emphasis"><em>factory method</em></span> will be called when a context variable is
            referenced but has no value bound to it. We define factory methods using the <code class="literal">@Factory</code>
            annotation. The factory method binds a value to the context variable, and determines the scope of the bound
            value. There are two styles of factory method. The first style returns a value, which is bound to the
            context by Seam:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Factory</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">scope</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">CONVERSATION</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Customer</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getCustomerList</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></pre><p> 
            The second style is a method of type <code class="literal">void</code> which binds the value to the context
            variable itself: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">DataModel</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">List</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">Customer</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;customerList</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;customerList&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;initCustomerList</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;customerList&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></pre><p> 
            In both cases, the factory method is called when we reference the <code class="literal">customerList</code> context
            variable and its value is null, and then has no further part to play in the lifecycle of the value. An even
            more powerful pattern is the <span class="emphasis"><em>manager component pattern</em></span>. In this case, we have a Seam
            component that is bound to a context variable, that manages the value of the context variable, while
            remaining invisible to clients. 
        </p><p> 
            A manager component is any component with an <code class="literal">@Unwrap</code> method. This method returns the
            value that will be visible to clients, and is called <span class="emphasis"><em>every time</em></span> a context variable is
            referenced. 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;customerList&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">CONVERSATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerListManager</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Unwrap</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Customer</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getCustomerList</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> 
            The manager component pattern is especially useful if we have an object where you need more control over the 
            lifecycle of the component.  For example, if you have a heavyweight object that needs a cleanup operation when 
            the context ends you could <code class="literal">@Unwrap</code> the object, and perform cleanup in the 
            <code class="literal">@Destroy</code> method of the manager component.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;hens&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">APPLICATION</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HenHouse</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Hen</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;hens</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">Hen</span><span class="java_plain">&nbsp;hen</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Unwrap</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Hen</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getHens</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">hens&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Setup</span><span class="java_plain">&nbsp;our&nbsp;hens</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;hens</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Observer</span><span class="java_separator">({</span><span class="java_literal">&quot;chickBorn&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;chickenBoughtAtMarket&quot;</span><span class="java_separator">})</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;addHen</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hens</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">hen</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Observer</span><span class="java_separator">(</span><span class="java_literal">&quot;chickenSoldAtMarket&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;removeHen</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hens</span><span class="java_separator">.</span><span class="java_plain">remove</span><span class="java_separator">(</span><span class="java_plain">hen</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Observer</span><span class="java_separator">(</span><span class="java_literal">&quot;foxGetsIn&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;removeAllHens</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hens</span><span class="java_separator">.</span><span class="java_plain">clear</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></pre><p>
		Here the managed component observes many events which change the underlying object. 
		The component manages these actions itself, and because the object is unwrapped
		on every access, a consistent view is provided.
	</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="xml"/>Chapter 5. Configuring Seam components</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e3953">5.1. Configuring components via property settings</a></span></dt><dt><span class="section"><a href="#xml.descriptor">5.2. Configuring components via components.xml</a></span></dt><dt><span class="section"><a href="#d0e4168">5.3. Fine-grained configuration files</a></span></dt><dt><span class="section"><a href="#d0e4206">5.4. Configurable property types</a></span></dt><dt><span class="section"><a href="#d0e4302">5.5. Using XML Namespaces</a></span></dt></dl></div><p> 
            The philosophy of minimizing XML-based configuration is extremely strong in Seam. Nevertheless,
            there are various reasons why we might want to configure a Seam component using XML: to isolate
            deployment-specific information from the Java code, to enable the creation of re-usable frameworks,
            to configure Seam's built-in functionality, etc.
            Seam provides two basic approaches to configuring components: configuration via property settings in a
            properties file or in <code class="literal">web.xml</code>, and configuration via <code class="literal">components.xml</code>. 
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3953"/>5.1. Configuring components via property settings</h2></div></div></div><p> 
                Seam components may be provided with configuration properties either via servlet context parameters, via 
                system properties, or via a properties file named <code class="literal">seam.properties</code> in the root of the classpath. 
            </p><p> 
                The configurable Seam component must expose JavaBeans-style property setter methods for the
                configurable attributes. If a Seam component named <code class="literal">com.jboss.myapp.settings</code> has a
                setter method named <code class="literal">setLocale()</code>, we can provide a property named
                <code class="literal">com.jboss.myapp.settings.locale</code> in the <code class="literal">seam.properties</code> file, a system 
                property named <code class="literal">org.jboss.seam.properties.com.jboss.myapp.settings.locale</code> via -D at startup, or
                as a servlet context parameter, and Seam will set the value of the <code class="literal">locale</code> attribute
                whenever it instantiates the component. 
            </p><p> 
                The same mechanism is used to configure Seam itself. For example, to set the conversation timeout, we
                provide a value for <code class="literal">org.jboss.seam.core.manager.conversationTimeout</code> in
                <code class="literal">web.xml</code>, <code class="literal">seam.properties</code>, or via a system property prefixed with
                <code class="literal">org.jboss.seam.properties</code>. (There is a built-in Seam
                component named <code class="literal">org.jboss.seam.core.manager</code> with a setter method named
                <code class="literal">setConversationTimeout()</code>.)  
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="xml.descriptor"/>5.2. Configuring components via <code class="literal">components.xml</code></h2></div></div></div><p> 
                The <code class="literal">components.xml</code> file is a bit more powerful than property settings. It lets
                you: 
            </p><div class="itemizedlist"><ul><li><p> Configure components that have been installed automatically — including both built-in
                        components, and application components that have been annotated with the
                        <code class="literal">@Name</code> annotation and picked up by Seam's deployment scanner. </p></li><li><p> Install classes with no <code class="literal">@Name</code> annotation as Seam components — this
                        is most useful for certain kinds of infrastructural components which can be installed multiple
                        times with different names (for example Seam-managed persistence contexts). </p></li><li><p> Install components that <span class="emphasis"><em>do</em></span> have a <code class="literal">@Name</code> annotation
                        but are not installed by default because of an <code class="literal">@Install</code> annotation that
                        indicates the component should not be installed. </p></li><li><p> Override the scope of a component. </p></li></ul></div><p> 
                A <code class="literal">components.xml</code> file may appear in one of three different places: 
            </p><div class="itemizedlist"><ul><li><p>The <code class="literal">WEB-INF</code> directory of a <code class="literal">war</code>.</p></li><li><p>The <code class="literal">META-INF</code> directory of a <code class="literal">jar</code>.</p></li><li><p>
                        Any directory of a <code class="literal">jar</code> that contains classes with an
                        <code class="literal">@Name</code> annotation.
                    </p></li></ul></div><p> 
                Usually, Seam components are installed when the deployment scanner discovers a class with a
                <code class="literal">@Name</code> annotation sitting in an archive with a <code class="literal">seam.properties</code>
                file or a <code class="literal">META-INF/components.xml</code> file. (Unless the component has an 
                <code class="literal">@Install</code> annotation indicating it should not be installed by default.) 
                The <code class="literal">components.xml</code> file lets us handle special cases where we need
                to override the annotations. 
            </p><p>
                For example, the following <code class="literal">components.xml</code> file installs jBPM: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:bpm</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/bpm&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                This example does the same thing:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.bpm.Jbpm&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                This one installs and configures two different Seam-managed persistence contexts:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:persistence</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/persistence&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="xml_attribute_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">persistence-unit-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/customerEntityManagerFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;accountingDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">persistence-unit-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/accountingEntityManagerFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                As does this one:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerDatabase&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.ManagedPersistenceContext&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitJndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/customerEntityManagerFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;accountingDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.ManagedPersistenceContext&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitJndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/accountingEntityManagerFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                This example creates a session-scoped Seam-managed persistence context (this is not recommended in
                practice):
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:persistence</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/persistence&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&lt;</span><span class="xml_attribute_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;productDatabase&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;session&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">persistence-unit-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/productEntityManagerFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;productDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;session&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.ManagedPersistenceContext&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitJndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/productEntityManagerFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                It is common to use the <code class="literal">auto-create</code> option for infrastructural
                objects like persistence contexts, which saves you from having to explicitly
                specify <code class="literal">create=true</code> when you use the <code class="literal">@In</code>
                annotation.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:persistence</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/persistence&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&lt;</span><span class="xml_attribute_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;productDatabase&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">persistence-unit-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/productEntityManagerFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;productDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.ManagedPersistenceContext&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitJndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/productEntityManagerFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                The <code class="literal">&lt;factory&gt;</code> declaration lets you specify a value or method binding
                expression that will be evaluated to initialize the value of a context variable when it is first
                referenced.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;contact&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">method</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{contactManager.loadContact}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CONVERSATION&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                You can create an "alias" (a second name) for a Seam component like so: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;user&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{actor}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;STATELESS&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                You can even create an "alias" for a commonly used expression: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;contact&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{contactManager.contact}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;STATELESS&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                It is especially common to see the use of <code class="literal">auto-create="true"</code> with the
                <code class="literal">&lt;factory&gt;</code> declaration:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;session&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entityManager.delegate}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;STATELESS&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                Sometimes we want to reuse the same <code class="literal">components.xml</code> file with minor changes during
                both deployment and testing. Seam lets you place wildcards of the form <code class="literal">@wildcard@</code> in
                the <code class="literal">components.xml</code> file which can be replaced either by your Ant build script (at
                deployment time) or by providing a file named <code class="literal">components.properties</code> in the classpath
                (at development time). You'll see this approach used in the Seam examples. 
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4168"/>5.3. Fine-grained configuration files</h2></div></div></div><p> 
                If you have a large number of components that need to be configured in XML, it makes much more sense
                to split up the information in <code class="literal">components.xml</code> into many small files. Seam lets
                you put configuration for a class named, for example, <code class="literal">com.helloworld.Hello</code> in a
                resource named <code class="literal">com/helloworld/Hello.component.xml</code>. (You might be familiar with this
                pattern, since it is the same one we use in Hibernate.) The root element of the file may be either a
                <code class="literal">&lt;components&gt;</code> or <code class="literal">&lt;component&gt;</code>
                element. </p><p> 
                The first option lets you define multiple components in the file: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.helloworld.Hello&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hello&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{user.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;message&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hello.message}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                The second option only lets you define or configure one component, but is less noisy: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hello&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{user.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                In the second option, the class name is implied by the file in which the component definition
                appears. 
            </p><p> 
                Alternatively, you may put configuration for all classes in the <code class="literal">com.helloworld</code>
                package in <code class="literal">com/helloworld/components.xml</code>. 
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4206"/>5.4. Configurable property types</h2></div></div></div><p> 
                Properties of string, primitive or primitive wrapper type may be configured just as you would expect: 
            </p><pre class="programlisting">org.jboss.seam.core.manager.conversationTimeout 60000</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:manager</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">conversation-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;60000&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.core.manager&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;conversationTimeout&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">60000</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                Arrays, sets and lists of strings or primitives are also supported: 
            </p><pre class="programlisting">org.jboss.seam.bpm.jbpm.processDefinitions order.jpdl.xml, return.jpdl.xml, inventory.jpdl.xml</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:process-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">order.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">return.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">inventory.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:process-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.bpm.jbpm&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;processDefinitions&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">order.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">return.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">inventory.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                Even maps with String-valued keys and string or primitive values are supported: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;issueEditor&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;issueStatuses&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">open</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">open&nbsp;issue</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">resolved</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">issue&nbsp;resolved&nbsp;by&nbsp;developer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">closed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">resolution&nbsp;accepted&nbsp;by&nbsp;user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                When configuring multi-valued properties, by default, Seam will preserve the order in which you place the attributes
                in <code class="literal">components.xml</code> (unless you use a <code class="literal">SortedSet</code>/<code class="literal">SortedMap</code>
                then Seam will use <code class="literal">TreeMap</code>/<code class="literal">TreeSet</code>). If the property has a concrete type (for 
                example <code class="literal">LinkedList</code>) Seam will use that type.
            </p><p> 
                You can also override the type by specifying a fully qualified class name:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;issueEditor&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;issueStatusOptions&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.LinkedHashMap&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">open</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">open&nbsp;issue</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">resolved</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">issue&nbsp;resolved&nbsp;by&nbsp;developer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">closed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">resolution&nbsp;accepted&nbsp;by&nbsp;user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
                Finally, you may wire together components using a value-binding expression. Note that this is quite
                different to injection using <code class="literal">@In</code>, since it happens at component instantiation time
                instead of invocation time. It is therefore much more similar to the dependency injection facilities
                offered by traditional IoC containers like JSF or Spring. 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:managed-working-memory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingWorkingMemory&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rule-base</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{policyPricingRules}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingWorkingMemory&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.drools.ManagedWorkingMemory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ruleBase&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{policyPricingRules}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                Seam also resolves an EL expression string prior to assigning the initial value to the bean property of
                the component. So you can inject some contextual data into your components.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;greeter&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.example.action.Greeter&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;message&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Nice&nbsp;to&nbsp;see&nbsp;you,&nbsp;#{identity.username}!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
				However, there is one important exception. If the type of the property to which the initial value is
				being assigned is either a Seam <code class="literal">ValueExpression</code> or
				<code class="literal">MethodExpression</code>, then the evaluation of the EL is deferred. Instead, the appropriate
				expression wrapper is created and assigned to the property. The message templates on the Home component
				from the Seam Application Framework serve as an example.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myEntityHome&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.example.action.MyEntityHome&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.example.model.MyEntity&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">created-message</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;'#{myEntityHome.instance.name}'&nbsp;has&nbsp;been&nbsp;successfully&nbsp;added.&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
				Inside the component, you can access the expression string by calling
				<code class="literal">getExpressionString()</code> on the <code class="literal">ValueExpression</code> or
				<code class="literal">MethodExpression</code>. If the property is a <code class="literal">ValueExpression</code>, you can
				resolve the value using <code class="literal">getValue()</code> and if the property is a
				<code class="literal">MethodExpression</code>, you can invoke the method using <code class="literal">invoke(Object
				args...)</code>. Obviously, to assign a value to a <code class="literal">MethodExpression</code> property, the
				entire initial value must be a single EL expression.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4302"/>5.5. Using XML Namespaces</h2></div></div></div><p> 
                Throughout the examples, there have been two competing ways of declaring components: with and without
                the use of XML namespaces. The following shows a typical <code class="literal">components.xml</code> file 
                without namespaces:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&nbsp;http://jboss.org/schema/seam/components-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.core.init&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;debug&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jndiPattern&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">@jndiPattern@</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                As you can see, this is somewhat verbose. Even worse, the component and attribute names cannot be 
                validated at development time.
            </p><p>The version with using namespaces looks like this:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:core</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&nbsp;http://jboss.org/schema/seam/core-2.3.xsd&nbsp;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components&nbsp;http://jboss.org/schema/seam/components-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">debug</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jndi-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;@jndiPattern@&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                Even though the schema declarations are verbose, the actual XML content is lean and easy to understand.
                The schemas provide detailed information about each component and the attributes available, allowing XML
                editors to offer intelligent autocomplete. The use of namespaced elements makes generating and
                maintaining correct <code class="literal">components.xml</code> files much simpler.
            </p><p> 
                Now, this works great for the built-in Seam components, but what about user components? There are two options. 
                First, Seam supports mixing the two models, allowing the use of the generic <code class="literal">&lt;component&gt;</code> 
                declarations for user components, along with namespaced declarations for built-in components. But even better,
                Seam allows you to quickly declare namespaces for your own components.
            </p><p>
                Any Java package can be associated with an XML namespace by annotating the package with the 
                <code class="literal">@Namespace</code> annotation. (Package-level annotations are declared in a file named
                <code class="literal">package-info.java</code> in the package directory.) Here is an example from the seampay demo:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Namespace</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;http://jboss.org/schema/seam/examples/seampay&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">example</span><span class="java_separator">.</span><span class="java_plain">seampay</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Namespace</span><span class="java_separator">;</span></pre><p>
                That is all you need to do to use the namespaced style in <code class="literal">components.xml</code>!
                Now we can write:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:pay</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/examples/seampay&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:payment-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">new-instance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{newPayment}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">created-message</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Created&nbsp;a&nbsp;new&nbsp;payment&nbsp;to&nbsp;#{newPayment.payee}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:payment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;newPayment&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">payee</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Somebody&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">account</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{selectedAccount}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">payment-date</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{currentDatetime}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">created-date</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{currentDatetime}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Or:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:pay</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/examples/seampay&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:payment-home</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:new-instance</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&quot;#{newPayment}&quot;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:new-instance</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:created-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Created&nbsp;a&nbsp;new&nbsp;payment&nbsp;to&nbsp;#{newPayment.payee}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:created-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:payment-home</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:payment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;newPayment&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:payee</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Somebody&quot;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:payee</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:account</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{selectedAccount}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:account</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:payment-date</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{currentDatetime}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:payment-date</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pay:created-date</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{currentDatetime}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:created-date</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pay:payment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                These examples illustrate the two usage models of a namespaced element. In the first declaration, 
                the <code class="literal">&lt;pay:payment-home&gt;</code> references the <code class="literal">paymentHome</code>
                component:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">jboss</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">seam</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">example</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">seampay</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentHome&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentController</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Payment</span><span class="java_operator">&gt;</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                The element name is the hyphenated form of the component name. The attributes of the element are
                the hyphenated form of the property names.
            </p><p>
                In the second declaration, the <code class="literal">&lt;pay:payment&gt;</code> element refers to the 
                <code class="literal">Payment</code> class in the <code class="literal">org.jboss.seam.example.seampay</code> package. 
                In this case <code class="literal">Payment</code> is an entity that is being declared as a Seam component:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">jboss</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">seam</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">example</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">seampay</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Payment</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                If we want validation and autocompletion to work for user-defined components, we will need a schema.
                Seam does not yet provide a mechanism to automatically generate a schema for a set of components, so
                it is necessary to generate one manually. The schema definitions for the standard Seam packages can 
                be used for guidance.   
            </p><p>The following are the namespaces used by Seam:</p><div class="itemizedlist"><ul><li><p>components — <code class="literal">http://jboss.org/schema/seam/components</code></p></li><li><p>core — <code class="literal">http://jboss.org/schema/seam/core</code></p></li><li><p>drools — <code class="literal">http://jboss.org/schema/seam/drools</code></p></li><li><p>framework — <code class="literal">http://jboss.org/schema/seam/framework</code></p></li><li><p>jms — <code class="literal">http://jboss.org/schema/seam/jms</code></p></li><li><p>remoting — <code class="literal">http://jboss.org/schema/seam/remoting</code></p></li><li><p>theme — <code class="literal">http://jboss.org/schema/seam/theme</code></p></li><li><p>security — <code class="literal">http://jboss.org/schema/seam/security</code></p></li><li><p>mail — <code class="literal">http://jboss.org/schema/seam/mail</code></p></li><li><p>web — <code class="literal">http://jboss.org/schema/seam/web</code></p></li><li><p>pdf — <code class="literal">http://jboss.org/schema/seam/pdf</code></p></li><li><p> spring — <code class="literal">http://jboss.org/schema/seam/spring</code></p></li></ul></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="events"/>Chapter 6. Events, interceptors and exception handling</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e4447">6.1. Seam events</a></span></dt><dt><span class="section"><a href="#d0e4481">6.2. Page actions</a></span></dt><dt><span class="section"><a href="#d0e4552">6.3. Page parameters</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4561">6.3.1. Mapping request parameters to the model</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4615">6.4. Propagating request parameters</a></span></dt><dt><span class="section"><a href="#d0e4648">6.5. URL rewriting with page parameters</a></span></dt><dt><span class="section"><a href="#d0e4715">6.6. Conversion and Validation</a></span></dt><dt><span class="section"><a href="#events.pageaction.navigation">6.7. Navigation</a></span></dt><dt><span class="section"><a href="#d0e4820">6.8. Fine-grained files for definition of navigation, page actions and parameters</a></span></dt><dt><span class="section"><a href="#d0e4836">6.9. Component-driven events</a></span></dt><dt><span class="section"><a href="#d0e4887">6.10. Contextual events</a></span></dt><dt><span class="section"><a href="#d0e5092">6.11. Seam interceptors</a></span></dt><dt><span class="section"><a href="#d0e5168">6.12. Managing exceptions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5176">6.12.1. Exceptions and transactions</a></span></dt><dt><span class="section"><a href="#d0e5202">6.12.2. Enabling Seam exception handling</a></span></dt><dt><span class="section"><a href="#d0e5220">6.12.3. Using annotations for exception handling</a></span></dt><dt><span class="section"><a href="#d0e5242">6.12.4. Using XML for exception handling</a></span></dt><dt><span class="section"><a href="#d0e5326">6.12.5. Some common exceptions</a></span></dt></dl></dd></dl></div><p>
        Complementing the contextual component model, there are two further basic concepts
        that facilitate the extreme loose-coupling that is the distinctive feature of Seam 
        applications. The first is a strong event model where events may be mapped to event 
        listeners via JSF-like method binding expressions. The second is the pervasive use 
        of annotations and interceptors to apply cross-cutting concerns to components which 
        implement business logic.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4447"/>6.1. Seam events</h2></div></div></div><p>
            The Seam component model was developed for use with <span class="emphasis"><em>event-driven 
            applications</em></span>, specifically to enable the development of fine-grained, 
            loosely-coupled components in a fine-grained eventing model. Events in Seam come
            in several types, most of which we have already seen:
        </p><div class="itemizedlist"><ul><li><p>JSF events</p></li><li><p>jBPM transition events</p></li><li><p>Seam page actions</p></li><li><p>Seam component-driven events</p></li><li><p>Seam contextual events</p></li></ul></div><p>
            All of these various kinds of events are mapped to Seam components via JSF EL
            method binding expressions. For a JSF event, this is defined in the JSF template:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Click&nbsp;me!&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            For a jBPM transition event, it is specified in the jBPM process definition or
            pageflow definition:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hello&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hello.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hello&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">transition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">start-page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can find out more information about JSF events and jBPM events elsewhere. 
            Let's concentrate for now upon the two additional kinds of events defined by Seam.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4481"/>6.2. Page actions</h2></div></div></div><p>
            A Seam page action is an event that occurs just before we render a page. 
            We declare page actions in <code class="literal">WEB-INF/pages.xml</code>. We
            can define a page action for either a particular JSF view id:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hello.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Or we can use a <code class="literal">*</code> wildcard as a suffix to the
            <code class="literal">view-id</code> to specify an action that applies to all 
            view ids that match the pattern:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hello/*&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Keep in mind that if the <code class="literal">&lt;page&gt;</code> element is defined in
            a fine-grained page descriptor, the <code class="literal">view-id</code> attribute
            can be left off since it is implied.
        </p><p>
            If multiple wildcarded page actions match the current view-id, Seam
            will call all the actions, in order of least-specific to most-specific.
        </p><p>
            The page action method can return a JSF outcome. If the outcome is
            non-null, Seam will use the defined navigation rules to navigate to a view.
        </p><p>
            Furthermore, the view id mentioned in the <code class="literal">&lt;page&gt;</code>
            element need not correspond to a real JSP or Facelets page! So, we can
            reproduce the functionality of a traditional action-oriented framework
            like Struts or WebWork using page actions. This is quite useful if you want
            to do complex things in response to non-faces requests (for example, HTTP GET
            requests).
        </p><p>
            Multiple or conditional page actions my be specified using the <code class="literal">&lt;action&gt;</code>
            tag:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hello.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;validation.failed}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hitCount.increment}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Page actions are executed on both an initial (non-faces) request and a postback (faces) request.
            If you are using the page action to load data, this operation may conflict with the standard JSF
            action(s) being executed on a postback. One way to disable the page action is to setup a condition
            that resolves to true only on an initial request.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/dashboard.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{dashboard.loadData}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;facesContext.renderKit.responseStateManager.isPostback(facesContext)}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            This condition consults the <code class="literal">ResponseStateManager#isPostback(FacesContext)</code> to
            determine if the request is a postback. The ResponseStateManager is accessed using
            <code class="literal">FacesContext.getCurrentInstance().getRenderKit().getResponseStateManager()</code>.
        </p><p>
            To save you from the verbosity of JSF's API, Seam offers a built-in condition that allows you to
            accomplish the same result with a heck of a lot less typing. You can disable a page action on postback
            by simply setting the <code class="literal">on-postback</code> to <code class="literal">false</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/dashboard.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{dashboard.loadData}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">on-postback</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            For backwards compatibility reasons, the default value of the <code class="literal">on-postback</code> attribute
            is true, though likely you will end up using the opposite setting more often.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4552"/>6.3. Page parameters</h2></div></div></div><p>
                A JSF faces request (a form submission) encapsulates both an "action"
                (a method binding) and "parameters" (input value bindings). A page 
                action might also needs parameters!
            </p><p>
                Since GET requests are bookmarkable, page parameters are passed as 
                human-readable request parameters. (Unlike JSF form inputs, which are
                anything but!) 
            </p><p>
                You can use page parameters with or without an action method.
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4561"/>6.3.1. Mapping request parameters to the model</h3></div></div></div><p>
                  Seam lets us provide a value binding that maps a named request parameter 
                  to an attribute of a model object.
              </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hello.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstName}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                  The <code class="literal">&lt;param&gt;</code> declaration is bidirectional, just
                  like a value binding for a JSF input:
              </p><div class="itemizedlist"><ul><li><p>
                          When a non-faces (GET) request for the view id occurs, Seam sets 
                          the value of the named request parameter onto the model object, 
                          after performing appropriate type conversions.
                      </p></li><li><p>
                          Any <code class="literal">&lt;s:link&gt;</code> or <code class="literal">&lt;s:button&gt;</code> 
                          transparently includes the request parameter. The value of the parameter is 
                          determined by evaluating the value binding during the render phase (when the 
                          <code class="literal">&lt;s:link&gt;</code> is rendered).
                      </p></li><li><p>
                          Any navigation rule with a <code class="literal">&lt;redirect/&gt;</code> to
                          the view id transparently includes the request parameter. The value 
                          of the parameter is determined by evaluating the value binding at
                          the end of the invoke application phase.
                      </p></li><li><p>
                          The value is transparently propagated with any JSF form submission
                          for the page with the given view id. This means that view parameters
                          behave like <code class="literal">PAGE</code>-scoped context variables for
                          faces requests.
                      </p></li></ul></div><p>
                  The essential idea behind all this is that <span class="emphasis"><em>however</em></span>
                  we get from any other page to <code class="literal">/hello.xhtml</code> (or from 
                  <code class="literal">/hello.xhtml</code> back to <code class="literal">/hello.xhtml</code>), 
                  the value of the model attribute referred to in the value binding is
                  "remembered", without the need for a conversation (or other server-side
                  state).
              </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4615"/>6.4. Propagating request parameters</h2></div></div></div><p>
                    If just the <code class="literal">name</code> attribute is specified then the
                    request parameter is propagated using the <code class="literal">PAGE</code> context
                    (it isn't mapped to model property).
                </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hello.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloWorld.sayHello}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                  Propagation of page parameters is especially useful if you want to build multi-layer 
                  master-detail CRUD pages.  You can use it to "remember" which view you were previously
                  on (e.g. when pressing the Save button), and which entity you were editing.
        </p><div class="itemizedlist"><ul><li><p>
                 Any <code class="literal">&lt;s:link&gt;</code> or <code class="literal">&lt;s:button&gt;</code> 
                 transparently propagates the request parameter if that parameter is listed
                 as a page parameter for the view.
             </p></li><li><p>
                 The value is transparently propagated with any JSF form submission
                 for the page with the given view id. (This means that view parameters
                 behave like <code class="literal">PAGE</code>-scoped context variables for
                 faces requests.
             </p></li></ul></div><p>
	      This all sounds pretty complex, and you're probably wondering if such an
	      exotic construct is really worth the effort. Actually, the idea is very
	      natural once you "get it". It is definitely worth taking the time to 
	      understand this stuff. Page parameters are the most elegant way to 
	      propagate state across a non-faces request. They are especially cool for 
	      problems like search screens with bookmarkable results pages, where we 
	      would like to be able to write our application code to handle both POST 
	      and GET requests with the same code. Page parameters eliminate repetitive 
	      listing of request parameters in the view definition and make redirects
	      much easier to code.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4648"/>6.5. URL rewriting with page parameters</h2></div></div></div><p>
            Rewriting occurs based on rewrite patterns found for views in <code class="literal">pages.xml</code>. 
            Seam URL rewriting does both incoming and outgoing URL rewriting based on the same pattern.
            Here's a simple pattern:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            In this case, any incoming request for <code class="literal">/home</code> will be sent to 
            <code class="literal">/home.xhtml</code>.  More interestingly,
            any link generated that would normally point to <code class="literal">/home.seam</code> will 
            instead be rewritten as <code class="literal">/home</code>.  Rewrite patterns only match the portion of the URL 
            before the query parameters.  So, <code class="literal">/home.seam?conversationId=13</code> and 
            <code class="literal">/home.seam?color=red</code>
            will both be matched by this rewrite rule.
        </p><p>
            Rewrite rules can take these query paramters into consideration, as shown with the following rules.                  
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home/{color}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            In this case, an incoming request for <code class="literal">/home/red</code> will be served as 
            if it were a request
            for <code class="literal">/home.seam?color=red</code>.  Similarly, if color is a page parameter an outgoing 
            URL that would normally show as <code class="literal">/home.seam?color=blue</code> would instead 
            be output as
            <code class="literal">/home/blue</code>.  Rules are processed in order, so it is important to list
            more specific rules before more general rules.
        </p><p>Default Seam query parameters can also be mapped using URL rewriting, allowing for another
            option for hiding Seam's fingerprints.
            In the following example, <code class="literal">/search.seam?conversationId=13</code> would 
            be written as <code class="literal">/search-13</code>. 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search-{conversationId}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rewrite</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Seam URL rewriting provides simple, bidirectional rewriting on a per-view basis.  For more
            complex rewriting rules that cover non-seam components, Seam applications can continue to
            use the <code class="literal">org.tuckey URLRewriteFilter </code>or apply rewriting rules at the web server.
        </p><p>
            URL rewriting requires the Seam rewrite filter to be enable.  Rewrite filter 
            configuration is discussed in <a class="xref" href="#configuration.filters.rewrite" title="30.1.3.3. URL rewriting">Section 30.1.3.3, “URL rewriting”</a>.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4715"/>6.6. Conversion and Validation</h2></div></div></div><p>
            You can specify a JSF converter for complex model properties:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/calculator.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.calculate}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;x&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.lhs}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;y&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.rhs}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;op&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">converterId</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.my.calculator.OperatorConverter&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.op}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Alternatively:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/calculator.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.calculate}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;x&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.lhs}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;y&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.rhs}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;op&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">converter</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{operatorConverter}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.op}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            JSF validators, and <code class="literal">required="true"</code> may
            also be used:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/blog.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.date}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">validatorId</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.my.blog.PastDate&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Alternatively:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/blog.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;date&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.date}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">validator</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{pastDateValidator}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Even better, model-based Hibernate validator annotations are automatically
            recognized and validated. Seam also provides a default date converter to
            convert a string parameter value to a date and back.
         </p><p>
            When type conversion or validation fails, a global <code class="literal">FacesMessage</code>
            is added to the <code class="literal">FacesContext</code>.
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="events.pageaction.navigation"/>6.7. Navigation</h2></div></div></div><p>
            You can use standard JSF navigation rules defined in <code class="literal">faces-config.xml</code>
            in a Seam application. However, JSF navigation rules have a number of annoying
            limitations:
         </p><div class="itemizedlist"><ul><li><p>
                  It is not possible to specify request parameters to be used when redirecting.
               </p></li><li><p>
                  It is not possible to begin or end conversations from a rule.
               </p></li><li><p>
                  Rules work by evaluating the return value of the action method; it is not
                  possible to evaluate an arbitrary EL expression.
               </p></li></ul></div><p>
            A further problem is that "orchestration" logic gets scattered between <code class="literal">pages.xml</code>
            and <code class="literal">faces-config.xml</code>. It's better to unify this logic into <code class="literal">pages.xml</code>.
         </p><p>
            This JSF navigation rule:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/editDocument.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-action</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{documentEditor.update}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-action</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">success</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/viewDocument.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Can be rewritten as follows:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;success&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                But it would be even nicer if we didn't have to pollute our <code class="literal">DocumentEditor</code> 
                component with string-valued return values (the JSF outcomes). So Seam lets us write:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">evaluate</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.errors.size}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                Or even:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.errors.empty}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                The first form evaluates a value binding to determine the outcome value
                to be used by the subsequent rules.
                The second approach ignores the outcome and evaluates a value binding
                for each possible rule.
            </p><p>
                Of course, when an update succeeds, we probably want to end the current
                conversation. We can do that like this:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.errors.empty}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                As we've ended conversation any subsequent requests won't know
                which document we are interested in.  We can pass the document 
                id as a request parameter which also makes the view bookmarkable:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.errors.empty}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;documentId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.documentId}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                Null outcomes are a special case in JSF. The null outcome is interpreted to
                mean "redisplay the page". The following navigation rule matches any non-null
                outcome, but <span class="emphasis"><em>not</em></span> the null outcome:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">render</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                If you want to perform navigation when a null outcome occurs, use the
                following form instead:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">render</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/viewDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                The view-id may be given as a JSF EL expression:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editDocument.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;success&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/#{userAgent}/displayDocument.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4820"/>6.8. Fine-grained files for definition of navigation, page actions and parameters</h2></div></div></div><p>
                If you have a lot of different page actions and page parameters,
                or even just a lot of navigation rules,
                you will almost certainly want to split the declarations up over
                multiple files. You can define actions and parameters for a page
                with the view id <code class="literal">/calc/calculator.xhtml</code> in a 
                resource named <code class="literal">calc/calculator.page.xml</code>. The
                root element in this case is the <code class="literal">&lt;page&gt;</code>
                element, and the view id is implied:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.calculate}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;x&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.lhs}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;y&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.rhs}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;op&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">converter</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{operatorConverter}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{calculator.op}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4836"/>6.9. Component-driven events</h2></div></div></div><p>
                Seam components can interact by simply calling each others methods.
                Stateful components may even implement the observer/observable pattern.
                But to enable components to interact in a more loosely-coupled fashion
                than is possible when the components call each others methods directly,
                Seam provides <span class="emphasis"><em>component-driven events</em></span>.
            </p><p>
                We specify event listeners (observers) in <code class="literal">components.xml</code>.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hello&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{helloListener.sayHelloBack}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{logger.logHello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                Where the <span class="emphasis"><em>event type</em></span> is just an arbitrary string.
            </p><p>
                When an event occurs, the actions registered for that event will be called
                in the order they appear in <code class="literal">components.xml</code>. How does a
                component raise an event? Seam provides a built-in component for this.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;helloWorld&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloWorld</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sayHello</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;World!&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Events</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">raiseEvent</span><span class="java_separator">(</span><span class="java_literal">&quot;hello&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                Or you can use an annotation.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;helloWorld&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloWorld</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">RaiseEvent</span><span class="java_separator">(</span><span class="java_literal">&quot;hello&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sayHello</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;World!&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                Notice that this event producer has no dependency upon event consumers.
                The event listener may now be implemented with absolutely no dependency
                upon the producer:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;helloListener&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloListener</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sayHelloBack</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;to&nbsp;you&nbsp;too!&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                The method binding defined in <code class="literal">components.xml</code> above 
                takes care of mapping the event to the consumer.
                If you don't like futzing about in the <code class="literal">components.xml</code> 
                file, you can use an annotation instead:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;helloListener&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloListener</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Observer</span><span class="java_separator">(</span><span class="java_literal">&quot;hello&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sayHelloBack</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;to&nbsp;you&nbsp;too!&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                You might wonder why I've not mentioned anything about event objects in
                this discussion. In Seam, there is no need for an event object to propagate
                state between event producer and listener. State is held in the Seam
                contexts, and is shared between components. However, if you really want
                to pass an event object, you can:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;helloWorld&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloWorld</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sayHello</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;World,&nbsp;my&nbsp;name&nbsp;is&nbsp;#0.&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;name</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Events</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">raiseEvent</span><span class="java_separator">(</span><span class="java_literal">&quot;hello&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;name</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;helloListener&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloListener</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Observer</span><span class="java_separator">(</span><span class="java_literal">&quot;hello&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sayHelloBack</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;#0!&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;name</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4887"/>6.10. Contextual events</h2></div></div></div><p>
                Seam defines a number of built-in events that the application can use to
                perform special kinds of framework integration. The events are:
            </p><div class="itemizedlist"><ul><li><p><code class="literal">org.jboss.seam.validationFailed</code> — called when JSF validation fails</p></li><li><p><code class="literal">org.jboss.seam.noConversation</code> — called when there is no long running conversation and a long running conversation is required</p></li><li><p><code class="literal">org.jboss.seam.preSetVariable.&lt;name&gt;</code> — called when the context variable &lt;name&gt; is set</p></li><li><p><code class="literal">org.jboss.seam.postSetVariable.&lt;name&gt;</code> — called when the context variable &lt;name&gt; is set</p></li><li><p><code class="literal">org.jboss.seam.preRemoveVariable.&lt;name&gt;</code> — called when the context variable &lt;name&gt; is unset</p></li><li><p><code class="literal">org.jboss.seam.postRemoveVariable.&lt;name&gt;</code> — called when the context variable &lt;name&gt; is unset</p></li><li><p><code class="literal">org.jboss.seam.preDestroyContext.&lt;SCOPE&gt;</code> — called before the &lt;SCOPE&gt; context is destroyed</p></li><li><p><code class="literal">org.jboss.seam.postDestroyContext.&lt;SCOPE&gt;</code> — called after the &lt;SCOPE&gt; context is destroyed</p></li><li><p><code class="literal">org.jboss.seam.beginConversation </code> — called whenever a long-running conversation begins</p></li><li><p><code class="literal">org.jboss.seam.endConversation </code> — called whenever a long-running conversation ends</p></li><li><p><code class="literal">org.jboss.seam.conversationTimeout</code> — called when a conversation timeout occurs. The conversation id is passed as a parameter.</p></li><li><p><code class="literal">org.jboss.seam.beginPageflow </code> — called when a pageflow begins</p></li><li><p><code class="literal">org.jboss.seam.beginPageflow.&lt;name&gt; </code> — called when the pageflow &lt;name&gt; begins</p></li><li><p><code class="literal">org.jboss.seam.endPageflow </code> — called when a pageflow ends</p></li><li><p><code class="literal">org.jboss.seam.endPageflow.&lt;name&gt; </code> — called when the pageflow &lt;name&gt; ends</p></li><li><p><code class="literal">org.jboss.seam.createProcess.&lt;name&gt; </code> — called when the process &lt;name&gt; is created</p></li><li><p><code class="literal">org.jboss.seam.endProcess.&lt;name&gt; </code> — called when the process &lt;name&gt; ends</p></li><li><p><code class="literal">org.jboss.seam.initProcess.&lt;name&gt; </code> — called when the process &lt;name&gt; is associated with the conversation</p></li><li><p><code class="literal">org.jboss.seam.initTask.&lt;name&gt; </code> — called when the task &lt;name&gt; is associated with the conversation</p></li><li><p><code class="literal">org.jboss.seam.startTask.&lt;name&gt; </code> — called when the task &lt;name&gt; is started</p></li><li><p><code class="literal">org.jboss.seam.endTask.&lt;name&gt; </code> — called when the task &lt;name&gt; is ended</p></li><li><p><code class="literal">org.jboss.seam.postCreate.&lt;name&gt; </code> — called when the component &lt;name&gt; is created</p></li><li><p><code class="literal">org.jboss.seam.preDestroy.&lt;name&gt; </code> — called when the component &lt;name&gt; is destroyed</p></li><li><p><code class="literal">org.jboss.seam.beforePhase </code> — called before the start of a JSF phase</p></li><li><p><code class="literal">org.jboss.seam.afterPhase </code> — called after the end of a JSF phase</p></li><li><p><code class="literal">org.jboss.seam.postInitialization </code> — called when Seam has initialized and started up all components</p></li><li><p><code class="literal">org.jboss.seam.postReInitialization </code> — called when Seam has re-initialized and started up all components after a redeploy</p></li><li><p><code class="literal">org.jboss.seam.exceptionHandled.&lt;type&gt;</code> — called when an uncaught exception is handled by Seam</p></li><li><p><code class="literal">org.jboss.seam.exceptionHandled</code> — called when an uncaught exception is handled by Seam</p></li><li><p><code class="literal">org.jboss.seam.exceptionNotHandled</code> — called when there was no handler for an uncaught exception</p></li><li><p><code class="literal">org.jboss.seam.afterTransactionSuccess</code> — called when a transaction succeeds in the Seam Application Framework</p></li><li><p><code class="literal">org.jboss.seam.afterTransactionSuccess.&lt;name&gt;</code> — called when a transaction succeeds in the Seam Application Framework which manages an entity called <code class="literal">&lt;name&gt;</code></p></li><li><p><code class="literal">org.jboss.seam.security.loggedOut</code> — called when a user logs out</p></li><li><p><code class="literal">org.jboss.seam.security.loginFailed</code> — called when a user authentication attempt fails</p></li><li><p><code class="literal">org.jboss.seam.security.loginSuccessful</code> — called when a user is successfully authenticated</p></li><li><p><code class="literal">org.jboss.seam.security.notAuthorized</code> — called when an authorization check fails</p></li><li><p><code class="literal">org.jboss.seam.security.notLoggedIn</code> — called there is no authenticated user and authentication is required</p></li><li><p><code class="literal">org.jboss.seam.security.postAuthenticate.</code> — called after a user is authenticated</p></li><li><p><code class="literal">org.jboss.seam.security.preAuthenticate</code> — called before attempting to authenticate a user</p></li></ul></div><p>
                 Seam components may observe any of these events in just the same way they
                 observe any other component-driven events.
             </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5092"/>6.11. Seam interceptors</h2></div></div></div><p>
        EJB 3.0 introduced a standard interceptor model for session bean components. To add an
        interceptor to a bean, you need to write a class with a method annotated 
        <code class="literal">@AroundInvoke</code> and annotate the bean with an
        <code class="literal">@Interceptors</code> annotation that specifies the name of the interceptor
        class. For example, the following interceptor checks that the user is logged in before
        allowing invoking an action listener method:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">LoggedInInterceptor</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AroundInvoke</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;checkLoggedIn</span><span class="java_separator">(</span><span class="java_type">InvocationContext</span><span class="java_plain">&nbsp;invocation</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isLoggedIn&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Contexts</span><span class="java_separator">.</span><span class="java_plain">getSessionContext</span><span class="java_separator">().</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_literal">&quot;loggedIn&quot;</span><span class="java_separator">)</span><span class="java_operator">!=</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">isLoggedIn</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">the&nbsp;user&nbsp;is&nbsp;already&nbsp;logged&nbsp;in</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;invocation</span><span class="java_separator">.</span><span class="java_plain">proceed</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">the&nbsp;user&nbsp;is&nbsp;not&nbsp;logged&nbsp;in</span><span class="java_separator">,</span><span class="java_plain">&nbsp;fwd&nbsp;to&nbsp;login&nbsp;page</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;login&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
        To apply this interceptor to a session bean which acts as an action listener, we must
        annotate the session bean <code class="literal">@Interceptors(LoggedInInterceptor.class)</code>.
        This is a somewhat ugly annotation. Seam builds upon the interceptor framework in
        EJB3 by allowing you to use <code class="literal">@Interceptors</code> as a meta-annotation for class
        level interceptors (those annotated <code class="literal">@Target(TYPE)</code>). In
        our example, we would create an <code class="literal">@LoggedIn</code> annotation, as follows:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Target</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">TYPE</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Retention</span><span class="java_separator">(</span><span class="java_plain">RUNTIME</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Interceptors</span><span class="java_separator">(</span><span class="java_type">LoggedInInterceptor</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;@</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">LoggedIn</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span></pre><p>
            We can now simply annotate our action listener bean with <code class="literal">@LoggedIn</code>
            to apply the interceptor.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;changePasswordAction&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">LoggedIn</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Interceptors</span><span class="java_separator">(</span><span class="java_type">SeamInterceptor</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ChangePasswordAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">ChangePassword</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;changePassword</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            If interceptor ordering is important (it usually is), you can add
            <code class="literal">@Interceptor</code> annotations to your interceptor 
            classes to specify a partial order of interceptors.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptor</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">around</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_type">BijectionInterceptor</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ValidationInterceptor</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ConversationInterceptor</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">},</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;within</span><span class="java_operator">=</span><span class="java_type">RemoveInterceptor</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoggedInInterceptor</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            You can even have a "client-side" interceptor, that runs around any of the built-in
            functionality of EJB3:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptor</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">type</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">CLIENT</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">LoggedInInterceptor</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            EJB interceptors are stateful, with a lifecycle that is the same as the component
            they intercept. For interceptors which do not need to maintain state, Seam lets
            you get a performance optimization by specifying 
            <code class="literal">@Interceptor(stateless=true)</code>.
        </p><p>
            Much of the functionality of Seam is implemented as a set of built-in Seam interceptors,
            including the interceptors named in the previous example. You don't have to explicitly 
            specify these interceptors by annotating your components; they exist for all interceptable 
            Seam components.
        </p><p>
            You can even use Seam interceptors with JavaBean components, not just EJB3 beans!
        </p><p>
            EJB defines interception not only for business methods (using <code class="literal">@AroundInvoke</code>),
            but also for the lifecycle methods <code class="literal">@PostConstruct</code>, <code class="literal">@PreDestroy</code>,
            <code class="literal">@PrePassivate</code> and <code class="literal">@PostActive</code>. Seam supports all these
            lifecycle methods on both component and interceptor not only for EJB3 beans, but also for
            JavaBean components (except <code class="literal">@PreDestroy</code> which is not meaningful for JavaBean
            components).
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5168"/>6.12. Managing exceptions</h2></div></div></div><p>
            JSF is surprisingly limited when it comes to exception handling. As a partial 
            workaround for this problem, Seam lets you define how a particular class of 
            exception is to be treated by annotating the exception class, or declaring
            the exception class in an XML file. This facility is meant to be combined with 
            the EJB 3.0-standard <code class="literal">@ApplicationException</code> annotation which 
            specifies whether the exception should cause a transaction rollback.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5176"/>6.12.1. Exceptions and transactions</h3></div></div></div><p>
                EJB specifies well-defined rules that let us control whether an exception 
                immediately marks the current transaction for rollback when it is thrown by 
                a business method of the bean: <span class="emphasis"><em>system exceptions</em></span> always 
                cause a transaction rollback, <span class="emphasis"><em>application exceptions</em></span> do 
                not cause a rollback by default, but they do if 
                <code class="literal">@ApplicationException(rollback=true)</code>
                is specified. (An application exception is any checked exception, or any
                unchecked exception annotated <code class="literal">@ApplicationException</code>.
                A system exception is any unchecked exception without an 
                <code class="literal">@ApplicationException</code> annotation.)
            </p><p>
                Note that there is a difference between marking a transaction for rollback,
                and actually rolling it back. The exception rules say that the transaction
                should be marked rollback only, but it may still be active after the 
                exception is thrown.
            </p><p>
                Seam applies the EJB 3.0 exception rollback rules also to Seam JavaBean 
                components.
            </p><p>
                But these rules only apply in the Seam component layer. What about an exception 
                that is uncaught and propagates out of the Seam component layer, and out of the JSF 
                layer? Well, it is always wrong to leave a dangling transaction open, so Seam
                rolls back any active transaction when an exception occurs and is uncaught
                in the Seam component layer.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5202"/>6.12.2. Enabling Seam exception handling</h3></div></div></div><p>
            To enable Seam's exception handling, we need to make sure we have the master servlet 
            filter declared in <code class="literal">web.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You need to disable Facelets development mode in <code class="literal">web.xml</code> and
            Seam debug mode in <code class="literal">components.xml</code> if you want your exception handlers
            to fire.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5220"/>6.12.3. Using annotations for exception handling</h3></div></div></div><p>
            The following exception results in a HTTP 404 error whenever it propagates out of the
            Seam component layer. It does not roll back the current transaction immediately when 
            thrown, but the transaction will be rolled back if it the exception is not caught by
            another Seam component.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">HttpError</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">errorCode</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">404</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ApplicationException</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>
            This exception results in a browser redirect whenever it propagates out of the
            Seam component layer. It also ends the current conversation. It causes an immediate 
            rollback of the current transaction.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Redirect</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">viewId</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;/failure.xhtml&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;end</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">ApplicationException</span><span class="java_separator">(</span><span class="java_plain">rollback</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UnrecoverableApplicationException</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">RuntimeException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>
          It is important to note that Seam cannot handle exceptions that occur during JSF's
          RENDER_RESPONSE phase, as it is not possible to perform a redirect once the response
          has started being written to.  
        </div><p>
            You can also use EL to specify the <code class="literal">viewId</code> to redirect to.
        </p><p>
            This exception results in a redirect, along with a message to the user, when it 
            propagates out of the Seam component layer. It also immediately rolls back the 
            current transaction.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Redirect</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">viewId</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;/error.xhtml&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;message</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;Unexpected&nbsp;error&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">SystemException</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">RuntimeException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5242"/>6.12.4. Using XML for exception handling</h3></div></div></div><p>
            Since we can't add annotations to all the exception classes we are interested in,
            Seam also lets us specify this functionality in <code class="literal">pages.xml</code>.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.persistence.EntityNotFoundException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">http-error</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">error-code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;404&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.persistence.PersistenceException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Database&nbsp;access&nbsp;failed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Unexpected&nbsp;failure</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The last <code class="literal">&lt;exception&gt;</code> declaration does not specify a class,
            and is a catch-all for any exception for which handling is not otherwise specified
            via annotations or in <code class="literal">pages.xml</code>.
        </p><p>
            You can also use EL to specify the <code class="literal">view-id</code> to redirect to.
        </p><p>
           You can also access the handled exception instance through EL, Seam places it in the
           conversation context, e.g. to access the message of the exception:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
<span class="xml_plain">throw&nbsp;new&nbsp;AuthorizationException(&quot;You&nbsp;are&nbsp;not&nbsp;allowed&nbsp;to&nbsp;do&nbsp;this!&quot;);</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.AuthorizationException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">severity</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;WARN&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{org.jboss.seam.handledException.message}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
           <code class="literal">org.jboss.seam.handledException</code> holds the nested exception that
           was actually handled by an exception handler. The outermost (wrapper) exception is 
           also available, as <code class="literal">org.jboss.seam.caughtException</code>.
         </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e5277"/>6.12.4.1. Suppressing exception logging</h4></div></div></div><p>
                 For the exception handlers defined in <code class="literal">pages.xml</code>, it is possible
                 to declare the logging level at which the exception will be logged, or to even
                 suppress the exception being logged altogether.  The attributes <code class="literal">log</code>
                 and <code class="literal">log-level</code> can be used to control exception logging.  By setting 
                 <code class="literal">log="false"</code> as per the following example, then no log message will
                 be generated when the specified exception occurs:
             </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.NotLoggedInException&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">log</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/register.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">severity</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;warn&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;must&nbsp;be&nbsp;a&nbsp;member&nbsp;to&nbsp;use&nbsp;this&nbsp;feature</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                 If the <code class="literal">log</code> attribute is not specified, then it defaults to <code class="literal">true</code>
                 (i.e. the exception will be logged).  Alternatively, you can specify the <code class="literal">log-level</code>
                 to control at which log level the exception will be logged:             
             </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.NotLoggedInException&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">log-level</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;info&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/register.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">severity</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;warn&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;must&nbsp;be&nbsp;a&nbsp;member&nbsp;to&nbsp;use&nbsp;this&nbsp;feature</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                  The acceptable values for <code class="literal">log-level</code> are: <code class="literal">fatal, error, warn, info, debug</code> 
                  or <code class="literal">trace</code>.  If the <code class="literal">log-level</code> is not specified, or if an invalid value is
                  configured, then it will default to <code class="literal">error</code>.              
              </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5326"/>6.12.5. Some common exceptions</h3></div></div></div><p>
                If you are using JPA:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.persistence.EntityNotFoundException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Not&nbsp;found</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.persistence.OptimisticLockException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Another&nbsp;user&nbsp;changed&nbsp;the&nbsp;same&nbsp;data,&nbsp;please&nbsp;try&nbsp;again</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                If you are using the Seam Application Framework:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.framework.EntityNotFoundException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Not&nbsp;found</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                If you are using Seam Security:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.AuthorizationException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;don't&nbsp;have&nbsp;permission&nbsp;to&nbsp;do&nbsp;this</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.NotLoggedInException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Please&nbsp;log&nbsp;in&nbsp;first</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               And, for JSF:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javax.faces.application.ViewExpiredException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Your&nbsp;session&nbsp;has&nbsp;timed&nbsp;out,&nbsp;please&nbsp;try&nbsp;again</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                A <code class="literal">ViewExpiredException</code> occurs if the user posts back to a page once their session has
                expired. The <code class="literal">conversation-required</code> and <code class="literal">no-conversation-view-id</code>
                settings in the Seam page descriptor, discussed in <a class="xref" href="#conversations.required" title="7.4. Requiring a long-running conversation">Section 7.4, “Requiring a long-running conversation”</a>, give you
                finer-grained control over session expiration if you are accessing a page used within a conversation.
            </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="conversations"/>Chapter 7. Conversations and workspace management</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e5392">7.1. Seam's conversation model</a></span></dt><dt><span class="section"><a href="#d0e5491">7.2. Nested conversations</a></span></dt><dt><span class="section"><a href="#d0e5531">7.3. Starting conversations with GET requests</a></span></dt><dt><span class="section"><a href="#conversations.required">7.4. Requiring a long-running conversation</a></span></dt><dt><span class="section"><a href="#d0e5679">7.5. Using &lt;s:link&gt; and &lt;s:button&gt;</a></span></dt><dt><span class="section"><a href="#d0e5783">7.6. Success messages</a></span></dt><dt><span class="section"><a href="#d0e5811">7.7. Natural conversation ids</a></span></dt><dt><span class="section"><a href="#d0e5845">7.8. Creating a natural conversation</a></span></dt><dt><span class="section"><a href="#d0e5898">7.9. Redirecting to a natural conversation</a></span></dt><dt><span class="section"><a href="#d0e5941">7.10. Workspace management</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5956">7.10.1. Workspace management and JSF navigation</a></span></dt><dt><span class="section"><a href="#d0e5977">7.10.2. Workspace management and jPDL pageflow</a></span></dt><dt><span class="section"><a href="#d0e5993">7.10.3. The conversation switcher</a></span></dt><dt><span class="section"><a href="#d0e6012">7.10.4. The conversation list</a></span></dt><dt><span class="section"><a href="#d0e6030">7.10.5. Breadcrumbs</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6042">7.11. Conversational components and JSF component bindings</a></span></dt><dt><span class="section"><a href="#d0e6073">7.12. Concurrent calls to conversational components</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6096">7.12.1. How should we design our conversational AJAX application?</a></span></dt><dt><span class="section"><a href="#d0e6112">7.12.2. Dealing with errors</a></span></dt></dl></dd></dl></div><p>
        It's time to understand Seam's conversation model in more detail.
    </p><p>
        Historically, the notion of a Seam "conversation" came about as
        a merger of three different ideas:
    </p><div class="itemizedlist"><ul><li><p>
            The idea of a <span class="emphasis"><em>workspace</em></span>, which I 
            encountered in a project for the Victorian government in 
            2002. In this project I was forced to implement workspace 
            management on top of Struts, an experience I pray never
            to repeat.
        </p></li><li><p>
            The idea of an <span class="emphasis"><em>application transaction</em></span>
            with optimistic semantics, and the realization that existing
            frameworks based around a stateless architecture could not
            provide effective management of extended persistence contexts.
            (The Hibernate team is truly fed up with copping the blame for
            <code class="literal">LazyInitializationException</code>s, which are
            not really Hibernate's fault, but rather the fault of the 
            extremely limiting persistence context model supported by 
            stateless architectures such as the Spring framework or the 
            traditional <span class="emphasis"><em>stateless session facade</em></span> 
            (anti)pattern in J2EE.)
        </p></li><li><p>
            The idea of a workflow <span class="emphasis"><em>task</em></span>.
        </p></li></ul></div><p>
        By unifying these ideas and providing deep support in the framework, 
        we have a powerful construct that lets us build richer and more efficient 
        applications with less code than before.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5392"/>7.1. Seam's conversation model</h2></div></div></div><p>
        The examples we have seen so far make use of a very simple
        conversation model that follows these rules:
    </p><div class="itemizedlist"><ul><li><p>
            There is always a conversation context active during the
            apply request values, process validations, update model values, 
            invoke application and render response phases of the JSF request 
            lifecycle.
        </p></li><li><p>
            At the end of the restore view phase of the JSF request 
            lifecycle, Seam attempts to restore any previous long-running
            conversation context. If none exists, Seam creates a new
            temporary conversation context.
        </p></li><li><p>
            When an <code class="literal">@Begin</code> method is encountered, 
            the temporary conversation context is promoted to a long
            running conversation.
        </p></li><li><p>
            When an <code class="literal">@End</code> method is encountered, 
            any long-running conversation context is demoted to a 
            temporary conversation.
        </p></li><li><p>
            At the end of the render response phase of the JSF request
            lifecycle, Seam stores the contents of a long running
            conversation context or destroys the contents of a temporary
            conversation context.
        </p></li><li><p>
            Any faces request (a JSF postback) will propagate the 
            conversation context. By default, non-faces requests (GET 
            requests, for example) do not propagate the conversation 
            context, but see below for more information on this.
        </p></li><li><p>
            If the JSF request lifecycle is foreshortened by a redirect,
            Seam transparently stores and restores the current conversation 
            context — unless the conversation was already ended via
            <code class="literal">@End(beforeRedirect=true)</code>.
        </p></li></ul></div><p>
            Seam transparently propagates the conversation context (including
            the temporary conversation context) across JSF postbacks and 
            redirects. If you don't do anything special, a <span class="emphasis"><em>non-faces request</em></span>
            (a GET request for example) will not propagate the conversation context and
            will be processed in a new temporary conversation. This is usually - but not
            always - the desired behavior.
        </p><p>
            If you want to propagate a Seam conversation across a non-faces request, you
            need to explicitly code the Seam <span class="emphasis"><em>conversation id</em></span> as a 
            request parameter:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main.jsf?#{manager.conversationIdParameter}=#{conversation.id}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Continue</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Or, the more JSF-ish:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main.jsf&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{manager.conversationIdParameter}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{conversation.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Continue&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If you use the Seam tag library, this is equivalent:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main.jsf&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationId</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Continue&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If you wish to disable propagation of the conversation context for a
            postback, a similar trick is used:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Exit&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;conversationPropagation&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;none&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If you use the Seam tag library, this is equivalent:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Exit&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;none&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Note that disabling conversation context propagation is absolutely not the
            same thing as ending the conversation.
        </p><p>
            The <code class="literal">conversationPropagation</code> request parameter, or 
            the <code class="literal">&lt;s:conversationPropagation&gt;</code> tag may even
            be used to begin a conversation, end the current conversation, 
            destroy the entire conversation stack, or begin a nested conversation.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Exit&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;end&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Exit&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;endRoot&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Select&nbsp;Child&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;nested&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Select&nbsp;Hotel&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;begin&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Select&nbsp;Hotel&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;join&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        This conversation model makes it easy to build applications which
        behave correctly with respect to multi-window operation. For many
        applications, this is all that is needed. Some complex applications
        have either or both of the following additional requirements:
    </p><div class="itemizedlist"><ul><li><p>
            A conversation spans many smaller units of user interaction,
            which execute serially or even concurrently. The smaller
            <span class="emphasis"><em>nested conversations</em></span> have their own
            isolated set of conversation state, and also have access to
            the state of the outer conversation.
        </p></li><li><p>
            The user is able to switch between many conversations
            within the same browser window. This feature is called
            <span class="emphasis"><em>workspace management</em></span>.
        </p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5491"/>7.2. Nested conversations</h2></div></div></div><p>
            A nested conversation is created by invoking a method marked
            <code class="literal">@Begin(nested=true)</code> inside the scope of an
            existing conversation. A nested conversation has its own
            conversation context, but can read values from the outer
            conversation's context.  The outer conversation's context is 
            read-only within a nested conversation, but because objects 
            are obtained by reference, changes to the objects themselves 
            will be reflected in the outer context.
        </p><div class="itemizedlist"><ul><li><p>
                 Nesting a conversation through initializes a context that is
                 stacked on the context of the original, or outer, conversation.
                 The outer conversation is considered the parent.
              </p></li><li><p>
                 Any values outjected or directly set into the nested
                 conversation’s context do not affect the objects accessible in
                 the parent conversation’s context.
              </p></li><li><p>
                 Injection or a context lookup from the conversation context
                 will first lookup the value in the current conversation context
                 and, if no value is found, will proceed down the conversation
                 stack if the conversation is nested. As you will see in moment,
                 this behavior can be overriden.
              </p></li></ul></div><p>
            When an <code class="literal">@End</code> is subsequently encountered,
            the nested conversation will be destroyed, and the outer
            conversation will resume, by "popping" the conversation stack.
            Conversations may be nested to any arbitrary depth.
        </p><p>
            Certain user activity (workspace management, or the back button)
            can cause the outer conversation to be resumed before the inner
            conversation is ended. In this case it is possible to have 
            multiple concurrent nested conversations belonging to the
            same outer conversation. If the outer conversation ends before
            a nested conversation ends, Seam destroys all nested conversation
            contexts along with the outer context.
        </p><p>
        	The conversation at the bottom of the conversation stack is the root 
        	conversation.  Destroying this conversation always destroy all of its 
        	descendents.  You can achieve this declaratively by specifying
        	<code class="literal">@End(root=true)</code>.
        </p><p>
            A conversation may be thought of as a <span class="emphasis"><em>continuable state</em></span>.
            Nested conversations allow the application to capture a consistent
            continuable state at various points in a user interaction, thus
            ensuring truly correct behavior in the face of backbuttoning and
            workspace management.
        </p><p>
            As mentioned previously, if a component exists in a parent conversation of 
            the current nested conversation, the nested conversation will use
            the same instance. Occasionally, it is useful to have a different
            instance in each nested conversation, so that the component 
            instance that exists in the parent conversation is invisible to
            its child conversations. You can achieve this behavior by 
            annotating the component <code class="literal">@PerNestedConversation</code>.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5531"/>7.3. Starting conversations with GET requests</h2></div></div></div><p>
            JSF does not define any kind of action listener that is triggered
            when a page is accessed via a non-faces request (for example, a
            HTTP GET request). This can occur if the user bookmarks the page,
            or if we navigate to the page via an <code class="literal">&lt;h:outputLink&gt;</code>.
        </p><p>
            Sometimes we want to begin a conversation immediately the page is
            accessed. Since there is no JSF action method, we can't solve the problem
            in the usual way, by annotating the action with <code class="literal">@Begin</code>.
        </p><p>
            A further problem arises if the page needs some state to be fetched
            into a context variable. We've already seen two ways to solve this 
            problem. If that state is held in a Seam component, we can fetch the 
            state in a <code class="literal">@Create</code> method. If not, we can define a
            <code class="literal">@Factory</code> method for the context variable.
        </p><p>
            If none of these options works for you, Seam lets you define a
            <span class="emphasis"><em>page action</em></span> in the <code class="literal">pages.xml</code>
            file.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/messageList.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messageManager.list}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            This action method is called at the beginning of the render response
            phase, any time the page is about to be rendered. If a page action
            returns a non-null outcome, Seam will process any appropriate JSF and
            Seam navigation rules, possibly resulting in a completely different page 
            being rendered.
        </p><p>
            If <span class="emphasis"><em>all</em></span> you want to do before rendering the page
            is begin a conversation, you could use a built-in action method that
            does just that:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/messageList.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{conversation.begin}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Note that you can also call this built-in action from a JSF
            control, and, similarly, you can use 
            <code class="literal">#{conversation.end}</code> to end conversations.
        </p><p>
            If you want more control, to join existing conversations or
            begin a nested conversion, to begin a pageflow or an atomic
            conversation, you should use the 
            <code class="literal">&lt;begin-conversation&gt;</code> element.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/messageList.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">begin-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">nested</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pageflow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;AddItem&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            There is also an <code class="literal">&lt;end-conversation&gt;</code> 
            element.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            To solve the first problem, we now have five options:
        </p><div class="itemizedlist"><ul><li><p>
                Annotate the <code class="literal">@Create</code> method with
                <code class="literal">@Begin</code>
            </p></li><li><p>
                Annotate the <code class="literal">@Factory</code> method with
                <code class="literal">@Begin</code>
            </p></li><li><p>
                Annotate the Seam page action method with
                <code class="literal">@Begin</code>
            </p></li><li><p>
                Use <code class="literal">&lt;begin-conversation&gt;</code> in
                <code class="literal">pages.xml</code>.
            </p></li><li><p>
                Use <code class="literal">#{conversation.begin}</code> as
                the Seam page action method
            </p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="conversations.required"/>7.4. Requiring a long-running conversation</h2></div></div></div><p>
            Certain pages are only relevant in the context of a long-running conversation. One way to "protect" such a
            page is to require a long-running conversation as a prerequisite to rendering the page. Fortunately, Seam
            has a built-in mechanism for enforcing this requirement.
        </p><p>
            In the Seam page descriptor, you can indicate that the current conversation must be long-running (or nested)
            in order for a page to be rendered using the <code class="literal">conversation-required</code> attribute as follows:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/book.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">conversation-required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
               The only downside is there's no built-in way to indicate <span class="emphasis"><em>which</em></span> long-running
               conversation is required. You can build on this basic authorization by dually checking if a specific
               value is present in the conversation within a page action.
           </p></div><p>
            When Seam determines that this page is requested outside of a long-running conversation, the following
            actions are taken:
        </p><div class="itemizedlist"><ul><li><p>A contextual event named <code class="literal">org.jboss.seam.noConversation</code> is raised</p></li><li><p>A warning status message is registered using the bundle key <code class="literal">org.jboss.seam.NoConversation</code></p></li><li><p>The user is redirected to an alternate page, if defined</p></li></ul></div><p>
            The alternate page is defined in the <code class="literal">no-conversation-view-id</code> attribute on a
            <code class="literal">&lt;pages&gt;</code> element in the Seam page descriptor as follows:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">no-conversation-view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            At the moment, you can only define one such page for the entire application.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5679"/>7.5. Using <code class="literal">&lt;s:link&gt;</code> and <code class="literal">&lt;s:button&gt;</code></h2></div></div></div><p>
            JSF command links always perform a form submission via JavaScript, 
            which breaks the web browser's "open in new window" or "open in new tab"
            feature. In plain JSF, you need to use an <code class="literal">&lt;h:outputLink&gt;</code>
            if you need this functionality. But there are two major limitations to 
            <code class="literal">&lt;h:outputLink&gt;</code>.
        </p><div class="itemizedlist"><ul><li><p>
            JSF provides no way to attach an action listener to an 
            <code class="literal">&lt;h:outputLink&gt;</code>.
        </p></li><li><p>
            JSF does not propagate the selected row of a <code class="literal">DataModel</code> 
            since there is no actual form submission.
        </p></li></ul></div><p>
            Seam provides the notion of a <span class="emphasis"><em>page action</em></span> to help 
            solve the first problem, but this does nothing to help us with the second 
            problem. We <span class="emphasis"><em>could</em></span> work around this by using the
            RESTful approach of passing a request parameter and requerying
            for the selected object on the server side. In some cases — such as the 
            Seam blog example application — this is indeed the best approach. The 
            RESTful style supports bookmarking, since it does not require server-side state. 
            In other cases, where we don't care about bookmarks, the use of 
            <code class="literal">@DataModel</code> and <code class="literal">@DataModelSelection</code> is 
            just so convenient and transparent!
        </p><p>
            To fill in this missing functionality, and to make conversation propagation
            even simpler to manage, Seam provides the <code class="literal">&lt;s:link&gt;</code>
            JSF tag.
        </p><p>
            The link may specify just the JSF view id:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Login&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Or, it may specify an action method (in which case the action outcome determines
            the page that results):
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{login.logout}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Logout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If you specify <span class="emphasis"><em>both</em></span> a JSF view id and an action method, the
            'view' will be used <span class="emphasis"><em>unless</em></span> the action method returns a
            non-null outcome:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/loggedOut.xhtml&quot;</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{login.logout}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Logout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The link automatically propagates the selected row of a <code class="literal">DataModel</code>
            using inside <code class="literal">&lt;h:dataTable&gt;</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hotel.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hotelSearch.selectHotel}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hotel.name}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can leave the scope of an existing conversation:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">propagation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;none&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can begin, end, or nest conversations:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{issueEditor.viewComment}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">propagation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;nested&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If the link begins a conversation, you can even specify a pageflow to be used:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentEditor.getDocument}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">propagation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;begin&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">pageflow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;EditDocument&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The <code class="literal">taskInstance</code> attribute is for use in jBPM task lists:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documentApproval.approveOrReject}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">taskInstance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            (See the DVD Store demo application for examples of this.)
        </p><p>
            Finally, if you need the "link" to be rendered as a button, use <code class="literal">&lt;s:button&gt;</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{login.logout}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Logout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5783"/>7.6. Success messages</h2></div></div></div><p>
            It is quite common to display a message to the user indicating 
            success or failure of an action. It is convenient to use a JSF
            <code class="literal">FacesMessage</code> for this. Unfortunately, a
            successful action often requires a browser redirect, and JSF 
            does not propagate faces messages across redirects. This makes
            it quite difficult to display success messages in plain JSF.
        </p><p>
            The built in conversation-scoped Seam component named 
            <code class="literal">facesMessages</code> solves this problem.
            (You must have the Seam redirect filter installed.)
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;editDocumentAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">EditDocumentBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">EditDocument</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Document</span><span class="java_plain">&nbsp;document</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_plain">&nbsp;facesMessages</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;update</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">merge</span><span class="java_separator">(</span><span class="java_plain">document</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Document&nbsp;updated&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Any message added to <code class="literal">facesMessages</code> is
            used in the very next render response phase for the current
            conversation. This even works when there is no long-running
            conversation since Seam preserves even temporary conversation
            contexts across redirects.
        </p><p>
            You can even include JSF EL expressions in a faces message summary:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">facesMessages</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">add</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;Document&nbsp;#{document.title}&nbsp;was&nbsp;updated&quot;</span><!-- <br/> --><span class="java_separator">);</span></pre><p>
            You may display the messages in the usual way, for example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">globalOnly</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5811"/>7.7. Natural conversation ids</h2></div></div></div><p>
            When working with conversations that deal with persistent objects, it may be 
            desirable to use the natural business key of the object instead of the standard,
            "surrogate" conversation id:
        </p><p>
                  <span class="emphasis"><em>Easy redirect to existing conversation</em></span>
               </p><p>
                  It can be useful to redirect to an existing conversation if 
                  the user requests the same operation twice. Take this example:
               
               “<span class="quote">
                  You are on ebay, half way through paying for an item you just 
                  won as a Christmas present for your parents. Lets say you're
                  sending it straight to them - you enter your payment details 
                  but you can't remember their address. You accidentally reuse 
                  the same browser window finding out their address. Now you 
                  need to return to the payment for the item.
               </span>”
       		</p><p>
                  With a natural conversation it's really easy to have the user
                  rejoin the existing conversation, and pick up where they left 
                  off - just have them to rejoin the payForItem conversation 
                  with the itemId as the conversation id.
               </p><p>
                  <span class="emphasis"><em>User friendly URLs</em></span>
               </p><p>
                  For me this consists of a navigable 
                  hierarchy (I can navigate by editing the url) and a meaningful
                  URL (like this Wiki uses - so don't identify things by random 
                  ids). For some applications user friendly URLs are less 
                  important, of course.
               </p><p>
                  With a natural conversation, when you are building your hotel 
                  booking system (or, of course, whatever your app is) you can 
                  generate a URL like 
                  <code class="literal">http://seam-hotels/book.seam?hotel=BestWesternAntwerpen</code> 
                  (of course, whatever parameter <code class="literal">hotel</code> maps 
                  to on your domain model must be unique) and with URLRewrite 
                  easily transform this to 
                  http://seam-hotels/book/BestWesternAntwerpen.
               </p><p>
                  Much better!
               </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5845"/>7.8. Creating a natural conversation</h2></div></div></div><p>
                Natural conversations are defined in <code class="literal">pages.xml</code>: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PlaceBid&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">parameter-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;auctionId&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">parameter-value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{auction.auctionId}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                The first thing to note from the above definition is that the conversation
                has a name, in this case <code class="literal">PlaceBid</code>.  This name uniquely
                identifies this particular named conversation, and is used by the 
                <code class="literal">page</code> definition to identify a named conversation to participate
                in.
            </p><p>
                The next attribute, <code class="literal">parameter-name</code> defines the request parameter 
                that will contain the natural conversation id, in place of the default conversation 
                id parameter. In this example, the <code class="literal">parameter-name</code> is <code class="literal">auctionId</code>.  
                This means that instead of a conversation parameter like <code class="literal">cid=123</code> 
                appearing in the URL for your page, it will contain <code class="literal">auctionId=765432</code> 
                instead.
            </p><p>
                The last attribute in the above configuration, <code class="literal">parameter-value</code>,
                defines an EL expression used to evaluate the value of the natural business key to
                use as the conversation id.  In this example, the conversation id will be the primary
                key value of the <code class="literal">auction</code> instance currently in scope.
            </p><p>
                Next, we define which pages will participate in the named conversation.
                This is done by specifying the <code class="literal">conversation</code> attribute for a
                <code class="literal">page</code> definition:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/bid.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">conversation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PlaceBid&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">login-required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{bidAction.confirmBid}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;success&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/auction.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;id&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{bidAction.bid.auction.auctionId}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5898"/>7.9. Redirecting to a natural conversation</h2></div></div></div><p>
                When starting, or redirecting to, a natural conversation there are a number
                of options for specifying the natural conversation name.  Let's start by looking at
                the following page definition:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/auction.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;id&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{auctionDetail.selectedAuctionId}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">from-action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{bidAction.placeBid}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/bid.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                From here, we can see that invoking the action <code class="literal">#{bidAction.placeBid}</code>
                from our auction view (by the way, all these examples are taken from the seamBay example in Seam),
                that we will be redirected to <code class="literal">/bid.xhtml</code>, which, as we saw previously,
                is configured with the natural conversation <code class="literal">PlaceBid</code>.  The declaration for
                our action method looks like this:                
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">Begin</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">join&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;placeBid</span><span class="java_separator">()</span></pre><p>
                When named conversations are specified in the <code class="literal">&lt;page/&gt;</code> element,
                redirection to the named conversation occurs as part of navigation rules, after the 
                action method has already been invoked.  This is a problem when redirecting to an
                existing conversation, as redirection needs to be occur before the action method is 
                invoked.  Therefore it is necessary to specify the conversation name when
                the action is invoked.  One way of doing this is by using the <code class="literal">s:conversationName</code>
                tag:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;placeBidWithAmount&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;placeBid&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{bidAction.placeBid}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationName</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PlaceBid&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
              Another alternative is to specify the <code class="literal">conversationName</code> attribute when
              using either <code class="literal">s:link</code> or <code class="literal">s:button</code>:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Place&nbsp;Bid&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{bidAction.placeBid}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">conversationName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;PlaceBid&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5941"/>7.10. Workspace management</h2></div></div></div><p>
            Workspace management is the ability to "switch" conversations in
            a single window. Seam makes workspace management completely 
            transparent at the level of the Java code. To enable workspace
            management, all you need to do is:
        </p><div class="itemizedlist"><ul><li><p>
                Provide <span class="emphasis"><em>description</em></span> text for each view id 
                (when using JSF or Seam navigation rules) or page node (when using 
                jPDL pageflows). This description text is displayed to the user 
                by the workspace switchers.
            </p></li><li><p>
                Include one or more of the standard workspace switcher JSF
                or Facelets fragments in your pages. The standard fragments
                support workspace management via a drop down menu, a list
                of conversations, or breadcrumbs.
                </p></li></ul></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5956"/>7.10.1. Workspace management and JSF navigation</h3></div></div></div><p>
                When you use JSF or Seam navigation rules, Seam switches to a
                conversation by restoring the current <code class="literal">view-id</code>
                for that conversation. The descriptive text for the
                workspace is defined in a file called <code class="literal">pages.xml</code>
                that Seam expects to find in the <code class="literal">WEB-INF</code>
                directory, right next to <code class="literal">faces-config.xml</code>:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Search&nbsp;hotels:&nbsp;#{hotelBooking.searchString}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/hotel.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">View&nbsp;hotel:&nbsp;#{hotel.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/book.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Book&nbsp;hotel:&nbsp;#{hotel.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/confirm.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Confirm:&nbsp;#{booking.description}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               Note that if this file is missing, the Seam application will
               continue to work perfectly! The only missing functionality
               will be the ability to switch workspaces.
           </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5977"/>7.10.2. Workspace management and jPDL pageflow</h3></div></div></div><p>
                When you use a jPDL pageflow definition, Seam switches
                to a conversation by restoring the current jBPM process
                state. This is a more flexible model since it allows the
                same <code class="literal">view-id</code> to have different
                descriptions depending upon the current 
                <code class="literal">&lt;page&gt;</code> node. The description
                text is defined by the <code class="literal">&lt;page&gt;</code> 
                node:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pageflow-definition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;shopping&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-state</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;start&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;browse&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">start-state</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;browse&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/browse.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">DVD&nbsp;Search:&nbsp;#{search.searchPattern}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;browse&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/checkout.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Purchase:&nbsp;$#{cart.total}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/complete.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pageflow-definition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5993"/>7.10.3. The conversation switcher</h3></div></div></div><p>
                Include the following fragment in your JSF page
                to get a drop-down menu that lets you switch to any
                current conversation, or to any other page of the application:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{switcher.conversationIdOrOutcome}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Find&nbsp;Issues&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;findIssue&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;Issue&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;editIssue&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{switcher.selectItems}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{switcher.select}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Switch&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                In this example, we have a menu that includes an item for each
                conversation, together with two additional items that let the
                user begin a new conversation.
            </p><p>
                Only conversations with a description (specified in 
                <code class="literal">pages.xml</code>) will be included in the drop-down 
                menu.
            </p><div class="mediaobject" align="center"><img src="images/switcher.png" align="middle"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6012"/>7.10.4. The conversation list</h3></div></div></div><p>
                The conversation list is very similar to the conversation switcher,
                except that it is displayed as a table:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{conversationList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;empty&nbsp;conversationList}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Workspace</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.select}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.description}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;[current]&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.current}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Activity</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.startDatetime}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;time&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hh:mm&nbsp;a&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;&nbsp;-&nbsp;&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.lastDatetime}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;time&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hh:mm&nbsp;a&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Action</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.select}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{msg.Switch}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.destroy}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{msg.Destroy}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                We imagine that you will want to customize this for your own application.
            </p><div class="mediaobject" align="center"><img src="images/list.png" align="middle"/></div><p>
                Only conversations with a description will be included in the
                list.
            </p><p>
                Notice that the conversation list lets the user destroy workspaces.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6030"/>7.10.5. Breadcrumbs</h3></div></div></div><p>
                Breadcrumbs are useful in applications which use a nested conversation
                model. The breadcrumbs are a list of links to conversations in the
                current conversation stack:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{conversationStack}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;&nbsp;|&nbsp;&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.description}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.select}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain"></span><br />
</pre><div class="mediaobject" align="center"><img src="images/breadcrumbs.png" align="middle"/></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6042"/>7.11. Conversational components and JSF component bindings</h2></div></div></div><p>
            Conversational components have one minor limitation: they cannot be used to hold bindings 
            to JSF components. (We generally prefer not to use this feature of JSF unless absolutely
            necessary, since it creates a hard dependency from application logic to the view.) On a 
            postback request, component bindings are updated during the Restore View phase, 
            before the Seam conversation context has been restored.
        </p><p>
            To work around this use an event scoped component to store the component bindings and inject 
            it into the conversation scoped component that requires it.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;grid&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">EVENT</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Grid</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">HtmlPanelGrid</span><span class="java_plain">&nbsp;htmlPanelGrid</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;getters&nbsp;and&nbsp;setters</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;gridEditor&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">CONVERSATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">GridEditor</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">required</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Grid</span><span class="java_plain">&nbsp;grid</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
         Also, you can't inject a conversation scoped component into an event
         scoped component which you bind a JSF control to. This includes Seam
         built in components like <code class="literal">facesMessages</code>. 
       </p><p>
          Alternatively, you can access the JSF component tree through the implicit <code class="literal">uiComponent</code>
          handle. The following example accesses <code class="literal">getRowIndex()</code> of the
          <code class="literal">UIData</code> component which backs the data table during iteration, it prints
          the current row number:
       </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lineItemTable&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lineItem&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{orderHome.lineItems}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Row:&nbsp;#{uiComponent['lineItemTable'].rowIndex}</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
          JSF UI components are available with their client identifier in this map.
       </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6073"/>7.12. Concurrent calls to conversational components</h2></div></div></div><p>
        A general discussion of concurrent calls to Seam components can be 
        found in <a class="xref" href="#concurrency" title="4.1.10. Concurrency model">Section 4.1.10, “Concurrency model”</a>. Here we will discuss 
        the most common situation in which you will encounter concurrency 
        — accessing conversational components from AJAX requests.
        We're going to discuss the options that a Ajax client library should
        provide to control events originating at the client — and we'll
        look at the options RichFaces gives you.
      </p><p>
        Conversational components don't allow real concurrent access therefore
        Seam queues each request to process them serially.  This allows each
        request to be executed in a deterministic fashion. However, a simple
        queue isn't that great — firstly, if a method is, for some
        reason, taking a very long time to complete, running it over and over
        again whenever the client generates a request is bad idea (potential
        for Denial of Service attacks), and, secondly, AJAX is often to used
        to provide a quick status update to the user, so continuing to run the
        action after a long time isn't useful. 
      </p><p>
        Therefore, when you are working inside a long running conversation,
        Seam queues the action event for a period of time (the concurrent 
        request timeout); if it can't process the event in time, it creates a 
        temporary conversation and prints out a message to the user to let them
        know what's going on.  It's therefore very important not to flood the 
        server with AJAX events!
      </p><p>
        We can set a sensible default for the concurrent request timeout (in 
        ms) in components.xml:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:manager</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">concurrent-request-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        We can also fine tune the concurrent request timeout on a page-by-page
        basis:
       </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/book.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">conversation-required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">login-required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">concurrent-request-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2000&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        So far we've discussed AJAX requests which appear serial to the user - 
        the client tells the server that an event has occur, and then rerenders 
        part of the page based on the result.  This approach is great when the 
        AJAX request is lightweight (the methods called are simple e.g. 
        calculating the sum of a column of numbers).  But what if we need to do 
        a complex computation that is going to take a minute? 
      </p><p>
        For heavy computation we should use a poll based approach — the 
        client sends an AJAX request to the server, which causes action to be 
        executed asynchronously on the server (the response to the client is 
        immediate) and the client then polls the server for updates.  This is 
        good approach when you have a long-running action for which it is 
        important that every action executes (you don't want some to timeout).
      </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6096"/>7.12.1. How should we design our conversational AJAX application?</h3></div></div></div><p>
          Well first, you need to decide whether you want to use the simpler 
          "serial" request or whether you want to use a polling approach.
        </p><p>
          If you go for a "serial" requests, then you need to estimate how long 
          your request will take to complete - is it much shorter than the 
          concurrent request timeout? If not, you probably want to alter the 
          concurrent request timeout for this page (as discussed above). You 
          probably want a queue on the client side to prevent flooding the 
          server with requests.  If the event occurs often (e.g. a keypress, 
          onblur of input fields) and immediate update of the client is not a 
          priority you should set a request delay on the client side. When 
          working out your request delay, factor in that the event may also be 
          queued on the server side.
        </p><p>
          Finally, the client library may provide an option to abort unfinished
          duplicate requests in favor of the most recent.
        </p><p>
          Using a poll-style design requires less fine-tuning.  You just mark your
          action method <code class="literal">@Asynchronous</code> and decide on a polling
          interval:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">int</span><!-- <br/> --><span class="java_plain">&nbsp;total</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">This</span><span class="java_plain">&nbsp;method&nbsp;is&nbsp;called&nbsp;when&nbsp;an&nbsp;event&nbsp;occurs&nbsp;on&nbsp;the&nbsp;client</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">It</span><span class="java_plain">&nbsp;takes&nbsp;a&nbsp;really&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;time&nbsp;to&nbsp;execute</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Asynchronous</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;calculateTotal</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;total&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;someReallyComplicatedCalculation</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">This</span><span class="java_plain">&nbsp;method&nbsp;is&nbsp;called&nbsp;as&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;poll</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">It</span><span class="java_plain">'s&nbsp;very&nbsp;quick&nbsp;to&nbsp;execute</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getTotal</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;total</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6112"/>7.12.2. Dealing with errors</h3></div></div></div><p>
          However carefully you design your application to queue concurrent
          requests to your conversational component, there is a risk that the
          server will become overloaded and be unable to process all the
          requests before the request will have to wait longer than the 
          <code class="literal">concurrent-request-timeout</code>. In this case Seam will
          throw a <code class="literal">ConcurrentRequestTimeoutException</code> which can
          be handled in <code class="literal">pages.xml</code>. We recommend sending an
          HTTP 503 error: 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.ConcurrentRequestTimeoutException&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">log-level</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;trace&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">http-error</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">error-code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;503&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>503 Service Unavailable (HTTP/1.1 RFC)</h2><p>
            The server is currently unable to handle the request due to a 
            temporary overloading or maintenance of the server. The implication 
            is that this is a temporary condition which will be alleviated after 
            some delay.
          </p></div><p>
          Alternatively you could redirect to an error page:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.ConcurrentRequestTimeoutException&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">log-level</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;trace&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;server&nbsp;is&nbsp;too&nbsp;busy&nbsp;to&nbsp;process&nbsp;your&nbsp;request,&nbsp;please&nbsp;try&nbsp;again&nbsp;later</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
           Seam Remoting and JSF 2 can both handle HTTP error
           codes. Seam Remoting will pop up a dialog box showing the HTTP
           error. JSF 2 provides support for handling
           HTTP errors by providing a user definable callback. For example, to
           show the error message to the user: 
        </p><pre class="programlisting">&lt;script type="text/javascript"&gt;
   jsf.ajax.addOnError(function(data) { 
      alert("An error occurred");
   });
&lt;/script&gt;</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>JSF 2 javascript documentation</h2>
            More details about JSF 2 javascript API can be seen at 
            <a class="ulink" href="http://javaserverfaces.java.net/nonav/docs/2.0/jsdocs/symbols/jsf.ajax.html">http://javaserverfaces.java.net/nonav/docs/2.0/jsdocs/symbols/jsf.ajax.html</a></div><p>
           If instead of an error code, the server reports that the view has expired,
           perhaps because the session timed out, you can use a standard 
           <a class="ulink" href="http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html">javax.faces.context.ExceptionHandler</a>
            to handle this scenario.
        </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jbpm"/>Chapter 8. Pageflows and business processes</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e6179">8.1. Pageflow in Seam</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6199">8.1.1. The two navigation models</a></span></dt><dt><span class="section"><a href="#d0e6255">8.1.2. Seam and the back button</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6302">8.2. Using jPDL pageflows</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6305">8.2.1. Installing pageflows</a></span></dt><dt><span class="section"><a href="#d0e6325">8.2.2. Starting pageflows</a></span></dt><dt><span class="section"><a href="#d0e6366">8.2.3. Page nodes and transitions</a></span></dt><dt><span class="section"><a href="#d0e6424">8.2.4. Controlling the flow</a></span></dt><dt><span class="section"><a href="#d0e6436">8.2.5. Ending the flow</a></span></dt><dt><span class="section"><a href="#d0e6459">8.2.6. Pageflow composition</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6480">8.3. Business process management in Seam</a></span></dt><dt><span class="section"><a href="#d0e6520">8.4. Using jPDL business process definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6523">8.4.1. Installing process definitions</a></span></dt><dt><span class="section"><a href="#d0e6535">8.4.2. Initializing actor ids</a></span></dt><dt><span class="section"><a href="#d0e6551">8.4.3. Initiating a business process</a></span></dt><dt><span class="section"><a href="#d0e6565">8.4.4. Task assignment</a></span></dt><dt><span class="section"><a href="#d0e6576">8.4.5. Task lists</a></span></dt><dt><span class="section"><a href="#d0e6608">8.4.6. Performing a task</a></span></dt></dl></dd></dl></div><p>
        JBoss jBPM is a business process management engine for any Java SE or EE
        environment. jBPM lets you represent a business process or user 
        interaction as a graph of nodes representing wait states, decisions,
        tasks, web pages, etc. The graph is defined using a simple, very readable, 
        XML dialect called jPDL, and may be edited and visualised graphically using
        an eclipse plugin. jPDL is an extensible language, and is suitable for 
        a range of problems, from defining web application page flow, to traditional
        workflow management, all the way up to orchestration of services in a SOA
        environment.
    </p><p>
        Seam applications use jBPM for two different problems:
    </p><div class="itemizedlist"><ul><li><p>
            Defining the pageflow involved in complex user interactions. A jPDL
            process definition defines the page flow for a single conversation.
            A Seam conversation is considered to be a relatively short-running
            interaction with a single user.
        </p></li><li><p>
            Defining the overarching business process. The business process may span
            multiple conversations with multiple users. Its state is persistent in
            the jBPM database, so it is considered long-running. Coordination of
            the activities of multiple users is a much more complex problem than
            scripting an interaction with a single user, so jBPM offers sophisticated
            facilities for task management and dealing with multiple concurrent paths 
            of execution.
        </p></li></ul></div><p>
        Don't get these two things confused! They operate at very different levels
        or granularity. <span class="emphasis"><em>Pageflow</em></span>, <span class="emphasis"><em>conversation</em></span>
        and <span class="emphasis"><em>task</em></span> all refer to a single
        interaction with a single user. A business process spans many tasks.
        Futhermore, the two applications of jBPM are totally orthogonal. You can
        use them together or independently or not at all.
    </p><p>
        You don't have to know jPDL to use Seam. If you're perfectly happy defining
        pageflow using JSF or Seam navigation rules, and if your application is more 
        data-driven that process-driven, you probably don't need jBPM. But we're
        finding that thinking of user interaction in terms of a well-defined graphical 
        representation is helping us build more robust applications.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6179"/>8.1. Pageflow in Seam</h2></div></div></div><p>
            There are two ways to define pageflow in Seam:
        </p><div class="itemizedlist"><ul><li><p>
	            Using JSF or Seam navigation rules - the <span class="emphasis"><em>stateless navigation 
	            model</em></span>
	        </p></li><li><p>
	            Using jPDL - the <span class="emphasis"><em>stateful navigation model</em></span>
	        </p></li></ul></div><p>
            Very simple applications will only need the stateless navigation 
            model. Very complex applications will use both models in different 
            places. Each model has its strengths and weaknesses!
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6199"/>8.1.1. The two navigation models</h3></div></div></div><p>
            The stateless model defines a mapping from a set of named, logical
            outcomes of an event directly to the resulting page of the view.
            The navigation rules are entirely oblivious to any state held by
            the application other than what page was the source of the event.
            This means that your action listener methods must sometimes make 
            decisions about the page flow, since only they have access to the 
            current state of the application. 
        </p><p>
            Here is an example page flow definition using JSF navigation 
            rules:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/numberGuess.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">guess</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/numberGuess.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">win</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/win.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">lose</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">from-outcome</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/lose.xhtml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">to-view-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-case</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation-rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Here is the same example page flow definition using Seam navigation 
            rules:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;guess&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/win.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lose&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/lose.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If you find navigation rules overly verbose, you can return view ids
            directly from your action listener methods:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_plain">&nbsp;guess</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">guess</span><span class="java_operator">==</span><span class="java_plain">randomNumber</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/win.xhtml&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_operator">++</span><span class="java_plain">guessCount</span><span class="java_operator">==</span><span class="java_plain">maxGuesses</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/lose.xhtml&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Note that this results in a redirect. You can even specify parameters 
            to be used in the redirect:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_plain">&nbsp;search</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/searchResults.xhtml?searchPattern=#{searchAction.searchPattern}&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            The stateful model defines a set of transitions between a set of
            named, logical application states. In this model, it is possible
            to express the flow of any user interaction entirely in the jPDL
            pageflow definition, and write action listener methods that are
            completely unaware of the flow of the interaction.
        </p><p>
            Here is an example page flow definition using jPDL:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pageflow-definition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;numberGuess&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;guess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateGuess&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.guess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">transition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">start-page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">decision</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.correctGuess}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateRemainingGuesses&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">decision</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">decision</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateRemainingGuesses&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.lastGuess}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lose&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayGuess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">decision</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/win.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lose&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/lose.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pageflow-definition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div class="mediaobject" align="center"><img src="images/plugin-jbpm-numguess.png" align="middle"/></div><p>
            There are two things we notice immediately here:
        </p><div class="itemizedlist"><ul><li><p>
	            The JSF/Seam navigation rules are <span class="emphasis"><em>much</em></span> simpler.
	            (However, this obscures the fact that the underlying Java code
	            is more complex.)
	        </p></li><li><p>
	            The jPDL makes the user interaction immediately understandable,
	            without us needing to even look at the facelets template or Java code.
	        </p></li></ul></div><p>
	        In addition, the stateful model is more <span class="emphasis"><em>constrained</em></span>.
	        For each logical state (each step in the page flow), there are a 
	        constrained set of possible transitions to other states. The stateless
	        model is an <span class="emphasis"><em>ad hoc</em></span> model which is suitable to 
	        relatively unconstrained, freeform navigation where the user decides
	        where he/she wants to go next, not the application.
	    </p><p>
	        The stateful/stateless navigation distinction is quite similar to
	        the traditional view of modal/modeless interaction. Now, Seam 
	        applications are not usually modal in the simple sense of the 
	        word - indeed, avoiding application modal behavior is one of the
	        main reasons for having conversations! However, Seam applications
	        can be, and often are, modal at the level of a particular 
	        conversation. It is well-known that modal behavior is something
	        to avoid as much as possible; it is very difficult to predict the
	        order in which your users are going to want to do things! However,
	        there is no doubt that the stateful model has its place.
	    </p><p>
	        The biggest contrast between the two models is the back-button
	        behavior.
	    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6255"/>8.1.2. Seam and the back button</h3></div></div></div><p>
	        When JSF or Seam navigation rules are used, Seam lets the user freely 
	        navigate via the back, forward and refresh buttons. It is the
	        responsibility of the application to ensure that conversational
	        state remains internally consistent when this occurs. Experience
	        with the combination of web application frameworks like Struts 
	        or WebWork - that do not support a conversational model - and 
	        stateless component models like EJB stateless session beans 
	        or the Spring framework has taught many developers that this is
	        close to impossible to do! However, our experience is that in 
	        the context of Seam, where there is a well-defined conversational
	        model, backed by stateful session beans, it is actually quite 
	        straightforward. Usually it is as simple as combining the use 
	        of <code class="literal">no-conversation-view-id</code> with null 
	        checks at the beginning of action listener methods. We consider
	        support for freeform navigation to be almost always desirable.
	    </p><p>
	        In this case, the <code class="literal">no-conversation-view-id</code> 
	        declaration goes in <code class="literal">pages.xml</code>. It tells
	        Seam to redirect to a different page if a request originates
	        from a page rendered during a conversation, and that conversation
	        no longer exists:
	    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/checkout.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">no-conversation-view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
	        On the other hand, in the stateful model, using the back button is 
	        interpreted as an undefined transition back to a previous state.
	        Since the stateful model enforces a defined set of transitions
	        from the current state, the back button is not permitted by default
	        in the stateful model! Seam transparently detects the use of the
	        back button, and blocks any attempt to perform an action from
	        a previous, "stale" page, and simply redirects the user to 
	        the "current" page (and displays a faces message). Whether you 
	        consider this a feature or a limitation of the stateful model 
	        depends upon your point of view: as an application developer, 
	        it is a feature; as a user, it might be frustrating! You can
	        enable backbutton navigation from a particular page node by
	        setting <code class="literal">back="enabled"</code>.
	    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/checkout.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">back</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;enabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            This allows navigation via the back button <span class="emphasis"><em>from</em></span>
            the <code class="literal">checkout</code> state to <span class="emphasis"><em>any previous
            state!</em></span>
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>
           If a page is set to redirect after a transition, it is not possible
           to use the back button to return to that page even when back is
           enabled on a page later in the flow. The reason is because Seam
           stores information about the pageflow in the page scope and the back
           button must result in a POST for that information to be restored
           (i.e., a Faces request). A redirect severs this linkage.
        </div><p>
            Of course, we still need to define what happens if a request 
            originates from a page rendered during a pageflow, and the
            conversation with the pageflow no longer exists. In this case,
            the <code class="literal">no-conversation-view-id</code> declaration
            goes into the pageflow definition:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/checkout.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">back</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;enabled&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">no-conversation-view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;checkout&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;complete&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
	        In practice, both navigation models have their place, and you'll 
	        quickly learn to recognize when to prefer one model over the other.
	        </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6302"/>8.2. Using jPDL pageflows</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6305"/>8.2.1. Installing pageflows</h3></div></div></div><p>
            We need to install the Seam jBPM-related components, and place the
            pageflow definitions (using the standard <code class="literal">.jpdl.xml</code>
            extension) inside a Seam archive (an archive which 
            contains a <code class="literal">seam.properties</code> file):
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            We can also explicitly tell Seam where to find our pageflow 
            definition. We specify this in <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:pageflow-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">pageflow.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:pageflow-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6325"/>8.2.2. Starting pageflows</h3></div></div></div><p>
            We "start" a jPDL-based pageflow by specifying the name of the
            process definition using a <code class="literal">@Begin</code>,
            <code class="literal">@BeginTask</code> or <code class="literal">@StartTask</code> 
            annotation:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Begin</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">pageflow</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;numberguess&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;begin</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>Alternatively we can start a pageflow using pages.xml:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">begin-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pageflow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;numberguess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If we are beginning the pageflow during the <code class="literal">RENDER_RESPONSE</code>
            phase — during a <code class="literal">@Factory</code> or <code class="literal">@Create</code>
            method, for example — we consider ourselves to be already at the page being 
            rendered, and use  a <code class="literal">&lt;start-page&gt;</code> node as the first node 
            in the pageflow, as in the example above.
        </p><p>
            But if the pageflow is begun as the result of an action listener invocation,
            the outcome of the action listener determines which is the first page to be
            rendered. In this case, we use a <code class="literal">&lt;start-state&gt;</code> as
            the first node in the pageflow, and declare a transition for each possible
            outcome:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pageflow-definition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;viewEditDocument&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-state</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;start&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;documentFound&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayDocument&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;documentNotFound&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;notFound&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">start-state</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayDocument&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/document.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;editDocument&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;done&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;main&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;notFound&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/404.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pageflow-definition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6366"/>8.2.3. Page nodes and transitions</h3></div></div></div><p>
            Each <code class="literal">&lt;page&gt;</code> node represents a state where
            the system is waiting for user input:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;guess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateGuess&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.guess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">transition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The <code class="literal">view-id</code> is the JSF view id. The <code class="literal">&lt;redirect/&gt;</code>
            element has the same effect as <code class="literal">&lt;redirect/&gt;</code> in a 
            JSF navigation rule: namely, a post-then-redirect behavior, to overcome problems
            with the browser's refresh button. (Note that Seam propagates conversation contexts
            over these browser redirects. So there is no need for a Ruby on Rails style "flash"
            construct in Seam!)
        </p><p>
            The transition name is the name of a JSF outcome triggered by clicking
            a command button or command link in <code class="literal">numberGuess.jsp</code>. 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;submit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Guess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;guess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            When the transition is triggered by clicking this button, jBPM will activate the
            transition action by calling the <code class="literal">guess()</code> method of the
            <code class="literal">numberGuess</code> component. Notice that the syntax used for
            specifying actions in the jPDL is just a familiar JSF EL expression, and that 
            the transition action handler is just a method of a Seam component in the
            current Seam contexts. So we have exactly the same event model for jBPM events 
            that we already have for JSF events! (The <span class="emphasis"><em>One Kind of Stuff</em></span> 
            principle.)
        </p><p>
            In the case of a null outcome (for example, a command button with no 
            <code class="literal">action</code> defined), Seam will signal the transition with no
            name if one exists, or else simply redisplay the page if all transitions
            have names. So we could slightly simplify our example pageflow and this button:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;submit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Guess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Would fire the following un-named transition:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateGuess&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.guess}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">transition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            It is even possible to have the button call an action method, in which case the
            action outcome will determine the transition to be taken:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;submit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Guess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.guess}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/numberGuess.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;correctGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;incorrectGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateGuess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            However, this is considered an inferior style, since it moves responsibility for
            controlling the flow out of the pageflow definition and back into the other
            components. It is much better to centralize this concern in the pageflow itself.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6424"/>8.2.4. Controlling the flow</h3></div></div></div><p>
            Usually, we don't need the more powerful features of jPDL when defining pageflows. 
            We do need the <code class="literal">&lt;decision&gt;</code> node, however:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">decision</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateGuess&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expression</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numberGuess.correctGuess}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;evaluateRemainingGuesses&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">decision</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            A decision is made by evaluating a JSF EL expression in the Seam contexts.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6436"/>8.2.5. Ending the flow</h3></div></div></div><p>
            We end the conversation using <code class="literal">&lt;end-conversation&gt;</code>
            or <code class="literal">@End</code>. (In fact, for readability, use of 
            <span class="emphasis"><em>both</em></span> is encouraged.)
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/win.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Optionally, we can end a task, specify a jBPM <code class="literal">transition</code> 
            name. In this case, Seam will signal the end of the current task in the 
            overarching business process.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;win&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/win.jsp&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-task</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">transition</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;success&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6459"/>8.2.6. Pageflow composition</h3></div></div></div><p>
                It is possible to compose pageflows and have one pageflow pause 
                pause while another pageflow executes. The <code class="literal">&lt;process-state&gt;</code>
                node pauses the outer pageflow, and begins execution of a named 
                pageflow:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">process-state</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cheat&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sub-process</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cheat&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;displayGuess&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">process-state</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                The inner flow begins executing at a <code class="literal">&lt;start-state&gt;</code>
                node. When it reaches an <code class="literal">&lt;end-state&gt;</code> node, 
                execution of the inner flow ends, and execution of the outer flow
                resumes with the transition defined by the <code class="literal">&lt;process-state&gt;</code>
                element.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6480"/>8.3. Business process management in Seam</h2></div></div></div><p>
            A business process is a well-defined set of tasks that must
            be performed by users or software systems according to 
            well-defined rules about <span class="emphasis"><em>who</em></span> can perform 
            a task, and <span class="emphasis"><em>when</em></span> it should be performed.
            Seam's jBPM integration makes it easy to display lists of
            tasks to users and let them manage their tasks. Seam also
            lets the application store state associated with the business
            process in the <code class="literal">BUSINESS_PROCESS</code> context,
            and have that state made persistent via jBPM variables.
        </p><p>
            A simple business process definition looks much the same as a 
            page flow definition (<span class="emphasis"><em>One Kind of Stuff</em></span>), 
            except that instead of <code class="literal">&lt;page&gt;</code> nodes,
            we have <code class="literal">&lt;task-node&gt;</code> nodes. In a 
            long-running business process, the wait states are where the
            system is waiting for some user to log in and perform a task.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">process-definition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-state</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;start&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">start-state</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">task-node</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">task</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">description</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.description}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assignment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">actor-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{actor.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">task</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;done&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">task-node</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-state</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;done&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">process-definition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div class="mediaobject" align="center"><img src="images/plugin-jbpm-todo.png" align="middle"/></div><p>
            It is perfectly possible that we might have both jPDL business 
            process definitions and jPDL pageflow definitions in the
            same project. If so, the relationship between the two is that
            a single <code class="literal">&lt;task&gt;</code> in a business process
            corresponds to a whole pageflow 
            <code class="literal">&lt;pageflow-definition&gt;</code>
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6520"/>8.4. Using jPDL business process definitions</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6523"/>8.4.1. Installing process definitions</h3></div></div></div><p>
            We need to install jBPM, and tell it where to find the
            business process definitions:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:process-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">todo.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:process-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            As jBPM processes are persistent across application restarts, 
            when using Seam in a production environment you won't want to
            install the process definition every time the application starts.
            Therefore, in a production environment, you'll need to deploy
            the process to jBPM outside of Seam. In other words, only install
            process definitions from <code class="literal">components.xml</code> when
            developing your application.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6535"/>8.4.2. Initializing actor ids</h3></div></div></div><p>
            We always need to know what user is currently logged in.
            jBPM "knows" users by their <span class="emphasis"><em>actor id</em></span>
            and <span class="emphasis"><em>group actor ids</em></span>. We specify the
            current actor ids using the built in Seam component named
            <code class="literal">actor</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Actor</span><!-- <br/> --><span class="java_plain">&nbsp;actor</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;login</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;actor</span><span class="java_separator">.</span><span class="java_plain">setId</span><span class="java_separator">(</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getUserName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;actor</span><span class="java_separator">.</span><span class="java_plain">getGroupActorIds</span><span class="java_separator">().</span><span class="java_plain">addAll</span><span class="java_separator">(</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getGroupNames</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6551"/>8.4.3. Initiating a business process</h3></div></div></div><p>
            To initiate a business process instance, we use the 
            <code class="literal">@CreateProcess</code> annotation:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">CreateProcess</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">definition</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;todo&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;createTodo</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>Alternatively we can initiate a business process using pages.xml:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">create-process</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">definition</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6565"/>8.4.4. Task assignment</h3></div></div></div><p>
            When a process reaches a task node, task instances are created. These must be 
            assigned to users or user groups. We can either hardcode our actor ids, or 
            delegate to a Seam component:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">task</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">description</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.description}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assignment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">actor-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{actor.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">task</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            In this case, we have simply assigned the task to the current user. 
            We can also assign tasks to a pool:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">task</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;todo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">description</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.description}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assignment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pooled-actors</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;employees&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">task</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6576"/>8.4.5. Task lists</h3></div></div></div><p>
            Several built-in Seam components make it easy to display task lists. 
            The <code class="literal">pooledTaskInstanceList</code> is a list of pooled tasks 
            that users may assign to themselves:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{pooledTaskInstanceList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;task&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.description}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{pooledTask.assignToCurrentActor}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Assign&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">taskInstance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Note that instead of <code class="literal">&lt;s:link&gt;</code> we could have used
            a plain JSF <code class="literal">&lt;h:commandLink&gt;</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{pooledTask.assignToCurrentActor}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;taskId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The <code class="literal">pooledTask</code> component is a built-in component that
            simply assigns the task to the current user.
        </p><p>
            The <code class="literal">taskInstanceListForType</code> component includes tasks of 
            a particular type that are assigned to the current user:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{taskInstanceListForType['todo']}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;task&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task.description}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{todoList.start}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Start&nbsp;Work&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">taskInstance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{task}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6608"/>8.4.6. Performing a task</h3></div></div></div><p>
            To begin work on a task, we use either <code class="literal">@StartTask</code>
            or <code class="literal">@BeginTask</code> on the listener method:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">StartTask</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;start</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>Alternatively we can begin work on a task using pages.xml:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">start-task</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>    
            These annotations begin a special kind of conversation that has 
            significance in terms of the overarching business process. Work done 
            by this conversation has access to state held in the business
            process context.
        </p><p>
            If we end the conversation using <code class="literal">@EndTask</code>, Seam
            will signal the completion of the task:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">EndTask</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">transition</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;completed&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;completed</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>Alternatively we can use pages.xml:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-task</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">transition</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;completed&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can also use EL to specify the transition in pages.xml.
        </p><p>
            At this point, jBPM takes over and continues executing the business process
            definition. (In more complex processes, several tasks might need to be
            completed before process execution can resume.)
        </p><p>
            Please refer to the jBPM documentation for a more thorough overview of 
            the sophisticated features that jBPM provides for managing complex
            business processes.
            </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="persistence"/>Chapter 9. Seam and Object/Relational Mapping</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e6649">9.1. Introduction</a></span></dt><dt><span class="section"><a href="#persistence.seam-managed-transactions">9.2. Seam managed transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6715">9.2.1. Disabling Seam-managed transactions</a></span></dt><dt><span class="section"><a href="#d0e6728">9.2.2. Configuring a Seam transaction manager</a></span></dt><dt><span class="section"><a href="#d0e6821">9.2.3. Transaction synchronization</a></span></dt></dl></dd><dt><span class="section"><a href="#persistence.seam-managed-persistence-contexts">9.3. Seam-managed persistence contexts</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6862">9.3.1. Using a Seam-managed persistence context with JPA</a></span></dt><dt><span class="section"><a href="#d0e6914">9.3.2. Using a Seam-managed Hibernate session</a></span></dt><dt><span class="section"><a href="#d0e6946">9.3.3. Seam-managed persistence contexts and atomic conversations</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7002">9.4. Using the JPA "delegate"</a></span></dt><dt><span class="section"><a href="#d0e7034">9.5. Using EL in EJB-QL/HQL</a></span></dt><dt><span class="section"><a href="#d0e7060">9.6. Using Hibernate filters</a></span></dt></dl></div><p>
        Seam provides extensive support for the two most popular persistence
        architectures for Java: Hibernate, and the Java Persistence API 2.0
        introduced with EJB 3.1. Seam's unique state-management architecture
        allows the most sophisticated ORM integration of any web application 
        framework.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6649"/>9.1. Introduction</h2></div></div></div><p>
        Seam grew out of the frustration of the Hibernate team with the 
        statelessness typical of the previous generation of Java application 
        architectures. The state management architecture of Seam was originally
        designed to solve problems relating to persistence — in particular
        problems associated with <span class="emphasis"><em>optimistic transaction processing</em></span>.
        Scalable online applications always use optimistic transactions. An atomic 
        (database/JTA) level transaction should not span a user interaction unless
        the application is designed to support only a very small number of concurrent
        clients. But almost all interesting work involves first displaying data
        to a user, and then, slightly later, updating the same data. So Hibernate was
        designed to support the idea of a persistence context which spanned an
        optimistic transaction. 
    </p><p>
        Unfortunately, the so-called "stateless" architectures that preceded Seam and 
        EJB 3.0 had no construct for representing an optimistic transaction. So, instead,
        these architectures provided persistence contexts scoped to the atomic
        transaction. Of course, this resulted in many problems for users, and is the
        cause of the number one user complaint about Hibernate: the dreaded 
        <code class="literal">LazyInitializationException</code>. What we need is a construct
        for representing an optimistic transaction in the application tier.
    </p><p>
        EJB 3.0 recognizes this problem, and introduces the idea of a stateful
        component (a stateful session bean) with an <span class="emphasis"><em>extended persistence 
        context</em></span> scoped to the lifetime of the component. This is a
        partial solution to the problem (and is a useful construct in and of 
        itself) however there are two problems:
    </p><div class="itemizedlist"><ul><li><p>
                The lifecycle of the stateful session bean must be managed manually
                via code in the web tier (it turns out that this is a subtle problem
                and much more difficult in practice than it sounds).
            </p></li><li><p>
                Propagation of the persistence context between stateful components
                in the same optimistic transaction is possible, but tricky.
            </p></li></ul></div><p>
        Seam solves the first problem by providing conversations, and stateful
        session bean components scoped to the conversation. (Most conversations 
        actually represent optimistic transactions in the data layer.) This is
        sufficient for many simple applications (such as the Seam booking
        demo) where persistence context propagation is not needed. For more
        complex applications, with many loosely-interacting components in each
        conversation, propagation of the persistence context across components
        becomes an important issue. So Seam extends the persistence context
        management model of EJB 3.0, to provide conversation-scoped extended
        persistence contexts.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="persistence.seam-managed-transactions"/>9.2. Seam managed transactions</h2></div></div></div><p>
            EJB session beans feature declarative transaction management. The EJB container is able
            to start a transaction transparently when the bean is invoked, and end it when the
            invocation ends. If we write a session bean method that acts as a JSF action listener, 
            we can do all the work associated with that action in one transaction, and be sure that
            it is committed or rolled back when we finish processing the action. This is a great feature, 
            and all that is needed by some Seam applications.
    	</p><p>
            However, there is a problem with this approach. A Seam application may not perform all data
            access for a request from a single method call to a session bean.
    	</p><div class="itemizedlist"><ul><li><p>
                    The request might require processing by several loosely-coupled components, each
                    of which is called independently from the web layer. It is common to see several
                    or even many calls per request from the web layer to EJB components in Seam.
    			</p></li><li><p>
                    Rendering of the view might require lazy fetching of associations.
                </p></li></ul></div><p>
            The more transactions per request, the more likely we are to encounter atomicity
            and isolation problems when our application is processing many concurrent requests.
            Certainly, all write operations should occur in the same transaction!
    	</p><p>
            Hibernate users developed the <span class="emphasis"><em>"open session in view"</em></span> pattern to work 
            around this problem. In the Hibernate community, "open session in view" was historically 
            even more important because frameworks like Spring use transaction-scoped persistence contexts. 
            So rendering the view would cause <code class="literal">LazyInitializationException</code>s when 
            unfetched associations were accessed.
    	</p><p>
            This pattern is usually implemented as a single transaction which spans the entire request. 
            There are several problems with this implementation, the most serious being that we 
            can never be sure that a transaction is successful until we commit it — but by the 
            time the "open session in view" transaction is committed, the view is fully rendered, and 
            the rendered response may already have been flushed to the client. How can we notify the 
            user that their transaction was unsuccessful? 
    	</p><p>
            Seam solves both the transaction isolation problem and the association fetching problem, 
            while working around the problems with "open session in view". The solution comes in two 
            parts:
    	</p><div class="itemizedlist"><ul><li><p>
                    use an extended persistence context that is scoped to the conversation, 
                    instead of to the transaction
    			</p></li><li><p>
                    use two transactions per request; the first spans the beginning of the restore view
                    phase (some transaction managers begin the transaction later at the beginning of the
                    apply request values phase) until the end of the invoke application phase; the second spans the
                    render response phase
    			</p></li></ul></div><p>
            In the next section, we'll tell you how to set up a conversation-scope persistence
            context. But first we need to tell you how to enable Seam transaction management.
            Note that you can use conversation-scoped persistence contexts without Seam
            transaction management, and there are good reasons to use Seam transaction management
            even when you're not using Seam-managed persistence contexts. However, the two
            facilities were designed to work together, and work best when used together.
    	</p><p>
            Seam transaction management is useful even if you're using EJB 3.0 
            container-managed persistence contexts. But it is especially useful
            if you use Seam outside a Java EE environment, or in any other
            case where you would use a Seam-managed persistence context.
    	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6715"/>9.2.1. Disabling Seam-managed transactions</h3></div></div></div><p>
                Seam transaction management is enabled by default for all JSF requests.
                If you want to <span class="emphasis"><em>disable</em></span> this feature, you can do it
                in <code class="literal">components.xml</code>:
    		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">transaction-management-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:no-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6728"/>9.2.2. Configuring a Seam transaction manager</h3></div></div></div><p>
    			Seam provides a transaction management abstraction for beginning, committing, rolling back, and
    			synchronizing with a transaction. By default Seam uses a JTA transaction component that integrates with
    			Container Managed and programmatic EJB transactions. If you are working in a Java EE environment, you
    			should install the EJB synchronization component in <code class="literal">components.xml</code>:
    		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:ejb-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
    			However, if you are working in a non EE 5 container, Seam will try auto detect the transaction
    			synchronization mechanism to use. However, if Seam is unable to detect the correct transaction
    			synchronization to use, you may find you need configure one of the following:
    		</p><div class="itemizedlist"><ul><li><p>
    				   JPA RESOURCE_LOCAL transactions with the
    				   <code class="literal">javax.persistence.EntityTransaction</code>
    				   interface. <code class="literal">EntityTransaction</code> begins the transaction at the beginning
                       of the apply request values phase.
    				</p></li><li><p>
    				   Hibernate managed transactions with the
    				   <code class="literal">org.hibernate.Transaction</code>
    				   interface. <code class="literal">HibernateTransaction</code> begins the transaction at the beginning
                       of the apply request values phase.
    			   </p></li><li><p>
    				   Spring managed transactions with the
    				   <code class="literal">org.springframework.transaction.PlatformTransactionManager</code>
    				   interface. The Spring <code class="literal">PlatformTransactionManagement</code> manager may begin the
                       transaction at the beginning of the apply request values phase if the 
                       <code class="literal">userConversationContext</code> attribute is set.
    			   </p></li><li><p>
                      Explicitly disable Seam managed transactions
                   </p></li></ul></div><p>
    			Configure JPA RESOURCE_LOCAL transaction management by adding the following to your components.xml where
    			<code class="literal">#{em}</code>
    			is the name of the
    			<code class="literal">persistence:managed-persistence-context</code>
    			component. If your managed persistence context is named <code class="literal">entityManager</code>, you can
				opt to leave out the <code class="literal">entity-manager</code> attribute. (see
    			<a class="link" href="#persistence.seam-managed-persistence-contexts" title="9.3. Seam-managed persistence contexts">Seam-managed persistence contexts</a>
    			)
    		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:entity-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entity-manager</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{em}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
    			To configure Hibernate managed transactions declare the following in your components.xml where
    			<code class="literal">#{hibernateSession}</code>
    			is the name of the project's
    			<code class="literal">persistence:managed-hibernate-session</code>
    			component. If your managed hibernate session is named <code class="literal">session</code>, you can
				opt to leave out the <code class="literal">session</code> attribute. (see
    			<a class="link" href="#persistence.seam-managed-persistence-contexts" title="9.3. Seam-managed persistence contexts">Seam-managed persistence contexts</a>
    			)
    		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:hibernate-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">session</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hibernateSession}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                To explicitly disable Seam managed transactions declare the following in your components.xml:
              </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:no-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
    			For configuring Spring managed transactions see
    			<a class="link" href="#spring-transactions" title="27.5. Using Spring PlatformTransactionManagement">using Spring PlatformTransactionManagement</a>
    			.
    		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6821"/>9.2.3. Transaction synchronization</h3></div></div></div><p>
    			Transaction synchronization provides callbacks for transaction related events
    			such as <code class="literal">beforeCompletion()</code> and <code class="literal">afterCompletion()</code>.
                By default, Seam uses it's own transaction synchronization component which requires explicit use of the
    			Seam transaction component when committing a transaction to ensure synchronization callbacks are
    			correctly executed. If in a Java EE environment the
    			<code class="literal">&lt;transaction:ejb-transaction/&gt;</code>
    			component should be declared in <code class="literal">components.xml</code> to ensure that Seam synchronization callbacks are
    			correctly called if the container commits a transaction outside of Seam's knowledge.
    		</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="persistence.seam-managed-persistence-contexts"/>9.3. Seam-managed persistence contexts</h2></div></div></div><p>
            If you're using Seam outside of a Java EE environment, you can't rely upon the
            container to manage the persistence context lifecycle for you. Even if you are
            in an EE 5 environment, you might have a complex application with many loosly
            coupled components that collaborate together in the scope of a single conversation,
            and in this case you might find that propagation of the persistence context between
            component is tricky and error-prone.
        </p><p>
            In either case, you'll need to use a <span class="emphasis"><em>managed persistence context</em></span> 
            (for JPA) or a <span class="emphasis"><em>managed session</em></span> (for Hibernate) in your components.
            A Seam-managed persistence context is just a built-in Seam component that manages an
            instance of <code class="literal">EntityManager</code> or <code class="literal">Session</code> in the
            conversation context. You can inject it with <code class="literal">@In</code>.
        </p><p>
            Seam-managed persistence contexts are extremely efficient in a clustered environment.
            Seam is able to perform an optimization that EJB 3.0 specification does not allow 
            containers to use for container-managed extended persistence contexts. Seam supports
            transparent failover of extended persistence contexts, without the need to replicate
            any persistence context state between nodes. (We hope to fix this oversight in the
            next revision of the EJB spec.)
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6862"/>9.3.1. Using a Seam-managed persistence context with JPA</h3></div></div></div><p>
            Configuring a managed persistence context is easy. In <code class="literal">components.xml</code>, 
            we can write:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">persistence-unit-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/EntityManagerFactories/bookingData&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            This configuration creates a conversation-scoped Seam component named 
            <code class="literal">bookingDatabase</code> that manages the lifecycle of <code class="literal">EntityManager</code> 
            instances for the persistence unit (<code class="literal">EntityManagerFactory</code> instance) 
            with JNDI name <code class="literal">java:/EntityManagerFactories/bookingData</code>.
        </p><p>
            Of course, you need to make sure that you have bound the <code class="literal">EntityManagerFactory</code> 
            into JNDI. In JBoss, you can do this by adding the following property setting to 
            <code class="literal">persistence.xml</code>.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jboss.entity.manager.factory.jndi.name&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/EntityManagerFactories/bookingData&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Now we can have our <code class="literal">EntityManager</code> injected using:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">EntityManager</span><!-- <br/> --><span class="java_plain">&nbsp;bookingDatabase</span><!-- <br/> --><span class="java_separator">;</span></pre><p>
            If you are using EJB3 and mark your class or method 
            <code class="literal">@TransactionAttribute(REQUIRES_NEW)</code> then the 
            transaction and persistence context shouldn't be propagated to method
            calls on this object.  However as the Seam-managed persistence
            context is propagated to any component within the conversation, it
            will be propagated to methods marked <code class="literal">REQUIRES_NEW</code>.
            Therefore, if you mark a method <code class="literal">REQUIRES_NEW</code> then
            you should access the entity manager using @PersistenceContext.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6914"/>9.3.2. Using a Seam-managed Hibernate session</h3></div></div></div><p>
            Seam-managed Hibernate sessions are similar. In <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:hibernate-session-factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateSessionFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-hibernate-session</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">session-factory-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/bookingSessionFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Where <code class="literal">java:/bookingSessionFactory</code> is the name of the session factory 
            specified in <code class="literal">hibernate.cfg.xml</code>. 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/bookingSessionFactory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;transaction.flush_before_completion&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;connection.release_mode&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">after_statement</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;transaction.manager_lookup_class&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.transaction.JBossTransactionManagerLookup</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;transaction.factory_class&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.transaction.JTATransactionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;connection.datasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/bookingDatasource</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Note that Seam does not flush the session, so you should always enable
            <code class="literal">hibernate.transaction.flush_before_completion</code> to 
            ensure that the session is automatically flushed before the JTA transaction
            commits.
        </p><p>
            We can now have a managed Hibernate <code class="literal">Session</code> injected into our
            JavaBean components using the following code:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Session</span><!-- <br/> --><span class="java_plain">&nbsp;bookingDatabase</span><!-- <br/> --><span class="java_separator">;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6946"/>9.3.3. Seam-managed persistence contexts and atomic conversations</h3></div></div></div><p>
            Persistence contexts scoped to the conversation allows you to program optimistic 
            transactions that span multiple requests to the server without the need to use the 
            <code class="literal">merge()</code> operation , without the need to re-load 
            data at the beginning of each request, and without the need to wrestle with the 
            <code class="literal">LazyInitializationException</code> or 
            <code class="literal">NonUniqueObjectException</code>.
        </p><p>
            As with any optimistic transaction management, transaction isolation and consistency
            can be achieved via use of optimistic locking. Fortunately, both Hibernate and EJB 
            3.0 make it very easy to use optimistic locking, by providing the 
            <code class="literal">@Version</code> annotation.
        </p><p>
            By default, the persistence context is flushed (synchronized with the database)
            at the end of each transaction. This is sometimes the desired behavior. But very 
            often, we would prefer that all changes are held in memory and only written to
            the database when the conversation ends successfully. This allows for truly
            atomic conversations. As the result of a truly stupid and shortsighted decision
            by certain non-JBoss, non-Sun and non-Sybase members of the EJB 3.0 expert group, 
            there is currently no simple, usable and portable way to implement atomic 
            conversations using EJB 3.0 persistence. However, Hibernate provides this feature
            as a vendor extension to the <code class="literal">FlushModeType</code>s defined by the 
            specification, and it is our expectation that other vendors will soon provide
            a similar extension.
        </p><p>
            Seam lets you specify <code class="literal">FlushModeType.MANUAL</code> when beginning a
            conversation. Currently, this works only when Hibernate is the underlying 
            persistence provider, but we plan to support other equivalent vendor extensions.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">EntityManager</span><!-- <br/> --><span class="java_plain">&nbsp;em</span><!-- <br/> --><span class="java_separator">;</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">a&nbsp;</span><!-- <br/> --><span class="java_type">Seam</span><!-- <br/> --><span class="java_operator">-</span><!-- <br/> --><span class="java_plain">managed&nbsp;persistence&nbsp;context</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Begin</span><span class="java_separator">(</span><span class="java_plain">flushMode</span><span class="java_operator">=</span><span class="java_plain">MANUAL</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;beginClaimWizard</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;claim&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">find</span><span class="java_separator">(</span><span class="java_type">Claim</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;claimId</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Now, the <code class="literal">claim</code> object remains managed by the persistence context
            for the rest ot the conversation. We can make changes to the claim:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;addPartyToClaim</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Party</span><span class="java_plain">&nbsp;party&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">....;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;claim</span><span class="java_separator">.</span><span class="java_plain">addParty</span><span class="java_separator">(</span><span class="java_plain">party</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            But these changes will not be flushed to the database until we explicitly force
            the flush to occur:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">End</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;commitClaim</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">flush</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Of course, you could set the <code class="literal">flushMode</code> to <code class="literal">MANUAL</code>
            from pages.xml, for example in a navigation rule:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">begin-conversation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">flush-mode</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MANUAL&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can set any Seam Managed Persistence Context to use manual flush
            mode:
        </p><pre class="programlisting">&lt;components xmlns="http://jboss.org/schema/seam/components"
   xmlns:core="http://jboss.org/schema/seam/core"&gt;
   &lt;core:manager conversation-timeout="120000" default-flush-mode="manual" /&gt;
&lt;/components&gt;</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7002"/>9.4. Using the JPA "delegate"</h2></div></div></div><p>
            The <code class="literal">EntityManager</code> interface lets you access a vendor-specific
            API via the <code class="literal">getDelegate()</code> method. Naturally, the most interesting
            vendor is Hibernate, and the most powerful delegate interface is
            <code class="literal">org.hibernate.Session</code>. You'd be nuts to use anything else. Trust
            me, I'm not biased at all.  If you must use a different JPA provider see
            <a class="link" href="#alt-jpa-providers" title="30.2. Using Alternate JPA Providers">Using Alternate JPA Providers</a>.
        </p><p>
            But regardless of whether you're using Hibernate (genius!) or something else
            (masochist, or just not very bright), you'll almost certainly want to use the
            delegate in your Seam components from time to time. One approach would be the
            following:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">EntityManager</span><!-- <br/> --><span class="java_plain">&nbsp;entityManager</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;init</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Session</span><span class="java_separator">)</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">getDelegate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">).</span><span class="java_plain">enableFilter</span><span class="java_separator">(</span><span class="java_literal">&quot;currentVersions&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
             But typecasts are unquestionably the ugliest syntax in the Java language, so most
             people avoid them whenever possible. Here's a different way to get at the 
             delegate. First, add the following line to <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;session&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;STATELESS&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entityManager.delegate}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Now we can inject the session directly:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Session</span><!-- <br/> --><span class="java_plain">&nbsp;session</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;init</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;session</span><span class="java_separator">.</span><span class="java_plain">enableFilter</span><span class="java_separator">(</span><span class="java_literal">&quot;currentVersions&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7034"/>9.5. Using EL in EJB-QL/HQL</h2></div></div></div><p>
            Seam proxies the <code class="literal">EntityManager</code> or <code class="literal">Session</code>
            object whenever you use a Seam-managed persistence context or inject a container
            managed persistence context using <code class="literal">@PersistenceContext</code>. This
            lets you use EL expressions in your query strings, safely and efficiently. For
            example, this:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">User</span><!-- <br/> --><span class="java_plain">&nbsp;user&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;em</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">createQuery</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;from&nbsp;User&nbsp;where&nbsp;username=#{user.username}&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getSingleResult</span><span class="java_separator">();</span></pre><p>is equivalent to:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">User</span><!-- <br/> --><span class="java_plain">&nbsp;user&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;em</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">createQuery</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;from&nbsp;User&nbsp;where&nbsp;username=:username&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;username&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getUsername</span><span class="java_separator">())</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getSingleResult</span><span class="java_separator">();</span></pre><p>
            Of course, you should never, ever write it like this:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">User</span><!-- <br/> --><span class="java_plain">&nbsp;user&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;em</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">createQuery</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;from&nbsp;User&nbsp;where&nbsp;username=&quot;</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_operator">+</span><!-- <br/> --><span class="java_plain">&nbsp;user</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getUsername</span><!-- <br/> --><span class="java_separator">())</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">BAD</span><!-- <br/> --><span class="java_operator">!</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getSingleResult</span><span class="java_separator">();</span></pre><p>
            (It is inefficient and vulnerable to SQL injection attacks.)
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7060"/>9.6. Using Hibernate filters</h2></div></div></div><p>
            The coolest, and most unique, feature of Hibernate is <span class="emphasis"><em>filters</em></span>.
            Filters let you provide a restricted view of the data in the database. You can find 
            out more about filters in the Hibernate documentation. But we thought we'd mention
            an easy way to incorporate filters into a Seam application, one that works especially
            well with the Seam Application Framework.
        </p><p>
            Seam-managed persistence contexts may have a list of filters defined, which will be
            enabled whenever an <code class="literal">EntityManager</code> or Hibernate <code class="literal">Session</code>
            is first created. (Of course, they may only be used when Hibernate is the underlying
            persistence provider.)
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;regionFilter&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">region</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:parameters</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">regionCode</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{region.code}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:parameters</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;currentFilter&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">current</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:parameters</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">date</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{currentDate}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:parameters</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">persistence-unit-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/EntityManagerFactories/personDatabase&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:filters</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{regionFilter}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{currentFilter}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:filters</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence:managed-persistence-context</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="validation"/>Chapter 10. JSF form validation in Seam</h2></div></div></div><p>
        In plain JSF, validation is defined in the view:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Country:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">my:validateCountry</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zip&nbsp;code:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">my:validateZip</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        In practice, this approach usually violates DRY, since most
        "validation" actually enforces constraints that are part of
        the data model, and exist all the way down to the database
        schema definition. Seam provides support for model-based
        constraints defined using Bean Validation.
    </p><p>
        Let's start by defining our constraints, on our 
        <code class="literal">Location</code> class:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Location</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;zip</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">30</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCountry</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCountry</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;c</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;country&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;c</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">6</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Pattern</span><span class="java_separator">(</span><span class="java_literal">&quot;^\d*$&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getZip</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;zip</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setZip</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;z</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;zip&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;z</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
        Well, that's a decent first cut, but in practice it might be
        more elegant to use custom constraints instead of the ones
        built into Bean Validation:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Location</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;zip</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Country</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCountry</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCountry</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;c</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;country&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;c</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ZipCode</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getZip</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;zip</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setZip</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;z</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;zip&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;z</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
        Whichever route we take, we no longer need to specify the
        type of validation to be used in the JSF page. Instead, we
        can use <code class="literal">&lt;s:validate&gt;</code> to validate
        against the constraint defined on the model object.
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Country:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validate</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zip&nbsp;code:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validate</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         <span class="emphasis"><em>Note:</em></span> specifying <code class="literal">@NotNull</code>
         on the model does <span class="emphasis"><em>not</em></span> eliminate the requirement
         for <code class="literal">required="true"</code> to appear on the control!
         This is due to a limitation of the JSF validation architecture.
     </p><p>
        This approach <span class="emphasis"><em>defines</em></span> constraints on the model, and 
        <span class="emphasis"><em>presents</em></span> constraint violations in the view — a
        significantly better design.
    </p><p>
         However, it is not much less verbose than what we started with, 
         so let's try <code class="literal">&lt;s:validateAll&gt;</code>:
     </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Country:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zip&nbsp;code:</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         This tag simply adds an <code class="literal">&lt;s:validate&gt;</code>
         to every input in the form. For a large form, it can save a lot
         of typing!
     </p><p>
         Now we need to do something about displaying feedback to the 
         user when validation fails. Currently we are displaying all
         messages at the top of the form. In order for the user to correlate the message with an input, you need to define a label using the standard <code class="literal">label</code> attribute on the input component.
     </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Zip:&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validate</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         You can then inject this value into the message string using
         the placeholder {0} (the first and only parameter passed to a
         JSF message for a Bean Validation restriction). See the
         internationalization section for more information regarding
         where to define these messages.
     </p><pre class="programlisting">validator.length={0} length must be between {min} and {max}</pre><p>
         What we would really like to do, though, is display the message
         next to the field with the error (this is possible in plain
         JSF), highlight the field and label (this is not possible) and,
         for good measure, display some image next to the field (also
         not possible). We also want to display a little colored
         asterisk next to the label for each required form field. Using
         this approach, the identifying label is not necessary.
     </p><p>
         That's quite a lot of functionality we need for each field
         of our form. We wouldn't want to have to specify highlighting
         and the layout of the image, message and input field for every
         field on the form. So, instead, we'll specify the common
         layout in a facelets template:
     </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:composition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:ui</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:label</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{invalid?'error':''}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:insert</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:span</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{required}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">span</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{invalid?'error':''}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:graphicImage</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/error.gif&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{invalid}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:insert</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;error&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:composition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         We can include this template for each of our form fields using
         <code class="literal">&lt;s:decorate&gt;</code>.
     </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">globalOnly</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Country:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Zip&nbsp;code:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Finally, we can use RichFaces Ajax to display validation messages as the user 
        is navigating around the form:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">globalOnly</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;countryDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Country:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a:ajax</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blur&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">render</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;countryDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bypassUpdates</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;zipDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Zip&nbsp;code:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a:ajax</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blur&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">render</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;zipDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bypassUpdates</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        It's better style to define explicit ids for
        important controls on the page, especially if you want to do
        automated testing for the UI, using some toolkit like
        Selenium. If you don't provide explicit ids, JSF will generate
        them, but the generated values will change if you change
        anything on the page.
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;form&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">globalOnly</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;countryDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Country:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;country&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a:ajax</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blur&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">render</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;countryDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bypassUpdates</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;zipDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Zip&nbsp;code:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;zip&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.zip}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a:ajax</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">event</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blur&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">render</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;zipDecoration&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bypassUpdates</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        And what if you want to specify a different message to be 
        displayed when validation fails?  You can use the Seam message
        bundle (and all it's goodies like el expressions inside the message,
        and per-view message bundles) with the Bean Validation:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Location</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;zip</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Getters</span><span class="java_plain">&nbsp;and&nbsp;setters&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;name</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">6</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ZipCode</span><span class="java_separator">(</span><span class="java_plain">message</span><span class="java_operator">=</span><span class="java_literal">&quot;#{messages['location.zipCode.invalid']}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getZip</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;zip</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setZip</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;z</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;zip&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;z</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre class="programlisting">
location.zipCode.invalid = The zip code is not valid for #{location.name}
</pre></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="groovy"/>Chapter 11. Groovy integration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e7187">11.1. Groovy introduction</a></span></dt><dt><span class="section"><a href="#d0e7199">11.2. Writing Seam applications in Groovy</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7204">11.2.1. Writing Groovy components</a></span></dt><dt><span class="section"><a href="#d0e7227">11.2.2. seam-gen</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7244">11.3. Deployment</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7254">11.3.1. Deploying Groovy code</a></span></dt><dt><span class="section"><a href="#d0e7265">11.3.2. Native .groovy file deployment at development time</a></span></dt><dt><span class="section"><a href="#d0e7299">11.3.3. seam-gen</a></span></dt></dl></dd></dl></div><p>One aspect of JBoss Seam is its RAD (Rapid Application Development) capability. While not synonymous with RAD,
        one interesting tool in this space is dynamic languages. Until recently, choosing a dynamic language was
        required choosing a completely different development platform (a development platform with a set of APIs and a
        runtime so great that you would no longer want to use you old legacy Java [sic] APIs anymore, which would be
        lucky because you would be forced to use those proprietary APIs anyway). Dynamic languages built on top of the
        Java Virtual Machine, and <a class="ulink" href="http://groovy.codehaus.org">Groovy</a> in particular broke this
        approach in silos.</p><p>JBoss Seam now unites the dynamic language world with the Java EE world by seamlessly integrating both static
        and dynamic languages. JBoss Seam lets the application developer use the best tool for the task, without context
        switching. Writing dynamic Seam components is exactly like writing regular Seam components. You use the same
        annotations, the same APIs, the same everything.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7187"/>11.1. Groovy introduction</h2></div></div></div><p>Groovy is an agile dynamic language based on the Java language but with additional features inspired by
            Python, Ruby and Smalltalk. The strengths of Groovy are twofold:</p><div class="itemizedlist"><ul><li><p>Java syntax is supported in Groovy: Java code is Groovy code, making the learning curve very
                    smooth</p></li><li><p>Groovy objects are Java objects, and Groovy classes are Java classes: Groovy integrates smoothly
                    with existing Java libraries and frameworks.</p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7199"/>11.2. Writing Seam applications in Groovy</h2></div></div></div><p>There is not much to say about it. Since a Groovy object is a Java object, you can virtually write any
            Seam component, or any class for what it worth, in Groovy and deploy it. You can also mix Groovy classes and
            Java classes in the same application.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7204"/>11.2.1. Writing Groovy components</h3></div></div></div><p>As you should have noticed by now, Seam uses annotations heavily. Be sure to use Groovy 1.1 or
                above for annotation support. Here are some example of groovy code used in a Seam application.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e7209"/>11.2.1.1. Entity</h4></div></div></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;hotel&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">50</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">100</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;address</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">max</span><span class="java_operator">=</span><span class="java_literal">40</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;city</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">min</span><span class="java_operator">=</span><span class="java_literal">2</span><span class="java_separator">,</span><span class="java_plain">&nbsp;max</span><span class="java_operator">=</span><span class="java_literal">10</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;state</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">min</span><span class="java_operator">=</span><span class="java_literal">4</span><span class="java_separator">,</span><span class="java_plain">&nbsp;max</span><span class="java_operator">=</span><span class="java_literal">6</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;zip</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Size</span><span class="java_separator">(</span><span class="java_plain">min</span><span class="java_operator">=</span><span class="java_literal">2</span><span class="java_separator">,</span><span class="java_plain">&nbsp;max</span><span class="java_operator">=</span><span class="java_literal">40</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;country</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">precision</span><span class="java_operator">=</span><span class="java_literal">6</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scale</span><span class="java_operator">=</span><span class="java_literal">2</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;price</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;toString</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Hotel(${name},${address},${city},${zip})&quot;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></pre><p>Groovy natively support the notion of properties (getter/setter), so there is no need to
                    explicitly write verbose getters and setters: in the previous example, the hotel class can be
                    accessed from Java as <code class="code">hotel.getCity()</code>, the getters and setters being generated by the
                    Groovy compiler. This type of syntactic sugar makes the entity code very concise.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e7219"/>11.2.1.2. Seam component</h4></div></div></div><p>Writing Seam components in Groovy is in no way different than in Java: annotations are used to
                    mark the class as a Seam component.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Scope</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">SESSION</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;bookingList&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">BookingListAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModel</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Booking</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;bookings</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">DataModelSelection</span><span class="java_plain">&nbsp;</span><span class="java_type">Booking</span><span class="java_plain">&nbsp;booking</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;getBookings</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bookings&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">''</span><span class="java_plain">'</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;b&nbsp;from&nbsp;</span><span class="java_type">Booking</span><span class="java_plain">&nbsp;b</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;b</span><span class="java_separator">.</span><span class="java_plain">user</span><span class="java_separator">.</span><span class="java_plain">username&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_operator">:</span><span class="java_plain">username</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order&nbsp;by&nbsp;b</span><span class="java_separator">.</span><span class="java_plain">checkinDate</span><span class="java_literal">''</span><span class="java_plain">'</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;username&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">username</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;cancel</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;Cancel&nbsp;booking:&nbsp;#{bookingList.booking.id}&nbsp;for&nbsp;#{user.username}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Booking</span><span class="java_plain">&nbsp;cancelled&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">find</span><span class="java_separator">(</span><span class="java_type">Booking</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;booking</span><span class="java_separator">.</span><span class="java_plain">id</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">cancelled&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">remove</span><span class="java_separator">(</span><span class="java_plain">&nbsp;cancelled&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getBookings</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Booking&nbsp;cancelled&nbsp;for&nbsp;confirmation&nbsp;number&nbsp;#{bookingList.booking.id}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_separator">[</span><span class="java_literal">0</span><span class="java_separator">])</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7227"/>11.2.2. seam-gen</h3></div></div></div><p>Seam gen has a transparent integration with Groovy. You can write Groovy code in seam-gen backed
                projects without any additional infrastructure requirement. When writing a Groovy entity, simply place
                your <code class="filename">.groovy</code> files in <code class="filename">src/main</code>. Unsurprisingly, when writing
                an action, simply place your <code class="filename">.groovy</code> files in
            <code class="filename">src/hot</code>.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7244"/>11.3. Deployment</h2></div></div></div><p>Deploying Groovy classes is very much like deploying Java classes (surprisingly, no need to write nor
            comply with a 3-letter composite specification to support a multi-language component framework).</p><p>Beyond standard deployments, JBoss Seam has the ability, at development time, to redeploy JavaBeans Seam
            component classes without having to restart the application, saving a lot of time in the development / test
            cycle. The same support is provided for GroovyBeans Seam components when the <code class="filename">.groovy</code>
            files are deployed.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7254"/>11.3.1. Deploying Groovy code</h3></div></div></div><p>A Groovy class <span class="emphasis"><em>is</em></span> a Java class, with a bytecode representation just like a Java
                class. To deploy, a Groovy entity, a Groovy Session bean or a Groovy Seam component, a compilation step
                is necessary. A common approach is to use the <a class="ulink" href="http://docs.codehaus.org/display/GMAVEN/Home">gmaven-plugin</a>
                 maven plugin. Once compiles, a Groovy class is in no way different than a Java class and the application server will treat them
                equally. Note that this allow a seamless mix of Groovy and Java code.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7265"/>11.3.2. Native .groovy file deployment at development time</h3></div></div></div><p>JBoss Seam natively supports the deployment of <code class="literal">.groovy</code> files (ie without
                compilation) in incremental hotdeployment mode (development only). This enables a very fast edit/test
                cycle. To set up .groovy deployments, follow the configuration at <a class="xref" href="#gettingstarted-hotdeployment" title="2.8. Seam and incremental hot deployment">Section 2.8, “Seam and incremental hot deployment”</a> and deploy your Groovy code (<code class="filename">.groovy</code>
                files) into the <code class="filename">WEB-INF/dev</code> directory. The GroovyBean components will be picked up
                incrementally with no need to restart the application (and obviously not the application server either).</p><p>Be aware that the native .groovy file deployment suffers the same limitations as the regular Seam
                hotdeployment:</p><div class="itemizedlist"><ul><li><p>The components must be JavaBeans or GroovyBeans. They cannot be EJB3 bean</p></li><li><p>Entities cannot be hotdeployed</p></li><li><p>The hot-deployable components will not be visible to any classes deployed outside of
                            <code class="literal">WEB-INF/dev</code></p></li><li><p>Seam debug mode must be enabled</p></li></ul></div><p/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7299"/>11.3.3. seam-gen</h3></div></div></div><p>Seam-gen transparently supports Groovy files deployment and compilation. This includes the native
                    <code class="filename">.groovy</code> file deployment in development mode (compilation-less). If you create a
                seam-gen project of type WAR, Java and Groovy classes in <code class="filename">src/hot</code> will
                automatically be candidate for the incremental hot deployment. If you are in production mode, the Groovy
                files will simply be compiled before deployment.</p><p>You will find a live example of the Booking demo written completely in Groovy and supporting
                incremental hot deployment in <code class="filename">examples/groovybooking</code>.</p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="wicket"/>Chapter 12. Writing your presentation layer using Apache Wicket</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e7326">12.1. Adding Seam to your wicket application</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7346">12.1.1. Bijection</a></span></dt><dt><span class="section"><a href="#d0e7385">12.1.2. Orchestration</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7468">12.2. Setting up your project</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7473">12.2.1. Runtime instrumentation</a></span></dt><dt><span class="section"><a href="#d0e7522">12.2.2. Compile-time instrumentation</a></span></dt><dt><span class="section"><a href="#SeamWicketComponent">12.2.3. 
                The
                @SeamWicketComponent
                annotation
            </a></span></dt><dt><span class="section"><a href="#d0e7601">12.2.4. Defining the Application</a></span></dt></dl></dd></dl></div><p>
        Seam supports Wicket as an alternative presentation layer to
        JSF. Take a
        look at the
        <code class="code">wicket</code>
        example in Seam which shows the Booking
        Example ported to Wicket.
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
            Wicket support is new to Seam, so some features which are
            available in JSF are not yet available when you use Wicket
            (e.g. pageflow). You'll also notice that the documentation is
            very JSF-centric and needs reorganization to reflect the first
            class support for Wicket.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7326"/>12.1. Adding Seam to your wicket application</h2></div></div></div><p>
            The features added to your Wicket application can be split into two
            categories: bijection and orchestration; these are discussed
            in detail
            below.
        </p><p>
            Extensive use of inner classes is common when building Wicket
            applications, with the component tree being built in the constructor.
            Seam fully supports the use of annotation based control in inner
            classes and constructors (unlike regular Seam components).
        </p><p>
            Annotations are processed
            <span class="emphasis"><em>after</em></span>
            any call to
            a superclass. This mean's that any injected attributes cannot be
            passed as an argument in a call to
            <code class="code">this()</code>
            or
            <code class="code">super()</code>
            .
        </p><p>
            When a method is called in an inner class, bijection occurs for any
            class which encloses it. This allows you to place your bijected
            variables in the outer class, and refer to them in any inner class.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7346"/>12.1.1. Bijection</h3></div></div></div><p>
                A Seam enabled Wicket application has full access to the
                all the
                standard Seam contexts (
                <code class="code">EVENT</code>
                ,
                <code class="code">CONVERSATION</code>
                ,
                <code class="code">SESSION</code>
                ,
                <code class="code">APPLICATION</code>
                and
                <code class="code">BUSINESS_PROCESS</code>
                ).
            </p><p>
                To access Seam component's from Wicket, you just need to
                inject it
                using
                <code class="code">@In</code>
                :
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">create</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelBooking</span><span class="java_plain">&nbsp;hotelBooking</span><span class="java_separator">;</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>Tip</h2><p>
                    As your Wicket class isn't a full Seam component,
                    there is no
                    need to annotate it
                    <code class="code">@Name</code>
                    .
                </p></div><p>
                You can also outject an object into the Seam contexts from a Wicket
                component:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Out</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">scope</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">EVENT</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;required</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">false</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;verify</span><span class="java_separator">;</span></pre><p>
                TODO Make this more use case driven
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7385"/>12.1.2. Orchestration</h3></div></div></div><p>
                You can secure a Wicket component by using the
                <code class="code">@Restrict</code>
                annotation. This can be placed on the outer
                component or any inner components. If
                <code class="code">@Restrict</code>
                is
                specified, the component will automatically be restricted to logged
                in users. You can optionally use an EL expression in the
                <code class="code">value</code>
                attribute to specify a restriction to be applied.
                For more refer to the
                <a class="xref" href="#security" title="Chapter 15. Security">Chapter 15, <i>Security</i></a>
                .
            </p><p>
                For example:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Restrict</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Main</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">WebPage</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>Tip</h2><p>
                    Seam will automatically apply the restriction to any nested
                    classes.
                </p></div><p>
                You can demarcate conversations from within a Wicket
                component
                through the use of
                <code class="code">@Begin</code>
                and
                <code class="code">@End</code>
                . The
                semantics for these annotations are the same as when used in a Seam
                component. You can place
                <code class="code">@Begin</code>
                and
                <code class="code">@End</code>
                on any method.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                    The deprecated
                    <code class="code">ifOutcome</code>
                    attribute is not supported.
                </p></div><p>
                For example:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">item</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">add</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Link</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;viewHotel&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Begin</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onClick</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hotelBooking</span><span class="java_separator">.</span><span class="java_plain">selectHotel</span><span class="java_separator">(</span><span class="java_plain">hotel</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setResponsePage</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">example</span><span class="java_separator">.</span><span class="java_plain">wicket</span><span class="java_separator">.</span><span class="java_type">Hotel</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">};</span></pre><p>
                You may have pages in your application which can only be
                accessed
                when the user has a long-running conversation active. To enforce
                this you can use the
                <code class="code">@NoConversationPage</code>
                annotation:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Restrict</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">NoConversationPage</span><span class="java_separator">(</span><span class="java_type">Main</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">WebPage</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">{</span></pre><p>
                If you want to further decouple your application
                classes, you can
                use Seam events. Of course, you can raise an event using
                <code class="code">Events.instance().raiseEvent("foo")</code>
                . Alternatively, you
                can annotate a method
                <code class="code">@RaiseEvent("foo")</code>
                ; if the method
                returns a non-null outcome without exception, the event will be
                raised.
            </p><p>
                You can also control tasks and processes in Wicket
                classes through
                the use of
                <code class="code">@CreateProcess</code>
                ,
                <code class="code">@ResumeTask</code>
                ,
                <code class="code">@BeginTask</code>
                ,
                <code class="code">@EndTask</code>
                ,
                <code class="code">@StartTask</code>
                and
                <code class="code">@Transition</code>
                .
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7468"/>12.2. Setting up your project</h2></div></div></div><p>
            Seam needs to instrument the bytecode of your Wicket classes to be able
            to intercept the annotations you use. The first decision to
            make is: do
            you want your code instrumented at runtime as your app is running, or
            at compile time? The former requires no integration
            with your build environment, but has a performance penalty when loading
            each
            instrumented class for the first time. The latter is faster, but requires
            you to integrate this instrumentation into your build environment.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7473"/>12.2.1. Runtime instrumentation</h3></div></div></div><p>
                There are two ways to achieve runtime instrumentation. One relies on
                placing wicket components to be instrumented in a
                special folder in your WAR
                deployment. If this is not acceptable or possible, you can also use an
                instrumentation "agent," which you specify in the
                command line for launching
                your container.
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e7478"/>12.2.1.1. Location-specific instrumentation</h4></div></div></div><p>
                    Any classes placed in the
                    <code class="literal">WEB-INF/wicket</code>
                    folder within your
                    WAR deployment will be automatically instrumented by the seam-wicket
                    runtime.
                    You can arrange to place your wicket pages and components here by
                    specifying
                    a separate output folder for those classes in your IDE, or through
                    the use of
                    ant scripts.
                </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e7486"/>12.2.1.2. Runtime instrumentation agent</h4></div></div></div><p>
                    The jar file
                    <code class="literal">jboss-seam-wicket.jar</code>
                    can be used as an instrumentation
                    agent through the Java Instrumentation api. This is accomplished through
                    the following
                    steps:
                </p><div class="itemizedlist"><ul><li><p>
                            Arrange for the
                            <code class="literal">jboss-seam-wicket.jar</code>
                            file to live in a
                            location for which you have an absolute path, as the Java Instrumentation
                            API does
                            not allow relative paths when specifying the location of an agent
                            lib.
                        </p></li><li><p>
                            Add
                            <code class="literal">javaagent:/path/to/jboss-seam-wicket.jar
                            </code>
                            to the command line options
                            when launching your webapp container:
                        </p></li><li><p> In addition, you will need to add an
                            environment variable that specifies
                            packages that the agent should instrument. This is accomplished by a
                            comma separated
                            list of package names:
                        </p><pre class="programlisting">-Dorg.jboss.seam.wicket.instrumented-packages=my.package.one,my.other.package</pre><p>
                            Note that if a package A is specified,
                            classes in subpackages of A are also
                            examined. The
                            classes chosen for instrumentation can be further limited by specifying:
                            </p><pre class="programlisting">-Dorg.jboss.seam.wicket.scanAnnotations=true</pre><p>
                            and then marking instrumentable classes with
                            the
                            <code class="literal">@SeamWicketComponent</code>
                            annotation, see
                            <a class="xref" href="#SeamWicketComponent" title="12.2.3.  The @SeamWicketComponent annotation">Section 12.2.3, “
                The
                @SeamWicketComponent
                annotation
            ”</a>
                            .
                        </p></li></ul></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7522"/>12.2.2. Compile-time instrumentation</h3></div></div></div><p>
                Seam supports instrumentation at compile time through either Apache Ant
                or Apache Maven.
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e7527"/>12.2.2.1.  Instrumenting with ant</h4></div></div></div><p>
                    Seam provides an ant task in the
                    <code class="literal">jboss-seam-wicket-ant.jar </code>
                    . This is used
                    in the following manner:
                    </p><pre class="programlisting">&lt;taskdef name="instrumentWicket"
   classname="org.jboss.seam.wicket.ioc.WicketInstrumentationTask"&gt;
  &lt;classpath&gt;
    &lt;pathelement location="lib/jboss-seam-wicket-ant.jar"/&gt;
    &lt;pathelement location="web/WEB-INF/lib/jboss-seam-wicket.jar"/&gt;
    &lt;pathelement location="lib/javassist.jar"/&gt;
    &lt;pathelement location="lib/jboss-seam.jar"/&gt;
  &lt;/classpath&gt;
&lt;/taskdef&gt;

&lt;instrumentWicket outputDirectory="${build.instrumented}" useAnnotations="true"&gt;
  &lt;classpath refid="build.classpath"/&gt;
  &lt;fileset dir="${build.classes}" includes="**/*.class"/&gt;
&lt;/instrumentWicket&gt;</pre><p>
                </p><p>
                    This results in the instrumented classes being
                    placed in the directory
                    specified by
                    <code class="literal">${build.instrumented}</code>
                    . You will then
                    need to instruct ant to copy these classes into
                    <code class="literal">WEB-INF/classes</code>
                    .
                    If you want to hot deploy the Wicket components, you can copy the
                    instrumented classes to
                    <code class="literal">WEB-INF/dev</code>
                    ; if you use hot deploy, make sure that
                    your
                    <code class="literal">WicketApplication</code>
                    class is also hot-deployed.
                    Upon a reload of hot-deployed classes, the entire WicketApplication
                    instance has to be re-initialized, in order to pick
                    up new references
                    to the classes of mounted pages.
                </p><p>
                    The
                    <code class="literal">useAnnotations</code>
                    attribute is used to make the ant task only include
                    classes that have been marked with the
                    <code class="literal">@SeamWicketComponent</code>
                    annotation,
                    see
                    <a class="xref" href="#SeamWicketComponent" title="12.2.3.  The @SeamWicketComponent annotation">Section 12.2.3, “
                The
                @SeamWicketComponent
                annotation
            ”</a>
                    .
                </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e7562"/>12.2.2.2. Instrumenting with maven</h4></div></div></div><p>
                    The jboss maven repository
                    <code class="literal">repository.jboss.org</code>
                    provides a plugin named
                    <code class="literal">seam-instrument-wicket</code>
                    with a
                    <code class="literal">process-classes</code>
                    mojo. An
                    example configuration in your pom.xml might look like:
                    </p><pre class="programlisting">&lt;build&gt;
    &lt;plugins&gt;
         &lt;plugin&gt;
            &lt;groupId&gt;org.jboss.seam&lt;/groupId&gt;
            &lt;artifactId&gt;seam-instrument-wicket&lt;/artifactId&gt;
            &lt;version&gt;2.2.0&lt;/version&gt;
            &lt;configuration&gt;
                &lt;scanAnnotations&gt;true&lt;/scanAnnotations&gt;
                &lt;includes&gt;
                    &lt;include&gt;your.package.name&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/configuration&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;instrument&lt;/id&gt;
                    &lt;phase&gt;process-classes&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;instrument&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</pre><p>
                    The above example illustrates that the
                    instrumentation is limited to classes specified by
                    the
                    <code class="literal">includes</code>
                    element. In this example, the
                    <code class="literal">scanAnnotations</code>
                    is specified, see
                    <a class="xref" href="#SeamWicketComponent" title="12.2.3.  The @SeamWicketComponent annotation">Section 12.2.3, “
                The
                @SeamWicketComponent
                annotation
            ”</a>
                    .
                </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="SeamWicketComponent"/>12.2.3. 
                The
                <code class="literal">@SeamWicketComponent</code>
                annotation
            </h3></div></div></div><p>
                Classes placed in WEB-INF/wicket will unconditionally be
                instrumented. The other instrumentation
                mechanisms all allow you to specify that instrumentation should only be
                applied to classes
                annotated with the
                <code class="literal">@SeamWicketComponent</code>
                annotation. This annotation is inherited,
                which means all subclasses of an annotated class will also be
                instrumented. An example usage is:
                </p><pre class="programlisting">
import org.jboss.seam.wicket.ioc.SeamWicketComponent;

@SeamWicketComponent
public class MyPage extends WebPage
{
 ...
}
</pre><p>
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e7601"/>12.2.4. Defining the Application</h3></div></div></div><p>
                A Wicket web application which uses Seam should use
                <code class="code">SeamWebApplication</code>
                as the base class; this creates hooks
                into the Wicket lifecycle allowing Seam to automagically propagate the
                conversation as needed. It also adds status messages to
                the page.
            </p><p>
                For example:
            </p><p>
                The
                <code class="code">SeamAuthorizationStrategy</code>
                delegates authorization
                to Seam Security, allowing the use of
                <code class="code">@Restrict</code>
                on Wicket
                components.
                <code class="code">SeamWebApplication</code>
                installs the authorization
                strategy for you. You can specify the login page by implementing the
                <code class="code">getLoginPage()</code>
                method.
            </p><p>
                You'll also need to set the home page of the application
                by
                implementing the
                <code class="code">getHomePage()</code>
                method.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">WicketBookingApplication</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">extends</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">SeamWebApplication</span>
<!--  --><br/><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Class</span><span class="java_plain">&nbsp;getHomePage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_type">Home</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">Class</span><span class="java_plain">&nbsp;getLoginPage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_type">Home</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                Seam automatically installs the Wicket filter for you
                (ensuring that
                it is inserted in the correct place for you). But you still need to
                tell Wicket which
                <code class="code">WebApplication</code>
                class to use.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:wicket</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/wicket&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/wicket</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/wicket-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">wicket:web-application</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">application-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.example.wicket.WicketBookingApplication&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_plain"></span><br />
</pre><p>
                In addition, if you plan to use JSF-based pages in the same
                application as wicket pages, you'll
                need to ensure that the jsf exception filter is only enabled for jsf
                urls:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:web</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/web&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:wicket</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/wicket&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/web</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/web-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Only&nbsp;map&nbsp;the&nbsp;seam&nbsp;jsf&nbsp;exception&nbsp;filter&nbsp;to&nbsp;jsf&nbsp;paths,&nbsp;which&nbsp;we&nbsp;identify&nbsp;with&nbsp;the&nbsp;*.seam&nbsp;path&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:exception-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>Tip</h2><p>
                    Take a look at the Wicket documentation for more on
                    authorization
                    strategies and other methods you can override on the
                    <code class="code">Application</code>
                    class.
                </p></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="framework"/>Chapter 13. The Seam Application Framework</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e7664">13.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e7721">13.2. Home objects</a></span></dt><dt><span class="section"><a href="#d0e7889">13.3. Query objects</a></span></dt><dt><span class="section"><a href="#d0e7947">13.4. Controller objects</a></span></dt></dl></div><p>
        Seam makes it really easy to create applications by writing
        plain Java classes with annotations, which don't need to extend
        any special interfaces or superclasses. But we can simplify
        some common programming tasks even further, by providing a set 
        of pre-built components which can be re-used either by
        configuration in <code class="literal">components.xml</code> (for very 
        simple cases) or extension.
    </p><p>
        The <span class="emphasis"><em>Seam Application Framework</em></span> can reduce
        the amount of code you need to write when doing basic database
        access in a web application, using either Hibernate or JPA.
    </p><p>
        We should emphasize that the framework is extremely simple, 
        just a handful of simple classes that are easy to understand
        and extend. The "magic" is in Seam itself — the same magic
        you use when creating any Seam application even without using 
        this framework.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7664"/>13.1. Introduction</h2></div></div></div><p>
            The components provided by the Seam application framework
            may be used in one of two different approaches. The first
            way is to install and configure an instance of the component
            in <code class="literal">components.xml</code>, just like we have
            done with other kinds of built-in Seam components. For
            example, the following fragment from
            <code class="literal">components.xml</code> installs a component
            which can perform basic CRUD operations for a
            <code class="literal">Person</code> entity:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personHome&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-manager</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personDatabase}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{param.personId}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            If that looks a bit too much like "programming in XML" for 
            your taste, you can use extension instead:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;personHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;personDatabase</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;getEntityManager</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;personDatabase</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            The second approach has one huge advantage: you can easily add 
            extra functionality, and override the built-in functionality
            (the framework classes were carefully designed for extension
            and customization).
        </p><p>
            A second advantage is that your classes may be EJB stateful
            session beans, if you like. (They do not have to be, they 
            can be plain JavaBean components if you prefer.)  If you are using
            JBoss AS, you'll need 4.2.2.GA or later:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;personHome&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">LocalPersonHome</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            You can also make your classes stateless session beans. In this case
            you <span class="emphasis"><em>must</em></span> use injection to provide the
            persistence context, even if it is called 
            <code class="literal">entityManager</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;personHome&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">LocalPersonHome</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;getPersistenceContext</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entityManager</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            At this time, the Seam Application Framework provides four main
            built-in components: <code class="literal">EntityHome</code> and
            <code class="literal">HibernateEntityHome</code> for CRUD, along with
            <code class="literal">EntityQuery</code> and <code class="literal">HibernateEntityQuery</code>
            for queries.
        </p><p>
            The Home and Query components are written so that they can function
            with a scope of session, event or conversation. Which scope you
            use depends upon the state model you wish to use in your application.
        </p><p>
            The Seam Application Framework only works with Seam-managed
            persistence contexts. By default, the components will look
            for a persistence context named <code class="literal">entityManager</code>.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7721"/>13.2. Home objects</h2></div></div></div><p>
            A Home object provides persistence operations for a particular entity
            class. Suppose we have our trusty <code class="literal">Person</code> class:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;nationality</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">getters&nbsp;and&nbsp;setters</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            We can define a <code class="literal">personHome</code> component either via
            configuration:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personHome&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Or via extension:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;personHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span></pre><p>
            A Home object provides the following operations: <code class="literal">persist()</code>,
            <code class="literal">remove()</code>, <code class="literal">update()</code> and 
            <code class="literal">getInstance()</code>. Before you can call the 
            <code class="literal">remove()</code>, or <code class="literal">update()</code> operations, you 
            must first set the identifier of the object you are interested in, using the 
            <code class="literal">setId()</code> method.
        </p><p>
            We can use a Home directly from a JSF page, for example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Create&nbsp;Person</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">First&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.instance.firstName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Last&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.instance.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.persist}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Usually, it is much nicer to be able to refer to the <code class="literal">Person</code>
            merely as <code class="literal">person</code>, so let's make that possible by adding a
            line to <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.instance}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personHome&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            (If we are using configuration.)
            Or by adding a <code class="literal">@Factory</code> method to <code class="literal">PersonHome</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;personHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;person&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;initPerson</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;getInstance</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            (If we are using extension.) 
            This change simplifies our JSF page to the following:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Create&nbsp;Person</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">First&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Last&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.persist}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Well, that lets us create new <code class="literal">Person</code> entries. Yes,
            that is all the code that is required! Now, if we want to be able to 
            display, update and delete pre-existing <code class="literal">Person</code> 
            entries in the database, we need to be able to pass the entry
            identifier to the <code class="literal">PersonHome</code>. Page parameters
            are a great way to do that:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editPerson.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Now we can add the extra operations to our JSF page:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{!personHome.managed}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;Person&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.managed}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Edit&nbsp;Person&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">First&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Last&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Create&nbsp;Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.persist}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{!personHome.managed}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Update&nbsp;Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.update}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.managed}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Delete&nbsp;Person&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.remove}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.managed}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            When we link to the page with no request parameters, the page will 
            be displayed as a "Create Person" page. When we provide a value for
            the <code class="literal">personId</code> request parameter, it will be an
            "Edit Person" page.
        </p><p>
            Suppose we need to create <code class="literal">Person</code> entries with their
            nationality initialized. We can do that easily, via configuration:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.instance}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personHome&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">new-instance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{newPerson}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;newPerson&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;nationality&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{country}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Or by extension:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;personHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;person&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;initPerson</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;getInstance</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;createInstance</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_plain">country</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Of course, the <code class="literal">Country</code> could be an object managed by
            another Home object, for example, <code class="literal">CountryHome</code>.
        </p><p>
            To add more sophisticated operations (association management, etc), we can
            just add methods to <code class="literal">PersonHome</code>.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;personHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;person&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;initPerson</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;getInstance</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;createInstance</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_plain">country</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;migrate</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getInstance</span><span class="java_separator">().</span><span class="java_plain">setCountry</span><span class="java_separator">(</span><span class="java_plain">country</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
			The Home object raises an <code class="literal">org.jboss.seam.afterTransactionSuccess</code> 
			event when a transaction succeeds (a call to <code class="literal">persist()</code>, 
			<code class="literal">update()</code> or <code class="literal">remove()</code> succeeds).  By observing 
			this event we can refresh our queries when the underlying entities are changed.  If
			we only want to refresh certain queries when a particular entity is persisted, 
			updated or removed we can observe the 
			<code class="literal">org.jboss.seam.afterTransactionSuccess.&lt;name&gt;</code> 
			event (where <code class="literal">&lt;name&gt;</code> is the simple name of the entity, e.g. an entity called "org.foo.myEntity" has "myEntity" as simple name).
		</p><p>
            The Home object automatically displays faces messages when an operation is
            successful. To customize these messages we can, again, use configuration:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.instance}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personHome&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">new-instance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{newPerson}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:created-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">New&nbsp;person&nbsp;#{person.firstName}&nbsp;#{person.lastName}&nbsp;created</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:created-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:deleted-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Person&nbsp;#{person.firstName}&nbsp;#{person.lastName}&nbsp;deleted</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:deleted-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:updated-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Person&nbsp;#{person.firstName}&nbsp;#{person.lastName}&nbsp;updated</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:updated-message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:entity-home</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;newPerson&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;eg.Person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;nationality&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{country}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Or extension:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;personHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PersonHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;country</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_literal">&quot;person&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;initPerson</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;getInstance</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;createInstance</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_separator">(</span><span class="java_plain">country</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCreatedMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;createValueExpression</span><span class="java_separator">(</span><span class="java_literal">&quot;New&nbsp;person&nbsp;#{person.firstName}&nbsp;#{person.lastName}&nbsp;created&quot;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getUpdatedMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;createValueExpression</span><span class="java_separator">(</span><span class="java_literal">&quot;Person&nbsp;#{person.firstName}&nbsp;#{person.lastName}&nbsp;updated&quot;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getDeletedMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;createValueExpression</span><span class="java_separator">(</span><span class="java_literal">&quot;Person&nbsp;#{person.firstName}&nbsp;#{person.lastName}&nbsp;deleted&quot;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            But the best way to specify the messages is to put them in a resource
            bundle known to Seam (the bundle named <code class="literal">messages</code>,
            by default).
        </p><pre class="programlisting">Person_created=New person #{person.firstName} #{person.lastName} created
Person_deleted=Person #{person.firstName} #{person.lastName} deleted
Person_updated=Person #{person.firstName} #{person.lastName} updated</pre><p>
            This enables internationalization, and keeps your code and configuration clean of
            presentation concerns.
        </p><p>
            The final step is to add validation functionality to the page, using
            <code class="literal">&lt;s:validateAll&gt;</code> and <code class="literal">&lt;s:decorate&gt;</code>,
            but I'll leave that for you to figure out.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7889"/>13.3. Query objects</h2></div></div></div><p>
            If we need a list of all <code class="literal">Person</code> instance in the database, we
            can use a Query object. For example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-query</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;people&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">ejbql</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;select&nbsp;p&nbsp;from&nbsp;Person&nbsp;p&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            We can use it from a JSF page:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">List&nbsp;of&nbsp;people</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.resultList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editPerson.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstName}&nbsp;#{person.lastName}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            We probably need to support pagination:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-query</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;people&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">ejbql</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;select&nbsp;p&nbsp;from&nbsp;Person&nbsp;p&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">order</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">max-results</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;20&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            We'll use a page parameter to determine the page to display:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/searchPerson.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstResult&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.firstResult}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The JSF code for a pagination control is a bit verbose, but manageable:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Search&nbsp;for&nbsp;people</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.resultList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editPerson.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstName}&nbsp;#{person.lastName}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.previousExists}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;First&nbsp;Page&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstResult&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.previousExists}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Previous&nbsp;Page&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstResult&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.previousFirstResult}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.nextExists}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Next&nbsp;Page&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstResult&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.nextFirstResult}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.nextExists}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Last&nbsp;Page&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstResult&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.lastFirstResult}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Real search screens let the user enter a bunch of optional search criteria
            to narrow the list of results returned. The Query object lets you specify
            optional "restrictions" to support this important usecase:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;examplePerson&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Person&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:entity-query</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;people&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">ejbql</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;select&nbsp;p&nbsp;from&nbsp;Person&nbsp;p&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">order</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">max-results</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;20&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">framework:restrictions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">lower(firstName)&nbsp;like&nbsp;lower(&nbsp;concat(#{examplePerson.firstName},'%')&nbsp;)</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">lower(lastName)&nbsp;like&nbsp;lower(&nbsp;concat(#{examplePerson.lastName},'%')&nbsp;)</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:restrictions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">framework:entity-query</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Notice the use of an "example" object.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Search&nbsp;for&nbsp;people</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">First&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{examplePerson.firstName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Last&nbsp;name:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{examplePerson.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Search&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/search.xhtml&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.resultList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/editPerson.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstName}&nbsp;#{person.lastName}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.id}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:link</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			To refresh the query when the underlying entities change we observe the
			<code class="literal">org.jboss.seam.afterTransactionSuccess</code> event:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.afterTransactionSuccess&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.refresh}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			Or, to just refresh the query when the person entity is persisted, updated or 
			removed through <code class="literal">PersonHome</code>:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.afterTransactionSuccess.Person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people.refresh}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         Unfortunately Query objects don't work well with 
         <span class="emphasis"><em>join fetch</em></span> queries - the use of pagination with
         these queries is not recommended, and you'll have to implement your own
         method of calculating the total number of results (by overriding 
         <code class="literal">getCountEjbql()</code>.
      </p><p>
         The examples in this section have all shown reuse by configuration. However,
         reuse by extension is equally possible for Query objects.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7947"/>13.4. Controller objects</h2></div></div></div><p>
            A totally optional part of the Seam Application Framework is the class
            <code class="literal">Controller</code> and its subclasses 
            <code class="literal">EntityController</code>
            <code class="literal">HibernateEntityController</code> and
            <code class="literal">BusinessProcessController</code>. These classes provide 
            nothing more than some convenience methods for access to commonly
            used built-in components and methods of built-in components. They help
            save a few keystrokes (characters can add up!) and provide a great
            launchpad for new users to explore the rich functionality built in
            to Seam.
        </p><p>
            For example, here is what <code class="literal">RegisterAction</code> from the
            Seam registration example would look like:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;register&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegisterAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityController</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Register</span>
<!--  --><br/><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;register</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_plain">&nbsp;existing&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;u.username&nbsp;from&nbsp;User&nbsp;u&nbsp;where&nbsp;u.username=:username&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;username&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getUsername</span><span class="java_separator">())</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;existing</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()</span><span class="java_operator">==</span><span class="java_literal">0</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;persist</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info</span><span class="java_separator">(</span><span class="java_literal">&quot;Registered&nbsp;new&nbsp;user&nbsp;#{user.username}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/registered.xhtmlx&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addFacesMessage</span><span class="java_separator">(</span><span class="java_literal">&quot;User&nbsp;#{user.username}&nbsp;already&nbsp;exists&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            As you can see, its not an earthshattering improvement...
        </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="drools"/>Chapter 14. Seam and JBoss Rules</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e7978">14.1. Installing rules</a></span></dt><dt><span class="section"><a href="#d0e8072">14.2. Using rules from a Seam component</a></span></dt><dt><span class="section"><a href="#d0e8082">14.3. Using rules from a jBPM process definition</a></span></dt></dl></div><p>
        Seam makes it easy to call JBoss Rules (Drools) rulebases from Seam
        components or jBPM process definitions.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e7978"/>14.1. Installing rules</h2></div></div></div><p>
            The first step is to make an instance of <code class="literal">org.drools.RuleBase</code>
            available in a Seam context variable. For testing purposes, Seam provides a built-in component
            that compiles a static set of rules from the classpath. You can install
            this component via <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingRules&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">policyPricingRules.drl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             This component compiles rules from a set of DRL (<code class="literal">.drl</code>) or decision table (<code class="literal">.xls</code>)
             files and caches an instance of <code class="literal">org.drools.RuleBase</code>
             in the Seam <code class="literal">APPLICATION</code> context. Note that it is 
             quite likely that you will need to install multiple rule bases in a 
             rule-driven application.
         </p><p>
             If you want to use a Drools DSL, you also need to specify the DSL
             definition:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingRules&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dsl-file</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricing.dsl&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">policyPricingRules.drl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Support for Drools RuleFlow is also available and you can simply add a <code class="literal">.rf</code> or a <code class="literal">.rfm</code>
             as part of your rule files as:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingRules&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rule-files</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingRules.drl,&nbsp;policyPricingRulesFlow.rf&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
             Note that when using the Drools 4.x RuleFlow (<code class="literal">.rfm</code>) format, you need to specify the -Ddrools.ruleflow.port=true
             system property on server startup. This is however still an experimental feature and we advise to use the Drools5 (<code class="literal">.rf</code>)
             format if possible.              
        </p><p>
             If you want to register a custom consequence exception handler through the RuleBaseConfiguration, you need to 
             write the handler, for example: 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Scope</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">APPLICATION</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Startup</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;myConsequenceExceptionHandler&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyConsequenceExceptionHandler</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">ConsequenceExceptionHandler</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Externalizable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;readExternal</span><span class="java_separator">(</span><span class="java_type">ObjectInput</span><span class="java_plain">&nbsp;in</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ClassNotFoundException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;writeExternal</span><span class="java_separator">(</span><span class="java_type">ObjectOutput</span><span class="java_plain">&nbsp;out</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;handleException</span><span class="java_separator">(</span><span class="java_type">Activation</span><span class="java_plain">&nbsp;activation</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">WorkingMemory</span><span class="java_plain">&nbsp;workingMemory</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;exception</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ConsequenceException</span><span class="java_separator">(</span><span class="java_plain">&nbsp;exception</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;activation</span><span class="java_separator">.</span><span class="java_plain">getRule</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
		and register it:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingRules&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dsl-file</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricing.dsl&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">consequence-exception-handler</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{myConsequenceExceptionHandler}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">policyPricingRules.drl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        In most rules-driven applications,
            rules need to be dynamically deployable, so a production application will want to use a
            Drools RuleAgent to manage the RuleBase.  The RuleAgent can connect to a Drools rule server (BRMS) 
            or hot deploy rules packages from a local file repository.  The RulesAgent-managed RuleBase is
            also configurable in <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-agent</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;insuranceRules&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">configurationFile</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/WEB-INF/deployedrules.properties&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>The properties file contains properties specific to the RulesAgent. Here is an example configuration file from the
        Drools example distribution.</p><pre class="programlisting">newInstance=true
url=http://localhost:8080/drools-jbrms/org.drools.brms.JBRMS/package/org.acme.insurance/fmeyer
localCacheDir=/Users/fernandomeyer/projects/jbossrules/drools-examples/drools-examples-brms/cache
poll=30
name=insuranceconfig</pre><p>It is also possible to configure the options on the component directly, bypassing the configuration file.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-agent</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;insuranceRules&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://localhost:8080/drools-jbrms/org.drools.brms.JBRMS/package/org.acme.insurance/fmeyer&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">local-cache-dir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/Users/fernandomeyer/projects/jbossrules/drools-examples/drools-examples-brms/cache&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">poll</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;30&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">configuration-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;insuranceconfig&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Next, we need to make an instance of <code class="literal">org.drools.WorkingMemory</code>
             available to each conversation. (Each <code class="literal">WorkingMemory</code>
             accumulates facts relating to the current conversation.)
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:managed-working-memory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingWorkingMemory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rule-base</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{policyPricingRules}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Notice that we gave the <code class="literal">policyPricingWorkingMemory</code> a
             reference back to our rule base via the <code class="literal">ruleBase</code>
             configuration property.
         </p><p>
         	We can also add means to be notified of rule engine events, including rules firing, objects being asserted, etc. 
         	by adding event listeners to WorkingMemory.
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:managed-working-memory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;policyPricingWorkingMemory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rule-base</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{policyPricingRules}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:event-listeners</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.drools.event.DebugWorkingMemoryEventListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.drools.event.DebugAgendaEventListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:event-listeners</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:managed-working-memory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8072"/>14.2. Using rules from a Seam component</h2></div></div></div><p>
             We can now inject our <code class="literal">WorkingMemory</code> into any Seam component,
             assert facts, and fire rules:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">WorkingMemory</span><!-- <br/> --><span class="java_plain">&nbsp;policyPricingWorkingMemory</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Policy</span><span class="java_plain">&nbsp;policy</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;pricePolicy</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">FactException</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;policyPricingWorkingMemory</span><span class="java_separator">.</span><span class="java_plain">insert</span><span class="java_separator">(</span><span class="java_plain">policy</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;policyPricingWorkingMemory</span><span class="java_separator">.</span><span class="java_plain">insert</span><span class="java_separator">(</span><span class="java_plain">customer</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;we&nbsp;have&nbsp;a&nbsp;ruleflow</span><span class="java_separator">,</span><span class="java_plain">&nbsp;start&nbsp;the&nbsp;process</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;policyPricingWorkingMemory</span><span class="java_separator">.</span><span class="java_plain">startProcess</span><span class="java_separator">(</span><span class="java_plain">startProcessId</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;policyPricingWorkingMemory</span><span class="java_separator">.</span><span class="java_plain">fireAllRules</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8082"/>14.3. Using rules from a jBPM process definition</h2></div></div></div><p>
             You can even allow a rule base to act as a jBPM action handler, decision
             handler, or assignment handler — in either a pageflow or business
             process definition.
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">decision</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;approval&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.drools.DroolsDecisionHandler&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">workingMemoryName</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">orderApprovalRulesWorkingMemory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">workingMemoryName</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;if&nbsp;a&nbsp;ruleflow&nbsp;was&nbsp;added&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">startProcessId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">approvalruleflowid</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">startProcessId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assertObjects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{customer}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{order}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{order.lineItems}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assertObjects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;approved&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ship&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.drools.DroolsActionHandler&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">workingMemoryName</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">shippingRulesWorkingMemory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">workingMemoryName</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assertObjects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{customer}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{order}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{order.lineItems}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assertObjects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">action</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">transition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rejected&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cancelled&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">decision</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             The <code class="literal">&lt;assertObjects&gt;</code> element specifies EL expressions that
             return an object or collection of objects to be asserted as facts into the 
             <code class="literal">WorkingMemory</code>.
         </p><p>
            The <code class="literal">&lt;retractObjects&gt;</code> element on the other hand specifies EL 
            expressions that return an object or collection of objects to be retracted from the 
            <code class="literal">WorkingMemory</code>.
         </p><p>
             There is also support for using Drools for jBPM task assignments:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">task-node</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;review&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">task</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;review&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">description</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Review&nbsp;Order&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assignment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">handler</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.drools.DroolsAssignmentHandler&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">workingMemoryName</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">orderApprovalRulesWorkingMemory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">workingMemoryName</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assertObjects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{actor}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{customer}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{order}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{order.lineItems}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">element</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assertObjects</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assignment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">task</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rejected&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cancelled&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;approved&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">to</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;approved&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">task-node</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Certain objects are available to the rules as Drools globals, namely
             the jBPM <code class="literal">Assignable</code>, as <code class="literal">assignable</code>
             and a Seam <code class="literal">Decision</code> object, as <code class="literal">decision</code>.
             Rules which handle decisions should call <code class="literal">decision.setOutcome("result")</code>
             to determine the result of the decision. Rules which perform assignments should
             set the actor id using the <code class="literal">Assignable</code>.
         </p><pre class="programlisting">package org.jboss.seam.examples.shop

import org.jboss.seam.drools.Decision

global Decision decision

rule "Approve Order For Loyal Customer"
  when
    Customer( loyaltyStatus == "GOLD" )
    Order( totalAmount &lt;= 10000 )
  then
    decision.setOutcome("approved");
end</pre><pre class="programlisting">package org.jboss.seam.examples.shop

import org.jbpm.taskmgmt.exe.Assignable

global Assignable assignable

rule "Assign Review For Small Order"
  when
    Order( totalAmount &lt;= 100 )
  then
    assignable.setPooledActors( new String[] {"reviewers"} );
end</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                 You can find out more about Drools at 
                 <a class="ulink" href="http://www.drools.org">http://www.drools.org</a>
             </p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="caution"><h2>Caution</h2><p>
               Seam comes with enough of Drools' dependencies to implement some
               simple rules. If you want to add extra capabilities to Drools
               you should download the full distribution and add in extra
               dependencies as needed.
            </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="security"/>Chapter 15. Security</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#d0e8144">15.1. Overview</a></span></dt><dt><span class="sect1"><a href="#d0e8170">15.2. Disabling Security</a></span></dt><dt><span class="sect1"><a href="#d0e8196">15.3. Authentication</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e8201">15.3.1. Configuring an Authenticator component</a></span></dt><dt><span class="sect2"><a href="#d0e8231">15.3.2. Writing an authentication method</a></span></dt><dt><span class="sect2"><a href="#d0e8327">15.3.3. Writing a login form</a></span></dt><dt><span class="sect2"><a href="#d0e8351">15.3.4. Configuration Summary</a></span></dt><dt><span class="sect2"><a href="#d0e8369">15.3.5. Remember Me</a></span></dt><dt><span class="sect2"><a href="#d0e8448">15.3.6. Handling Security Exceptions</a></span></dt><dt><span class="sect2"><a href="#d0e8484">15.3.7. Login Redirection</a></span></dt><dt><span class="sect2"><a href="#d0e8506">15.3.8. HTTP Authentication</a></span></dt><dt><span class="sect2"><a href="#d0e8556">15.3.9. Advanced Authentication Features</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e8585">15.4. Identity Management</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e8606">15.4.1. Configuring IdentityManager</a></span></dt><dt><span class="sect2"><a href="#d0e8677">15.4.2. JpaIdentityStore</a></span></dt><dt><span class="sect2"><a href="#d0e9042">15.4.3. LdapIdentityStore</a></span></dt><dt><span class="sect2"><a href="#d0e9574">15.4.4. Writing your own IdentityStore</a></span></dt><dt><span class="sect2"><a href="#d0e9587">15.4.5. Authentication with Identity Management</a></span></dt><dt><span class="sect2"><a href="#d0e9607">15.4.6. Using IdentityManager</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e10599">15.5. Error Messages</a></span></dt><dt><span class="sect1"><a href="#d0e10682">15.6. Authorization</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e10690">15.6.1. Core concepts</a></span></dt><dt><span class="sect2"><a href="#d0e10726">15.6.2. Securing components</a></span></dt><dt><span class="sect2"><a href="#d0e10884">15.6.3. Security in the user interface</a></span></dt><dt><span class="sect2"><a href="#d0e10927">15.6.4. Securing pages</a></span></dt><dt><span class="sect2"><a href="#d0e10967">15.6.5. Securing Entities</a></span></dt><dt><span class="sect2"><a href="#d0e11130">15.6.6. Typesafe Permission Annotations</a></span></dt><dt><span class="sect2"><a href="#d0e11195">15.6.7. Typesafe Role Annotations</a></span></dt><dt><span class="sect2"><a href="#d0e11219">15.6.8. The Permission Authorization Model</a></span></dt><dt><span class="sect2"><a href="#d0e11477">15.6.9. RuleBasedPermissionResolver</a></span></dt><dt><span class="sect2"><a href="#d0e11765">15.6.10. PersistentPermissionResolver</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e12566">15.7. Permission Management</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e12574">15.7.1. PermissionManager</a></span></dt><dt><span class="sect2"><a href="#d0e12795">15.7.2. Permission checks for PermissionManager operations</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e12981">15.8. SSL Security</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e13051">15.8.1. Overriding the default ports</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e13070">15.9. CAPTCHA</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e13096">15.9.1. Configuring the CAPTCHA Servlet</a></span></dt><dt><span class="sect2"><a href="#d0e13106">15.9.2. Adding a CAPTCHA to a form</a></span></dt><dt><span class="sect2"><a href="#d0e13121">15.9.3. Customising the CAPTCHA algorithm</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e13128">15.10. Security Events</a></span></dt><dt><span class="sect1"><a href="#d0e13294">15.11. Run As</a></span></dt><dt><span class="sect1"><a href="#d0e13341">15.12. Extending the Identity component</a></span></dt><dt><span class="sect1"><a href="#d0e13369">15.13. OpenID</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e13384">15.13.1. Configuring OpenID</a></span></dt><dt><span class="sect2"><a href="#d0e13416">15.13.2. Presenting an OpenIdDLogin form</a></span></dt><dt><span class="sect2"><a href="#d0e13440">15.13.3. Logging in immediately</a></span></dt><dt><span class="sect2"><a href="#d0e13464">15.13.4. Deferring login</a></span></dt><dt><span class="sect2"><a href="#d0e13478">15.13.5. Logging out</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8144"/>15.1. Overview</h2></div></div></div><p>
      The Seam Security API provides a multitude of security-related features for your Seam-based application, covering 
      such areas as:
    </p><div class="itemizedlist"><ul><li><p>
          Authentication - an extensible, JAAS-based authentication layer that allows users to authenticate
          against any security provider.
        </p></li><li><p>
          Identity Management - an API for managing a Seam application's users and roles at runtime.
        </p></li><li><p>
          Authorization - an extremely comprehensive authorization framework, supporting user roles, persistent and
          rule-based permissions, and a pluggable permission resolver for easily implementing customised security logic.
        </p></li><li><p>
          Permission Management - a set of built-in Seam components to allow easy management of an application's 
          security policy.
        </p></li><li><p>
          CAPTCHA support - to assist in the prevention of automated software/scripts abusing your Seam-based site.
        </p></li><li><p>
          And much more
        </p></li></ul></div><p>
      This chapter will cover each of these features in detail.
    </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8170"/>15.2. Disabling Security</h2></div></div></div><p>
      In some situations it may be necessary to disable Seam Security, for instances during unit tests or because you
      are using a different approach to security, such as native JAAS. Simply call the static method
      <code class="literal">Identity.setSecurityEnabled(false)</code> to disable the security infrastructure. Of course, it's not
      very convenient to have to call a static method when you want to configure the application, so as an alternative
      you can control this setting in components.xml:
    </p><div class="itemizedlist"><ul><li><p>Entity Security</p></li><li><p>Hibernate Security Interceptor</p></li><li><p>Seam Security Interceptor</p></li><li><p>Page restrictions</p></li><li><p>Servlet API security integration</p></li></ul></div><p>
      Assuming you are planning to take advantage of what Seam Security has to offer, the rest of this chapter documents
      the plethora of options you have for giving your user an identity in the eyes of the security model
      (authentication) and locking down the application by establishing constraints (authorization). Let's begin with
      the task of authentication since that's the foundation of any security model.
    </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8196"/>15.3. Authentication</h2></div></div></div><p>
      The authentication features provided by Seam Security are built upon JAAS (Java Authentication and Authorization Service),
      and as such provide a robust and highly configurable API for handling user authentication.  However, for less complex
      authentication requirements Seam offers a much more simplified method of authentication that hides the complexity of JAAS.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8201"/>15.3.1. Configuring an Authenticator component</h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
          If you use Seam's Identity Management features (discussed later in this chapter) then it is not necessary to create
          an authenticator component (and you can skip this section).
        </p></div><p>
        The simplified authentication method provided by Seam uses a built-in JAAS login module, <code class="literal">SeamLoginModule</code>, which
        delegates authentication to one of your own Seam components.  This login module is already configured inside Seam as
        part of a default application policy and as such does not require any additional configuration files.  It allows you to
        write an authentication method using the entity classes that are provided by your own application, or alternatively to 
        authenticate with some other third party provider.  Configuring this simplified form of authentication requires the 
        <code class="literal">identity</code> component to be configured in <code class="literal">components.xml</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:core</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:security</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/security&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&nbsp;http://jboss.org/schema/seam/components-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/security&nbsp;http://jboss.org/schema/seam/security-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:identity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">authenticate-method</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{authenticator.authenticate}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        The EL expression <code class="literal">#{authenticator.authenticate}</code> is a method binding that indicates
        the <code class="literal">authenticate</code> method of the <code class="literal">authenticator</code> component will be used
        to authenticate the user.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8231"/>15.3.2. Writing an authentication method</h3></div></div></div><p>
        The <code class="literal">authenticate-method</code> property specified for <code class="literal">identity</code> in
        <code class="literal">components.xml</code> specifies which method will be used by <code class="literal">SeamLoginModule</code>
        to authenticate users.  This method takes no parameters, and is expected to return a boolean, which indicates
        whether authentication is successful or not.  The user's username and password can be obtained from
        <code class="literal">Credentials.getUsername()</code> and <code class="literal">Credentials.getPassword()</code>,
        respectively (you can get a reference to the <code class="literal">credentials</code> component via
        <code class="literal">Identity.instance().getCredentials()</code>).  Any roles that the user is a member of 
        should be assigned using <code class="literal">Identity.addRole()</code>. Here's a complete example of an 
        authentication method inside a POJO component:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;authenticator&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Authenticator</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Credentials</span><span class="java_plain">&nbsp;credentials</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Identity</span><span class="java_plain">&nbsp;identity</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;authenticate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_separator">)</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;from&nbsp;User&nbsp;where&nbsp;username&nbsp;=&nbsp;:username&nbsp;and&nbsp;password&nbsp;=&nbsp;:password&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;username&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;credentials</span><span class="java_separator">.</span><span class="java_plain">getUsername</span><span class="java_separator">())</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;password&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;credentials</span><span class="java_separator">.</span><span class="java_plain">getPassword</span><span class="java_separator">())</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getSingleResult</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">.</span><span class="java_plain">getRoles</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">UserRole</span><span class="java_plain">&nbsp;mr&nbsp;</span><span class="java_operator">:</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getRoles</span><span class="java_separator">())</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identity</span><span class="java_separator">.</span><span class="java_plain">addRole</span><span class="java_separator">(</span><span class="java_plain">mr</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">NoResultException</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
        In the above example, both <code class="literal">User</code> and <code class="literal">UserRole</code> are application-specific
        entity beans.  The <code class="literal">roles</code> parameter is populated with the roles that the user is a member
        of, which should be added to the <code class="literal">Set</code> as literal string values, e.g. "admin", "user".
        In this case, if the user record is not found and a <code class="literal">NoResultException</code> thrown, the
        authentication method returns <code class="literal">false</code> to indicate the authentication failed.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>Tip</h2><p>
           When writing an authenticator method, it is important that it is kept minimal and free from
           any side-effects. This is because there is no guarantee as to how many times the authenticator
           method will be called by the security API, and as such it may be invoked multiple times during
           a single request.  Because of this, any special code that should execute upon a successful or
           failed authentication should be written by implementing an event observer.  See the section on
           Security Events further down in this chapter for more information about which events are
           raised by Seam Security.
        </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8288"/>15.3.2.1. Identity.addRole()</h4></div></div></div><p>
          The <code class="literal">Identity.addRole()</code> method behaves differently depending on whether the current
          session is authenticated or not.  If the session is not authenticated, then <code class="literal">addRole()</code>
          should <span class="emphasis"><em>only</em></span> be called during the authentication process.  When called here, the
          role name is placed into a temporary list of pre-authenticated roles.  Once authentication is successful,
          the pre-authenticated roles then become "real" roles, and calling <code class="literal">Identity.hasRole()</code>
          for those roles will then return true.  The following sequence diagram represents the list of pre-authenticated
          roles as a first class object to show more clearly how it fits in to the authentication process.

        </p><div class="mediaobject" align="center"><img src="images/security-addrole.png" align="middle"/></div><p>
          If the current session is already authenticated, then calling <code class="literal">Identity.addRole()</code> will
          have the expected effect of immediately granting the specified role to the current user.
        </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8315"/>15.3.2.2. Writing an event observer for security-related events</h4></div></div></div><p>
          Say for example, that upon a successful login that some user statistics must be
          updated.  This would be done by writing an event observer for the
          <code class="literal">org.jboss.seam.security.loginSuccessful</code> event, like this:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">UserStats</span><!-- <br/> --><span class="java_plain">&nbsp;userStats</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Observer</span><span class="java_separator">(</span><span class="java_literal">&quot;org.jboss.seam.security.loginSuccessful&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;updateUserStats</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userStats</span><span class="java_separator">.</span><span class="java_plain">setLastLoginDate</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userStats</span><span class="java_separator">.</span><span class="java_plain">incrementLoginCount</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></pre><p>
          This observer method can be placed anywhere, even in the Authenticator component itself.
          You can find more information about security-related events later in this chapter.
        </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8327"/>15.3.3. Writing a login form</h3></div></div></div><p>
        The <code class="literal">credentials</code> component provides both <code class="literal">username</code> and <code class="literal">password</code>
        properties, catering for the most common authentication scenario. These properties can be bound directly to the
        username and password fields on a login form.  Once these properties are set, calling 
        <code class="literal">identity.login()</code> will authenticate the user using the provided credentials.
        Here's an example of a simple login form:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Username&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{credentials.username}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Password&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputSecret</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{credentials.password}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Login&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{identity.login}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Similarly, logging out the user is done by calling <code class="literal">#{identity.logout}</code>. Calling this
        action will clear the security state of the currently authenticated user, and invalidate the user's session.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8351"/>15.3.4. Configuration Summary</h3></div></div></div><p>
        So to sum up, there are the three easy steps to configure authentication:
      </p><div class="itemizedlist"><ul><li><p>
            Configure an authentication method in <code class="literal">components.xml</code>.
          </p></li><li><p>
            Write an authentication method.
          </p></li><li><p>
            Write a login form so that the user can authenticate.
          </p></li></ul></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8369"/>15.3.5. Remember Me</h3></div></div></div><p>
        Seam Security supports the same kind of "Remember Me" functionality that is commonly encountered in many
        online web-based applications.  It is actually supported in two different "flavours", or modes - the first
        mode allows the username to be stored in the user's browser as a cookie, and leaves the entering of the
        password up to the browser (many modern browsers are capable of remembering passwords).
      </p><p>
        The second mode supports the storing of a unique token in a cookie, and allows a user to authenticate
        automatically upon returning to the site, without having to provide a password.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
          Automatic client authentication with a persistent cookie stored on the client machine is dangerous.  
          While convenient for users, any cross-site scripting security hole in your website would have dramatically more 
          serious effects than usual. Without the authentication cookie, the only cookie to steal for an attacker with XSS 
          is the cookie of the current session of a user. This means the attack only works when the user has an open session - 
          which should be a short timespan. However, it is much more attractive and dangerous if an attacker has the possibility 
          to steal a persistent Remember Me cookie that allows him to login without authentication, at any time. Note that this 
          all depends on how well you protect your website against XSS attacks - it's up to you to make sure that your website 
          is 100% XSS safe - a non-trivial achievement for any website that allows user input to be rendered on a page.          
        </p><p>
          Browser vendors recognized this issue and introduced a "Remember Passwords" feature - today almost all browsers support 
          this. Here, the browser remembers the login username and password for a particular website and domain, and fills out the 
          login form automatically when you don't have an active session with the website. If you as a website designer then offer 
          a convenient login keyboard shortcut, this approach is almost as convenient as a "Remember Me" cookie and much safer. 
          Some browsers (e.g. Safari on OS X) even store the login form data in the encrypted global operation system keychain. 
          Or, in a networked environment, the keychain can be transported with the user (between laptop and desktop for example), 
          while browser cookies are usually not synchronized.
        </p><p>
          To summarize: While everyone is doing it, persistent "Remember Me" cookies with automatic authentication are a bad 
          practice and should not be used. Cookies that "remember" only the users login name, and fill out the login form with 
          that username as a convenience, are not an issue. 
        </p></div><p>
        To enable the remember me feature for the default (safe, username only) mode, no special configuration is required.
        In your login form, simply bind the remember me checkbox to <code class="literal">rememberMe.enabled</code>, like in the following
        example:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;User&nbsp;name&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{credentials.username}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Password&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputSecret</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{credentials.password}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">redisplay</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;loginRow&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rememberMe&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Remember&nbsp;me&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectBooleanCheckbox</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rememberMe&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rememberMe.enabled}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8390"/>15.3.5.1. Token-based Remember-me Authentication</h4></div></div></div><p>
          To use the automatic, token-based mode of the remember me feature, you must first configure a token store.  The
          most common scenario is to store these authentication tokens within a database (which Seam supports), however it 
          is possible to implement your own token store by implementing the <code class="literal">org.jboss.seam.security.TokenStore</code>
          interface.  This section will assume you will be using the provided <code class="literal">JpaTokenStore</code> implementation
          to store authentication tokens inside a database table.
        </p><p>
          The first step is to create a new Entity which will contain the tokens.  The following example shows a possible
          structure that you may use:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AuthenticationToken</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;tokenId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getTokenId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;tokenId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setTokenId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;tokenId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">tokenId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;tokenId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">TokenUsername</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getUsername</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUsername</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">username&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">TokenValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getValue</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setValue</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;value</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          As you can see from this listing, a couple of special annotations, <code class="literal">@TokenUsername</code> and
          <code class="literal">@TokenValue</code> are used to configure the username and token properties of the entity.  These
          annotations are required for the entity that will contain the authentication tokens.
        </p><p>
          The next step is to configure <code class="literal">JpaTokenStore</code> to use this entity bean to store and retrieve
          authentication tokens.  This is done in <code class="literal">components.xml</code> by specifying the <code class="literal">token-class</code>
          attribute:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:jpa-token-store</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">token-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.example.seamspace.AuthenticationToken&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
          Once this is done, the last thing to do is to configure the <code class="literal">RememberMe</code> component in
          <code class="literal">components.xml</code> also.  Its <code class="literal">mode</code> should be set to <code class="literal">autoLogin</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:remember-me</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">mode</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;autoLogin&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
          That is all that is required - automatic authentication will now occur for users revisiting your site (as long as they
          check the "remember me" checkbox).
        </p><p>
          To ensure that users are automatically authenticated when returning to the site, the following section
          should be placed in components.xml:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.notLoggedIn&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{redirect.captureCurrentView}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{identity.tryLogin()}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.loginSuccessful&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{redirect.returnToCapturedView}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8448"/>15.3.6. Handling Security Exceptions</h3></div></div></div><p>
        To prevent users from receiving the default error page in response to a security error, it's recommended that
        <code class="literal">pages.xml</code> is configured to redirect security errors to a more "pretty" page.  The two
        main types of exceptions thrown by the security API are:
      </p><div class="itemizedlist"><ul><li><p>
            <code class="literal">NotLoggedInException</code> - This exception is thrown if the user attempts to access a
            restricted action or page when they are not logged in.
          </p></li><li><p>
            <code class="literal">AuthorizationException</code> - This exception is only thrown if the user is already logged in,
            and they have attempted to access a restricted action or page for which they do not have the necessary
            privileges.
          </p></li></ul></div><p>
        In the case of a <code class="literal">NotLoggedInException</code>, it is recommended that the user is redirected to
        either a login or registration page so that they can log in.  For an <code class="literal">AuthorizationException</code>,
        it may be useful to redirect the user to an error page. Here's an example of a <code class="literal">pages.xml</code>
        file that redirects both of these security exceptions:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.NotLoggedInException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;must&nbsp;be&nbsp;logged&nbsp;in&nbsp;to&nbsp;perform&nbsp;this&nbsp;action</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.AuthorizationException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">end-conversation</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/security_error.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;do&nbsp;not&nbsp;have&nbsp;the&nbsp;necessary&nbsp;security&nbsp;privileges&nbsp;to&nbsp;perform&nbsp;this&nbsp;action.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Most web applications require even more sophisticated handling of login redirection, so
        Seam includes some special functionality for handling this problem.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8484"/>15.3.7. Login Redirection</h3></div></div></div><p>
        You can ask Seam to redirect the user to a login screen when an unauthenticated user tries
        to access a particular view (or wildcarded view id) as follows:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">login-view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/members/*&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">login-required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pages</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>Tip</h2><p>
           This is less of a blunt instrument than the exception handler shown above, but should
           probably be used in conjunction with it.
         </p></div><p>
        After the user logs in, we want to automatically send them back where they came from, so
        they can retry the action that required logging in. If you add the following event listeners
        to <code class="literal">components.xml</code>, attempts to access a restricted view while not logged
        in will be remembered, so that upon the user successfully logging in they will be redirected
        to the originally requested view, with any page parameters that existed in the original
        request.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.notLoggedIn&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{redirect.captureCurrentView}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.postAuthenticate&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{redirect.returnToCapturedView}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Note that login redirection is implemented as a conversation-scoped mechanism, so don't end
        the conversation in your <code class="literal">authenticate()</code> method.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8506"/>15.3.8. HTTP Authentication</h3></div></div></div><p>
        Although not recommended for use unless absolutely necessary, Seam provides means for authenticating
        using either HTTP Basic or HTTP Digest (RFC 2617) methods.  To use either form of authentication,
        the <code class="literal">authentication-filter</code> component must be enabled in components.xml:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:authentication-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">auth-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;basic&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
        To enable the filter for basic authentication, set <code class="literal">auth-type</code> to <code class="literal">basic</code>,
        or for digest authentication, set it to <code class="literal">digest</code>.  If using digest authentication, the
        <code class="literal">key</code> and <code class="literal">realm</code> must also be set:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:authentication-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">auth-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;digest&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;AA3JK34aSDlkj&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">realm</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;My&nbsp;App&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
        The <code class="literal">key</code> can be any String value.  The <code class="literal">realm</code> is the name of the
        authentication realm that is presented to the user when they authenticate.
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8543"/>15.3.8.1. Writing a Digest Authenticator</h4></div></div></div><p>
          If using digest authentication, your authenticator class should extend the abstract class
          <code class="literal">org.jboss.seam.security.digest.DigestAuthenticator</code>, and use the
          <code class="literal">validatePassword()</code> method to validate the user's plain text password
          against the digest request.  Here is an example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;authenticate</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">User</span><span class="java_separator">)</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;from&nbsp;User&nbsp;where&nbsp;username&nbsp;=&nbsp;:username&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;username&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;identity</span><span class="java_separator">.</span><span class="java_plain">getUsername</span><span class="java_separator">())</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getSingleResult</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;validatePassword</span><span class="java_separator">(</span><span class="java_plain">user</span><span class="java_separator">.</span><span class="java_plain">getPassword</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">NoResultException</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8556"/>15.3.9. Advanced Authentication Features</h3></div></div></div><p>
        This section explores some of the advanced features provided by the security API for addressing more complex
        security requirements.
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8561"/>15.3.9.1. Using your container's JAAS configuration</h4></div></div></div><p>
          If you would rather not use the simplified JAAS configuration provided by the Seam Security API, you may
          instead delegate to the default system JAAS configuration by providing a <code class="literal">jaas-config-name</code>
          property in <code class="literal">components.xml</code>.  For example, if you are using JBoss AS and wish to use
          the <code class="literal">other</code> policy (which uses the <code class="literal">UsersRolesLoginModule</code> login module
          provided by JBoss AS), then the entry in <code class="literal">components.xml</code> would look like this:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:identity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jaas-config-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;other&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
          Please keep in mind that doing this does not mean that your user will be authenticated in whichever
          container your Seam application is deployed in.  It merely instructs Seam Security to authenticate
          itself using the configured JAAS security policy.
        </p></div></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8585"/>15.4. Identity Management</h2></div></div></div><p>
      Identity Management provides a standard API for the management of a Seam application's users and roles,
      regardless of which identity store (database, LDAP, etc) is used on the backend.  At the center
      of the Identity Management API is the <code class="literal">identityManager</code> component, which provides 
      all the methods for creating, modifying and deleting users, granting and revoking roles, changing passwords,
      enabling and disabling user accounts, authenticating users and listing users and roles.
    </p><p>
      Before it may be used, the <code class="literal">identityManager</code> must first be configured with one or more
      <code class="literal">IdentityStore</code>s.  These components do the actual work of interacting with the backend
      security provider, whether it be a database, LDAP server, or something else.
    </p><div class="mediaobject" align="center"><img src="images/security-identitymanager.png" align="middle"/></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8606"/>15.4.1. Configuring IdentityManager</h3></div></div></div><p>    
        The <code class="literal">identityManager</code> component allows for separate identity stores to be configured 
        for authentication and authorization operations.  This means that it is possible for users to
        be authenticated against one identity store, for example an LDAP directory, yet have their roles 
        loaded from another identity store, such as a relational database.
      </p><p>
        Seam provides two <code class="literal">IdentityStore</code> implementations out of the box; 
        <code class="literal">JpaIdentityStore</code> uses a relational database to store user and role information, 
        and is the default identity store that is used if nothing is explicitly configured in the
        <code class="literal">identityManager</code> component.  The other implementation that is provided is 
        <code class="literal">LdapIdentityStore</code>, which uses an LDAP directory to store users and roles.
      </p><p>
        There are two configurable properties for the <code class="literal">identityManager</code> component - 
        <code class="literal">identityStore</code> and <code class="literal">roleIdentityStore</code>.  The value for these
        properties must be an EL expression referring to a Seam component implementing the
        <code class="literal">IdentityStore</code> interface.  As already mentioned,
        if left unconfigured then <code class="literal">JpaIdentityStore</code> will be assumed by default.  If
        only the <code class="literal">identityStore</code> property is configured, then the same value will be used for
        <code class="literal">roleIdentityStore</code> also.  For example, the following entry in
        <code class="literal">components.xml</code> will configure <code class="literal">identityManager</code> to use
        an <code class="literal">LdapIdentityStore</code> for both user-related and role-related operations:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:identity-manager</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">identity-store</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{ldapIdentityStore}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
        The following example configures <code class="literal">identityManager</code> to use an <code class="literal">LdapIdentityStore</code>
        for user-related operations, and <code class="literal">JpaIdentityStore</code> for role-related operations:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:identity-manager</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">identity-store</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{ldapIdentityStore}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-identity-store</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{jpaIdentityStore}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
        The following sections explain both of these identity store implementations in greater detail.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8677"/>15.4.2. JpaIdentityStore</h3></div></div></div><p>
        This identity store allows for users and roles to be stored inside a relational database.  It is designed 
        to be as unrestrictive as possible in regards to database schema design, allowing a great deal of 
        flexibility in the underlying table structure.  This is achieved through the use of a set of special
        annotations, allowing entity beans to be configured to store user and role records.  
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8682"/>15.4.2.1. Configuring JpaIdentityStore</h4></div></div></div><p>
          <code class="literal">JpaIdentityStore</code> requires that both the <code class="literal">user-class</code> and 
          <code class="literal">role-class</code> properties are configured.  These properties should refer to the
          entity classes that are to be used to store both user and role records, respectively.  The following
          example shows the configuration from <code class="literal">components.xml</code> in the SeamSpace example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:jpa-identity-store</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">user-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.example.seamspace.MemberAccount&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.example.seamspace.MemberRole&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8701"/>15.4.2.2. Configuring the Entities</h4></div></div></div><p>
          As already mentioned, a set of special annotations are used to configure entity beans for storing
          users and roles.  The following table lists each of the annotations, and their descriptions.
        </p><div class="table"><a id="d0e8706"/><p class="title"><b>Table 15.1. User Entity Annotations</b></p><div class="table-contents"><table summary="User Entity Annotations" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                  <p>Annotation</p>
                </th><th align="center">
                  <p>Status</p>
                </th><th align="center">
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>
                    <code class="literal">@UserPrincipal</code>
                  </p>
                </td><td>
                  <p>Required</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the user's username.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@UserPassword</code>
                  </p>
                </td><td>
                  <p>Required</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the user's password.  It allows a <code class="literal">hash</code>
                    algorithm to be specified for password hashing.  Possible values for <code class="literal">hash</code> are
                    <code class="literal">md5</code>, <code class="literal">sha</code> and <code class="literal">none</code>.  E.g:
                  </p>

                  <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">UserPassword</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">hash</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;md5&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getPasswordHash</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre>

                  <p>
                    If an application requires a hash algorithm that isn't supported natively by Seam, it
                    is possible to extend the <code class="literal">PasswordHash</code> component to implement other
                    hashing algorithms.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@UserFirstName</code>
                  </p>
                </td><td>
                  <p>Optional</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the user's first name.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@UserLastName</code>
                  </p>
                </td><td>
                  <p>Optional</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the user's last name.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@UserEnabled</code>
                  </p>
                </td><td>
                  <p>Optional</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the enabled status of the user.  This should be a boolean
                    property, and if not present then all user accounts are assumed to be enabled.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@UserRoles</code>
                  </p>
                </td><td>
                  <p>Required</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the roles of the user.  This property will be described in 
                    more detail further down.
                  </p>
                </td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="d0e8869"/><p class="title"><b>Table 15.2. Role Entity Annotations</b></p><div class="table-contents"><table summary="Role Entity Annotations" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                  <p>Annotation</p>
                </th><th align="center">
                  <p>Status</p>
                </th><th align="center">
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>
                    <code class="literal">@RoleName</code>
                  </p>
                </td><td>
                  <p>Required</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the name of the role.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@RoleGroups</code>
                  </p>
                </td><td>
                  <p>Optional</p>
                </td><td>
                  <p>
                    This annotation marks the field or method containing the group memberships of the role.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">@RoleConditional</code>
                  </p>
                </td><td>
                  <p>Optional</p>
                </td><td>
                  <p>
                    This annotation marks the field or method indicating whether the role is conditional or not.
                    Conditional roles are explained later in this chapter.
                  </p>
                </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8951"/>15.4.2.3. Entity Bean Examples</h4></div></div></div><p>
          As mentioned previously, <code class="literal">JpaIdentityStore</code> is designed to be as flexible as possible when
          it comes to the database schema design of your user and role tables.  This section looks at a number of
          possible database schemas that can be used to store user and role records.
        </p><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e8959"/>15.4.2.3.1. Minimal schema example</h5></div></div></div><p>
            In this bare minimal example, a simple user and role table are linked via a
            many-to-many relationship using a cross-reference table named <code class="literal">UserRoles</code>.
          </p><div class="mediaobject" align="center"><img src="images/security-entities-1.png" align="middle"/></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getUserId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUserId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">userId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserPrincipal</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getUsername</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUsername</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">username&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserPassword</span><span class="java_separator">(</span><span class="java_plain">hash&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;md5&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getPasswordHash</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setPasswordHash</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">passwordHash&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserRoles</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Role</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;UserRoles&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;UserId&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;RoleId&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getRoles</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRoles</span><span class="java_separator">(</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">roles&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Role</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">Generated</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getRoleId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRoleId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">roleId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">RoleName</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getRolename</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRolename</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">rolename&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e8976"/>15.4.2.3.2. Complex Schema Example</h5></div></div></div><p>
            This example builds on the above minimal example by including all of the optional fields, and allowing
            group memberships for roles.
          </p><div class="mediaobject" align="center"><img src="images/security-entities-2.png" align="middle"/></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;enabled</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getUserId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUserId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">userId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserPrincipal</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getUsername</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setUsername</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">username&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;username</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserPassword</span><span class="java_separator">(</span><span class="java_plain">hash&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;md5&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getPasswordHash</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setPasswordHash</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">passwordHash&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;passwordHash</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserFirstName</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFirstname</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setFirstname</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">firstname&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserLastName</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastname</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setLastname</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">lastname&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserEnabled</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isEnabled</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;enabled</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setEnabled</span><span class="java_separator">(</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;enabled</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">enabled&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;enabled</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">UserRoles</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Role</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;UserRoles&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;UserId&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;RoleId&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getRoles</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRoles</span><span class="java_separator">(</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">roles&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;roles</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Role</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;conditional</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">Generated</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getRoleId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRoleId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">roleId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;roleId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">RoleName</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getRolename</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRolename</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">rolename&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;rolename</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">RoleConditional</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isConditional</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;conditional</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setConditional</span><span class="java_separator">(</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;conditional</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">conditional&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;conditional</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">RoleGroups</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Role</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;RoleGroups&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;RoleId&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;GroupId&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getGroups</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;groups</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setGroups</span><span class="java_separator">(</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Role</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;groups</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">groups&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;groups</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e8990"/>15.4.2.4. JpaIdentityStore Events</h4></div></div></div><p>
          When using <code class="literal">JpaIdentityStore</code> as the identity store implementation with <code class="literal">IdentityManager</code>,
          a few events are raised as a result of invoking certain <code class="literal">IdentityManager</code> methods.
        </p><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e9004"/>15.4.2.4.1. JpaIdentityStore.EVENT_PRE_PERSIST_USER</h5></div></div></div><p>
            This event is raised in response to calling <code class="literal">IdentityManager.createUser()</code>.  Just before the user
            entity is persisted to the database, this event will be raised passing the entity instance as an event parameter.  
            The entity will be an instance of the <code class="literal">user-class</code> configured for <code class="literal">JpaIdentityStore</code>.            
          </p><p>
            Writing an observer for this event may be useful for setting additional field values on the entity, which aren't set
            as part of the standard <code class="literal">createUser()</code> functionality.
          </p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e9023"/>15.4.2.4.2. JpaIdentityStore.EVENT_USER_CREATED</h5></div></div></div><p>
            This event is also raised in response to calling <code class="literal">IdentityManager.createUser()</code>.  However, it is 
            raised after the user entity has already been persisted to the database.  Like the <code class="literal">EVENT_PRE_PERSIST_USER</code>
            event, it also passes the entity instance as an event parameter.  It may be useful to observe this event if you also
            need to persist other entities that reference the user entity, for example contact detail records or other user-specific
            data.
          </p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e9034"/>15.4.2.4.3. JpaIdentityStore.EVENT_USER_AUTHENTICATED</h5></div></div></div><p>
            This event is raised when calling <code class="literal">IdentityManager.authenticate()</code>.  It passes the user entity instance
            as the event parameter, and is useful for reading additional properties from the user entity that is being authenticated.
          </p></div></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e9042"/>15.4.3. LdapIdentityStore</h3></div></div></div><p>
        This identity store implementation is designed for working with user records stored in an LDAP directory.  It is very
        highly configurable, allowing great flexibility in how both users and roles are stored in the directory.  The following
        sections describe the configuration options for this identity store, and provide some configuration examples.
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e9047"/>15.4.3.1. Configuring LdapIdentityStore</h4></div></div></div><p>
          The following table describes the available properties that can be configured in <code class="literal">components.xml</code> for
          <code class="literal">LdapIdentityStore</code>.
        </p><div class="table"><a id="d0e9058"/><p class="title"><b>Table 15.3. LdapIdentityStore Configuration Properties</b></p><div class="table-contents"><table summary="LdapIdentityStore Configuration Properties" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                  <p>Property</p>
                </th><th align="center">
                  <p>Default Value</p>
                </th><th align="center">
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>
                    <code class="literal">server-address</code>
                  </p>
                </td><td>
                  <p><code class="literal">localhost</code></p>
                </td><td>
                  <p>
                    The address of the LDAP server.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">server-port</code>
                  </p>
                </td><td>
                  <p><code class="literal">389</code></p>
                </td><td>
                  <p>
                    The port number that the LDAP server is listening on.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-context-DN</code>
                  </p>
                </td><td>
                  <p><code class="literal">ou=Person,dc=acme,dc=com</code></p>
                </td><td>
                  <p>
                    The Distinguished Name (DN) of the context containing user records.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-DN-prefix</code>
                  </p>
                </td><td>
                  <p><code class="literal">uid=</code></p>
                </td><td>
                  <p>
                    This value is prefixed to the front of the username to locate the user's record.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-DN-suffix</code>
                  </p>
                </td><td>
                  <p><code class="literal">,ou=Person,dc=acme,dc=com</code></p>
                </td><td>
                  <p>
                    This value is appended to the end of the username to locate the user's record.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">role-context-DN</code>
                  </p>
                </td><td>
                  <p><code class="literal">ou=Role,dc=acme,dc=com</code></p>
                </td><td>
                  <p>
                    The DN of the context containing role records.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">role-DN-prefix</code>
                  </p>
                </td><td>
                  <p><code class="literal">cn=</code></p>
                </td><td>
                  <p>
                    This value is prefixed to the front of the role name to form the DN for locating the 
                    role record.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">role-DN-suffix</code>
                  </p>
                </td><td>
                  <p><code class="literal">,ou=Roles,dc=acme,dc=com</code></p>
                </td><td>
                  <p>
                    This value is appended to the role name to form the DN for locating the role record.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">bind-DN</code>
                  </p>
                </td><td>
                  <p><code class="literal">cn=Manager,dc=acme,dc=com</code></p>
                </td><td>
                  <p>
                    This is the context used to bind to the LDAP server.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">bind-credentials</code>
                  </p>
                </td><td>
                  <p><code class="literal">secret</code></p>
                </td><td>
                  <p>
                    These are the credentials (the password) used to bind to the LDAP server.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-role-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">roles</code></p>
                </td><td>
                  <p>
                    This is the name of the attribute of the user record that contains the list of roles that the
                    user is a member of.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">role-attribute-is-DN</code>
                  </p>
                </td><td>
                  <p><code class="literal">true</code></p>
                </td><td>
                  <p>
                    This boolean property indicates whether the role attribute of the user record is itself a
                    distinguished name.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-name-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">uid</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the user record contains the username.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-password-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">userPassword</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the user record contains the user's password.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">first-name-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">null</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the user record contains the user's first name.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">last-name-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">sn</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the user record contains the user's last name.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">full-name-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">cn</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the user record contains the user's full (common) name.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">enabled-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">null</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the user record determines whether the user is enabled.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">role-name-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">cn</code></p>
                </td><td>
                  <p>
                    Indicates which attribute of the role record contains the name of the role.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">object-class-attribute</code>
                  </p>
                </td><td>
                  <p><code class="literal">objectClass</code></p>
                </td><td>
                  <p>
                    Indicates which attribute determines the class of an object in the directory.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">role-object-classes</code>
                  </p>
                </td><td>
                  <p><code class="literal">organizationalRole</code></p>
                </td><td>
                  <p>
                    An array of the object classes that new role records should be created as.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">user-object-classes</code>
                  </p>
                </td><td>
                  <p><code class="literal">person,uidObject</code></p>
                </td><td>
                  <p>
                    An array of the object classes that new user records should be created as.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">security-authentication-type</code>
                  </p>
                </td><td>
                  <p><code class="literal">simple</code></p>
                </td><td>
                  <p>
                    The security level to use.  Possible values are "none", "simple" and "strong".
                  </p>
                </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e9543"/>15.4.3.2. LdapIdentityStore Configuration Example</h4></div></div></div><p>
          The following configuration example shows how <code class="literal">LdapIdentityStore</code> may be configured for
          an LDAP directory running on fictional host <code class="literal">directory.mycompany.com</code>.  The users are stored
          within this directory under the context <code class="literal">ou=Person,dc=mycompany,dc=com</code>, and are identified
          using the <code class="literal">uid</code> attribute (which corresponds to their username).  Roles are stored in their
          own context, <code class="literal">ou=Roles,dc=mycompany,dc=com</code> and referenced from the user's entry via the 
          <code class="literal">roles</code> attribute.  Role entries are identified by their common name (the <code class="literal">cn</code> attribute)
          , which corresponds to the role name.  In this example, users may be disabled by setting the value of their 
          <code class="literal">enabled</code> attribute to false.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:ldap-identity-store</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">server-address</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;directory.mycompany.com&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">bind-DN</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cn=Manager,dc=mycompany,dc=com&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">bind-credentials</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;secret&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">user-DN-prefix</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;uid=&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">user-DN-suffix</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;,ou=Person,dc=mycompany,dc=com&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-DN-prefix</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cn=&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-DN-suffix</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;,ou=Roles,dc=mycompany,dc=com&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">user-context-DN</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ou=Person,dc=mycompany,dc=com&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-context-DN</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ou=Roles,dc=mycompany,dc=com&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">user-role-attribute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;roles&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-name-attribute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cn&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">user-object-classes</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person,uidObject&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">enabled-attribute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;enabled&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e9574"/>15.4.4. Writing your own IdentityStore</h3></div></div></div><p>
        Writing your own identity store implementation allows you to authenticate and perform identity management
        operations against security providers that aren't supported out of the box by Seam.  Only a single class is 
        required to achieve this, and it must implement the
        <code class="literal">org.jboss.seam.security.management.IdentityStore</code> interface.
      </p><p>
        Please refer to the JavaDoc for <code class="literal">IdentityStore</code> for a description of the methods that
        must be implemented.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e9587"/>15.4.5. Authentication with Identity Management</h3></div></div></div><p>
        If you are using the Identity Management features in your Seam application, then it is not required
        to provide an authenticator component (see previous Authentication section) to enable authentication.
        Simply omit the <code class="literal">authenticate-method</code> from the <code class="literal">identity</code> configuration
        in <code class="literal">components.xml</code>, and the <code class="literal">SeamLoginModule</code> will by default
        use <code class="literal">IdentityManager</code> to authenticate your application's users, without any special
        configuration required.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e9607"/>15.4.6. Using IdentityManager</h3></div></div></div><p>
        The <code class="literal">IdentityManager</code> can be accessed either by injecting it into your Seam
        component as follows:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">IdentityManager</span><!-- <br/> --><span class="java_plain">&nbsp;identityManager</span><!-- <br/> --><span class="java_separator">;</span></pre><p>
        or by accessing it through its static <code class="literal">instance()</code> method:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;</span><!-- <br/> --><span class="java_type">IdentityManager</span><!-- <br/> --><span class="java_plain">&nbsp;identityManager&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">IdentityManager</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">instance</span><!-- <br/> --><span class="java_separator">();</span></pre><p>
        The following table describes <code class="literal">IdentityManager</code>'s API methods:
      </p><div class="table"><a id="d0e9629"/><p class="title"><b>Table 15.4. Identity Management API</b></p><div class="table-contents"><table summary="Identity Management API" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Method</p>
              </th><th align="center">
                <p>Returns</p>
              </th><th align="center">
                <p>Description</p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="literal">createUser(String name, String password)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Creates a new user account, with the specified name and password.  Returns <code class="literal">true</code>
                  if successful, or <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">deleteUser(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Deletes the user account with the specified name.  Returns <code class="literal">true</code>
                  if successful, or <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">createRole(String role)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Creates a new role, with the specified name.  Returns <code class="literal">true</code>
                  if successful, or <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">deleteRole(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Deletes the role with the specified name.  Returns <code class="literal">true</code>
                  if successful, or <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">enableUser(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Enables the user account with the specified name.  Accounts that are not enabled are
                  not able to authenticate.  Returns <code class="literal">true</code> if successful, or
                  <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">disableUser(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Disables the user account with the specified name.  Returns <code class="literal">true</code> if
                  successful, or <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">changePassword(String name, String password)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Changes the password for the user account with the specified name.  Returns
                  <code class="literal">true</code> if successful, or <code class="literal">false</code> if not.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">isUserEnabled(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Returns <code class="literal">true</code> if the specified user account is enabled, or
                  <code class="literal">false</code> if it isn't.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">grantRole(String name, String role)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Grants the specified role to the specified user or role.  The role must already exist for it to
                  be granted.  Returns <code class="literal">true</code> if the role is successfully granted, or
                  <code class="literal">false</code> if it is already granted to the user.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">revokeRole(String name, String role)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Revokes the specified role from the specified user or role.  Returns <code class="literal">true</code>
                  if the specified user is a member of the role and it is successfully revoked, or
                  <code class="literal">false</code> if the user is not a member of the role.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">userExists(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Returns <code class="literal">true</code> if the specified user exists, or <code class="literal">false</code>
                  if it doesn't.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">listUsers()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">List</code>
                </p>
              </td><td>
                <p>
                  Returns a list of all user names, sorted in alpha-numeric order.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">listUsers(String filter)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">List</code>
                </p>
              </td><td>
                <p>
                  Returns a list of all user names filtered by the specified filter parameter, sorted in alpha-numeric order.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">listRoles()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">List</code>
                </p>
              </td><td>
                <p>
                  Returns a list of all role names.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">getGrantedRoles(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">List</code>
                </p>
              </td><td>
                <p>
                  Returns a list of the names of all the roles explicitly granted to the specified user name.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">getImpliedRoles(String name)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">List</code>
                </p>
              </td><td>
                <p>
                  Returns a list of the names of all the roles implicitly granted to the specified user name.
                  Implicitly granted roles include those that are not directly granted to a user, rather they are
                  granted to the roles that the user is a member of.  For example, is the <code class="literal">admin</code>
                  role is a member of the <code class="literal">user</code> role, and a user is a member of the <code class="literal">admin</code>
                  role, then the implied roles for the user are both the <code class="literal">admin</code>, and <code class="literal">user</code>
                  roles.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">authenticate(String name, String password)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Authenticates the specified username and password using the configured Identity Store.  Returns
                  <code class="literal">true</code> if successful or <code class="literal">false</code> if authentication failed.
                  Successful authentication implies nothing beyond the return value of the method.  It does not
                  change the state of the <code class="literal">Identity</code> component - to perform a proper Seam login the
                  <code class="literal">Identity.login()</code> must be used instead.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">addRoleToGroup(String role, String group)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Adds the specified role as a member of the specified group.  Returns true if the operation is successful.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">removeRoleFromGroup(String role, String group)</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  Removes the specified role from the specified group.  Returns true if the operation is successful.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">listRoles()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">List</code>
                </p>
              </td><td>
                <p>
                  Lists the names of all roles.
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"/><p>
        Using the Identity Management API requires that the calling user has the appropriate authorization to invoke
        its methods.  The following table describes the permission requirements for each of the methods in
        <code class="literal">IdentityManager</code>.  The permission targets listed below are literal String values.
      </p><div class="table"><a id="d0e10192"/><p class="title"><b>Table 15.5. Identity Management Security Permissions</b></p><div class="table-contents"><table summary="Identity Management Security Permissions" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Method</p>
              </th><th align="center">
                <p>Permission Target</p>
              </th><th align="center">
                <p>Permission Action</p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="literal">createUser()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">create</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">deleteUser()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">delete</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">createRole()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.role</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">create</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">deleteRole()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.role</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">delete</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">enableUser()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">disableUser()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">changePassword()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">isUserEnabled()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">read</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">grantRole()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">revokeRole()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">userExists()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">read</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">listUsers()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.user</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">read</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">listRoles()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.role</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">read</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">addRoleToGroup()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.role</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">removeRoleFromGroup()</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.role</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">update</code>
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"/><p>
        The following code listing provides an example set of security rules that grants access to all
        Identity Management-related methods to members of the <code class="literal">admin</code> role:
      </p><pre class="programlisting">rule ManageUsers
  no-loop
  activation-group "permissions"
when
  check: PermissionCheck(name == "seam.user", granted == false)
  Role(name == "admin")
then
  check.grant();
end

rule ManageRoles
  no-loop
  activation-group "permissions"
when
  check: PermissionCheck(name == "seam.role", granted == false)
  Role(name == "admin")
then
  check.grant();
end
</pre></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e10599"/>15.5. Error Messages</h2></div></div></div><p>
      The security API produces a number of default faces messages for various security-related events.
      The following table lists the message keys that can be used to override these messages by specifying
      them in a <code class="literal">message.properties</code> resource file.  To suppress the message, just put the
      key with an empty value in the resource file.
    </p><div class="table"><a id="d0e10607"/><p class="title"><b>Table 15.6. Security Message Keys</b></p><div class="table-contents"><table summary="Security Message Keys" border="1"><colgroup><col/><col/></colgroup><thead><tr><th align="center">
              <p>Message Key</p>
            </th><th align="center">
              <p>Description</p>
            </th></tr></thead><tbody><tr><td>
              <p>
                <code class="literal">org.jboss.seam.loginSuccessful</code>
              </p>
            </td><td>
              <p>
                This message is produced when a user successfully logs in via the security API.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.loginFailed</code>
              </p>
            </td><td>
              <p>
                This message is produced when the login process fails, either because the user provided an
                incorrect username or password, or because authentication failed in some other way.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.NotLoggedIn</code>
              </p>
            </td><td>
              <p>
                This message is produced when a user attempts to perform an action or access a page that requires
                a security check, and the user is not currently authenticated.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.AlreadyLoggedIn</code>
              </p>
            </td><td>
              <p>
                This message is produced when a user that is already authenticated attempts to log in again.
              </p>
            </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e10682"/>15.6. Authorization</h2></div></div></div><p>
      There are a number of authorization mechanisms provided by the Seam Security API for securing access to
      components, component methods, and pages.  This section describes each of these.  An important thing to
      note is that if you wish to use any of the advanced features (such as rule-based permissions) then
      your <code class="literal">components.xml</code> may need to be configured to support this - see the Configuration section
      above.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e10690"/>15.6.1. Core concepts</h3></div></div></div><p>
        Seam Security is built around the premise of users being granted roles and/or permissions, allowing them to
        perform operations that may not otherwise be permissible for users without the necessary security privileges.
        Each of the authorization mechanisms provided by the Seam Security API are built upon this core concept of roles and
        permissions, with an extensible framework providing multiple ways to secure application resources.
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e10695"/>15.6.1.1. What is a role?</h4></div></div></div><p>
          A role is a <span class="emphasis"><em>group</em></span>, or <span class="emphasis"><em>type</em></span>, of user that may have been granted certain 
          privileges for performing one or more specific actions within an application.  They are simple constructs, consisting 
          of just a name such as "admin", "user", "customer", etc.  They can be granted either to users (or in some cases to other 
          roles), and are used to create logical groups of users for the convenient assignment of specific application privileges.
        </p><div class="mediaobject" align="center"><img src="images/security-roleclass.png" align="middle"/></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e10711"/>15.6.1.2. What is a permission?</h4></div></div></div><p>
          A permission is a privilege (sometimes once-off) for performing a single, specific action.  It is entirely possible to 
          build an application using nothing but permissions, however roles offer a higher level of convenience when granting 
          privileges to groups of users.  They are slightly more complex in structure than roles, essentially consisting of three 
          "aspects"; a target, an action, and a recipient.  The target of a permission is the object (or an arbitrary name or class) 
          for which a particular action is allowed to be performed by a specific recipient (or user).  For example, the user "Bob" 
          may have permission to delete customer objects.  In this case, the permission target may be "customer", the permission 
          action would be "delete" and the recipient would be "Bob".
        </p><div class="mediaobject" align="center"><img src="images/security-permissionclass.png" align="middle"/></div><p>
          Within this documentation, permissions are generally represented in the form <code class="literal">target:action</code> 
          (omitting the recipient, although in reality one is always required).
        </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e10726"/>15.6.2. Securing components</h3></div></div></div><p>
        Let's start by examining the simplest form of authorization, component security, starting with the
        <code class="literal">@Restrict</code> annotation.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>@Restrict vs Typesafe security annotations</h2><p>
          While using the <code class="literal">@Restrict</code> annotation provides a powerful and flexible method for security component methods
          due to its ability to support EL expressions, it is recommended that the typesafe equivalent (described later) be
          used, at least for the compile-time safety it provides.
        </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e10742"/>15.6.2.1. The @Restrict annotation</h4></div></div></div><p>
          Seam components may be secured either at the method or the class level, using the <code class="literal">@Restrict</code>
          annotation.  If both a method and it's declaring class are annotated with <code class="literal">@Restrict</code>,
          the method restriction will take precedence (and the class restriction will not apply).  If a method
          invocation fails a security check, then an exception will be thrown as per the contract for
          <code class="literal">Identity.checkRestriction()</code> (see Inline Restrictions).  A <code class="literal">@Restrict</code>
          on just the component class itself is equivalent to adding <code class="literal">@Restrict</code> to each of its
          methods.
        </p><p>
          An empty <code class="literal">@Restrict</code> implies a permission check of <code class="literal">componentName:methodName</code>.
          Take for example the following component method:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;account&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AccountAction</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Restrict</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;delete</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          In this example, the implied permission required to call the <code class="literal">delete()</code> method is
          <code class="literal">account:delete</code>.  The equivalent of this would be to write
          <code class="literal">@Restrict("#{s:hasPermission('account','delete')}")</code>.  Now let's look at
          another example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Restrict</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;account&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AccountAction</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;insert</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Restrict</span><span class="java_separator">(</span><span class="java_literal">&quot;#{s:hasRole('admin')}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;delete</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          This time, the component class itself is annotated with <code class="literal">@Restrict</code>.  This means that
          any methods without an overriding <code class="literal">@Restrict</code> annotation require an implicit permission check.
          In the case of this example, the <code class="literal">insert()</code> method requires a permission of
          <code class="literal">account:insert</code>, while the <code class="literal">delete()</code> method requires that the user is a
          member of the <code class="literal">admin</code> role.
        </p><p>
          Before we go any further, let's address the <code class="literal">#{s:hasRole()}</code> expression seen in the above
          example.  Both <code class="literal">s:hasRole</code> and <code class="literal">s:hasPermission</code> are EL functions, which
          delegate to the correspondingly named methods of the <code class="literal">Identity</code> class. These
          functions can be used within any EL expression throughout the entirety of the security API.
        </p><p>
          Being an EL expression, the value of the <code class="literal">@Restrict</code> annotation may reference any objects that
          exist within a Seam context.  This is extremely useful when performing permission checks for a specific
          object instance.  Look at this example:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;account&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AccountAction</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Account</span><span class="java_plain">&nbsp;selectedAccount</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Restrict</span><span class="java_separator">(</span><span class="java_literal">&quot;#{s:hasPermission(selectedAccount,'modify')}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;modify</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectedAccount</span><span class="java_separator">.</span><span class="java_plain">modify</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          The interesting thing to note from this example is the reference to <code class="literal">selectedAccount</code>
          seen within the <code class="literal">hasPermission()</code> function call.  The value of this variable will be
          looked up from within the Seam context, and passed to the <code class="literal">hasPermission()</code> method
          in <code class="literal">Identity</code>, which in this case can then determine if the user has the required
          permission for modifying the specified <code class="literal">Account</code> object.
        </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e10843"/>15.6.2.2. Inline restrictions</h4></div></div></div><p>
          Sometimes it might be desirable to perform a security check in code, without using the
          <code class="literal">@Restrict</code> annotation.  In this situation, simply use
          <code class="literal">Identity.checkRestriction()</code> to evaluate a security expression, like this:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;deleteCustomer</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">checkRestriction</span><span class="java_separator">(</span><span class="java_literal">&quot;#{s:hasPermission(selectedCustomer,'delete')}&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          If the expression specified doesn't evaluate to <code class="literal">true</code>, either
        </p><div class="itemizedlist"><ul><li><p>
                    if the user is not logged in, a <code class="literal">NotLoggedInException</code>
                    exception is thrown or
                </p></li><li><p>
                    if the user is logged in, an <code class="literal">AuthorizationException</code>
                    exception is thrown.
                </p></li></ul></div><p>
          It is also possible to call the <code class="literal">hasRole()</code> and <code class="literal">hasPermission()</code>
          methods directly from Java code:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">if</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_operator">!</span><!-- <br/> --><span class="java_type">Identity</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">instance</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">hasRole</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;admin&quot;</span><!-- <br/> --><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">AuthorizationException</span><span class="java_separator">(</span><span class="java_literal">&quot;Must&nbsp;be&nbsp;admin&nbsp;to&nbsp;perform&nbsp;this&nbsp;action&quot;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_operator">!</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">hasPermission</span><span class="java_separator">(</span><span class="java_literal">&quot;customer&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;create&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">AuthorizationException</span><span class="java_separator">(</span><span class="java_literal">&quot;You&nbsp;may&nbsp;not&nbsp;create&nbsp;new&nbsp;customers&quot;</span><span class="java_separator">);</span></pre></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e10884"/>15.6.3. Security in the user interface</h3></div></div></div><p>
        One indication of a well designed user interface is that the user is not presented with options for
        which they don't have the necessary privileges to use.  Seam Security allows conditional rendering of
        either 1) sections of a page or 2) individual controls, based upon the privileges of the user, using
        the very same EL expressions that are used for component security.
      </p><p>
        Let's take a look at some examples of interface security.  First of all, let's pretend that we have a
        login form that should only be rendered if the user is not already logged in.  Using the
        <code class="literal">identity.isLoggedIn()</code> property, we can write this:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;loginForm&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{not&nbsp;identity.loggedIn}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        If the user isn't logged in, then the login form will be rendered - very straight forward so far.
        Now let's pretend there is a menu on the page that contains some actions which should only be accessible
        to users in the <code class="literal">manager</code> role.  Here's one way that these could be written:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{reports.listManagerReports}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{s:hasRole('manager')}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;Manager&nbsp;Reports</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputLink</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        This is also quite straight forward.  If the user is not a member of the <code class="literal">manager</code>
        role, then the outputLink will not be rendered. The <code class="literal">rendered</code> attribute can
        generally be used on the control itself, or on a surrounding <code class="literal">&lt;s:div&gt;</code> or
        <code class="literal">&lt;s:span&gt;</code> control.
      </p><p>
        Now for something more complex.  Let's say you have a <code class="literal">h:dataTable</code> control on a
        page listing records for which you may or may not wish to render action links depending on the
        user's privileges.  The <code class="literal">s:hasPermission</code> EL function allows us to pass in an
        object parameter which can be used to determine whether the user has the requested permission
        for that object or not. Here's how a dataTable with secured links might look:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{clients}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cl&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Name</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{cl.name}</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">City</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{cl.city}</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Action</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Modify&nbsp;Client&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{clientAction.modify}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{s:hasPermission(cl,'modify')}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Delete&nbsp;Client&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{clientAction.delete}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{s:hasPermission(cl,'delete')}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e10927"/>15.6.4. Securing pages</h3></div></div></div><p>
        Page security requires that the application is using a <code class="literal">pages.xml</code> file, however is
        extremely simple to configure.  Simply include a <code class="literal">&lt;restrict/&gt;</code> element within
        the <code class="literal">page</code> elements that you wish to secure.  If no explicit restriction is specified
        by the <code class="literal">restrict</code> element, an implied permission of <code class="literal">/viewId.xhtml:render</code>
        will be checked when the page is accessed via a non-faces (GET) request, and a permission of
        <code class="literal">/viewId.xhtml:restore</code> will be required when any JSF postback (form submission) originates
        from the page.  Otherwise, the specified restriction will be evaluated as a standard security expression.
        Here's a couple of examples:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/settings.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">restrict</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        This page has an implied permission of <code class="literal">/settings.xhtml:render</code> required for non-faces
        requests and an implied permission of <code class="literal">/settings.xhtml:restore</code> for faces requests.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/reports.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">restrict</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{s:hasRole('admin')}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">restrict</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Both faces and non-faces requests to this page require that the user is a member of the
        <code class="literal">admin</code> role.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e10967"/>15.6.5. Securing Entities</h3></div></div></div><p>
        Seam security also makes it possible to apply security restrictions to read, insert, update and
        delete actions for entities.
      </p><p>
        To secure all actions for an entity class, add a <code class="literal">@Restrict</code> annotation on the class
        itself:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;customer&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Restrict</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
        If no expression is specified in the <code class="literal">@Restrict</code> annotation, the default security check
        that is performed is a permission check of <code class="literal">entity:action</code>, where the permission target 
        is the entity instance, and the <code class="literal">action</code> is either <code class="literal">read</code>, <code class="literal">insert</code>, 
        <code class="literal">update</code> or <code class="literal">delete</code>.
      </p><p>
        It is also possible to only restrict certain actions, by placing a <code class="literal">@Restrict</code> annotation
        on the relevant entity lifecycle method (annotated as follows):
      </p><div class="itemizedlist"><ul><li><p>
            <code class="literal">@PostLoad</code> - Called after an entity instance is loaded from the database. Use this
            method to configure a <code class="literal">read</code> permission.
          </p></li><li><p>
            <code class="literal">@PrePersist</code> - Called before a new instance of the entity is inserted. Use this method
            to configure an <code class="literal">insert</code> permission.
          </p></li><li><p>
            <code class="literal">@PreUpdate</code> - Called before an entity is updated. Use this method
            to configure an <code class="literal">update</code> permission.
          </p></li><li><p>
            <code class="literal">@PreRemove</code> - Called before an entity is deleted. Use this method
            to configure a <code class="literal">delete</code> permission.
          </p></li></ul></div><p>
        Here's an example of how an entity would be configured to perform a security check for any <code class="literal">insert</code>
        operations.  Please note that the method is not required to do anything, the only important thing in regard to
        security is how it is annotated:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">PrePersist</span><span class="java_plain">&nbsp;@</span><span class="java_type">Restrict</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;prePersist</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Using /META-INF/orm.xml</h2><p>
            You can also specify the call back method in <code class="literal">/META-INF/orm.xml</code>:
         </p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entity-mappings</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/persistence/orm&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/persistence/orm&nbsp;http://java.sun.com/xml/ns/persistence/orm_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1.0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Customer&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pre-persist</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">method-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;prePersist&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">entity</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">entity-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Of course, you still need to annotate the <code class="literal">prePersist()</code>
            method on <code class="literal">Customer</code> with <code class="literal">@Restrict</code>
         </p></div><p>
        And here's an example of an entity permission rule that checks if the authenticated user is allowed to insert
        a new <code class="literal">MemberBlog</code> record (from the seamspace example).  The entity for which the security
        check is being made is automatically inserted into the working memory (in this case <code class="literal">MemberBlog</code>):
      </p><pre class="programlisting">rule InsertMemberBlog
  no-loop
  activation-group "permissions"
when
  principal: Principal()
  memberBlog: MemberBlog(member : member -&gt; (member.getUsername().equals(principal.getName())))
  check: PermissionCheck(target == memberBlog, action == "insert", granted == false)
then
  check.grant();
end;</pre><p>
         This rule will grant the permission <code class="literal">memberBlog:insert</code> if the currently authenticated
         user (indicated by the <code class="literal">Principal</code> fact) has the same name as the member for which the
         blog entry is being created.  The "<code class="literal">principal: Principal()</code>" structure that can be seen in the
         example code is a variable binding - it binds the instance of the <code class="literal">Principal</code> object from the
         working memory (placed there during authentication) and assigns it to a variable called <code class="literal">principal</code>.
         Variable bindings allow the value to be referred to in other places, such as the following line which compares the 
         member's username to the <code class="literal">Principal</code> name.  For more details, please refer to the JBoss Rules documentation.
       </p><p>
         Finally, we need to install a listener class that integrates Seam security with
         your JPA provider.
       </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11106"/>15.6.5.1. Entity security with JPA</h4></div></div></div><p>
          Security checks for EJB3 entity beans are performed with an <code class="literal">EntityListener</code>.
          You can install this listener by using the following <code class="literal">META-INF/orm.xml</code> file:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entity-mappings</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/persistence/orm&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/persistence/orm&nbsp;http://java.sun.com/xml/ns/persistence/orm_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1.0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit-metadata</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit-defaults</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entity-listeners</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entity-listener</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.EntitySecurityListener&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">entity-listeners</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit-defaults</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit-metadata</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">entity-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11119"/>15.6.5.2. Entity security with a Managed Hibernate Session</h4></div></div></div><p>
          If you are using a Hibernate <code class="literal">SessionFactory</code> configured via Seam,
          and are using annotations, or <code class="literal">orm.xml</code>, then you don't
          need to do anything special to use entity security.
        </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e11130"/>15.6.6. Typesafe Permission Annotations</h3></div></div></div><p>
        Seam provides a number of annotations that may be used as an alternative to <code class="literal">@Restrict</code>, which have
        the added advantage of providing compile-time safety as they don't support arbitrary EL expressions in the same way 
        that <code class="literal">@Restrict</code> does.
      </p><p>
        Out of the box, Seam comes with annotations for standard CRUD-based permissions, however it is a simple matter to 
        add your own.  The following annotations are provided in the <code class="literal">org.jboss.seam.annotations.security</code> package:
      </p><div class="itemizedlist"><ul><li><p>@Insert</p></li><li><p>@Read</p></li><li><p>@Update</p></li><li><p>@Delete</p></li></ul></div><p>
        To use these annotations, simply place them on the method or parameter for which you wish to perform a security check.
        If placed on a method, then they should specify a target class for which the permission will be checked.  Take the
        following example:
      </p><pre class="programlisting">  @Insert(Customer.class)
  public void createCustomer() {
    ...
  }</pre><p>
        In this example, a permission check will be performed for the user to ensure that they have the rights to create
        new <code class="literal">Customer</code> objects.  The target of the permission check will be <code class="literal">Customer.class</code>
        (the actual <code class="literal">java.lang.Class</code> instance itself), and the action is the lower case representation of the 
        annotation name, which in this example is <code class="literal">insert</code>.
      </p><p>
        It is also possible to annotate the parameters of a component method in the same way.  If this is done, then it is
        not required to specify a permission target (as the parameter value itself will be the target of the permission check):
      </p><pre class="programlisting">  public void updateCustomer(@Update Customer customer) {
    ...
  }</pre><p>
        To create your own security annotation, you simply need to annotate it with <code class="literal">@PermissionCheck</code>, for example:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Target</span><!-- <br/> --><span class="java_separator">({</span><!-- <br/> --><span class="java_plain">METHOD</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;PARAMETER</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Documented</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Retention</span><span class="java_separator">(</span><span class="java_plain">RUNTIME</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Inherited</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">PermissionCheck</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;@</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">Promote</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">Class</span><span class="java_plain">&nbsp;value</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">default</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
        If you wish to override the default permission action name (which is the lower case version of the annotation name) with
        another value, you can specify it within the <code class="literal">@PermissionCheck</code> annotation:
      </p><pre class="programlisting">@PermissionCheck("upgrade")</pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e11195"/>15.6.7. Typesafe Role Annotations</h3></div></div></div><p>
        In addition to supporting typesafe permission annotation, Seam Security also provides typesafe role annotations that
        allow you to restrict access to component methods based on the role memberships of the currently authenticated user.
        Seam provides one such annotation out of the box, <code class="literal">org.jboss.seam.annotations.security.Admin</code>, used
        to restrict access to a method to users that are a member of the <code class="literal">admin</code> role (so long as your 
        own application supports such a role).  To create your own role annotations, simply meta-annotate them with
        <code class="literal">org.jboss.seam.annotations.security.RoleCheck</code>, like in the following example:
      </p><pre class="programlisting">@Target({METHOD})
@Documented
@Retention(RUNTIME)
@Inherited
@RoleCheck
public @interface User { 
}</pre><p>
        Any methods subsequently annotated with the <code class="literal">@User</code> annotation as shown in the above example
        will be automatically intercepted and the user checked for the membership of the corresponding role name
        (which is the lower case version of the annotation name, in this case <code class="literal">user</code>).
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e11219"/>15.6.8. The Permission Authorization Model</h3></div></div></div><p>
        Seam Security provides an extensible framework for resolving application permissions.  The following class diagram
        shows an overview of the main components of the permission framework:
      </p><div class="mediaobject" align="center"><img src="images/security-permission-classdiagram.png" align="middle"/></div><p>
        The relevant classes are explained in more detail in the following sections.
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11231"/>15.6.8.1. PermissionResolver</h4></div></div></div><p>
          This is actually an interface, which provides methods for resolving individual object permissions.  Seam provides
          the following built-in <code class="literal">PermissionResolver</code> implementations, which are described in more detail later
          in the chapter:
        </p><div class="itemizedlist"><ul><li><p><code class="literal">RuleBasedPermissionResolver</code> - This permission resolver uses Drools to resolve rule-based
            permission checks.</p></li><li><p><code class="literal">PersistentPermissionResolver</code> - This permission resolver stores object permissions in a
            persistent store, such as a relational database.</p></li></ul></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e11250"/>15.6.8.1.1. Writing your own PermissionResolver</h5></div></div></div><p>
            It is very simple to implement your own permission resolver.  The <code class="literal">PermissionResolver</code>
            interface defines only two methods that must be implemented, as shown by the following table.  By deploying
            your own <code class="literal">PermissionResolver</code> implementation in your Seam project, it will be automatically
            scanned during deployment and registered with the default <code class="literal">ResolverChain</code>.
          </p><div class="table"><a id="d0e11264"/><p class="title"><b>Table 15.7. PermissionResolver interface</b></p><div class="table-contents"><table summary="PermissionResolver interface" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                    <p>Return type</p>
                  </th><th align="center">
                    <p>Method</p>
                  </th><th align="center">
                    <p>Description</p>
                  </th></tr></thead><tbody><tr><td>
                    <p>
                      <code class="literal">boolean</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">hasPermission(Object target, String action)</code>
                    </p>
                  </td><td>
                    <p>
                      This method must resolve whether the currently authenticated user (obtained via a call to
                      <code class="literal">Identity.getPrincipal()</code>) has the permission specified by the <code class="literal">target</code>
                      and <code class="literal">action</code> parameters.  It should return <code class="literal">true</code> if the user has
                      the permission, or <code class="literal">false</code> if they don't.
                    </p>
                  </td></tr><tr><td>
                    <p>
                      <code class="literal">void</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">filterSetByAction(Set&lt;Object&gt; targets, String action)</code>
                    </p>
                  </td><td>
                    <p>
                      This method should remove any objects from the specified set, that would 
                      return <code class="literal">true</code> if passed to the <code class="literal">hasPermission()</code> method with the 
                      same <code class="literal">action</code> parameter value.
                    </p>
                  </td></tr></tbody></table></div></div><br class="table-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
              As they are cached in the user's session, any custom <code class="literal">PermissionResolver</code> 
              implementations must adhere to a couple of restrictions.  Firstly, they may not contain any 
              state that is finer-grained than session scope (and the scope of the component itself should
              either be application or session).  Secondly, they must not use dependency 
              injection as they may be accessed from multiple threads simultaneously.  In fact, for
              performance reasons it is recommended that they are annotated with 
              <code class="literal">@BypassInterceptors</code> to bypass Seam's interceptor stack altogether.
            </p></div></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11366"/>15.6.8.2. ResolverChain</h4></div></div></div><p>
          A <code class="literal">ResolverChain</code> contains an ordered list of <code class="literal">PermissionResolver</code>s, for the
          purpose of resolving object permissions for a particular object class or permission target.
        </p><p>
          The default <code class="literal">ResolverChain</code> consists of all permission resolvers discovered during
          application deployment.  The <code class="literal">org.jboss.seam.security.defaultResolverChainCreated</code>
          event is raised (and the <code class="literal">ResolverChain</code> instance passed as an event parameter) 
          when the default <code class="literal">ResolverChain</code> is created.  This allows additional resolvers that
          for some reason were not discovered during deployment to be added, or for resolvers that are in the 
          chain to be re-ordered or removed.
        </p><p>
          The following sequence diagram shows the interaction between the components of the permission framework during a
          permission check (explanation follows).  A permission check can originate from a number of possible sources,
          for example - the security interceptor, the <code class="literal">s:hasPermission</code> EL function, or via an API
          call to <code class="literal">Identity.checkPermission</code>:
        </p><div class="mediaobject" align="center"><img src="images/security-permission-sequence.png" align="middle"/></div><div class="itemizedlist"><ul><li><p>
              1. A permission check is initiated somewhere (either in code or via an EL
              expression) resulting in a call to <code class="literal">Identity.hasPermission()</code>.
            </p></li><li><p>
              1.1. <code class="literal">Identity</code> invokes 
              <code class="literal">PermissionMapper.resolvePermission()</code>, passing in the
              permission to be resolved.
            </p></li><li><p>
              1.1.1. <code class="literal">PermissionMapper</code> maintains a <code class="literal">Map</code> of 
              <code class="literal">ResolverChain</code> instances, keyed by class.  It uses this map
              to locate the correct <code class="literal">ResolverChain</code> for the permission's
              target object.  Once it has the correct <code class="literal">ResolverChain</code>, it
              retrieves the list of <code class="literal">PermissionResolver</code>s it contains via
              a call to <code class="literal">ResolverChain.getResolvers()</code>.
            </p></li><li><p>
              1.1.2. For each <code class="literal">PermissionResolver</code> in the <code class="literal">ResolverChain</code>,
              the <code class="literal">PermissionMapper</code> invokes its <code class="literal">hasPermission()</code> method,
              passing in the permission instance to be checked.  If any of the <code class="literal">PermissionResolver</code>s
              return <code class="literal">true</code>, then the permission check has succeeded and the 
              <code class="literal">PermissionMapper</code> also returns <code class="literal">true</code> to <code class="literal">Identity</code>.
              If none of the <code class="literal">PermissionResolver</code>s return true, then the permission check
              has failed.
            </p></li></ul></div></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e11477"/>15.6.9. RuleBasedPermissionResolver</h3></div></div></div><p>
        One of the built-in permission resolvers provided by Seam, <code class="literal">RuleBasedPermissionResolver</code> 
        allows permissions to be evaluated based on a set of Drools (JBoss Rules) security rules.  A couple of the 
        advantages of using a rule engine are 1) a centralized location for the business logic that is used to
        evaluate user permissions, and 2) speed - Drools uses very efficient algorithms for evaluating large 
        numbers of complex rules involving multiple conditions.        
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11485"/>15.6.9.1. Requirements</h4></div></div></div><p>
          If using the rule-based permission features provided by Seam Security, the following jar files are required by Drools
          to be distributed with your project:
        </p><div class="itemizedlist"><ul><li><p>knowledge-api.jar</p></li><li><p>drools-compiler.jar</p></li><li><p>drools-core.jar</p></li><li><p>drools-decisiontables.jar</p></li><li><p>drools-templates.jar</p></li><li><p>janino.jar</p></li><li><p>antlr-runtime.jar</p></li><li><p>mvel2.jar</p></li></ul></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11515"/>15.6.9.2. Configuration</h4></div></div></div><p>
          The configuration for <code class="literal">RuleBasedPermissionResolver</code> requires that a Drools rule base is first
          configured in <code class="literal">components.xml</code>.  By default, it expects that the rule base is named
          <code class="literal">securityRules</code>, as per the following example:       
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:core</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:security</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/security&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:drools</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/drools&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&nbsp;http://jboss.org/schema/seam/core-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components&nbsp;http://jboss.org/schema/seam/components-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/drools&nbsp;http://jboss.org/schema/seam/drools-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/security&nbsp;http://jboss.org/schema/seam/security-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;securityRules&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/META-INF/security.drl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-files</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">drools:rule-base</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
          The default rule base name can be overridden by specifying the <code class="literal">security-rules</code> 
          property for <code class="literal">RuleBasedPermissionResolver</code>:
        </p><pre class="programlisting">
  &lt;security:rule-based-permission-resolver security-rules="#{prodSecurityRules}"/&gt;</pre><p>
          Once the <code class="literal">RuleBase</code> component is configured, it's time to write the security rules.
        </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11546"/>15.6.9.3. Writing Security Rules</h4></div></div></div><p>
          The first step to writing security rules is to create a new rule file in the <code class="literal">/META-INF</code>
          directory of your application's jar file.  Usually this file would be named something like 
          <code class="literal">security.drl</code>, however you can name it whatever you like as long as it is configured
          correspondingly in <code class="literal">components.xml</code>.
        </p><p>
          So what should the security rules file contain?  At this stage it might be a good idea to at least skim
          through the Drools documentation, however to get started here's an extremely simple example:
        </p><pre class="programlisting">package MyApplicationPermissions;
  
  import org.jboss.seam.security.permission.PermissionCheck;
  import org.jboss.seam.security.Role;
  
  rule CanUserDeleteCustomers
  when
    c: PermissionCheck(target == "customer", action == "delete")
    Role(name == "admin")
  then
    c.grant();
  end</pre><p>
          Let's break this down step by step.  The first thing we see is the package declaration.  A package in Drools
          is essentially a collection of rules.  The package name can be anything you want - it doesn't relate
          to anything else outside the scope of the rule base.
        </p><p>
          The next thing we can notice is a couple of import statements for the <code class="literal">PermissionCheck</code>
          and <code class="literal">Role</code> classes. These imports inform the rules engine that we'll be referencing
          these classes within our rules.
        </p><p>
          Finally we have the code for the rule.  Each rule within a package should be given a unique name (usually
          describing the purpose of the rule).  In this case our rule is called <code class="literal">CanUserDeleteCustomers</code>
          and will be used to check whether a user is allowed to delete a customer record.
        </p><p>
          Looking at the body of the rule definition we can notice two distinct sections.  Rules have what is known
          as a left hand side (LHS) and a right hand side (RHS).  The LHS consists of the conditional part of the
          rule, i.e. a list of conditions which must be satisfied for the rule to fire.  The LHS is represented by
          the <code class="literal">when</code> section.  The RHS is the consequence, or action section of the rule that will
          only be fired if all of the conditions in the LHS are met.  The RHS is represented by the
          <code class="literal">then</code> section.  The end of the rule is denoted by the <code class="literal">end</code> line.
        </p><p>
          If we look at the LHS of the rule, we see two conditions listed there.  Let's examine the first condition:
        </p><pre class="programlisting">c: PermissionCheck(target == "customer", action == "delete")</pre><p>
          In plain english, this condition is stating that there must exist a <code class="literal">PermissionCheck</code> object
          with a <code class="literal">target</code> property equal to "customer", and an <code class="literal">action</code> property equal
          to "delete" within the working memory.
        </p><p>
          So what is the working memory? Also known as a "stateful session" in Drools terminology, the working memory 
          is a session-scoped object that contains the contextual information that is required by the rules engine to 
          make a decision about a permission check. Each time the <code class="literal">hasPermission()</code> method is called, 
          a temporary <code class="literal">PermissionCheck</code> object, or <span class="emphasis"><em>Fact</em></span>, is inserted into the 
          working memory.  This <code class="literal">PermissionCheck</code> corresponds exactly to the permission that is being 
          checked, so for example if you call <code class="literal">hasPermission("account", "create")</code> then a 
          <code class="literal">PermissionCheck</code> object with a <code class="literal">target</code> equal to "account" and 
          <code class="literal">action</code> equal to "create" will be inserted into the working memory for the duration of the 
          permission check.
        </p><p>
          Besides the <code class="literal">PermissionCheck</code> facts, there is also a <code class="literal">org.jboss.seam.security.Role</code>
          fact for each of the roles that the authenticated user is a member of.  These <code class="literal">Role</code> facts 
          are synchronized with the user's authenticated roles at the beginning of every permission check.  As a consequence, 
          any <code class="literal">Role</code> object that is inserted into the working memory during the course of a permission
          check will be removed before the next permission check occurs, if the authenticated user is not actually a member of
          that role.  Besides the <code class="literal">PermissionCheck</code> and <code class="literal">Role</code> facts, the working
          memory also contains the <code class="literal">java.security.Principal</code> object that was created as a result of
          the authentication process.  
        </p><p>
          It is also possible to insert additional long-lived facts into the working  memory by calling 
          <code class="literal">RuleBasedPermissionResolver.instance().getSecurityContext().insert()</code>,
          passing the object as a parameter.  The exception to this is <code class="literal">Role</code> objects, which as
          already discussed are synchronized at the start of each permission check.
        </p><p>
          Getting back to our simple example, we can also notice that the first line of our LHS is prefixed with
          <code class="literal">c:</code>.  This is a variable binding, and is used to refer back to the object that is
          matched by the condition (in this case, the <code class="literal">PermissionCheck</code>).  Moving on to the 
          second line of our LHS, we see this:
        </p><pre class="programlisting">Role(name == "admin")</pre><p>
          This condition simply states that there must be a <code class="literal">Role</code> object with a 
          <code class="literal">name</code> of "admin" within the working memory.  As already mentioned, user roles are inserted into 
          the working memory at the beginning of each permission check.  So, putting both conditions together, this 
          rule is essentially saying "I will fire if you are checking for the <code class="literal">customer:delete</code> 
          permission and the user is a member of the <code class="literal">admin</code> role".
        </p><p>
          So what is the consequence of the rule firing?  Let's take a look at the RHS of the rule:
        </p><pre class="programlisting">c.grant()</pre><p>
          The RHS consists of Java code, and in this case is invoking the <code class="literal">grant()</code>
          method of the <code class="literal">c</code> object, which as already mentioned is a variable binding
          for the <code class="literal">PermissionCheck</code> object.  Besides the <code class="literal">name</code> and
          <code class="literal">action</code> properties of the <code class="literal">PermissionCheck</code> object, there
          is also a <code class="literal">granted</code> property which is initially set to <code class="literal">false</code>.
          Calling <code class="literal">grant()</code> on a <code class="literal">PermissionCheck</code> sets the
          <code class="literal">granted</code> property to <code class="literal">true</code>, which means that the permission
          check was successful, allowing the user to carry out whatever action the permission check was
          intended for.
        </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11728"/>15.6.9.4. Non-String permission targets</h4></div></div></div><p>
          So far we have only seen permission checks for String-literal permission targets.  It is of course also
          possible to write security rules for permission targets of more complex types.  For example, let's say that you wish
          to write a security rule to allow your users to create blog comments.  The following rule demonstrates
          how this may be expressed, by requiring the target of the permission check to be an instance of
          <code class="literal">MemberBlog</code>, and also requiring that the currently authenticated user is a member of the
          <code class="literal">user</code> role:
        </p><pre class="programlisting">rule CanCreateBlogComment
  no-loop
  activation-group "permissions"
when
  blog: MemberBlog()
  check: PermissionCheck(target == blog, action == "create", granted == false)
  Role(name == "user")
then
  check.grant();
end
</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11741"/>15.6.9.5. Wildcard permission checks</h4></div></div></div><p>
          It is possible to implement a wildcard permission check (which allows all actions for a given permission
          target), by omitting the <code class="literal">action</code> constraint for the <code class="literal">PermissionCheck</code> in
          your rule, like this:
        </p><pre class="programlisting">rule CanDoAnythingToCustomersIfYouAreAnAdmin
when
  c: PermissionCheck(target == "customer")
  Role(name == "admin")
then
  c.grant();
end;
        </pre><p>
          This rule allows users with the <code class="literal">admin</code> role to perform <span class="emphasis"><em>any</em></span> action for
          any <code class="literal">customer</code> permission check.
        </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e11765"/>15.6.10. PersistentPermissionResolver</h3></div></div></div><p>
        Another built-in permission resolver provided by Seam, <code class="literal">PersistentPermissionResolver</code>
        allows permissions to be loaded from persistent storage, such as a relational database.  This permission 
        resolver provides ACL style instance-based security, allowing for specific object permissions to be assigned
        to individual users and roles.  It also allows for persistent, arbitrarily-named permission targets (not 
        necessarily object/class based) to be assigned in the same way.
      </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11773"/>15.6.10.1. Configuration</h4></div></div></div><p>
          Before it can be used, <code class="literal">PersistentPermissionResolver</code> must be configured with a
          valid <code class="literal">PermissionStore</code> in <code class="literal">components.xml</code>.  If not configured,
          it will attempt to use the default permission store, <code class="literal">JpaIdentityStore</code> (see section
          further down for details).  To use a permission store other than the default, configure the
          <code class="literal">permission-store</code> property as follows:
        </p><pre class="programlisting">  &lt;security:persistent-permission-resolver permission-store="#{myCustomPermissionStore}"/&gt;</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e11795"/>15.6.10.2. Permission Stores</h4></div></div></div><p>
          A permission store is required for <code class="literal">PersistentPermissionResolver</code> to connect to the
          backend storage where permissions are persisted.  Seam provides one <code class="literal">PermissionStore</code>
          implementation out of the box, <code class="literal">JpaPermissionStore</code>, which is used to store
          permissions inside a relational database.  It is possible to write your own permission store
          by implementing the <code class="literal">PermissionStore</code> interface, which defines the following
          methods:
        </p><div class="table"><a id="d0e11812"/><p class="title"><b>Table 15.8. PermissionStore interface</b></p><div class="table-contents"><table summary="PermissionStore interface" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                  <p>Return type</p>
                </th><th align="center">
                  <p>Method</p>
                </th><th align="center">
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>
                    <code class="literal">List&lt;Permission&gt;</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">listPermissions(Object target)</code>
                  </p>
                </td><td>
                  <p>
                    This method should return a <code class="literal">List</code> of <code class="literal">Permission</code> objects 
                    representing all the permissions granted for the specified target object.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">List&lt;Permission&gt;</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">listPermissions(Object target, String action)</code>
                  </p>
                </td><td>
                  <p>
                    This method should return a <code class="literal">List</code> of <code class="literal">Permission</code> objects 
                    representing all the permissions with the specified action, granted for the specified target object.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">List&lt;Permission&gt;</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">listPermissions(Set&lt;Object&gt; targets, String action)</code>
                  </p>
                </td><td>
                  <p>
                    This method should return a <code class="literal">List</code> of <code class="literal">Permission</code> objects 
                    representing all the permissions with the specified action, granted for the specified set of
                    target objects.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">boolean</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">grantPermission(Permission)</code>
                  </p>
                </td><td>
                  <p>
                    This method should persist the specified <code class="literal">Permission</code> object to the backend
                    storage, returning true if successful.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">boolean</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">grantPermissions(List&lt;Permission&gt; permissions)</code>
                  </p>
                </td><td>
                  <p>
                    This method should persist all of the <code class="literal">Permission</code> objects contained in the
                    specified <code class="literal">List</code>, returning true if successful.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">boolean</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">revokePermission(Permission permission)</code>
                  </p>
                </td><td>
                  <p>
                    This method should remove the specified <code class="literal">Permission</code> object from persistent storage.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">boolean</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">revokePermissions(List&lt;Permission&gt; permissions)</code>
                  </p>
                </td><td>
                  <p>
                    This method should remove all of the <code class="literal">Permission</code> objects in the specified list
                    from persistent storage.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="literal">List&lt;String&gt;</code>
                  </p>
                </td><td>
                  <p>
                    <code class="literal">listAvailableActions(Object target)</code>
                  </p>
                </td><td>
                  <p>
                    This method should return a list of all the available actions (as Strings) for the class of the 
                    specified target object.  It is used in conjunction with permission management to build the user
                    interface for granting specific class permissions (see section further down).
                  </p>
                </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e12046"/>15.6.10.3. JpaPermissionStore</h4></div></div></div><p>
          This is the default <code class="literal">PermissionStore</code> implementation (and the only one provided by Seam), which 
          uses a relational database to store permissions.  Before it can be used it must be configured with either one or 
          two entity classes for storing user and role permissions.  These entity classes must be annotated with a special 
          set of security annotations to configure which properties of the entity correspond to various aspects of the 
          permissions being stored.
        </p><p>
          If you wish to use the same entity (i.e. a single database table) to store both user and role permissions, then
          only the <code class="literal">user-permission-class</code> property is required to be configured.  If you wish to use
          separate tables for storing user and role permissions, then in addition to the <code class="literal">user-permission-class</code>
          property you must also configure the <code class="literal">role-permission-class</code> property.
        </p><p>For example, to configure a single entity class to store both user and role permissions:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:jpa-permission-store</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">user-permission-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.acme.model.AccountPermission&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>To configure separate entity classes for storing user and role permissions:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:jpa-permission-store</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">user-permission-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.acme.model.UserPermission&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">role-permission-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.acme.model.RolePermission&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12073"/>15.6.10.3.1. Permission annotations</h5></div></div></div><p>
            As mentioned, the entity classes that contain the user and role permissions must be configured with a
            special set of annotations, contained within the <code class="literal">org.jboss.seam.annotations.security.permission</code> package.
            The following table lists each of these annotations along with a description of how they are used:
          </p><div class="table"><a id="d0e12081"/><p class="title"><b>Table 15.9. Entity Permission annotations</b></p><div class="table-contents"><table summary="Entity Permission annotations" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                    <p>Annotation</p>
                  </th><th align="center">
                    <p>Target</p>
                  </th><th align="center">
                    <p>Description</p>
                  </th></tr></thead><tbody><tr><td>
                    <p>
                      <code class="literal">@PermissionTarget</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">FIELD,METHOD</code>
                    </p>
                  </td><td>
                    <p>
                      This annotation identifies the property of the entity that will contain the permission target.  The property
                      should be of type <code class="literal">java.lang.String</code>.
                    </p>
                  </td></tr><tr><td>
                    <p>
                      <code class="literal">@PermissionAction</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">FIELD,METHOD</code>
                    </p>
                  </td><td>
                    <p>
                      This annotation identifies the property of the entity that will contain the permission action.  The property
                      should be of type <code class="literal">java.lang.String</code>.
                    </p>
                  </td></tr><tr><td>
                    <p>
                      <code class="literal">@PermissionUser</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">FIELD,METHOD</code>
                    </p>
                  </td><td>
                    <p>
                      This annotation identifies the property of the entity that will contain the recipient user for the permission. It should
                      be of type <code class="literal">java.lang.String</code> and contain the user's username.
                    </p>
                  </td></tr><tr><td>
                    <p>
                      <code class="literal">@PermissionRole</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">FIELD,METHOD</code>
                    </p>
                  </td><td>
                    <p>
                      This annotation identifies the property of the entity that will contain the recipient role for the permission. It should
                      be of type <code class="literal">java.lang.String</code> and contain the role name.
                    </p>
                  </td></tr><tr><td>
                    <p>
                      <code class="literal">@PermissionDiscriminator</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">FIELD,METHOD</code>
                    </p>
                  </td><td>
                    <p>
                      This annotation should be used when the same entity/table is used to store both user and role permissions.  It identifies
                      the property of the entity that is used to discriminate between user and role permissions.  By default, if the column
                      value contains the string literal <code class="literal">user</code>, then the record will be treated as a user permission.  If it
                      contains the string literal <code class="literal">role</code>, then it will be treated as a role permission.  It is also possible
                      to override these defaults by specifying the <code class="literal">userValue</code> and <code class="literal">roleValue</code> properties
                      within the annotation.  For example, to use <code class="literal">u</code> and <code class="literal">r</code> instead of <code class="literal">user</code>
                      and <code class="literal">role</code>, the annotation would be written like this:
                    </p>
                    
                    <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">PermissionDiscriminator</span>
<!--  --><br/><span class="java_separator">(</span><span class="java_plain">userValue</span><span class="java_operator">=</span><span class="java_literal">&quot;u&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;roleValue</span><span class="java_operator">=</span><span class="java_literal">&quot;r&quot;</span><span class="java_separator">)</span></pre>
                  </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12255"/>15.6.10.3.2. Example Entity</h5></div></div></div><p>
            Here is an example of an entity class that is used to store both user and role permissions.  The following class can be found
            inside the SeamSpace example:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AccountPermission</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;permissionId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;recipient</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;target</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;action</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;discriminator</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getPermissionId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;permissionId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setPermissionId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;permissionId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">permissionId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;permissionId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PermissionUser</span><span class="java_plain">&nbsp;@</span><span class="java_type">PermissionRole</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getRecipient</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;recipient</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRecipient</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;recipient</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">recipient&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;recipient</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PermissionTarget</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getTarget</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;target</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setTarget</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;target</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">target&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;target</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PermissionAction</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getAction</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;action</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setAction</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;action</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">action&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;action</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PermissionDiscriminator</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getDiscriminator</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;discriminator</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setDiscriminator</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;discriminator</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">discriminator&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;discriminator</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
            As can be seen in the above example, the <code class="literal">getDiscriminator()</code> method has been annotated
            with the <code class="literal">@PermissionDiscriminator</code> annotation, to allow <code class="literal">JpaPermissionStore</code> to
            determine which records represent user permissions and which represent role permissions.  In addition, it
            can also be seen that the <code class="literal">getRecipient()</code> method is annotated with both 
            <code class="literal">@PermissionUser</code> and <code class="literal">@PermissionRole</code> annotations.  This is perfectly valid,
            and simply means that the <code class="literal">recipient</code> property of the entity will either contain the name
            of the user or the name of the role, depending on the value of the <code class="literal">discriminator</code> property.
          </p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12288"/>15.6.10.3.3. Class-specific Permission Configuration</h5></div></div></div><p>
            A further set of class-specific annotations can be used to configure a specific set of allowable permissions
            for a target class.  These permissions can be found in the <code class="literal">org.jboss.seam.annotation.security.permission</code>
            package:
          </p><div class="table"><a id="d0e12296"/><p class="title"><b>Table 15.10. Class Permission Annotations</b></p><div class="table-contents"><table summary="Class Permission Annotations" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                    <p>Annotation</p>
                  </th><th align="center">
                    <p>Target</p>
                  </th><th align="center">
                    <p>Description</p>
                  </th></tr></thead><tbody><tr><td>
                    <p>
                      <code class="literal">@Permissions</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">TYPE</code>
                    </p>
                  </td><td>
                    <p>
                      A container annotation, this annotation may contain an array of <code class="literal">@Permission</code> annotations.
                    </p>
                  </td></tr><tr><td>
                    <p>
                      <code class="literal">@Permission</code>
                    </p>
                  </td><td>
                    <p>
                      <code class="literal">TYPE</code>
                    </p>
                  </td><td>
                    <p>
                      This annotation defines a single allowable permission action for the target class.  Its <code class="literal">action</code>
                      property must be specified, and an optional <code class="literal">mask</code> property may also be specified if permission
                      actions are to be persisted as bitmasked values (see next section).
                    </p>
                  </td></tr></tbody></table></div></div><br class="table-break"/><p>
            Here's an example of the above annotations in action.  The following class can also be found in the SeamSpace example:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Permissions</span><!-- <br/> --><span class="java_separator">({</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Permission</span><span class="java_separator">(</span><span class="java_plain">action&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;view&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Permission</span><span class="java_separator">(</span><span class="java_plain">action&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;comment&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_separator">})</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MemberImage</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></pre><p>
            This example demonstrates how two allowable permission actions, <code class="literal">view</code> and <code class="literal">comment</code> 
            can be declared for the entity class <code class="literal">MemberImage</code>.
          </p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12389"/>15.6.10.3.4. Permission masks</h5></div></div></div><p>
            By default, multiple permissions for the same target object and recipient will be persisted as a single database record,
            with the <code class="literal">action</code> property/column containing a comma-separated list of the granted actions.  To reduce
            the amount of physical storage required to persist a large number of permissions, it is possible to use a bitmasked
            integer value (instead of a comma-separated list) to store the list of permission actions.
          </p><p>
            For example, if recipient "Bob" is granted both the <code class="literal">view</code> and <code class="literal">comment</code> permissions
            for a particular <code class="literal">MemberImage</code> (an entity bean) instance, then by default the <code class="literal">action</code> property of the
            permission entity will contain "<code class="literal">view,comment</code>", representing the two granted permission actions.  
            Alternatively, if using bitmasked values for the permission actions, as defined like so:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Permissions</span><!-- <br/> --><span class="java_separator">({</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Permission</span><span class="java_separator">(</span><span class="java_plain">action&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;view&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;mask&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Permission</span><span class="java_separator">(</span><span class="java_plain">action&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;comment&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;mask&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">2</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_separator">})</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MemberImage</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></pre><p>
            The <code class="literal">action</code> property will instead simply contain "3" (with both the 1 bit and 2 bit switched on).  Obviously
            for a large number of allowable actions for any particular target class, the storage required for the permission records
            is greatly reduced by using bitmasked actions.
          </p><p>
            Obviously, it is very important that the <code class="literal">mask</code> values specified are powers of 2.
          </p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12426"/>15.6.10.3.5. Identifier Policy</h5></div></div></div><p>
            When storing or looking up permissions, <code class="literal">JpaPermissionStore</code> must be able to uniquely identify specific
            object instances to effectively operate on its permissions.  To achieve this, an <span class="emphasis"><em>identifier strategy</em></span> 
            may be assigned to each target class for the generation of unique identifier values.  Each identifier strategy
            implementation knows how to generate unique identifiers for a particular type of class, and it is a simple matter to 
            create new identifier strategies.
          </p><p>
            The <code class="literal">IdentifierStrategy</code> interface is very simple, declaring only two methods:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">interface</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">IdentifierStrategy</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;canIdentify</span><span class="java_separator">(</span><span class="java_type">Class</span><span class="java_plain">&nbsp;targetClass</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getIdentifier</span><span class="java_separator">(</span><span class="java_type">Object</span><span class="java_plain">&nbsp;target</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            The first method, <code class="literal">canIdentify()</code> simply returns <code class="literal">true</code> if the identifier strategy
            is capable of generating a unique identifier for the specified target class.  The second method, 
            <code class="literal">getIdentifier()</code> returns the unique identifier value for the specified target object.
          </p><p>
            Seam provides two <code class="literal">IdentifierStrategy</code> implementations, <code class="literal">ClassIdentifierStrategy</code>
            and <code class="literal">EntityIdentifierStrategy</code> (see next sections for details).
          </p><p>
            To explicitly configure a specific identifier strategy to use for a particular class, it should be annotated with
            <code class="literal">org.jboss.seam.annotations.security.permission.Identifier</code>, and the value should be set to
            a concrete implementation of the <code class="literal">IdentifierStrategy</code> interface.  An optional <code class="literal">name</code>
            property can also be specified, the effect of which is dependent upon the actual <code class="literal">IdentifierStrategy</code>
            implementation used.
          </p></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12480"/>15.6.10.3.6. ClassIdentifierStrategy</h5></div></div></div><p>
            This identifier strategy is used to generate unique identifiers for classes, and will use the value of the 
            <code class="literal">name</code> (if specified) in the <code class="literal">@Identifier</code> annotation.  If there is no
            <code class="literal">name</code> property provided, then it will attempt to use the component name of the class
            (if the class is a Seam component), or as a last resort it will create an identifier based on the name
            of the class (excluding the package name).  For example, the identifier for the following class will
            be "<code class="literal">customer</code>":
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Identifier</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">&quot;customer&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></pre><p>
            The identifier for the following class will be "<code class="literal">customerAction</code>":
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;customerAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerAction</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span></pre><p>
            Finally, the identifier for the following class will be "<code class="literal">Customer</code>":
          </p><pre class="programlisting">public class Customer { </pre></div><div class="sect4" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e12513"/>15.6.10.3.7. EntityIdentifierStrategy</h5></div></div></div><p>
            This identifier strategy is used to generate unique identifiers for entity beans.  It does so by
            concatenating the entity name (or otherwise configured name) with a string representation of the
            primary key value of the entity.  The rules for generating the name section of the identifier are 
            similar to <code class="literal">ClassIdentifierStrategy</code>.  The primary key value (i.e. the 
            <span class="emphasis"><em>id</em></span> of the entity) is obtained using the <code class="literal">PersistenceProvider</code>
            component, which is able to correctly determine the value regardless of which persistence implementation
            is used within the Seam application.  For entities not annotated with <code class="literal">@Entity</code>, it is
            necessary to explicitly configure the identifier strategy on the entity class itself, for example:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Identifier</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">EntityIdentifierStrategy</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span></pre><p>
            For an example of the type of identifier values generated, assume we have the following entity class:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFirstName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setFirstName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">firstName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setLastName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">lastName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            For a <code class="literal">Customer</code> instance with an <code class="literal">id</code> value of <code class="literal">1</code>,
            the value of the identifier would be "<code class="literal">Customer:1</code>".  If the entity class is annotated
            with an explicit identifier name, like so:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Identifier</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;cust&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span></pre><p>
            Then a <code class="literal">Customer</code> with an <code class="literal">id</code> value of <code class="literal">123</code>
            would have an identifier value of "<code class="literal">cust:123</code>".
          </p></div></div></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e12566"/>15.7. Permission Management</h2></div></div></div><p>
      In much the same way that Seam Security provides an Identity Management API for the management of users and roles,
      it also provides a Permissions Management API for the management of persistent user permissions, via the
      <code class="literal">PermissionManager</code> component.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e12574"/>15.7.1. PermissionManager</h3></div></div></div><p>
        The <code class="literal">PermissionManager</code> component is an application-scoped Seam component that provides a number of 
        methods for managing permissions.  Before it can be used, it must be configured with a permission store (although by
        default it will attempt to use <code class="literal">JpaPermissionStore</code> if it is available).  To explicitly configure a
        custom permission store, specify the <code class="literal">permission-store</code> property in components.xml:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security:permission-manager</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">permission-store</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{ldapPermissionStore}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
        The following table describes each of the available methods provided by <code class="literal">PermissionManager</code>: 
      </p><div class="table"><a id="d0e12595"/><p class="title"><b>Table 15.11. PermissionManager API methods</b></p><div class="table-contents"><table summary="PermissionManager API methods" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Return type</p>
              </th><th align="center">
                <p>Method</p>
              </th><th align="center">
                <p>Description</p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="literal">List&lt;Permission&gt;</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">listPermissions(Object target, String action)</code>
                </p>
              </td><td>
                <p>
                  Returns a list of <code class="literal">Permission</code> objects representing all of the permissions that
                  have been granted for the specified target and action.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">List&lt;Permission&gt;</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">listPermissions(Object target)</code>
                </p>
              </td><td>
                <p>
                  Returns a list of <code class="literal">Permission</code> objects representing all of the permissions that
                  have been granted for the specified target and action.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">grantPermission(Permission permission)</code>
                </p>
              </td><td>
                <p>
                  Persists (grants) the specified <code class="literal">Permission</code> to the backend permission store.  
                  Returns true if the operation was successful.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">grantPermissions(List&lt;Permission&gt; permissions)</code>
                </p>
              </td><td>
                <p>
                  Persists (grants) the specified list of <code class="literal">Permission</code>s to the backend permission store.  
                  Returns true if the operation was successful.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">revokePermission(Permission permission)</code>
                </p>
              </td><td>
                <p>
                  Removes (revokes) the specified <code class="literal">Permission</code> from the backend permission store.  
                  Returns true if the operation was successful.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">boolean</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">revokePermissions(List&lt;Permission&gt; permissions)</code>
                </p>
              </td><td>
                <p>
                  Removes (revokes) the specified list of <code class="literal">Permission</code>s from the backend permission store.  
                  Returns true if the operation was successful.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">List&lt;String&gt;</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">listAvailableActions(Object target)</code>
                </p>
              </td><td>
                <p>
                  Returns a list of the available actions for the specified target object.  The actions that this
                  method returns are dependent on the <code class="literal">@Permission</code> annotations configured on the 
                  target object's class.
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e12795"/>15.7.2. Permission checks for PermissionManager operations</h3></div></div></div><p>
        Invoking the methods of <code class="literal">PermissionManager</code> requires that the currently-authenticated user
        has the appropriate authorization to perform that management operation.  The following table lists the required
        permissions that the current user must have.
      </p><div class="table"><a id="d0e12803"/><p class="title"><b>Table 15.12. Permission Management Security Permissions</b></p><div class="table-contents"><table summary="Permission Management Security Permissions" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Method</p>
              </th><th align="center">
                <p>Permission Target</p>
              </th><th align="center">
                <p>Permission Action</p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="literal">listPermissions()</code>
                </p>
              </td><td>
                <p>
                  The specified <code class="literal">target</code>
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.read-permissions</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">grantPermission()</code>
                </p>
              </td><td>
                <p>
                  The target of the specified <code class="literal">Permission</code>, or each of the targets
                  for the specified list of <code class="literal">Permission</code>s (depending on which method is
                  called).
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.grant-permission</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">grantPermission()</code>
                </p>
              </td><td>
                <p>
                  The target of the specified <code class="literal">Permission</code>.
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.grant-permission</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">grantPermissions()</code>
                </p>
              </td><td>
                <p>
                  Each of the targets of the specified list of <code class="literal">Permission</code>s.
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.grant-permission</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">revokePermission()</code>
                </p>
              </td><td>
                <p>
                  The target of the specified <code class="literal">Permission</code>.
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.revoke-permission</code>
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="literal">revokePermissions()</code>
                </p>
              </td><td>
                <p>
                  Each of the targets of the specified list of <code class="literal">Permission</code>s.
                </p>
              </td><td>
                <p>
                  <code class="literal">seam.revoke-permission</code>
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e12981"/>15.8. SSL Security</h2></div></div></div><p>
      Seam includes basic support for serving sensitive pages via the HTTPS protocol.  This is easily
      configured by specifying a <code class="literal">scheme</code> for the page in <code class="literal">pages.xml</code>.
      The following example shows how the view <code class="literal">/login.xhtml</code> is configured to use
      HTTPS:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scheme</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;https&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      This configuration is automatically extended to both <code class="literal">s:link</code> and
      <code class="literal">s:button</code> JSF controls, which (when specifying the <code class="literal">view</code>)
      will also render the link using the correct protocol.  Based on the previous example, the following
      link will use the HTTPS protocol because <code class="literal">/login.xhtml</code> is configured to use it:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Login&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      Browsing directly to a view when using the <span class="emphasis"><em>incorrect</em></span> protocol will cause a
      redirect to the same view using the <span class="emphasis"><em>correct</em></span> protocol.  For example, browsing
      to a page that has <code class="literal">scheme="https"</code> using HTTP will cause a redirect to the same
      page using HTTPS.
    </p><p>
      It is also possible to configure a <span class="emphasis"><em>default scheme</em></span> for all pages. This is useful
      if you wish to use HTTPS for a only few pages. If no default scheme is specified then the normal
      behavior is to continue use the current scheme. So once the user accessed a page that required
      HTTPS, then HTTPS would continue to be used after the user navigated away to other non-HTTPS pages.
      (While this is good for security, it is not so great for performance!). To define HTTP as the
      default <code class="literal">scheme</code>, add this line to <code class="literal">pages.xml</code>:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scheme</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      Of course, if <span class="emphasis"><em>none</em></span> of the pages in your application use HTTPS then it is not
      required to specify a default scheme.
    </p><p>
      You may configure Seam to automatically invalidate the current HTTP session each time the scheme
      changes. Just add this line to <code class="literal">components.xml</code>:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:session</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">invalidate-on-scheme-change</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      This option helps make your system less vulnerable to sniffing of the session id or leakage of
      sensitive data from pages using HTTPS to other pages using HTTP.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13051"/>15.8.1. Overriding the default ports</h3></div></div></div><p>
        If you wish to configure the HTTP and HTTPS ports manually, they may be configured in 
        <code class="literal">pages.xml</code> by specifying the <code class="literal">http-port</code> and
        <code class="literal">https-port</code> attributes on the <code class="literal">pages</code> element:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pages</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pages&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pages&nbsp;http://jboss.org/schema/seam/pages-2.3.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">no-conversation-view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/home.xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">login-view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/login.xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">http-port</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;8080&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">https-port</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;8443&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13070"/>15.9. CAPTCHA</h2></div></div></div><p>
      Though strictly not part of the security API, Seam provides a built-in CAPTCHA (<span class="emphasis"><em>C</em></span>ompletely
      <span class="emphasis"><em>A</em></span>utomated <span class="emphasis"><em>P</em></span>ublic <span class="emphasis"><em>T</em></span>uring test to tell
      <span class="emphasis"><em>C</em></span>omputers and <span class="emphasis"><em>H</em></span>umans <span class="emphasis"><em>A</em></span>part) algorithm to
      prevent automated processes from interacting with your application.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13096"/>15.9.1. Configuring the CAPTCHA Servlet</h3></div></div></div><p>
        To get up and running, it is necessary to configure the Seam Resource Servlet, which will provide the Captcha
        challenge images to your pages.  This requires the following entry in <code class="literal">web.xml</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamResourceServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/seam/resource/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13106"/>15.9.2. Adding a CAPTCHA to a form</h3></div></div></div><p>
        Adding a CAPTCHA challenge to a form is extremely easy. Here's an example:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:graphicImage</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/seam/resource/captcha&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;verifyCaptcha&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{captcha.response}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validate</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;verifyCaptcha&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        That's all there is to it.  The <code class="literal">graphicImage</code> control displays the CAPTCHA challenge,
        and the <code class="literal">inputText</code> receives the user's response. The response is automatically
        validated against the CAPTCHA when the form is submitted.
      </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13121"/>15.9.3. Customising the CAPTCHA algorithm</h3></div></div></div><p>
        You may customize the CAPTCHA algorithm by overriding the built-in component:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;org.jboss.seam.captcha.captcha&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HitchhikersCaptcha</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Captcha</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span><span class="java_plain">&nbsp;@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;init</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setChallenge</span><span class="java_separator">(</span><span class="java_literal">&quot;What&nbsp;is&nbsp;the&nbsp;answer&nbsp;to&nbsp;life,&nbsp;the&nbsp;universe&nbsp;and&nbsp;everything?&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCorrectResponse</span><span class="java_separator">(</span><span class="java_literal">&quot;42&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">BufferedImage</span><span class="java_plain">&nbsp;renderChallenge</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BufferedImage</span><span class="java_plain">&nbsp;img&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">super</span><span class="java_separator">.</span><span class="java_plain">renderChallenge</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img</span><span class="java_separator">.</span><span class="java_plain">getGraphics</span><span class="java_separator">().</span><span class="java_plain">drawOval</span><span class="java_separator">(</span><span class="java_literal">5</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">3</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">60</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">14</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">add&nbsp;an&nbsp;obscuring&nbsp;decoration</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;img</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13128"/>15.10. Security Events</h2></div></div></div><p>
      The following table describes a number of events (see <a class="xref" href="#events" title="Chapter 6. Events, interceptors and exception handling">Chapter 6, <i>Events, interceptors and exception handling</i></a>) raised by Seam Security
      in response to certain security-related events.
    </p><div class="table"><a id="d0e13135"/><p class="title"><b>Table 15.13. Security Events</b></p><div class="table-contents"><table summary="Security Events" border="1"><colgroup><col/><col/></colgroup><thead><tr><th align="center">
              <p>Event Key</p>
            </th><th align="center">
              <p>Description</p>
            </th></tr></thead><tbody><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.loginSuccessful</code>
              </p>
            </td><td>
              <p>
                Raised when a login attempt is successful.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.loginFailed</code>
              </p>
            </td><td>
              <p>
                Raised when a login attempt fails.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.alreadyLoggedIn</code>
              </p>
            </td><td>
              <p>
                Raised when a user that is already authenticated attempts to log in again.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.notLoggedIn</code>
              </p>
            </td><td>
              <p>
                Raised when a security check fails when the user is not logged in.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.notAuthorized</code>
              </p>
            </td><td>
              <p>
                Raised when a security check fails when the user is logged in however doesn't have sufficient privileges.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.preAuthenticate</code>
              </p>
            </td><td>
              <p>
                Raised just prior to user authentication.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.postAuthenticate</code>
              </p>
            </td><td>
              <p>
                Raised just after user authentication.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.loggedOut</code>
              </p>
            </td><td>
              <p>
                Raised after the user has logged out.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.credentialsUpdated</code>
              </p>
            </td><td>
              <p>
                Raised when the user's credentials have been changed.
              </p>
            </td></tr><tr><td>
              <p>
                <code class="literal">org.jboss.seam.security.rememberMe</code>
              </p>
            </td><td>
              <p>
                Raised when the Identity's rememberMe property is changed.
              </p>
            </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13294"/>15.11. Run As</h2></div></div></div><p>
        Sometimes it may be necessary to perform certain operations with elevated privileges, such
        as creating a new user account as an unauthenticated user.  Seam Security supports such a
        mechanism via the <code class="literal">RunAsOperation</code> class.  This class allows either the
        <code class="literal">Principal</code> or <code class="literal">Subject</code>, or the user's roles to be
        overridden for a single set of operations.
    </p><p>
      The following code example demonstrates how <code class="literal">RunAsOperation</code> is used, by
      calling its <code class="literal">addRole()</code> method to provide a set of roles to masquerade
      as for the duration of the operation.  The <code class="literal">execute()</code> method contains the
      code that will be executed with the elevated privileges.
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">RunAsOperation</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;execute</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executePrivilegedOperation</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}.</span><span class="java_plain">addRole</span><span class="java_separator">(</span><span class="java_literal">&quot;admin&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">run</span><span class="java_separator">();</span></pre><p>
        In a similar way, the <code class="literal">getPrincipal()</code> or <code class="literal">getSubject()</code>
        methods can also be overriden to specify the <code class="literal">Principal</code> and 
        <code class="literal">Subject</code> instances to use for the duration of the operation.
        Finally, the <code class="literal">run()</code> method is used to carry out the 
        <code class="literal">RunAsOperation</code>.
    </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13341"/>15.12. Extending the Identity component</h2></div></div></div><p>
      Sometimes it might be necessary to extend the Identity component if your application has
      special security requirements.  The following example (contrived, as credentials would normally
      be handled by the <code class="literal">Credentials</code> component instead) shows an extended Identity 
      component with an additional <code class="literal">companyCode</code> field.  The install precedence of <code class="literal">APPLICATION</code>
      ensures that this extended Identity gets installed in preference to the built-in Identity.
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;org.jboss.seam.security.identity&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Install</span><span class="java_separator">(</span><span class="java_plain">precedence&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;APPLICATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">BypassInterceptors</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Startup</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomIdentity</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Identity</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">LogProvider</span><span class="java_plain">&nbsp;log&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Logging</span><span class="java_separator">.</span><span class="java_plain">getLogProvider</span><span class="java_separator">(</span><span class="java_type">CustomIdentity</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;companyCode</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCompanyCode</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;companyCode</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCompanyCode</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;companyCode</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">companyCode&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;companyCode</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;login</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">info</span><span class="java_separator">(</span><span class="java_literal">&quot;######&nbsp;CUSTOM&nbsp;LOGIN&nbsp;CALLED&nbsp;######&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">super</span><span class="java_separator">.</span><span class="java_plain">login</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
        Note that an <code class="literal">Identity</code> component must be marked <code class="literal">@Startup</code>, so that it is
        available immediately after the <code class="literal">SESSION</code> context begins.  Failing to do this may render
        certain Seam functionality inoperable in your application.
      </p></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13369"/>15.13. OpenID</h2></div></div></div><p>
            OpenID is a community standard for external web-based authentication. The basic
            idea is that any web application can supplement (or replace) its local handling of
            authentication by delegating responsibility to an external OpenID server of the user's
            choose.  This benefits the user, who no longer has to remember a name and password for 
            every web application he uses, and the developer, who is relieved of some of the burden of 
            maintaining a complex authentication system.  
        </p><p>When using OpenID, the user selects an OpenID provider, and the provider assigns the user
            an OpenID.  The id will take the form of a URL, for example <code class="literal">http://maximoburrito.myopenid.com</code> however,
            it's acceptable to leave off the <code class="literal">http://</code> part of the identifier when logging into a site.  The web application
            (known as a relying party in OpenID-speak) determines which OpenID server to contact and redirects the user to the remote
            site for authentication.   Upon successful authentication the user is given
            the (cryptographically secure) token proving his identity and is redirected back to the original web application.The 
            local web application can then be sure the user accessing the application controls the OpenID he presented.
        </p><p>
            It's important to realize at this
            point that authentication does not imply authorization.  The web application still needs to make a determination of how to 
            use that information.  The web application could treat the user as instantly logged in and give full access to the system or
            it could try and map the presented OpenID to a local user account, prompting the user to register if he hasn't already.
            The choice of how to handle the OpenID is left as a design decision for the local application.  
        </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13384"/>15.13.1. Configuring OpenID</h3></div></div></div><p>
                Seam uses the openid4java package and requires four additional JARs to make use of the Seam integration.  These 
                are: <code class="literal">htmlparser.jar</code>, <code class="literal">openid4java.jar</code>, <code class="literal">openxri-client.jar</code> 
                and <code class="literal">openxri-syntax.jar</code>.
            </p><p>
                OpenID processing requires the use of the <code class="literal">OpenIdPhaseListener</code>, which should be added to your 
                <code class="literal">faces-config.xml</code> file.  The phase listener processes the callback from the OpenID provider, allowing
                re-entry into the local application.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">phase-listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.security.openid.OpenIdPhaseListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">phase-listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                With this configuration, OpenID support is available to your application.
                The OpenID support component, <code class="literal">org.jboss.seam.security.openid.openid</code>, is installed automatically if the openid4java
                classes are on the classpath.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13416"/>15.13.2. Presenting an OpenIdDLogin form</h3></div></div></div><p>
                 To initiate an OpenID login, you can present a simply form to the user asking for the user's OpenID.  The <code class="literal">#{openid.id}</code> 
                  value 
                 accepts the user's OpenID and the <code class="literal">#{openid.login}</code> action initiates an authentication request.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{openid.id}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{openid.login}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;OpenID&nbsp;Login&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                When the user submits the login form, he will be redirected to his OpenID provider. The user will eventually 
                return to your application through the Seam pseudo-view <code class="literal">/openid.xhtml</code>, which is
                provided by the <code class="literal">OpenIdPhaseListener</code>. Your application can handle the OpenID response by means 
                of a <code class="literal">pages.xml</code> navigation from that view, just as if the user had never left your application.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13440"/>15.13.3. Logging in immediately</h3></div></div></div><p> The simplest strategy is to simply login the user immediately.  The following navigation rule shows how to handle this using
        the <code class="literal">#{openid.loginImmediately()}</code> action.
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/openid.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">navigation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">evaluate</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{openid.loginImmediately()}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">OpenID&nbsp;login&nbsp;successful...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rule</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">if-outcome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">redirect</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/main.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">OpenID&nbsp;login&nbsp;rejected...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">redirect</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rule</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>This <code class="literal">loginImmediately()</code> action checks to see if the OpenID is valid.  If it is valid, it adds an
            OpenIDPrincipal to the identity component, marks the user as logged in (i.e. <code class="literal">#{identity.loggedIn}</code> will be true)
            and returns true.  If the OpenID was not validated, the method returns false, and the user re-enters the application un-authenticated.
            If the user's OpenID is valid, it will be accessible using the expression <code class="literal">#{openid.validatedId}</code> and 
            <code class="literal">#{openid.valid}</code> will be true.
        </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13464"/>15.13.4. Deferring login</h3></div></div></div><p>
                You may not want the user to be immediately logged in to your application.  In that case, your navigation
                should check the <code class="literal">#{openid.valid}</code> property and redirect the user to a local registration or processing
                page.  Actions you might take would be asking for more information and creating a local user account or presenting a captcha 
                to avoid programmatic registrations.  When you are done processing, if you want to log the user in, you can call
                the <code class="literal">loginImmediately</code> method, either through EL as shown previously or by directly interaction with the 
                <code class="literal">org.jboss.seam.security.openid.OpenId</code> component.  Of course, nothing prevents you from writing custom 
                code to interact with the Seam identity component on your own for even more customized behaviour.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13478"/>15.13.5. Logging out</h3></div></div></div><p>
                Logging out (forgetting an OpenID association) is done by calling <code class="literal">#{openid.logout}</code>.  If you
                are not using Seam security, you can call this method directly.  If you are using Seam security, you should
                continue to use <code class="literal">#{identity.logout}</code> and install an event handler to capture the logout event, calling 
                the OpenID logout method.
                
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">event</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.security.loggedOut&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">execute</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{openid.logout}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">event</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
</pre><p>It's important that you do not leave this out or the user will not be able to login again in the same session.</p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="i18n"/>Chapter 16. Internationalization, localization and themes</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e13498">16.1. Internationalizing your app</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e13508">16.1.1. Application server configuration</a></span></dt><dt><span class="section"><a href="#d0e13524">16.1.2. Translated application strings</a></span></dt><dt><span class="section"><a href="#d0e13552">16.1.3. Other encoding settings</a></span></dt></dl></dd><dt><span class="section"><a href="#locales">16.2. Locales</a></span></dt><dt><span class="section"><a href="#labels">16.3. Labels</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e13649">16.3.1. Defining labels</a></span></dt><dt><span class="section"><a href="#d0e13722">16.3.2. Displaying labels</a></span></dt><dt><span class="section"><a href="#d0e13748">16.3.3. Faces messages</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e13766">16.4. Timezones</a></span></dt><dt><span class="section"><a href="#d0e13795">16.5. Themes</a></span></dt><dt><span class="section"><a href="#d0e13840">16.6. Persisting locale and theme preferences via cookies</a></span></dt></dl></div><p>Seam makes it easy to build internationalized applications. 
	First, let's walk through all the stages needed to 
	internationalize and localize your app. Then we'll take a look at 
	the components Seam bundles.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13498"/>16.1. Internationalizing your app</h2></div></div></div><p>A JEE application consists of many components and all of them 
		must be configured properly for your application to be 
		localized.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Note that all i18n features in Seam work only in JSF 
			context.</p></div><p>Starting at the bottom, the first step is to ensure that your 
		database server and client is using the correct character encoding 
		for your locale. Normally you'll want to use UTF-8. How to do 
		this is outside the scope of this tutorial.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13508"/>16.1.1. Application server configuration</h3></div></div></div><p>To ensure that the application server receives the request 
			parameters in the correct encoding from client requests you have to 
			configure the tomcat connector. If you use JBoss AS, add the system 
			properties <span class="property">
			org.apache.catalina.connector.URI_ENCODING</span> and <span class="property">
			org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING</span> 
			to the server configuration. For JBoss AS 7.1.1 change <code class="filename">
			${JBOSS_HOME}/standalone/configuration/standalone.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">system-properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.apache.catalina.connector.URI_ENCODING&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;UTF-8&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">system-properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13524"/>16.1.2. Translated application strings</h3></div></div></div><p>You'll also need localized strings for all the <span class="emphasis"><em>
			messages</em></span> in your application (for example field labels on 
			your views). First you need to ensure that your resource bundle is 
			encoded using the desired character encoding. By default ASCII is 
			used. Although ASCII is enough for many languages, it doesn't 
			provide characters for all languages.</p><p>Resource bundles must be created in ASCII, or use Unicode 
			escape codes to represent Unicode characters. Since you don't 
			compile a property file to byte code, there is no way to tell the 
			JVM which character set to use. So you must use either ASCII 
			characters or escape characters not in the ASCII character set. You 
			can represent a Unicode character in any Java file using \uXXXX, 
			where XXXX is the hexadecimal representation of the character.</p><p>You can write your translation of labels (
			<a class="xref" href="#labels" title="16.3. Labels">Section 16.3, “Labels”</a>) to your messages resource bundle in the 
			native encoding and then convert the content of the file into the 
			escaped format through the tool <code class="literal">native2ascii</code> 
			provided in the JDK. This tool will convert a file written in your 
			native encoding to one that represents non-ASCII characters as 
			Unicode escape sequences.</p><p>Usage of this tool is described 
			<a class="ulink" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/index.html#intl">
			here for Java 5</a> or 
			<a class="ulink" href="http://java.sun.com/javase/6/docs/technotes/tools/#intl">
			here for Java 6</a>. For example, to convert a file from 
			UTF-8:</p><pre class="programlisting"><code class="prompt">$ native2ascii -encoding UTF-8 messages_cs.properties &gt; messages_cs_escaped.properties</code></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13552"/>16.1.3. Other encoding settings</h3></div></div></div><p>We need to make sure that the view displays your localized 
			data and messages using the correct character set and also any data 
			submitted uses the correct encoding.</p><p>To set the display character encoding, you need to use the 
			<code class="literal">&lt;f:view locale="cs_CZ"/&gt;</code> tag 
			(here we tell JSF to use the Czech locale). You may want to change 
			the encoding of the xml document itself if you want to embed 
			localized strings in the xml. To do this alter the encoding 
			attribute in xml declaration <code class="literal">&lt;?xml 
			version="1.0" encoding="UTF-8"?&gt;</code> as 
			required.</p><p>Also JSF/Facelets should submit any requests using the 
			specified character encoding, but to make sure any requests that 
			don't specify an encoding you can force the request encoding 
			using a servlet filter. Configure this in <code class="literal">
			components.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:character-encoding-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">encoding</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;UTF-8&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">override-client</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="locales"/>16.2. Locales</h2></div></div></div><p>Each user login session has an associated instance of <code class="literal">
		java.util.Locale</code> (available to the application as a 
		component named <code class="literal">locale</code>). Under normal 
		circumstances, you won't need to do any special configuration to 
		set the locale. Seam just delegates to JSF to determine the active 
		locale:</p><div class="itemizedlist"><ul><li><p>If there is a locale associated with the HTTP request (the 
				browser locale), and that locale is in the list of supported 
				locales from <code class="literal">faces-config.xml</code>, use that locale 
				for the rest of the session.</p></li><li><p>Otherwise, if a default locale was specified in the <code class="literal">
				faces-config.xml</code>, use that locale for the rest of the 
				session.</p></li><li><p>Otherwise, use the default locale of the server.</p></li></ul></div><p>It is <span class="emphasis"><em>possible</em></span> to set the locale manually 
		via the Seam configuration properties <code class="literal">
		org.jboss.seam.international.localeSelector.language</code>, 
		<code class="literal">
		org.jboss.seam.international.localeSelector.country</code> and 
		<code class="literal">
		org.jboss.seam.international.localeSelector.variant</code>, but we 
		can't think of any good reason to ever do this.</p><p>It is, however, useful to allow the user to set the locale 
		manually via the application user interface. Seam provides built-in 
		functionality for overriding the locale determined by the algorithm 
		above. All you have to do is add the following fragment to a form in 
		your JSP or Facelets page:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.language}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;English&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;en&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Deutsch&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;de&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Francais&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fr&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.select}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages['ChangeLanguage']}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Or, if you want a list of all supported locales from <code class="literal">
		faces-config.xml</code>, just use:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.localeString}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.supportedLocales}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.select}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages['ChangeLanguage']}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>When the user selects an item from the drop-down, then clicks 
		the command button, the Seam and JSF locales will be overridden for 
		the rest of the session.</p><p>The brings us to the question of where the supported locales 
		are defined. Typically, you provide a list of locales for which you 
		have matching resource bundles in the <code class="literal">
		&lt;locale-config&gt;</code> element of the JSF configuration file 
		(/META-INF/faces-config.xml). However, you have learned to appreciate 
		that Seam's component configuration mechanism is more powerful 
		than what is provided in Java EE. For that reason, you can configure 
		the supported locales, and the default locale of the server, using 
		the built-in component named <code class="literal">
		org.jboss.seam.international.localeConfig</code>. To use it, you 
		first declare an XML namespace for Seam's international package 
		in the Seam component descriptor. You then define the default locale 
		and supported locales as follows:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">international:locale-config</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">default-locale</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fr_CA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">supported-locales</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;en&nbsp;fr_CA&nbsp;fr_FR&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Naturally, if you pronounce that you support a locale, you 
		better provide a resource bundle to match it! Up next, you'll 
		learn how to define the language-specific labels.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="labels"/>16.3. Labels</h2></div></div></div><p>JSF supports internationalization of user interface labels and 
		descriptive text via the use of <code class="literal">&lt;f:loadBundle 
		/&gt;</code>. You can use this approach in Seam applications. 
		Alternatively, you can take advantage of the Seam <code class="literal">
		messages</code> component to display templated labels with 
		embedded EL expressions.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13649"/>16.3.1. Defining labels</h3></div></div></div><p>Seam provides a <code class="literal">java.util.ResourceBundle</code> 
			(available to the application as a <code class="literal">
			org.jboss.seam.core.resourceBundle</code>). You'll need to 
			make your internationalized labels available via this special 
			resource bundle. By default, the resource bundle used by Seam is 
			named <code class="literal">messages</code> and so you'll need to define 
			your labels in files named <code class="literal">messages.properties</code>, 
			<code class="literal">messages_en.properties</code>, <code class="literal">
			messages_en_AU.properties</code>, etc. These files usually belong 
			in the <code class="literal">WEB-INF/classes</code> directory.</p><p>So, in <code class="literal">messages_en.properties</code>:</p><pre class="programlisting">Hello=Hello</pre><p>And in <code class="literal">messages_en_AU.properties</code>:</p><pre class="programlisting">Hello=G'day</pre><p>You can select a different name for the resource bundle by 
			setting the Seam configuration property named <code class="literal">
			org.jboss.seam.core.resourceLoader.bundleNames</code>. You can 
			even specify a list of resource bundle names to be searched (depth 
			first) for messages.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:resource-loader</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:bundle-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">mycompany_messages</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">standard_messages</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">core:bundle-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">core:resource-loader</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>If you want to define a message just for a particular page, 
			you can specify it in a resource bundle with the same name as the 
			JSF view id, with the leading <code class="literal">/</code> and trailing file 
			extension removed. So we could put our message in <code class="literal">
			welcome/hello_en.properties</code> if we only needed to display 
			the message on <code class="literal">/welcome/hello.jsp</code>.</p><p>You can even specify an explicit bundle name in <code class="literal">
			pages.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/welcome/hello.jsp&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bundle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;HelloMessages&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Then we could use messages defined in <code class="literal">
			HelloMessages.properties</code> on <code class="literal">
			/welcome/hello.jsp</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13722"/>16.3.2. Displaying labels</h3></div></div></div><p>If you define your labels using the Seam resource bundle, 
			you'll be able to use them without having to type <code class="literal">
			&lt;f:loadBundle ... /&gt;</code> on every page. Instead, you can 
			simply type:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages['Hello']}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>or:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages.Hello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Even better, the messages themselves may contain EL 
			expressions:</p><pre class="programlisting">Hello=Hello, #{user.firstName} #{user.lastName}</pre><pre class="programlisting">Hello=G'day, #{user.firstName}</pre><p>You can even use the messages in your code:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Map</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;messages</span><!-- <br/> --><span class="java_separator">;</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;#{messages['Hello']}&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_plain">&nbsp;helloMessage</span><!-- <br/> --><span class="java_separator">;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13748"/>16.3.3. Faces messages</h3></div></div></div><p>The <code class="literal">facesMessages</code> component is a 
			super-convenient way to display success or failure messages to the 
			user. The functionality we just described also works for faces 
			messages:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;hello&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Hello</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_plain">&nbsp;facesMessages</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;sayIt</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">addFromResourceBundle</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>This will display <code class="literal">Hello, Gavin King</code> or 
			<code class="literal">G'day, Gavin</code>, depending upon the user's 
			locale.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13766"/>16.4. Timezones</h2></div></div></div><p>There is also a session-scoped instance of <code class="literal">
		java.util.Timezone</code>, named <code class="literal">
		org.jboss.seam.international.timezone</code>, and a Seam component 
		for changing the timezone named <code class="literal">
		org.jboss.seam.international.timezoneSelector</code>. By default, 
		the timezone is the default timezone of the server. Unfortunately, 
		the JSF specification says that all dates and times should be assumed 
		to be UTC, and displayed as UTC, unless a timezone is explicitly 
		specified using <code class="literal">&lt;f:convertDateTime&gt;</code>. This is 
		an extremely inconvenient default behavior.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				You can use application parameter to set up different default time 
				zone for JSF 2 in 
				<code class="filename">web.xml</code>.
            </p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><p>Seam overrides this behavior, and defaults all dates and times 
		to the Seam timezone. </p><p>Seam also provides a default date converter to convert a string 
		value to a date. This saves you from having to specify a converter on 
		input fields that are simply capturing a date. The pattern is 
		selected according the the user's locale and the time zone is 
		selected as described above.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13795"/>16.5. Themes</h2></div></div></div><p>Seam applications are also very easily skinnable. The theme API 
		is very similar to the localization API, but of course these two 
		concerns are orthogonal, and some applications support both 
		localization and themes.</p><p>First, configure the set of supported themes:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cookie-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">accessible</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">printable</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Note that the first theme listed is the default theme.</p><p>Themes are defined in a properties file with the same name as 
		the theme. For example, the <code class="literal">default</code> theme is 
		defined as a set of entries in <code class="literal">default.properties</code>. 
		For example, <code class="literal">default.properties</code> might 
		define:</p><pre class="programlisting">css ../screen.css
template /template.xhtml</pre><p>Usually the entries in a theme resource bundle will be paths to 
		CSS styles or images and names of facelets templates (unlike 
		localization resource bundles which are usually text).</p><p>Now we can use these entries in our JSP or facelets pages. For 
		example, to theme the stylesheet in a facelets page:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{theme.css}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Or, when the page definition resides in a subdirectory:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{facesContext.externalContext.requestContextPath}#{theme.css}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Most powerfully, facelets lets us theme the template used by a 
		<code class="literal">&lt;ui:composition&gt;</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:composition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:ui</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{theme.template}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Just like the locale selector, there is a built-in theme 
		selector to allow the user to freely switch themes:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{themeSelector.theme}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{themeSelector.themes}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{themeSelector.select}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Select&nbsp;Theme&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13840"/>16.6. Persisting locale and theme preferences via cookies</h2></div></div></div><p>The locale selector, theme selector and timezone selector all 
		support persistence of locale and theme preference to a cookie. 
		Simply set the <code class="literal">cookie-enabled</code> property in <code class="literal">
		components.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cookie-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">accessible</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">printable</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">international:locale-selector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cookie-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="text"/>Chapter 17. Seam Text</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e13864">17.1. Basic fomatting</a></span></dt><dt><span class="section"><a href="#d0e13907">17.2. Entering code and text with special characters</a></span></dt><dt><span class="section"><a href="#d0e13949">17.3. Links</a></span></dt><dt><span class="section"><a href="#d0e13962">17.4. Entering HTML</a></span></dt><dt><span class="section"><a href="#d0e13975">17.5. Using the SeamTextParser</a></span></dt></dl></div><p>
        Collaboration-oriented websites require a human-friendly markup language for easy entry
        of formatted text in forum posts, wiki pages, blogs, comments, etc. Seam provides the
        <code class="literal">&lt;s:formattedText/&gt;</code> control for display of formatted text that
        conforms to the <span class="emphasis"><em>Seam Text</em></span> language. Seam Text is implemented using
        an ANTLR-based parser. You don't need to know anything about ANTLR to use it, however.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13864"/>17.1. Basic fomatting</h2></div></div></div><p>
            Here is a simple example:
        </p><pre class="programlisting">It's easy to make *emphasis*, |monospace|,
~deleted text~, super^scripts^ or _underlines_.</pre><p>
            If we display this using <code class="literal">&lt;s:formattedText/&gt;</code>, we will get
            the following HTML produced:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">It's&nbsp;easy&nbsp;to&nbsp;make&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">emphasis</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">,&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tt</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">monospace</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tt</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">del</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">deleted&nbsp;text</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">del</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">,&nbsp;super</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">scripts</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;or&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">u</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">underlines</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">u</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">.</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            We can use a blank line to indicate a new paragraph, and <code class="literal">+</code> to
            indicate a heading:
        </p><pre class="programlisting">+This is a big heading
You /must/ have some text following a heading!
 
++This is a smaller heading
This is the first paragraph. We can split it across multiple 
lines, but we must end it with a blank line.

This is the second paragraph.</pre><p>
            (Note that a simple newline is ignored, you need an additional blank line to wrap text into a new paragraph.)
           This is the HTML that results:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;is&nbsp;a&nbsp;big&nbsp;heading</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">You&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">must</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;have&nbsp;some&nbsp;text&nbsp;following&nbsp;a&nbsp;heading!</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h2</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;is&nbsp;a&nbsp;smaller&nbsp;heading</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h2</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">This&nbsp;is&nbsp;the&nbsp;first&nbsp;paragraph.&nbsp;We&nbsp;can&nbsp;split&nbsp;it&nbsp;across&nbsp;multiple&nbsp;</span><br />
<span class="xml_plain">lines,&nbsp;but&nbsp;we&nbsp;must&nbsp;end&nbsp;it&nbsp;with&nbsp;a&nbsp;blank&nbsp;line.</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">This&nbsp;is&nbsp;the&nbsp;second&nbsp;paragraph.</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Ordered lists are created using the <code class="literal">#</code> character. Unordered lists
            use the <code class="literal">=</code> character:
        </p><pre class="programlisting">An ordered list:
        
#first item
#second item
#and even the /third/ item

An unordered list:

=an item
=another item</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">An&nbsp;ordered&nbsp;list:</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ol</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">first&nbsp;item</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">second&nbsp;item</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">and&nbsp;even&nbsp;the&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">third</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;item</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ol</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">An&nbsp;unordered&nbsp;list:</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ul</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">an&nbsp;item</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">another&nbsp;item</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ul</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Quoted sections should be surrounded in double quotes:
        </p><pre class="programlisting">The other guy said:
        
"Nyeah nyeah-nee 
/nyeah/ nyeah!"

But what do you think he means by "nyeah-nee"?</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">The&nbsp;other&nbsp;guy&nbsp;said:</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">q</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Nyeah&nbsp;nyeah-nee</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">nyeah</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;nyeah!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">q</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">But&nbsp;what&nbsp;do&nbsp;you&nbsp;think&nbsp;he&nbsp;means&nbsp;by&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">q</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">nyeah-nee</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">q</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">?</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13907"/>17.2. Entering code and text with special characters</h2></div></div></div><p>
            Special characters such as <code class="literal">*</code>, <code class="literal">|</code>
            and <code class="literal">#</code>, along with HTML characters such as
            <code class="literal">&lt;</code>, <code class="literal">&gt;</code> and <code class="literal">&amp;</code> 
            may be escaped using <code class="literal">\</code>:
        </p><pre class="programlisting">You can write down equations like 2\*3\=6 and HTML tags
like \&lt;body\&gt; using the escape character: \\.</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">You&nbsp;can&nbsp;write&nbsp;down&nbsp;equations&nbsp;like&nbsp;2*3=6&nbsp;and&nbsp;HTML&nbsp;tags</span><br />
<span class="xml_plain">like&nbsp;&amp;lt;body&amp;gt;&nbsp;using&nbsp;the&nbsp;escape&nbsp;character:&nbsp;\.</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            And we can quote code blocks using backticks:
        </p><pre class="programlisting">My code doesn't work:

`for (int i=0; i&lt;100; i--)
{
    doSomething();
}`

Any ideas?</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">My&nbsp;code&nbsp;doesn't&nbsp;work:</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">pre</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">for&nbsp;(int&nbsp;i=0;&nbsp;i&amp;lt;100;&nbsp;i--)</span><br />
<span class="xml_plain">{</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;doSomething();</span><br />
<span class="xml_plain">}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">pre</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">Any&nbsp;ideas?</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
          Note that inline monospace formatting always escapes (most monospace formatted text is in fact
          code or tags with many special characters). So you can, for example, write:
       </p><pre class="programlisting">This is a |&lt;tag attribute="value"/&gt;| example.</pre><p>
          without escaping any of the characters inside the monospace bars. The downside is that
          you can't format inline monospace text in any other way (italics, underscore, and so on).
       </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13949"/>17.3. Links</h2></div></div></div><p>
            A link may be created using the following syntax:
        </p><pre class="programlisting">Go to the Seam website at [=&gt;http://jboss.org/schema/seam].</pre><p>
            Or, if you want to specify the text of the link:
        </p><pre class="programlisting">Go to [the Seam website=&gt;http://jboss.org/schema/seam].</pre><p>
            For advanced users, it is even possible to customize the Seam Text parser to understand
            wikiword links written using this syntax.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13962"/>17.4. Entering HTML</h2></div></div></div><p>
            Text may even include a certain limited subset of HTML (don't worry, the subset is chosen
            to be safe from cross-site scripting attacks). This is useful for creating links:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">You&nbsp;might&nbsp;want&nbsp;to&nbsp;link&nbsp;to&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">something</span><br />
<span class="xml_plain">cool</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">,&nbsp;or&nbsp;even&nbsp;include&nbsp;an&nbsp;image:&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">img</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/logo.jpg&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
           And for creating tables:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">table</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">First&nbsp;name:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Gavin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Last&nbsp;name:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">King</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">table</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            But you can do much more if you want!
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13975"/>17.5. Using the SeamTextParser</h2></div></div></div><p>
           The <code class="literal">&lt;s:formattedText/&gt;</code> JSF component internally uses the
           <code class="literal">org.jboss.seam.text.SeamTextParser</code>. You can use that class directly and implement
           your own text parsing, rendering, or HTML sanitation procedure. This is especially useful if you have
           a custom frontend for entering rich text, such as a Javascript-based HTML editor, and you want to validate
           user input to protect your website against Cross-Site Scripting (XSS) attacks. Another usecase
           are custom wiki text parsing and rendering engines.
       </p><p>
           The following example defines a custom text parser that overrides the default HTML sanitizer:
       </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MyTextParser</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">extends</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">SeamTextParser</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">MyTextParser</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;myText</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">super</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SeamTextLexer</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">StringReader</span><span class="java_separator">(</span><span class="java_plain">myText</span><span class="java_separator">)));</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSanitizer</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">DefaultSanitizer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;validateHtmlElement</span><span class="java_separator">(</span><span class="java_type">Token</span><span class="java_plain">&nbsp;element</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SemanticException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;TODO</span><span class="java_operator">:</span><span class="java_plain">&nbsp;I&nbsp;want&nbsp;to&nbsp;validate&nbsp;HTML&nbsp;elements&nbsp;myself</span><span class="java_operator">!</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Customizes</span><span class="java_plain">&nbsp;rendering&nbsp;of&nbsp;</span><span class="java_type">Seam</span><span class="java_plain">&nbsp;text&nbsp;links&nbsp;such&nbsp;as&nbsp;</span><span class="java_separator">[</span><span class="java_type">Some</span><span class="java_plain">&nbsp;</span><span class="java_type">Text</span><span class="java_operator">=&gt;</span><span class="java_plain">http</span><span class="java_operator">://</span><span class="java_plain">example</span><span class="java_separator">.</span><span class="java_plain">com</span><span class="java_separator">]</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;linkTag</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;descriptionText</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;linkText</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;&lt;a&nbsp;href=\&quot;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;linkText&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;\&quot;&gt;My&nbsp;Custom&nbsp;Link:&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;descriptionText&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;&lt;/a&gt;&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Renders</span><span class="java_plain">&nbsp;a&nbsp;</span><span class="java_operator">&lt;</span><span class="java_plain">p</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;or&nbsp;equivalent&nbsp;tag</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;paragraphOpenTag</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;&lt;p&nbsp;class=\&quot;myCustomStyle\&quot;&gt;&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;parse</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">ANTLRException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startRule</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
           The <code class="literal">linkTag()</code> and <code class="literal">paragraphOpenTag()</code> methods are just some of many
           you can override to customize rendered output. These methods generally return <code class="literal">String</code>.
           See the Javadoc for more details.
       </p><p>
           Also consult the Javadoc of <code class="literal">org.jboss.seam.text.SeamTextParser.DefaultSanitizer</code> for
           more information on what HTML elements, attributes, and attribute values or filtered by default.
       </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext"/>Chapter 18. iText PDF generation</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#itext.intro">18.1. Using PDF Support</a></span></dt><dd><dl><dt><span class="section"><a href="#itext.document">18.1.1. Creating a document</a></span></dt><dt><span class="section"><a href="#itext.text">18.1.2. Basic Text Elements</a></span></dt><dt><span class="section"><a href="#itext.header">18.1.3. Headers and Footers</a></span></dt><dt><span class="section"><a href="#itext.chapters">18.1.4. Chapters and Sections</a></span></dt><dt><span class="section"><a href="#itext.list">18.1.5. Lists</a></span></dt><dt><span class="section"><a href="#itext.tables">18.1.6. Tables</a></span></dt><dt><span class="section"><a href="#itext.constant">18.1.7. Document Constants</a></span></dt></dl></dd><dt><span class="section"><a href="#itext.charting">18.2. Charting</a></span></dt><dt><span class="section"><a href="#itext.barcodes">18.3. Bar codes</a></span></dt><dt><span class="section"><a href="#itext.fillinforms">18.4. Fill-in-forms</a></span></dt><dt><span class="section"><a href="#itext.swingcomponents">18.5. Rendering Swing/AWT components</a></span></dt><dt><span class="section"><a href="#itext.configuration">18.6. Configuring iText</a></span></dt><dt><span class="section"><a href="#itext.links">18.7. Further documentation</a></span></dt></dl></div><p>Seam now includes a component set for generating documents using iText. The primary focus of Seam's iText
        document support is for the generation of PDF documents, but Seam also offers basic support for RTF document
        generation.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.intro"/>18.1. Using PDF Support</h2></div></div></div><p>iText support is provided by <code class="literal">jboss-seam-pdf.jar</code>. This JAR contains the iText JSF
            controls, which are used to construct views that can render to PDF, and the DocumentStore component, which
            serves the rendered documents to the user. To include PDF support in your application, put
                <code class="literal">jboss-seam-pdf.jar</code> in your <code class="literal">WEB-INF/lib</code> directory along with the
            iText JAR file. There is no further configuration needed to use Seam's iText support. </p><p> The Seam iText module requires the use of Facelets as the view technology. Future versions of the library
            may also support the use of JSP. Additionally, it requires the use of the seam-ui package.</p><p> The <code class="literal">examples/itext</code> project contains an example of the PDF support in action. It
            demonstrates proper deployment packaging, and it contains a number examples that demonstrate the key PDF
            generation features current supported. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.document"/>18.1.1. Creating a document</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:document&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p> Documents are generated by facelet XHTML files using tags in the
                                        <code class="literal">http://jboss.org/schema/seam/pdf</code> namespace. Documents
                                    should always have the <code class="literal">document</code> tag at the root of the document.
                                    The <code class="literal">document</code> tag prepares Seam to generate a document into the
                                    DocumentStore and renders an HTML redirect to that stored content.</p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>

                                <div class="itemizedlist"><ul><li><p>
                                            <code class="literal">type</code> — The type of the document to be produced.
                                            Valid values are <code class="literal">PDF</code>, <code class="literal">RTF</code> and
                                                <code class="literal">HTML</code> modes. Seam defaults to PDF generation, and many
                                            of the features only work correctly when generating PDF documents.</p></li><li><p>
                                            <code class="literal">pageSize</code> — The size of the page to be generate.
                                            The most commonly used values would be <code class="literal">LETTER</code> and
                                                <code class="literal">A4</code>. A full list of supported pages sizes can be found
                                            in <code class="literal">com.lowagie.text.PageSize</code> class. Alternatively,
                                            pageSize can provide the width and height of the page directly. The value
                                            "612 792", for example, is equivalent to the LETTER page size. </p></li><li><p>
                                            <code class="literal">orientation</code> — The orientation of the page.
                                            Valid values are <code class="literal">portrait</code> and
                                            <code class="literal">landscape</code>. In landscape mode, the height and width page
                                            size values are reversed. </p></li><li><p>
                                            <code class="literal">margins</code> — The left, right, top and bottom
                                            margin values. </p></li><li><p>
                                            <code class="literal">marginMirroring</code> — Indicates that margin
                                            settings should be reversed an alternating pages.</p></li><li><p>
                                            <code class="literal">disposition</code> — When generating PDFs in a web browser, this determines the HTTP
                                            <code class="literal">Content-Disposition</code> of the document.  Valid values are <code class="literal">inline</code>, which
                                            indicates the document should be displayed in the browser window if possible,
                                            and <code class="literal">attachment</code>, which indicates that the document should be treated as a download. 
                                            The default value is <code class="literal">inline</code>.</p></li><li><p>
                                            <code class="literal">fileName</code> — For attachments, this value
                                             overrides the downloaded file name.
                                        </p></li></ul></div>


                                <p>
                                    <span class="emphasis"><em>Metadata Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p>
                                            <code class="literal">title</code>
                                        </p></li><li><p>
                                            <code class="literal">subject</code>
                                        </p></li><li><p>
                                            <code class="literal">keywords</code>
                                        </p></li><li><p>
                                            <code class="literal">author</code>
                                        </p></li><li><p>
                                            <code class="literal">creator</code>
                                        </p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:document</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:p</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pdf&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;The&nbsp;document&nbsp;goes&nbsp;here.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:document</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>


                            </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.text"/>18.1.2. Basic Text Elements</h3></div></div></div><p> Useful documents will need to contain more than just text; however, the standard UI components are
                geared towards HTML generation and are not useful for generating PDF content. Instead, Seam provides a
                special UI components for generating suitable PDF content. Tags like
                <code class="literal">&lt;p:image&gt;</code> and <code class="literal">&lt;p:paragraph&gt;</code> are the
                basic foundations of simple documents. Tags like <code class="literal">&lt;p:font&gt;</code> provide style
                information to all the content surrounding them. </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:paragraph&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p> Most uses of text should be sectioned into paragraphs so that text fragments can
                                    be flowed, formatted and styled in logical groups.</p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>

                                <div class="itemizedlist"><ul><li><p>
                                            <code class="literal">firstLineIndent</code>
                                        </p></li><li><p>
                                            <code class="literal">extraParagraphSpace</code>
                                        </p></li><li><p>
                                            <code class="literal">leading</code>
                                        </p></li><li><p>
                                            <code class="literal">multipliedLeading</code>
                                        </p></li><li><p>
                                            <code class="literal">spacingBefore</code> — The blank space to be inserted
                                            before the element. </p></li><li><p>
                                            <code class="literal">spacingAfter</code> — The blank space to be inserted
                                            after the element.</p></li><li><p>
                                            <code class="literal">indentationLeft</code>
                                        </p></li><li><p>
                                            <code class="literal">indentationRight</code>
                                        </p></li><li><p>
                                            <code class="literal">keepTogether</code>
                                        </p></li></ul></div>

                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">alignment</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;justify&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;simple&nbsp;document.&nbsp;&nbsp;It&nbsp;isn't&nbsp;very&nbsp;fancy.</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:text&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>

                                <p> The <code class="literal">text</code> tag allows text fragments to be produced from
                                    application data using normal JSF converter mechanisms. It is very similar to the
                                        <code class="literal">outputText</code> tag used when rendering HTML documents. </p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p><code class="literal">value</code> — The value to be displayed. This will
                                            typically be a value binding expression.</p></li></ul></div>

                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>

                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;item&nbsp;costs&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:text</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{product.price}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertNumber</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;currency&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">currencySymbol</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;$&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:text</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:html&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>

                                <p> The <code class="literal">html</code> tag renders HTML content into the PDF.                                                                      
                                </p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p><code class="literal">value</code> — The text to be displayed.</p></li></ul></div>

                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>

                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;This&nbsp;is&nbsp;HTML&nbsp;with&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_attribute_name">b</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">some&nbsp;markup</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">b</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">.&quot;&nbsp;/&gt;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;is&nbsp;more&nbsp;complex&nbsp;HTML</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h1</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ul</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">one</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">two</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">three</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">li</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ul</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:formattedText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*This*&nbsp;is&nbsp;|Seam&nbsp;Text|&nbsp;as&nbsp;HTML.&nbsp;&nbsp;It's&nbsp;very^cool^.&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:font&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>

                                <p> The font tag defines the default font to be used for all text inside of it. </p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p><code class="literal">name</code> — The font name, for example:
                                                <code class="literal">COURIER</code>, <code class="literal">HELVETICA</code>,
                                                <code class="literal">TIMES-ROMAN</code>, <code class="literal">SYMBOL</code> or
                                                <code class="literal">ZAPFDINGBATS</code>.</p></li><li><p><code class="literal">size</code> — The point size of the font.</p></li><li><p><code class="literal">style</code> — The font styles. Any combination of :
                                                <code class="literal">NORMAL</code>, <code class="literal">BOLD</code>,
                                            <code class="literal">ITALIC</code>, <code class="literal">OBLIQUE</code>,
                                            <code class="literal">UNDERLINE</code>, <code class="literal">LINE-THROUGH</code></p></li><li><p><code class="literal">color</code> — The font color. (see <a class="xref" href="#itext.colors" title="18.1.7.1. Color Values">Section 18.1.7.1, “Color Values”</a> for color values)</p></li><li><p><code class="literal">encoding</code> — The character set encoding.</p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>

                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:font</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;courier&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bold&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">size</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;24&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">My&nbsp;Title</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:font</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:textcolumn&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p><code class="literal">p:textcolumn</code> inserts a text column that can
                                    be used to control the flow of text.  The most common case is to
                                    support right to left direction fonts.</p>
                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                    </p><div class="itemizedlist"><ul><li><p><code class="literal">left</code> — The left bounds of
                                                the text column</p></li><li><p><code class="literal">right</code> — The right bounds
                                                of the text column</p></li><li><p><code class="literal">direction</code> — The run direction
                                                of the text in the column: <code class="literal">RTL</code>,
                                                  <code class="literal">LTR</code>, <code class="literal">NO-BIDI</code>, <code class="literal">DEFAULT</code>
                                            </p></li></ul></div><p>
                                </p>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:textcolumn</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">left</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;400&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">right</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;600&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">direction</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rtl&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:font</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/Library/Fonts/Arial&nbsp;Unicode.ttf&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">encoding</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Identity-H&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">embedded</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{phrases.arabic}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:font</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:textcolumn</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>
                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:newPage&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>


                                <p><code class="literal">p:newPage</code> inserts a page break. </p>


                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>

                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:newPage</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:image&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>


                                <p><code class="literal">p:image</code> inserts an image into the document. Images can be
                                    loaded from the classpath or from the web application context using the
                                        <code class="literal">value</code> attribute. </p>



                                <p>Resources can also be dynamically generated by application code. The
                                        <code class="literal">imageData</code> attribute can specify a value binding expression
                                    whose value is a <code class="literal">java.awt.Image</code> object. </p>




                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>

                                <div class="itemizedlist"><ul><li><p><code class="literal">value</code> — A resource name or a method
                                            expression binding to an application-generated image. </p></li><li><p><code class="literal">rotation</code> — The rotation of the image in
                                            degrees. </p></li><li><p><code class="literal">height</code> — The height of the image. </p></li><li><p><code class="literal">width</code> — The width of the image. </p></li><li><p>
                                            <code class="literal">alignment</code>— The alignment of the image. (see
                                                <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for possible values) </p></li><li><p>
                                            <code class="literal">alt</code> — Alternative text representation for the
                                            image.</p></li><li><p>
                                            <code class="literal">indentationLeft</code>
                                        </p></li><li><p>
                                            <code class="literal">indentationRight</code>
                                        </p></li><li><p>
                                            <code class="literal">spacingBefore</code> — The blank space to be inserted
                                            before the element.</p></li><li><p>
                                            <code class="literal">spacingAfter</code> — The blank space to be inserted
                                            after the element.</p></li><li><p>
                                            <code class="literal">widthPercentage</code>
                                        </p></li><li><p>
                                            <code class="literal">initialRotation</code>
                                        </p></li><li><p>
                                            <code class="literal">dpi</code>
                                        </p></li><li><p>
                                            <code class="literal">scalePercent</code> — The scaling factor (as a
                                            percentage) to use for the image. This can be expressed as a single
                                            percentage value or as two percentage values representing separate x and y
                                            scaling percentages.</p></li><li><p>
                                            <code class="literal">scaleToFit</code> — Specifies the X any Y 
                                            size to scale the image to.  The image will be scale to fit those dimensions
                                            as closely as possible while preserving the XY ratio of the image.</p></li><li><p>
                                            <code class="literal">wrap</code>
                                        </p></li><li><p>
                                            <code class="literal">underlying</code>
                                        </p></li></ul></div>

                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>


                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:image</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/jboss.jpg&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:image</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{images.chart}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>


                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:anchor&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p><code class="literal">p:anchor</code> defines clickable links from a document. It supports
                                    the following attributes:</p>


                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p><code class="literal">name</code> — The name of an in-document anchor
                                            destination.</p></li><li><p><code class="literal">reference</code> — The destination the link refers
                                            to. Links to other points in the document should begin with a "#". For
                                            example, "#link1" to refer to an anchor position with a
                                            <code class="literal">name</code> of <code class="literal">link1</code>. Links may also be a
                                            full URL to point to a resource outside of the document.</p></li></ul></div>


                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:listItem</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">p:anchor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">reference</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#reason1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Reason&nbsp;1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:anchor</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">p:listItem</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:anchor</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;reason1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">It's&nbsp;the&nbsp;quickest&nbsp;way&nbsp;to&nbsp;get&nbsp;&quot;rich&quot;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:anchor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.header"/>18.1.3. Headers and Footers</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:header&gt;</code>
                                </p>
                                <p>
                                    <code class="literal">&lt;p:footer&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p>The <code class="literal">p:header</code> and <code class="literal">p:footer</code> components provide
                                    the ability to place header and footer text on each page of a generated document.                             Header and footer declarations should appear at the beginning of a document. </p>


                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p>
                                            <code class="literal">alignment</code> — The alignment of the header/footer
                                            box section. (see <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for alignment values)</p></li><li><p><code class="literal">backgroundColor</code> — The background color of the
                                            header/footer box. (see <a class="xref" href="#itext.colors" title="18.1.7.1. Color Values">Section 18.1.7.1, “Color Values”</a> for color values)
                                        </p></li><li><p><code class="literal">borderColor</code> — The border color of the
                                            header/footer box. Individual border sides can be set using
                                                <code class="literal">borderColorLeft</code>, <code class="literal">borderColorRight</code>,
                                                <code class="literal">borderColorTop</code> and
                                            <code class="literal">borderColorBottom</code>.(see <a class="xref" href="#itext.colors" title="18.1.7.1. Color Values">Section 18.1.7.1, “Color Values”</a> for
                                            color values) </p></li><li><p>
                                            <code class="literal">borderWidth</code> — The width of the border.
                                            Individual border sides can be specified using
                                            <code class="literal">borderWidthLeft</code>, <code class="literal">borderWidthRight</code>,
                                                <code class="literal">borderWidthTop</code> and
                                            <code class="literal">borderWidthBottom</code>.</p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:font</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">size</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;12&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:footer</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">borderWidthTop</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">borderColorTop</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blue&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">borderWidthBottom</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">alignment</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;center&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Why&nbsp;Seam?&nbsp;[</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:pageNumber</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">]</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:footer</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:font</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:pageNumber&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p>The current page number can be placed inside of a header or footer using the
                                        <code class="literal">p:pageNumber</code> tag. The page number tag can only be used in the
                                    context of a header or footer and can only be used once.</p>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:footer</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">borderWidthTop</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">borderColorTop</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blue&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">borderWidthBottom</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">alignment</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;center&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;Why&nbsp;Seam?&nbsp;[</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:pageNumber</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">]</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:footer</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.chapters"/>18.1.4. Chapters and Sections</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:chapter&gt;</code>
                                </p>
                                <p>
                                    <code class="literal">&lt;p:section&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>

                                <p>If the generated document follows a book/article structure, the
                                    <code class="literal">p:chapter</code> and <code class="literal">p:section</code> tags can be used to
                                    provide the necessary structure. Sections can only be used inside of chapters, but
                                    they may be nested arbitrarily deep. Most PDF viewers provide easy navigation
                                    between chapters and sections in a document. </p>
								<div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>You cannot include a chapter into another chapter, this can be done only with section(s).</p></div>
                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p>
                                            <code class="literal">alignment</code> — The alignment of the header/footer
                                            box section. (see <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for alignment values)</p></li><li><p><code class="literal">number</code> — The chapter/section number. Every chapter/section
                                            should be assigned a number.</p></li><li><p><code class="literal">numberDepth</code> — The depth of numbering for
                                            chapter/section. All sections are numbered relative to their surrounding
                                            chapter/sections. The fourth section of the first section of chapter
                                            three would be section 3.1.4, if displayed at the default number depth of
                                            three. To omit the chapter number, a number depth of 2 should be used. In
                                            that case, the section number would be displayed as 1.4.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Chapter(s) can have a number or without it by setting numberDepth to 0.</p></div></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>

                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:document</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:p</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pdf&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Hello&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:chapter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">number</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:title</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Hello</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">p:title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Hello&nbsp;#{user.name}!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:chapter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:chapter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">number</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:title</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Goodbye</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">p:title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Goodbye&nbsp;#{user.name}.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:paragraph</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:chapter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:document</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
</pre>


                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:header&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>

                                <p>Any chapter or section can contain a <code class="literal">p:title</code>. The title will be
                                    displayed next to the chapter/section number. The body of the title may contain raw
                                    text or may be a <code class="literal">p:paragraph</code>. </p>

                            </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.list"/>18.1.5. Lists</h3></div></div></div><p>List structures can be displayed using the <code class="literal">p:list</code> and <code class="literal">p:listItem</code>
                tags. Lists may contain arbitrarily-nested sublists. List items may not be used outside of a list. The
                following document uses the <code class="literal">ui:repeat</code> tag to display a list of values retrieved
                from a Seam component. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:document</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:p</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pdf&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:ui</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Hello&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:list</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;numbered&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documents}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;doc&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:listItem</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{doc.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:listItem</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:list</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:document</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:list&gt;</code>
                                </p>
                            </td><td valign="top">
                                
                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>

                                <div class="itemizedlist"><ul><li><p><code class="literal">style</code> — The ordering/bulleting style of list.
                                            One of: <code class="literal">NUMBERED</code>, <code class="literal">LETTERED</code>,
                                                <code class="literal">GREEK</code>, <code class="literal">ROMAN</code>,
                                                <code class="literal">ZAPFDINGBATS</code>, <code class="literal">ZAPFDINGBATS_NUMBER</code>.
                                            If no style is given, the list items are bulleted.</p></li><li><p><code class="literal">listSymbol</code> — For bulleted lists, specifies
                                            the bullet symbol. </p></li><li><p><code class="literal">indent</code> — The indentation level of the
                                        list.</p></li><li><p><code class="literal">lowerCase</code> — For list styles using letters,
                                            indicates whether the letters should be lower case.</p></li><li><p><code class="literal">charNumber</code> — For ZAPFDINGBATS, indicates the
                                            character code of the bullet character.</p></li><li><p><code class="literal">numberType</code> — For ZAPFDINGBATS_NUMBER,
                                            indicates the numbering style.</p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:list</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">style</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;numbered&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documents}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;doc&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:listItem</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{doc.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:listItem</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:list</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:listItem&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p><code class="literal">p:listItem</code> supports the following attributes:</p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>

                                <div class="itemizedlist"><ul><li><p><code class="literal">alignment</code> — The alignment of the list item.
                                            (See <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for possible values)</p></li><li><p><code class="literal">indentationLeft</code> — The left indentation
                                            amount.</p></li><li><p><code class="literal">indentationRight</code> — The right indentation
                                            amount.</p></li><li><p><code class="literal">listSymbol</code> — Overrides the default list
                                            symbol for this list item.</p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
</pre>

                            </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.tables"/>18.1.6. Tables</h3></div></div></div><p>Table structures can be created using the <code class="literal">p:table</code> and <code class="literal">p:cell</code>
                tags. Unlike many table structures, there is no explicit row declaration. If a table has 3 columns, then
                every 3 cells will automatically form a row. Header and footer rows can be declared, and the headers and
                footers will be repeated in the event a table structure spans multiple pages.</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:table&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p><code class="literal">p:table</code> supports the following attributes.</p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>

                                <div class="itemizedlist"><ul><li><p><code class="literal">columns</code> — The number of columns (cells) that
                                            make up a table row.</p></li><li><p><code class="literal">widths</code> — The relative widths of each column.
                                            There should be one value for each column. For example: widths="2 1 1" would
                                            indicate that there are 3 columns and the first column should be twice the
                                            size of the second and third column.</p></li><li><p><code class="literal">headerRows</code> — The initial number of rows which
                                            are considered to be headers or footer rows and should be repeated if the
                                            table spans multiple pages. </p></li><li><p><code class="literal">footerRows</code> — The number of rows that are
                                            considered to be footer rows. This value is subtracted from the
                                                <code class="literal">headerRows</code> value. If document has 2 rows which make
                                            up the header and one row that makes up the footer,
                                            <code class="literal">headerRows</code> should be set to 3 and
                                            <code class="literal">footerRows</code> should be set to 1</p></li><li><p><code class="literal">widthPercentage</code> — The percentage of the page
                                            width that the table spans.</p></li><li><p><code class="literal">horizontalAlignment</code> — The horizontal
                                            alignment of the table. (See <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for possible
                                            values)</p></li><li><p>
                                            <code class="literal">skipFirstHeader</code>
                                        </p></li><li><p>
                                            <code class="literal">runDirection</code>
                                        </p></li><li><p>
                                            <code class="literal">lockedWidth</code>
                                        </p></li><li><p>
                                            <code class="literal">splitRows</code>
                                        </p></li><li><p><code class="literal">spacingBefore</code> — The blank space to be
                                            inserted before the element.</p></li><li><p><code class="literal">spacingAfter</code> — The blank space to be inserted
                                            after the element.</p></li><li><p>
                                            <code class="literal">extendLastRow</code>
                                        </p></li><li><p>
                                            <code class="literal">headersInEvent</code>
                                        </p></li><li><p>
                                            <code class="literal">splitLate</code>
                                        </p></li><li><p>
                                            <code class="literal">keepTogether</code>
                                        </p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:table</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;3&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">headerRows</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">name</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">owner</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">size</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{documents}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;doc&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{doc.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{doc.user.name}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{doc.size}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:table</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>


                            </td></tr><tr><td valign="top">
                                <p>
                                    <code class="literal">&lt;p:cell&gt;</code>
                                </p>
                            </td><td valign="top">
                                <p>
                                    <span class="emphasis"><em>Description</em></span>
                                </p>
                                <p><code class="literal">p:cell</code> supports the following attributes.</p>

                                <p>
                                    <span class="emphasis"><em>Attributes</em></span>
                                </p>


                                <div class="itemizedlist"><ul><li><p>
                                            <code class="literal">colspan</code> — Cells can span more than one column
                                            by declaring a <code class="literal">colspan</code> greater than 1. Tables do not have
                                            the ability to span across multiple rows. </p></li><li><p><code class="literal">horizontalAlignment</code> — The horizontal
                                            alignment of the cell. (see <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for possible
                                            values)</p></li><li><p><code class="literal">verticalAlignment</code> — The vertical alignment of
                                            the cell. (see <a class="xref" href="#itext.alignment" title="18.1.7.2. Alignment Values">Section 18.1.7.2, “Alignment Values”</a> for possible values)</p></li><li><p>
                                            <code class="literal">padding</code> — Padding on a given side can also be
                                            specified using <code class="literal">paddingLeft</code>,
                                            <code class="literal">paddingRight</code>, <code class="literal">paddingTop</code> and
                                                <code class="literal">paddingBottom</code>.</p></li><li><p>
                                            <code class="literal">useBorderPadding</code>
                                        </p></li><li><p>
                                            <code class="literal">leading</code>
                                        </p></li><li><p>
                                            <code class="literal">multipliedLeading</code>
                                        </p></li><li><p>
                                            <code class="literal">indent</code>
                                        </p></li><li><p>
                                            <code class="literal">verticalAlignment</code>
                                        </p></li><li><p>
                                            <code class="literal">extraParagraphSpace</code>
                                        </p></li><li><p>
                                            <code class="literal">fixedHeight</code>
                                        </p></li><li><p>
                                            <code class="literal">noWrap</code>
                                        </p></li><li><p>
                                            <code class="literal">minimumHeight</code>
                                        </p></li><li><p>
                                            <code class="literal">followingIndent</code>
                                        </p></li><li><p>
                                            <code class="literal">rightIndent</code>
                                        </p></li><li><p>
                                            <code class="literal">spaceCharRatio</code>
                                        </p></li><li><p>
                                            <code class="literal">runDirection</code>
                                        </p></li><li><p>
                                            <code class="literal">arabicOptions</code>
                                        </p></li><li><p>
                                            <code class="literal">useAscender</code>
                                        </p></li><li><p>
                                            <code class="literal">grayFill</code>
                                        </p></li><li><p>
                                            <code class="literal">rotation</code>
                                        </p></li></ul></div>
                                <p>
                                    <span class="emphasis"><em>Usage</em></span>
                                </p>
                                <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                            </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="itext.constant"/>18.1.7. Document Constants</h3></div></div></div><p>This section documents some of the constants shared by attributes on multiple tags. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="itext.colors"/>18.1.7.1. Color Values</h4></div></div></div><p>Several ways of specifying colors are provided.  A limited number of colors are
                    supported by name.  They are: <code class="literal">white</code>, <code class="literal">gray</code>,
                    <code class="literal">lightgray</code>, <code class="literal">darkgray</code>, <code class="literal">black</code>,
                    <code class="literal">red</code>, <code class="literal">pink</code>, <code class="literal">yellow</code>,
                    <code class="literal">green</code>, <code class="literal">magenta</code>, <code class="literal">cyan</code> and
                    <code class="literal">blue</code>. Colors can be specified as an integer value, as 
                    defined by <code class="literal">java.awt.Color</code>.  Finally a color value may be specified
                    as <code class="literal">rgb(r,g,b)</code> or <code class="literal">rgb(r,g,b,a)</code> with the red, green, blue 
                    alpha values specified as an integer between 0 and 255 or as a floating point percentages 
                    followed by a '%' sign.                
                </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="itext.alignment"/>18.1.7.2. Alignment Values</h4></div></div></div><p> Where alignment values are used, the Seam PDF supports the following horizontal alignment values:
                        <code class="literal">left</code>, <code class="literal">right</code>, <code class="literal">center</code>,
                    <code class="literal">justify</code> and <code class="literal">justifyall</code>. The vertical alignment values are
                        <code class="literal">top</code>, <code class="literal">middle</code>, <code class="literal">bottom</code>, and
                        <code class="literal">baseline</code>.</p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.charting"/>18.2. Charting</h2></div></div></div><p> Charting support is also provided with <code class="literal">jboss-seam-pdf.jar</code>. Charts can be used in PDF
            documents or can be used as images in an HTML page. Charting requires the JFreeChart library
                (<code class="literal">jfreechart.jar</code> and <code class="literal">jcommon.jar</code>) to be added to the
                <code class="literal">WEB-INF/lib</code> directory. 
            Four types of charts are currently supported: pie charts, bar
            charts and line charts. Where greater variety or control is needed, it is possible to construct charts 
        using Java code.</p><div class="informaltable"><a id="itext.charttags"/><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:chart&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Displays a chart created in Java by a Seam component.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>
                            
                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">chart</code> — The chart object to display. </p></li><li><p>
                                        <code class="literal">height</code> — The height of the chart. </p></li><li><p>
                                        <code class="literal">width</code> — The width of the chart. </p></li></ul></div>
                            <p>
                            <span class="emphasis"><em>Usage</em></span>
                        </p>
                        <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:chart</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">chart</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{mycomponent.chart}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">width</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">height</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre>
                            
                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:barchart&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Displays a bar chart.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">chart</code> — The chart object to display, if programmatic
                                        chart creation is being used.
                                    </p></li><li><p>
                                        <code class="literal">dataset</code> — The dataset to be displayed, if programmatic
                                        dataset is being used.
                                    </p></li><li><p>
                                        <code class="literal">borderVisible</code> — Controls whether or not a border is
                                        displayed around the entire chart. </p></li><li><p>
                                        <code class="literal">borderPaint</code> — The color of the border, if visible;
                                    </p></li><li><p>
                                        <code class="literal">borderBackgroundPaint</code> — The default background
                                        color of the chart. </p></li><li><p>
                                        <code class="literal">borderStroke</code> — </p></li><li><p>
                                        <code class="literal">domainAxisLabel</code> — The text label for the domain
                                        axis. </p></li><li><p>
                                        <code class="literal">domainLabelPosition</code> — The angle of the domain axis category labels.
                                        Valid values are <code class="literal">STANDARD</code>, <code class="literal">UP_45</code>, <code class="literal">UP_90</code>,
                                        <code class="literal">DOWN_45</code> and <code class="literal">DOWN_90</code>.  Alternatively, the value
                                        can the positive or negative angle in radians.
                                    </p></li><li><p>
                                        <code class="literal">domainAxisPaint</code> — The color of the domain axis
                                        label. </p></li><li><p>
                                        <code class="literal">domainGridlinesVisible</code>— Controls whether or not
                                        gridlines for the domain axis are shown on the chart. </p></li><li><p>
                                        <code class="literal">domainGridlinePaint</code>— The color of the domain
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">domainGridlineStroke</code> — The stroke style of the
                                        domain gridlines, if visible. </p></li><li><p>
                                        <code class="literal">height</code> — The height of the chart. </p></li><li><p>
                                        <code class="literal">width</code> — The width of the chart. </p></li><li><p>
                                        <code class="literal">is3D</code> — A boolean value indicating that the chart
                                        should be rendered in 3D instead of 2D. </p></li><li><p>
                                        <code class="literal">legend</code> — A boolean value indicating whether or not
                                        the chart should include a legend. </p></li><li><p>
                                        <code class="literal">legendItemPaint</code>— The default color of the text
                                        labels in the legend. </p></li><li><p>
                                        <code class="literal">legendItemBackgoundPaint</code>— The background color for
                                        the legend, if different from the chart background color.</p></li><li><p>
                                        <code class="literal">legendOutlinePaint</code>— The color of the border around
                                        the legend.</p></li><li><p>
                                        <code class="literal">orientation</code> — The orientation of the plot, either
                                            <code class="code">vertical</code> (the default) or <code class="code">horizontal</code>. </p></li><li><p>
                                        <code class="literal">plotBackgroundPaint</code>— The color of the plot
                                        background.</p></li><li><p>
                                        <code class="literal">plotBackgroundAlpha</code>— The alpha (transparency) level
                                        of the plot background. It should be a number between 0 (completely transparent)
                                        and 1 (completely opaque). </p></li><li><p>
                                        <code class="literal">plotForegroundAlpha</code>— The alpha (transparency) level
                                        of the plot. It should be a number between 0 (completely transparent) and 1
                                        (completely opaque). </p></li><li><p>
                                        <code class="literal">plotOutlinePaint</code>— The color of the range gridlines,
                                        if visible. </p></li><li><p>
                                        <code class="literal">plotOutlineStroke</code> — The stroke style of the range
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">rangeAxisLabel</code> — The text label for the range axis.
                                    </p></li><li><p>
                                        <code class="literal">rangeAxisPaint</code> — The color of the range axis label.
                                    </p></li><li><p>
                                        <code class="literal">rangeGridlinesVisible</code>— Controls whether or not
                                        gridlines for the range axis are shown on the chart. </p></li><li><p>
                                        <code class="literal">rangeGridlinePaint</code>— The color of the range
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">rangeGridlineStroke</code> — The stroke style of the range
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">title</code> — The chart title text. </p></li><li><p>
                                        <code class="literal">titlePaint</code>— The color of the chart title text.
                                    </p></li><li><p>
                                        <code class="literal">titleBackgroundPaint</code>— The background color around
                                        the chart title.</p></li><li><p>
                                        <code class="literal">width</code> — The width of the chart. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:barchart</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Bar&nbsp;Chart&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">legend</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">width</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">height</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:series</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Last&nbsp;Year&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Joe&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;100&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Bob&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;120&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:series</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:series</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;This&nbsp;Year&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Joe&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;125&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Bob&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;115&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:series</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:barchart</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:linechart&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Displays a line chart.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">chart</code> — The chart object to display, if programmatic
                                        chart creation is being used.
                                    </p></li><li><p>
                                        <code class="literal">dataset</code> — The dataset to be displayed, if programmatic
                                        dataset is being used.
                                    </p></li><li><p>
                                        <code class="literal">borderVisible</code> — Controls whether or not a border is
                                        displayed around the entire chart. </p></li><li><p>
                                        <code class="literal">borderPaint</code> — The color of the border, if visible;
                                    </p></li><li><p>
                                        <code class="literal">borderBackgroundPaint</code> — The default background
                                        color of the chart. </p></li><li><p>
                                        <code class="literal">borderStroke</code> — </p></li><li><p>
                                        <code class="literal">domainAxisLabel</code> — The text label for the domain
                                        axis. </p></li><li><p>
                                        <code class="literal">domainLabelPosition</code> — The angle of the domain axis category labels.
                                        Valid values are <code class="literal">STANDARD</code>, <code class="literal">UP_45</code>, <code class="literal">UP_90</code>,
                                        <code class="literal">DOWN_45</code> and <code class="literal">DOWN_90</code>.  Alternatively, the value
                                        can the positive or negative angle in radians.
                                    </p></li><li><p>
                                        <code class="literal">domainAxisPaint</code> — The color of the domain axis
                                        label. </p></li><li><p>
                                        <code class="literal">domainGridlinesVisible</code>— Controls whether or not
                                        gridlines for the domain axis are shown on the chart. </p></li><li><p>
                                        <code class="literal">domainGridlinePaint</code>— The color of the domain
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">domainGridlineStroke</code> — The stroke style of the
                                        domain gridlines, if visible. </p></li><li><p>
                                        <code class="literal">height</code> — The height of the chart. </p></li><li><p>
                                        <code class="literal">width</code> — The width of the chart. </p></li><li><p>
                                        <code class="literal">is3D</code> — A boolean value indicating that the chart
                                        should be rendered in 3D instead of 2D. </p></li><li><p>
                                        <code class="literal">legend</code> — A boolean value indicating whether or not
                                        the chart should include a legend. </p></li><li><p>
                                        <code class="literal">legendItemPaint</code> — The default color of the text
                                        labels in the legend. </p></li><li><p>
                                        <code class="literal">legendItemBackgoundPaint</code> — The background color for
                                        the legend, if different from the chart background color.</p></li><li><p>
                                        <code class="literal">legendOutlinePaint</code> — The color of the border around
                                        the legend.</p></li><li><p>
                                        <code class="literal">orientation</code> — The orientation of the plot, either
                                            <code class="code">vertical</code> (the default) or <code class="code">horizontal</code>. </p></li><li><p>
                                        <code class="literal">plotBackgroundPaint</code> — The color of the plot
                                        background.</p></li><li><p>
                                        <code class="literal">plotBackgroundAlpha</code> — The alpha (transparency) level
                                        of the plot background. It should be a number between 0 (completely transparent)
                                        and 1 (completely opaque). </p></li><li><p>
                                        <code class="literal">plotForegroundAlpha</code> — The alpha (transparency) level
                                        of the plot. It should be a number between 0 (completely transparent) and 1
                                        (completely opaque). </p></li><li><p>
                                        <code class="literal">plotOutlinePaint</code> — The color of the range gridlines,
                                        if visible. </p></li><li><p>
                                        <code class="literal">plotOutlineStroke</code> — The stroke style of the range
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">rangeAxisLabel</code> — The text label for the range axis.
                                    </p></li><li><p>
                                        <code class="literal">rangeAxisPaint</code> — The color of the range axis label.
                                    </p></li><li><p>
                                        <code class="literal">rangeGridlinesVisible</code> — Controls whether or not
                                        gridlines for the range axis are shown on the chart. </p></li><li><p>
                                        <code class="literal">rangeGridlinePaint</code> — The color of the range
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">rangeGridlineStroke</code> — The stroke style of the range
                                        gridlines, if visible. </p></li><li><p>
                                        <code class="literal">title</code> — The chart title text. </p></li><li><p>
                                        <code class="literal">titlePaint</code> — The color of the chart title text.
                                    </p></li><li><p>
                                        <code class="literal">titleBackgroundPaint</code> — The background color around
                                        the chart title.</p></li><li><p>
                                        <code class="literal">width</code> — The width of the chart. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:linechart</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Line&nbsp;Chart&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">width</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">height</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;500&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:series</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Prices&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2003&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;7.36&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2004&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;11.50&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2005&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;34.625&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2006&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;76.30&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2007&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;85.05&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:series</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:linechart</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:piechart&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Displays a pie chart.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">title</code> — The chart title text. </p></li><li><p>
                                        <code class="literal">chart</code> — The chart object to display, if programmatic
                                        chart creation is being used.
                                    </p></li><li><p>
                                        <code class="literal">dataset</code> — The dataset to be displayed, if programmatic
                                        dataset is being used.
                                    </p></li><li><p>
                                        <code class="literal">label</code> — The default label text for pie sections.
                                    </p></li><li><p>
                                        <code class="literal">legend</code> — A boolean value indicating whether or not
                                        the chart should include a legend. Default value is true </p></li><li><p>
                                        <code class="literal">is3D</code> —A boolean value indicating that the chart
                                        should be rendered in 3D instead of 2D. </p></li><li><p>
                                        <code class="literal">labelLinkMargin</code> — The link margin for labels.
                                    </p></li><li><p>
                                        <code class="literal">labelLinkPaint</code> — The paint used for the label
                                        linking lines. </p></li><li><p>
                                        <code class="literal">labelLinkStroke</code> — he stroke used for the label
                                        linking lines. </p></li><li><p>
                                        <code class="literal">labelLinksVisible</code> — A flag that controls whether or
                                        not the label links are drawn. </p></li><li><p>
                                        <code class="literal">labelOutlinePaint</code> — The paint used to draw the
                                        outline of the section labels. </p></li><li><p>
                                        <code class="literal">labelOutlineStroke</code> — The stroke used to draw the
                                        outline of the section labels. </p></li><li><p>
                                        <code class="literal">labelShadowPaint</code> — The paint used to draw the shadow
                                        for the section labels. </p></li><li><p>
                                        <code class="literal">labelPaint</code> — The color used to draw the section
                                        labels </p></li><li><p>
                                        <code class="literal">labelGap</code> — The gap between the labels and the plot
                                        as a percentage of the plot width. </p></li><li><p>
                                        <code class="literal">labelBackgroundPaint</code> — The color used to draw the
                                        background of the section labels. If this is null, the background is not filled.
                                    </p></li><li><p>
                                        <code class="literal">startAngle</code> — The starting angle of the first
                                        section. </p></li><li><p>
                                        <code class="literal">circular</code> — A boolean value indicating that the chart
                                        should be drawn as a circle. If false, the chart is drawn as an ellipse. The
                                        default is true. </p></li><li><p>
                                        <code class="literal">direction</code> — The direction the pie section are drawn.
                                        One of: <code class="literal">clockwise</code> or <code class="literal">anticlockwise</code>. The
                                        default is <code class="literal">clockwise</code>. </p></li><li><p>
                                        <code class="literal">sectionOutlinePaint</code> — The outline paint for all
                                        sections. </p></li><li><p>
                                        <code class="literal">sectionOutlineStroke</code> — The outline stroke for all
                                        sections </p></li><li><p>
                                        <code class="literal">sectionOutlinesVisible</code> — Indicates whether an
                                        outline is drawn for each section in the plot. </p></li><li><p>
                                        <code class="literal">baseSectionOutlinePaint</code> — The base section outline
                                        paint. </p></li><li><p>
                                        <code class="literal">baseSectionPaint</code> — The base section paint. </p></li><li><p>
                                        <code class="literal">baseSectionOutlineStroke</code> — The base section outline
                                        stroke. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:piechart</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Pie&nbsp;Chart&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">circular</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">direction</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;anticlockwise&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">startAngle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;30&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">labelGap</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0.1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">labelLinkPaint</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;red&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:series</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Prices&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2003&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2003&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;7.36&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2004&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2004&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;11.50&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2005&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2005&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;34.625&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2006&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2006&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;76.30&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2007&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2007&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;85.05&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:series</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:piechart</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:series&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Category data can be broken down into series. The series tag is used to categorize a
                                set of data with a series and apply styling to the entire series. </p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">key</code> — The series name. </p></li><li><p>
                                        <code class="literal">seriesPaint</code> — The color of each item in the series
                                    </p></li><li><p>
                                        <code class="literal">seriesOutlinePaint</code> — The outline color for each
                                        item in the series. </p></li><li><p>
                                        <code class="literal">seriesOutlineStroke</code> — The stroke used to draw each
                                        item in the series. </p></li><li><p>
                                        <code class="literal">seriesVisible</code> — A boolean indicating if the series
                                        should be displayed. </p></li><li><p>
                                        <code class="literal">seriesVisibleInLegend</code> — A boolean indicating if
                                        the series should be listed in the legend. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:series</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;data1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{data.pieData1}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;item&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">columnKey</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{item.name}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{item.value}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:series</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:data&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>The data tag describes each data point to be displayed in the graph.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">key</code> — The name of the data item. </p></li><li><p>
                                        <code class="literal">series</code> — The series name, when not embedded inside
                                        a <code class="code">&lt;p:series&gt;</code>. </p></li><li><p>
                                        <code class="literal">value</code> — The numeric data value. </p></li><li><p>
                                        <code class="literal">explodedPercent</code> — For pie charts, indicates how
                                        exploded a from the pie a piece is. </p></li><li><p>
                                        <code class="literal">sectionOutlinePaint</code> — For bar charts, the color of
                                        the section outline.</p></li><li><p>
                                        <code class="literal">sectionOutlineStroke</code> — For bar charts, the stroke
                                        type for the section outline.</p></li><li><p>
                                        <code class="literal">sectionPaint</code> — For bar charts, the color of the
                                        section.</p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>



                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;foo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;20&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sectionPaint</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#111111&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">explodedPercent</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;.2&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;30&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sectionPaint</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#333333&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:data</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;baz&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;40&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sectionPaint</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#555555&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">sectionOutlineStroke</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;my-dot-style&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:color&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>The color component declares a color or gradient than can be referenced when drawing
                                filled shapes. </p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">color</code> — The color value. For gradient colors, this
                                        the starting color. <a class="xref" href="#itext.colors" title="18.1.7.1. Color Values">Section 18.1.7.1, “Color Values”</a>
                                    </p></li><li><p>
                                        <code class="literal">color2</code> — For gradient colors, this is the color
                                        that ends the gradient. </p></li><li><p>
                                        <code class="literal">point</code> — The co-ordinates where the gradient color
                                        begins. </p></li><li><p>
                                        <code class="literal">point2</code> — The co-ordinates where the gradient color
                                        ends. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:color</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;foo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">color</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#0ff00f&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:color</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">color</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#ff00ff&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">color2</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#00ff00&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">point</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;50&nbsp;50&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">point2</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;300&nbsp;300&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:stroke&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Describes a stroke used to draw lines in a chart.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">width</code> — The width of the stroke. </p></li><li><p><code class="literal">cap</code> — The line cap type. Valid values are
                                            <code class="literal">butt</code>, <code class="literal">round</code> and
                                        <code class="literal">square</code></p></li><li><p><code class="literal">join</code> — The line join type. Valid values are
                                            <code class="literal">miter</code>, <code class="literal">round</code> and
                                        <code class="literal">bevel</code></p></li><li><p>
                                        <code class="literal">miterLimit</code> — For miter joins, this value is the
                                        limit of the size of the join. </p></li><li><p>
                                        <code class="literal">dash</code> — The dash value sets the dash pattern to be
                                        used to draw the line. The space separated integers indicate the length of each
                                        alternating drawn and undrawn segments. </p></li><li><p>
                                        <code class="literal">dashPhase</code> — The dash phase indicates the offset
                                        into the dash pattern that the line should be drawn with. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:stroke</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dot2&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">width</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cap</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;round&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">join</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bevel&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dash</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2&nbsp;3&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.barcodes"/>18.3. Bar codes</h2></div></div></div><p>Seam can use iText to generate barcodes in a wide variety of formats.  These barcodes can
        be embedded in a PDF document or displayed as an image on a web page. Note that 
        when used with HTML images, barcodes can not currently display barcode text in the barcode. 
        </p><div class="informaltable"><a id="itext.barcode"/><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:barCode&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Displays a barcode image.</p>

                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">type</code> — A barcode type supported by iText. Valid
                                        values include: <code class="literal">EAN13</code>, <code class="literal">EAN8</code>,
                                        <code class="literal">UPCA</code>, <code class="literal">UPCE</code>, <code class="literal">SUPP2</code>,
                                            <code class="literal">SUPP5</code>, <code class="literal">POSTNET</code>,
                                        <code class="literal">PLANET</code>, <code class="literal">CODE128</code>,
                                        <code class="literal">CODE128_UCC</code>, <code class="literal">CODE128_RAW</code> and
                                            <code class="literal">CODABAR</code>. </p></li><li><p>
                                        <code class="literal">code</code> — The value to be encoded by the barcode.
                                    </p></li><li><p>
                                        <code class="literal">xpos</code> — For PDFs, the absolute y position of the
                                        barcode on the page. </p></li><li><p>
                                        <code class="literal">ypos</code> — For PDFs, the absolute y position of the
                                        barcode on the page. </p></li><li><p>
                                        <code class="literal">rotDegrees</code> — For PDFs, the rotation factor of the
                                        barcode in degrees. </p></li><li><p>
                                        <code class="literal">barHeight</code> — The height of the bars in the barCode
                                    </p></li><li><p>
                                        <code class="literal">minBarWidth</code> — The minimum bar width. </p></li><li><p>
                                        <code class="literal">barMultiplier</code> — The bar multiplier for wide bars or
                                        the distance between bars for <code class="literal">POSTNET</code> and
                                        <code class="literal">PLANET</code> code. </p></li><li><p>
                                        <code class="literal">barColor</code> — The color to draw the bars. </p></li><li><p>
                                        <code class="literal">textColor</code> — The color of any text on the barcode.
                                    </p></li><li><p>
                                        <code class="literal">textSize</code> — The size of the barcode text, if any.
                                    </p></li><li><p>
                                        <code class="literal">altText</code> — The <code class="literal">alt</code> text for HTML image links.
                                    </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:barCode</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;code128&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">barHeight</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;80&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">textSize</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;20&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;(10)45566(17)040301&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">codeType</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;code128_ucc&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">altText</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;My&nbsp;BarCode&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.fillinforms"/>18.4. Fill-in-forms</h2></div></div></div><p>
        	If you have a complex, pre-generated PDF with named fields, you can easily
        	fill in the values from your application and present it to the user.
        </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:form&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Defines a form template to populate</p>

                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">URL</code> — An URL pointing
                                        to the PDF file to use as a template. If the value
                                        has no protocol part (://), the file is read locally.
                                    </p></li><li><p>
                                        <code class="literal">filename</code> — The filename
                                        to use for the generated PDF file.
                                    </p></li><li><p>
                                        <code class="literal">exportKey</code> — Place the generated
                                        PDF file in a DocumentData object under the specified key
                                        in the event context. If set, no redirect will occur.
                                    </p></li></ul></div>
                        </td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:field&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>
                            </p>
                            <p>Connects a field name to its value</p>

                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">name</code> — The name
                                        of the field
                                    </p></li><li><p>
                                        <code class="literal">value</code> — The value
                                        of the field
                                    </p></li><li><p>
                                        <code class="literal">readOnly</code> — Should the field
                                        be read-only? Defaults to true.
                                    </p></li></ul></div>
                        </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:form</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:p</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/pdf&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">URL</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://localhost/Concept/form.pdf&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person.name&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Me,&nbsp;myself&nbsp;and&nbsp;I&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.swingcomponents"/>18.5. Rendering Swing/AWT components</h2></div></div></div><p>Seam now provides experimental support for rendering Swing components into a PDF
        image.  Some Swing look and feels supports, notably ones that use native widgets, will not
        render correctly.
        </p><div class="informaltable"><a id="itext.swing"/><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                            <p>
                                <code class="literal">&lt;p:swing&gt;</code>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Description</em></span>  
                            </p>
                            
                            <p>Renders a Swing component into a PDF document.</p>
                            <p>
                                <span class="emphasis"><em>Attributes</em></span>
                            </p>

                            <div class="itemizedlist"><ul><li><p>
                                        <code class="literal">width</code> — The width of the component to be rendered. </p></li><li><p>
                                        <code class="literal">height</code> — The height of the component to be rendered. </p></li><li><p>
                                        <code class="literal">component</code> — An expression whose value is a Swing or AWT component. </p></li></ul></div>
                            <p>
                                <span class="emphasis"><em>Usage</em></span>
                            </p>
                            <pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:swing</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">width</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;310&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">height</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;120&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">component</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{aButton}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre>

                        </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.configuration"/>18.6. Configuring iText</h2></div></div></div><p>Document generation works out of the box with no additional configuration needed. However, there are a
            few points of configuration that are needed for more serious applications. </p><p> The default implementation serves PDF documents from a generic URL,
            <code class="literal">/seam-doc.seam</code>. Many browsers (and users) would prefer to see URLs that contain the
            actual PDF name like <code class="literal">/myDocument.pdf</code>. This capability requires some configuration. To
            serve PDF files, all <code class="literal">*.pdf</code> resources should be mapped to the DocumentStoreServlet:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Document&nbsp;Store&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.document.DocumentStoreServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Document&nbsp;Store&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*.pdf</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The <code class="literal">use-extensions</code> option on the document store component completes the
            functionality by instructing the document store to generate URLs with the correct filename extension for
            the document type being generated. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:document</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/document&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/document&nbsp;http://jboss.org/schema/seam/document-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components&nbsp;http://jboss.org/schema/seam/components-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">document:document-store</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use-extensions</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The document store stores documents in conversation scope, and documents will expire when the conversation ends. At
            that point, references to the document will be invalid. You can specify a default view to be shown
            when a document does not exist using the <code class="literal">error-page</code> property of the <code class="literal">documentStore</code>. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">document:document-store</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">use-extensions</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">error-page</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/documentMissing.seam&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="itext.links"/>18.7. Further documentation</h2></div></div></div><p>For further information on iText, see:</p><p>
            </p><div class="itemizedlist"><ul><li><p>
                        <a class="ulink" href="http://www.lowagie.com/iText/">iText Home Page</a>
                    </p></li><li><p>
                        <a class="ulink" href="http://www.manning.com/lowagie/">iText in Action</a>
                    </p></li></ul></div><p>

        </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel"/>Chapter 19. The Microsoft® Excel® spreadsheet application</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#excel.intro">19.1. The Microsoft® Excel® spreadsheet application support</a></span></dt><dt><span class="section"><a href="#excel.usage">19.2. Creating a simple workbook</a></span></dt><dt><span class="section"><a href="#excel.workbook">19.3. Workbooks</a></span></dt><dt><span class="section"><a href="#excel.worksheet">19.4. Worksheets</a></span></dt><dt><span class="section"><a href="#excel.columns">19.5. Columns</a></span></dt><dt><span class="section"><a href="#excel.cells">19.6. Cells</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.cells.validation">19.6.1. Validation</a></span></dt><dt><span class="section"><a href="#excel.cells.formatmasks">19.6.2. Format masks</a></span></dt></dl></dd><dt><span class="section"><a href="#excel.formulas">19.7. Formulas</a></span></dt><dt><span class="section"><a href="#excel.images">19.8. Images</a></span></dt><dt><span class="section"><a href="#excel.hyperlinks">19.9. Hyperlinks</a></span></dt><dt><span class="section"><a href="#excel.headersfooters">19.10. Headers and footers</a></span></dt><dt><span class="section"><a href="#excel.printareatitles">19.11. Print areas and titles</a></span></dt><dt><span class="section"><a href="#excel.worksheetcommands">19.12. Worksheet Commands</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.worksheetcommands.grouping">19.12.1. Grouping</a></span></dt><dt><span class="section"><a href="#excel.worksheetcommands.pagebreaks">19.12.2. Page breaks</a></span></dt><dt><span class="section"><a href="#excel.worksheetcommands.merging">19.12.3. Merging</a></span></dt></dl></dd><dt><span class="section"><a href="#excel.datatableexporter">19.13. Datatable exporter</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout">19.14. Fonts and layout</a></span></dt><dd><dl><dt><span class="section"><a href="#excel.fontsandlayout.link">19.14.1. Stylesheet links</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.fonts">19.14.2. Fonts</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.borders">19.14.3. Borders</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.background">19.14.4. Background</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.columnsettings">19.14.5. Column settings</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.cellsettings">19.14.6. Cell settings</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.datatableexporter">19.14.7. The datatable exporter</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.examples">19.14.8. Layout examples</a></span></dt><dt><span class="section"><a href="#excel.fontsandlayout.limitations">19.14.9. Limitations</a></span></dt></dl></dd><dt><span class="section"><a href="#excel.i18n">19.15. Internationalization</a></span></dt><dt><span class="section"><a href="#excel.links">19.16. Links and further documentation</a></span></dt></dl></div><p>
      Seam also supports generation of the Microsoft® Excel® spreadsheet application spreadsheets through the 
      excellent <a class="ulink" href="http://jexcelapi.sourceforge.net/">JExcelAPI
      </a> library. The generated document is compatible with
      the Microsoft® Excel® spreadsheet application versions 95, 97, 2000, XP and 2003. Currently a limited 
      subset of the library functionality is exposed but the ultimate 
      goal is to be able to do everything the library allows for. Please 
      refer to the JExcelAPI documentation for more information on 
      capabilities and limitations.
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.intro"/>19.1. The Microsoft® Excel® spreadsheet application support</h2></div></div></div><p>
         The Microsoft® Excel® spreadsheet application <code class="literal">jboss-seam-excel.jar</code>. This JAR contains 
         the the Microsoft® Excel® spreadsheet application JSF controls, which are used to construct views that can 
         render the document, and the DocumentStore component, which serves 
         the rendered document to the user. To include the Microsoft® Excel® spreadsheet application support in 
         your application, include <code class="literal">jboss-seam-excel.jar</code>
         in your <code class="literal">WEB-INF/lib</code> directory along with the
         <code class="literal">jxl.jar</code> JAR file. Furthermore, you need to 
         configure the DocumentStore servlet in your web.xml
      </p><p>
         The Microsoft® Excel® spreadsheet application Seam module requires the use of Facelets as the view 
         technology. Additionally, it requires the use of the seam-ui package.
      </p><p>
         The <code class="literal">examples/excel</code> project contains an example of
         the Microsoft® Excel® spreadsheet application support in action. It demonstrates proper deployment 
         packaging, and it shows the exposed functionality.
      </p><p>
         Customizing the module to support other kinds of the Microsoft® Excel® spreadsheet application spreadsheet
         API's has been made very easy. Implement the <code class="literal">ExcelWorkbook
         </code> interface, and register in components.xml.
	   </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">excel:excelFactory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;implementations&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">myExcelExporter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">my.excel.exporter.ExcelExport</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">excel:excelFactory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         and register the excel namespace in the components tag with
	   </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">xmlns:excel=&quot;http://jboss.org/schema/seam/excel&quot;</span><br />
</pre><p>
         Then set the UIWorkbook type to <code class="literal">myExcelExporter</code> and your 
         own exporter will be used. Default is "jxl", but support for CSV has also been 
         added, using the type "csv".
      </p><p>
         See <a class="xref" href="#itext.configuration" title="18.6. Configuring iText">Section 18.6, “Configuring iText”</a> for information on how to configure
         the document servlet for serving the documents with an .xls extension. 
      </p><p>
         If you are having problems accessing the generated file under IE (especially
         with https), make sure you are not using too strict restrictions in the browser 
         (see <a class="ulink" href="http://www.nwnetworks.com/iezones.htm">http://www.nwnetworks.com/iezones.htm</a>), too strict security
         constraint in web.xml or a combination of both.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.usage"/>19.2. Creating a simple workbook</h2></div></div></div><p>
         Basic usage of the worksheet support is simple; it is used like a
         familiar <code class="literal">&lt;h:dataTable&gt;</code> and you can bind to a
         <code class="literal">List</code>, <code class="literal">Set</code>, 
         <code class="literal">Map</code>, <code class="literal">Array</code> or
         <code class="literal">DataModel</code>.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:e</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/excel&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">column</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">row</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Hello&nbsp;world!&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         That's not terribly useful, so lets have a look at a more common case:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:e</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/excel&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{data}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;item&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{item.value}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         First we have the top-level workbook element which serves as the
         container and it doesn't have any attributes. The child-element
         worksheet has two attributes; value="#{data}" is the
         EL-binding to the data and var="item" is the name of the
         current item. Nested inside the worksheet is a single column and within
         it you see the cell which is the final bind to the data within the
         currently iterated item
      </p><p>
         This is all you know to get started dumping your data to worksheets!
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.workbook"/>19.3. Workbooks</h2></div></div></div><p>
         Workbooks are the top-level parents of worksheets and stylesheet links.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:workbook&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">type</code>
                              — Defines which export module to be used. The
                              value is a string and can be either "jxl" or
                              "csv". The default is "jxl".
                           </p></li><li><p>
                              <code class="literal">templateURI</code>
                              — A template that should be used as a basis
                              for the workbook. The value is a string (URI).
                           </p></li><li><p>
                              <code class="literal">arrayGrowSize</code>
                              — The amount of memory by which to increase
                              the amount of memory allocated to storing the
                              workbook data. For processes reading many small
                              workbooks inside a WAS it might be necessary to
                              reduce the default size. Default value is 1
                              megabyte. The value is a number (bytes).
                           </p></li><li><p>
                              <code class="literal">autoFilterDisabled</code>
                              — Should autofiltering be disabled?. The
                              value is a boolean.
                           </p></li><li><p>
                              <code class="literal">cellValidationDisabled</code>
                              — Should cell validation be ignored? The
                              value is a boolean.
                           </p></li><li><p>
                              <code class="literal">characterSet</code>
                              — The character set. This is only used when
                              the spreadsheet is read, and has no effect when
                              the spreadsheet is written. The value is a string
                              (character set encoding).
                           </p></li><li><p>
                              <code class="literal">drawingsDisabled</code>
                              — Should drawings be disabled? The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">excelDisplayLanguage</code>
                              — The language in which the generated file
                              will display. The value is a string (two character
                              ISO 3166 country code).
                           </p></li><li><p>
                              <code class="literal">excelRegionalSettings</code>
                              — The regional settings for the generated
                              excel file. The value is a string (two character
                              ISO 3166 country code).
                           </p></li><li><p>
                              <code class="literal">formulaAdjust</code>
                              — Should formulas be adjusted? The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">gcDisabled</code>
                              — Should garbage collection be disabled? The
                              value is a boolean.
                           </p></li><li><p>
                              <code class="literal">ignoreBlanks</code>
                              — Should blanks be ignored? The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">initialFileSize</code>
                              — The initial amount of memory allocated to
                              store the workbook data when reading a worksheet.
                              For processes reading many small workbooks
                              inside a WAS it might be necessary to reduce the
                              default size. Default value is 5 megabytes. The
                              value is a number (bytes).
                           </p></li><li><p>
                              <code class="literal">locale</code>
                              — The locale used by JExcelApi to generate
                              the spreadsheet. Setting this value has no effect
                              on the language or region of the generated excel
                              file. The value is a string.
                           </p></li><li><p>
                              <code class="literal">mergedCellCheckingDisabled</code>
                              — Should merged cell checking be disabled?
                              The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">namesDisabled</code>
                              — Should handling of names be disabled? The
                              value is a boolean.
                           </p></li><li><p>
                              <code class="literal">propertySets</code>
                              — Should any property sets be enabled (such
                              as macros) to be copied along with the workbook?
                              Leaving this feature enabled will result in the
                              JXL process using more memory. The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">rationalization</code>
                              — Should the cell formats be rationalized
                              before writing out the sheet? The value is a
                              boolean. Default is true.
                           </p></li><li><p>
                              <code class="literal">supressWarnings</code>
                              — Should warnings be suppressed?. Due to the
                              change in logging in version 2.4, this will now
                              set the warning behaviour across the JVM
                              (depending on the type of logger used). The value
                              is a boolean.
                           </p></li><li><p>
                              <code class="literal">
                                 temporaryFileDuringWriteDirectory
                              </code>
                              — Used in conjunction with the
                              <code class="literal">useTemporaryFileDuringWrite</code>
                              setting to set the target directory for the
                              temporary files. This value can be NULL, in which
                              case the normal system default temporary directory
                              is used instead. The value is a string (the
                              directory to which temporary files should be
                              written).
                           </p></li><li><p>
                              <code class="literal">useTemporaryFileDuringWrite</code>
                              — Should a temporary file is used during the
                              generation of the workbook. If not set, the
                              workbook will take place entirely in memory.
                              Setting this flag involves an assessment of the
                              trade-offs between memory usage and performance.
                              The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">workbookProtected</code>
                              — Should the workbook be protected? The value
                              is a boolean.
                           </p></li><li><p>
                              <code class="literal">filename</code>
                              — The filename to use for the download. The value
                              is a string. Please note that if you map the DocumentServlet
                              to some pattern, this file extension must also match.
                           </p></li><li><p>
                              <code class="literal">exportKey</code>
                              — A key under which to store the resulting data
                              in a DocumentData object under the event scope. If used,
                              there is no redirection.
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elements</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">&lt;e:link/&gt;</code>
                              — Zero or more stylesheet links (see
                              <a class="xref" href="#excel.fontsandlayout.link" title="19.14.1. Stylesheet links">Section 19.14.1, “Stylesheet links”</a>
                              ).
                           </p></li><li><p>
                              <code class="literal">&lt;e:worksheet/&gt;</code>
                              — Zero or more worksheets (see
                              <a class="xref" href="#excel.worksheet" title="19.4. Worksheets">Section 19.4, “Worksheets”</a>
                              ).
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Hello&nbsp;World&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">row</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">column</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>defines a workbook with a worksheet and a greeting at A1</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.worksheet"/>19.4. Worksheets</h2></div></div></div><p>
         Worksheets are the children of workbooks and the parent of columns and
         worksheet commands. They can also contain explicitly placed cells,
         formulas, images and hyperlinks. They are the pages that make up the
         workbook.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:worksheet&gt;</code>
                     </p>
                  </td><td valign="top">
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">value</code>
                              — An EL-expression to the backing data. The
                              value is a string. The target of this expression is
                              examined for an Iterable. Note that if the target is a Map,
                              the iteration is done over the Map.Entry entrySet(), so you
                              should use a .key or .value to target in your references. 
                           </p></li><li><p>
                              <code class="literal">var</code>
                              — The current row iterator variable name that
                              can later be referenced in cell value attributes.
                              The value is a string.
                           </p></li><li><p>
                              <code class="literal">name</code>
                              — The name of the worksheet. The value is a
                              string. Defaults to Sheet# where # is the
                              worksheet index. If the given worksheet name
                              exists, that sheet is selected. This can be used
                              for merging several data sets into a single
                              worksheet, just define the same name for them
                              (using
                              <code class="literal">startRow</code>
                              and
                              <code class="literal">startCol</code>
                              to make sure that they don't occupy the same
                              space).
                           </p></li><li><p>
                              <code class="literal">startRow</code>
                              — Defines the starting row for the data. The
                              value is a number. Used for placing the data in
                              other places than the upper-left corner
                              (especially useful if having multiple data sets
                              for a single worksheet). The defaults is 0.
                           </p></li><li><p>
                              <code class="literal">startColumn</code>
                              — Defines the starting column for the data.
                              The value is a number. Used for placing the data
                              in other places than the upper-left corner
                              (especially useful if having multiple data sets
                              for a single worksheet). The default is 0.
                           </p></li><li><p>
                              <code class="literal">automaticFormulaCalculation</code>
                              — Should formulas be automatically
                              calculated? The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">bottomMargin</code>
                              — The bottom margin. The value is a number
                              (inches).
                           </p></li><li><p>
                              <code class="literal">copies</code>
                              — The number of copies. The value is a
                              number.
                           </p></li><li><p>
                              <code class="literal">defaultColumnWidth</code>
                              — The default column width. The value is a
                              number (characters * 256).
                           </p></li><li><p>
                              <code class="literal">defaultRowHeight</code>
                              — The default row height. The value is a
                              number (1/20 of a point).
                           </p></li><li><p>
                              <code class="literal">displayZeroValues</code>
                              — Should zero-values be displayed? The value
                              is a boolean.
                           </p></li><li><p>
                              <code class="literal">fitHeight</code>
                              — The number of pages vertically that this
                              sheet will be printed into. The value is a number.
                           </p></li><li><p>
                              <code class="literal">fitToPages</code>
                              — Should printing be fit to pages? The value
                              is a boolean.
                           </p></li><li><p>
                              <code class="literal">fitWidth</code>
                              — The number of pages widthwise which this
                              sheet should be printed into. The value is a
                              number.
                           </p></li><li><p>
                              <code class="literal">footerMargin</code>
                              — The margin for any page footer. The value
                              is a number (inches).
                           </p></li><li><p>
                              <code class="literal">headerMargin</code>
                              — The margin for any page headers. The value
                              is a number (inches).
                           </p></li><li><p>
                              <code class="literal">hidden</code>
                              — Should the worksheet be hidden? The value
                              is a boolean.
                           </p></li><li><p>
                              <code class="literal">horizontalCentre</code>
                              — Should the worksheet be centered
                              horizontally? The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">horizontalFreeze</code>
                              — The row at which the pane is frozen
                              vertically. The value is a number.
                           </p></li><li><p>
                              <code class="literal">horizontalPrintResolution</code>
                              — The horizontal print resolution. The value
                              is a number.
                           </p></li><li><p>
                              <code class="literal">leftMargin</code>
                              — The left margin. The value is a number
                              (inches).
                           </p></li><li><p>
                              <code class="literal">normalMagnification</code>
                              — The normal magnification factor (not zoom or
                              scale factor). The value is a number (percentage).
                           </p></li><li><p>
                              <code class="literal">orientation</code>
                              — The paper orientation for printing this
                              sheet. The value is a string that can be either
                              "landscape" or "portrait".
                           </p></li><li><p>
                              <code class="literal">pageBreakPreviewMagnification</code>
                              — The page break preview magnification factor
                              (not zoom or scale factors). The value is a number
                              (percentage).
                           </p></li><li><p>
                              <code class="literal">pageBreakPreviewMode</code>
                              — Show page in preview mode? The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">pageStart</code>
                              — The page number at which to commence
                              printing. The value is a number.
                           </p></li><li><p>
                              <code class="literal">paperSize</code>
                              — The paper size to be used when printing
                              this sheet. The value is a string that can be one
                              of "a4", "a3", "letter", "legal" etc (see
                              <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/PaperSize.html">
                                 jxl.format.PaperSize
                              </a>
                              ).
                           </p></li><li><p>
                              <code class="literal">password</code>
                              — The password for this sheet. The value is a
                              string.
                           </p></li><li><p>
                              <code class="literal">passwordHash</code>
                              — The password hash - used only when copying
                              sheets. The value is a string.
                           </p></li><li><p>
                              <code class="literal">printGridLines</code>
                              — Should grid lines be printed? The value is
                              a boolean.
                           </p></li><li><p>
                              <code class="literal">printHeaders</code>
                              — Should headers be printed? The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">sheetProtected</code>
                              — Should the sheet be protected (read-only)?
                              The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">recalculateFormulasBeforeSave</code>
                              — Should the formulas be re-calculated when
                              the sheet is saved? The value is a boolean. Default value is false.
                           </p></li><li><p>
                              <code class="literal">rightMargin</code>
                              — The right margin. The value is a number
                              (inches).
                           </p></li><li><p>
                              <code class="literal">scaleFactor</code>
                              — The scale factor for this sheet to be used
                              when printing. The value is a number (percent).
                           </p></li><li><p>
                              <code class="literal">selected</code>
                              — Should the sheet be selected when the
                              workbook opens? The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">showGridLines</code>
                              — Should gridlines be shown? The value is a
                              boolean.
                           </p></li><li><p>
                              <code class="literal">topMargin</code>
                              — The top margin. The value is a number
                              (inches).
                           </p></li><li><p>
                              <code class="literal">verticalCentre</code>
                              — Center vertically? The value is a boolean.
                           </p></li><li><p>
                              <code class="literal">verticalFreeze</code>
                              — The row at which the pane is frozen
                              vertically. The value is a number.
                           </p></li><li><p>
                              <code class="literal">verticalPrintResolution</code>
                              — The vertical print resolution. The value is
                              a number.
                           </p></li><li><p>
                              <code class="literal">zoomFactor</code>
                              — The zoom factor. Do not confuse zoom factor
                              (which relates to the on screen view) with scale
                              factor (which refers to the scale factor when
                              printing). The value is a number (percentage).
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">&lt;e:printArea/&gt;</code>
                              — Zero or more print area definitions (see
                              <a class="xref" href="#excel.printareatitles" title="19.11. Print areas and titles">Section 19.11, “Print areas and titles”</a>
                              ).
                           </p></li><li><p>
                              <code class="literal">&lt;e:printTitle/&gt;</code>
                              — Zero or more print title definitions (see
                              <a class="xref" href="#excel.printareatitles" title="19.11. Print areas and titles">Section 19.11, “Print areas and titles”</a>
                              ).
                           </p></li><li><p>
                              <code class="literal">&lt;e:headerFooter/&gt;</code>
                              — Zero or more header/footer definitions
                              (see
                              <a class="xref" href="#excel.headersfooters" title="19.10. Headers and footers">Section 19.10, “Headers and footers”</a>
                              ).
                           </p></li><li><p>
                              Zero or more worksheet commands (see
                              <a class="xref" href="#excel.worksheetcommands" title="19.12. Worksheet Commands">Section 19.12, “Worksheet Commands”</a>
                              ).
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">header</code>— Contents that will
                              be placed at the top of the data block, above the 
                              column headers (if any).
                           </p></li><li><p>
                              <code class="literal">footer</code>— Contents that will
                              be placed at the bottom of the data block, below the 
                              column footers (if any).
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;foo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Last&nbsp;name&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>defines a worksheet with the name "foo", starting at B2.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.columns"/>19.5. Columns</h2></div></div></div><p>
         Columns are the children of worksheets and the parents of cells,
         images, formulas and hyperlinks. They are the structure that control
         the iteration of the worksheet data. See <a class="xref" href="#excel.fontsandlayout.columnsettings" title="19.14.5. Column settings">Section 19.14.5, “Column settings”</a>
         for formatting.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:column&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">&lt;e:cell/&gt;</code>
                              — Zero or more cells (see
                              <a class="xref" href="#excel.cells" title="19.6. Cells">Section 19.6, “Cells”</a>
                              ).
                           </p></li><li><p>
                              <code class="literal">&lt;e:formula/&gt;</code>
                              — Zero or more formulas (see
                              <a class="xref" href="#excel.formulas" title="19.7. Formulas">Section 19.7, “Formulas”</a>
                              ).
                           </p></li><li><p>
                              <code class="literal">&lt;e:image/&gt;</code>
                              — Zero or more images (see
                              <a class="xref" href="#excel.images" title="19.8. Images">Section 19.8, “Images”</a>
                              ).
                           </p></li><li><p>
                              <code class="literal">&lt;e:hyperLink/&gt;</code>
                              — Zero or more hyperlinks (see
                              <a class="xref" href="#excel.hyperlinks" title="19.9. Hyperlinks">Section 19.9, “Hyperlinks”</a>
                              ).
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">header</code>
                              — This facet can/will contain one
                              <code class="literal">&lt;e:cell&gt;</code>
                              ,
                              <code class="literal">&lt;e:formula&gt;</code>
                              ,
                              <code class="literal">&lt;e:image&gt;</code>
                              or
                              <code class="literal">&lt;e:hyperLink&gt;</code>
                              that will be used as header for the column.
                           </p></li><li><p>
                              <code class="literal">footer</code>
                              — This facet can/will contain one
                              <code class="literal">&lt;e:cell&gt;</code>
                              ,
                              <code class="literal">&lt;e:formula&gt;</code>
                              ,
                              <code class="literal">&lt;e:image&gt;</code>
                              or
                              <code class="literal">&lt;e:hyperLink&gt;</code>
                              that will be used as footer for the column.
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Last&nbsp;name&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>defines a column with a header and an iterated output</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.cells"/>19.6. Cells</h2></div></div></div><p>
         Cells are nested within columns (for iteration) or inside worksheets
         (for direct placement using the <code class="literal">column</code> and
         <code class="literal">row</code> attributes) and are responsible for outputting 
         the value (usually through an EL-expression involving the
         <code class="literal">var</code>-attribute of the datatable. See 
         <a class="xref" href="#">???</a>
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:cell&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">column</code>
                              — The column where to place the cell. The
                              default is the internal counter. The value is a
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">row</code>
                              — The row where to place the cell. The
                              default is the internal counter. The value is
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">value</code>
                              — The value to display. Usually an
                              EL-expression referencing the var-attribute of the
                              containing datatable. The value is a string.
                           </p></li><li><p>
                              <code class="literal">comment</code>
                              — A comment to add to the cell. The value is
                              a string.
                           </p></li><li><p>
                              <code class="literal">commentHeight</code>
                              — The height of the comment. The value is a
                              number (in pixels).
                           </p></li><li><p>
                              <code class="literal">commentWidth</code>
                              — A width of the comment. The value is a
                              number (in pixels).
                           </p></li></ul></div>

                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              Zero or more validation conditions (see
                              <a class="xref" href="#excel.cells.validation" title="19.6.1. Validation">Section 19.6.1, “Validation”</a>
                              ).
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Last&nbsp;name&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.lastName}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>defines a column with a header and an iterated output</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.cells.validation"/>19.6.1. Validation</h3></div></div></div><p>
            Validations are nested inside cells or formulas.
            They add constrains for the cell data.
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:numericValidation&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">value</code>
                                 — The limit (or lower limit where
                                 applicable) of the validation. The value is a
                                 number.
                              </p></li><li><p>
                                 <code class="literal">value2</code>
                                 — The upper limit (where applicable) of
                                 the validation. The value is a number.
                              </p></li><li><p>
                                 <code class="literal">condition</code>
                                 — The validation condition. The value is a
                                 string.
                                 </p><div class="itemizedlist"><ul><li><p>
                                          "equal" - requires the cell value to
                                          match the one defined in the
                                          value-attribute
                                       </p></li><li><p>
                                          "greater_equal" - requires the cell 
                                          value to be greater than or equal to 
                                          the value defined in the 
                                          value-attribute
                                       </p></li><li><p>
                                          "less_equal" - requires the cell value
                                          to be less than or equal to the value 
                                          defined in the value-attribute
                                       </p></li><li><p>
                                          "less_than" - requires the cell value
                                          to be less than the value defined in
                                          the value-attribute
                                       </p></li><li><p>
                                          "not_equal" - requires the cell value
                                          to not match the one defined in the
                                          value-attribute
                                       </p></li><li><p>
                                          "between" - requires the cell value to
                                          be between the values defined in the
                                          value- and value2 attributes
                                       </p></li><li><p>
                                          "not_between" - requires the cell
                                          value not to be between the values
                                          defined in the value- and value2
                                          attributes
                                       </p></li></ul></div><p>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elemenents</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.age&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:numericValidation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">condition</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;between&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value2</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;18&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
            adds numeric validation to a cell specifying that the value must be
            between 4 and 18.
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:rangeValidation&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">startColumn</code>
                                 — The starting column of the range of
                                 values to validate against. The value is a
                                 number.
                              </p></li><li><p>
                                 <code class="literal">startRow</code>
                                 — The starting row of the range of values
                                 to validate against. The value is a number.
                              </p></li><li><p>
                                 <code class="literal">endColumn</code>
                                 — The ending column of the range of values
                                 to validate against. The value is a number.
                              </p></li><li><p>
                                 <code class="literal">endRow</code>
                                 — The ending row of the range of values to
                                 validate against. The value is a number.
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elemenents</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.position&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:rangeValidation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">endColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">endRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;10&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
            adds validation to a cell specifying that the value must be in the
            values specified in range A1:A10.
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:listValidation&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elemenents</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">
                                    Zero or more list validation items.
                                 </code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><p>
            e:listValidation is a just a container for holding multiple
            e:listValidationItem tags.
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:listValidationItem&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">value</code>
                                 — A values to validate against.
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elemenents</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.position&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:listValidation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:listValidationItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;manager&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:listValidationItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;employee&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:listValidation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:cell</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
            adds validation to a cell specifying that the value must be
            "manager" or "employee".
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.cells.formatmasks"/>19.6.2. Format masks</h3></div></div></div><p>
            Format masks are defined in the mask attribute in 
            cells or formulas. There are two 
            types of format masks, one for numbers and one for dates
         </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="excel.formatmasks.numbers"/>19.6.2.1. Number masks</h4></div></div></div><p>
               When encountering a format mask, first it is checked if it is in
               internal form, e.g "format1", "accounting_float" and so on (see
               <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/write/NumberFormats.html">
                  jxl.write.NumberFormats
               </a>
               ).
            </p><p>
               if the mask is not in the list, it is treated as a custom mask
               (see
               <a class="ulink" href="http://java.sun.com/javase/6/docs/api/java/text/DecimalFormat.html">
                  java.text.DecimalFormat
               </a>
               ). e.g "0.00" and automatically converted to the closest match.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="excel.formatmasks.dates"/>19.6.2.2. Date masks</h4></div></div></div><p>
               When encountering a format mask, first it is checked if it is in
               internal form, e.g "format1", "format2" and so on (see
               <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/write/DateFormats.html">
                  jxl.write.DateFormats
               </a>
               ).
            </p><p>
               if the mask is not in the list, it is treated as a custom mask
               (see
               <a class="ulink" href="http://java.sun.com/javase/6/docs/api/java/text/DateFormat.html">
                  java.text.DateFormat
               </a>
               )., e.g "dd.MM.yyyy" and automatically converted to the closest
               match.
            </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.formulas"/>19.7. Formulas</h2></div></div></div><p>
         Formulas are nested within columns (for iteration) or inside worksheets
         (for direct placement using the <code class="literal">column</code> and
         <code class="literal">row</code> attributes) and add calculations or functions to 
         ranges of cells. They are essentially cells, see 
         <a class="xref" href="#excel.cells" title="19.6. Cells">Section 19.6, “Cells”</a> for available attributes. Note that they 
         can apply templates and have own font definitions etc just as normal 
         cells.
      </p><p>
         The formula of the cell is placed in the <code class="literal">value</code>
         -attribute as a normal the Microsoft® Excel® spreadsheet application notation. Note that when doing 
         cross-sheet formulas, the worksheets must exist before referencing 
         a formula against them. The value is a string.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fooSheet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">column</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">row</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;barSheet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:cell</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">column</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">row</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:formula</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">column</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">row</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fooSheet!A1+barSheet1!A1&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:font</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fontSize</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;12&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:formula</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         defines an formula in B2 summing cells A1 in worksheets FooSheet and
         BarSheet
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.images"/>19.8. Images</h2></div></div></div><p>
         Images are nested within columns (for iteration) or inside worksheets
         (for direct placement using the <code class="literal">startColumn/startRow</code>
         and <code class="literal">rowSpan/columnSpan</code> attributes). The spans are 
         optional and if omitted, the image will be inserted without resizing.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:image&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">startColumn</code>
                              — The starting column of the image. The
                              default is the internal counter. The value is a
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">startRow</code>
                              — The starting row of the image. The default
                              is the internal counter. The value is a number.
                              Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">columnSpan</code>
                              — The column span of the image. The default
                              is one resulting in the default width of the
                              image. The value is a float.
                           </p></li><li><p>
                              <code class="literal">rowSpan</code>
                              — The row span of the image. The default is
                              the one resulting in the default height of the
                              image. The value is a float.
                           </p></li><li><p>
                              <code class="literal">URI</code>
                              — The URI to the image. The value is a
                              string.
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:image</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rowSpan</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">columnSpan</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">URI</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://foo.org/logo.jpg&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>defines an image in A1:E5 based on the given data</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.hyperlinks"/>19.9. Hyperlinks</h2></div></div></div><p>
         Hyperlinks are nested within columns (for iteration) or inside
         worksheets (for direct placement using the 
         <code class="literal">startColumn/startRow</code> and
         <code class="literal">endColumn/endRow</code> attributes). They add link 
         navigation to URIs
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:hyperlink&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">startColumn</code>
                              — The starting column of the hyperlink. The
                              default is the internal counter. The value is a
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">startRow</code>
                              — The starting row of the hyperlink. The
                              default is the internal counter. The value is a
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">endColumn</code>
                              — The ending column of the hyperlink. The
                              default is the internal counter. The value is a
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">endRow</code>
                              — The ending row of the hyperlink. The
                              default is the internal counter. The value is a
                              number. Note that the value is 0-based.
                           </p></li><li><p>
                              <code class="literal">URL</code>
                              — The URL to link. The value is a string.
                           </p></li><li><p>
                              <code class="literal">description</code>
                              — The description of the link. The value is a
                              string.
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:hyperLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">endRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">endColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">URL</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://seamframework.org&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">description</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;The&nbsp;Seam&nbsp;Framework&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         defines a described hyperlink pointing to SFWK in the area A1:E5
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.headersfooters"/>19.10. Headers and footers</h2></div></div></div><p>
         Headers and footers are children of worksheets and contain facets which
         in turn contains a string with commands that are parsed.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:header&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">left</code>
                              — The contents of the left header/footer
                              part.
                           </p></li><li><p>
                              <code class="literal">center</code>
                              — The contents of the center header/footer
                              part.
                           </p></li><li><p>
                              <code class="literal">right</code>
                              — The contents of the right header/footer
                              part.
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:footer&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">left</code>
                              — The contents of the left header/footer
                              part.
                           </p></li><li><p>
                              <code class="literal">center</code>
                              — The contents of the center header/footer
                              part.
                           </p></li><li><p>
                              <code class="literal">right</code>
                              — The contents of the right header/footer
                              part.
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><p>
         The content of the facets is a string that can contain various #-delimited
         commands as follows:
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>#date#</p>
                  </td><td valign="top">
                     <p>Inserts the current date</p>
                  </td></tr><tr><td valign="top">
                     <p>#page_number#</p>
                  </td><td valign="top">
                     <p>Inserts the current page number</p>
                  </td></tr><tr><td valign="top">
                     <p>#time#</p>
                  </td><td valign="top">
                     <p>Inserts the current time</p>
                  </td></tr><tr><td valign="top">
                     <p>#total_pages#</p>
                  </td><td valign="top">
                     <p>Inserts the total page count</p>
                  </td></tr><tr><td valign="top">
                     <p>#worksheet_name#</p>
                  </td><td valign="top">
                     <p>Inserts the worksheet name</p>
                  </td></tr><tr><td valign="top">
                     <p>#workbook_name#</p>
                  </td><td valign="top">
                     <p>Inserts the workbook name</p>
                  </td></tr><tr><td valign="top">
                     <p>#bold#</p>
                  </td><td valign="top">
                     <p>
                        Toggles bold font, use another #bold# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#italics#</p>
                  </td><td valign="top">
                     <p>
                        Toggles italic font, use another #italic# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#underline#</p>
                  </td><td valign="top">
                     <p>
                        Toggles underlining, use another #underline# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#double_underline#</p>
                  </td><td valign="top">
                     <p>
                        Toggles double underlining, use another #double_underline# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#outline#</p>
                  </td><td valign="top">
                     <p>
                        Toggles outlined font, use another #outline# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#shadow#</p>
                  </td><td valign="top">
                     <p>
                        Toggles shadowed font, use another #shadow# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#strikethrough#</p>
                  </td><td valign="top">
                     <p>
                        Toggles strikethrough font, use another #strikethrough# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#subscript#</p>
                  </td><td valign="top">
                     <p>
                        Toggles subscripted font, use another #subscript# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#superscript#</p>
                  </td><td valign="top">
                     <p>
                        Toggles superscript font, use another #superscript# to 
                        turn it off
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#font_name#</p>
                  </td><td valign="top">
                     <p>
                        Sets font name, used like #font_name=Verdana"
                     </p>
                  </td></tr><tr><td valign="top">
                     <p>#font_size#</p>
                  </td><td valign="top">
                     <p>
                        Sets font size, use like #font_size=12#
                     </p>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:header</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;left&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;document&nbsp;was&nbsp;made&nbsp;on&nbsp;#date#&nbsp;and&nbsp;has&nbsp;#total_pages#&nbsp;pages</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;right&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#time#</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:header</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.printareatitles"/>19.11. Print areas and titles</h2></div></div></div><p>
         Print areas and titles childrens of worksheets and worksheet templates
         and provide... print areas and titles.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;e:printArea&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">firstColumn</code>
                              — The column of the top-left corner of the
                              area. The parameter is a number. Note that the
                              value is 0-based.
                           </p></li><li><p>
                              <code class="literal">firstRow</code>
                              — The row of the top-left corner of the area.
                              The parameter is a number. Note that the value is
                              0-based.
                           </p></li><li><p>
                              <code class="literal">lastColumn</code>
                              — The column of the bottom-right corner of
                              the area. The parameter is a number. Note that the
                              value is 0-based.
                           </p></li><li><p>
                              <code class="literal">lastRow</code>
                              — The row of the bottom-right corner of the
                              area. The parameter is a number. Note that the
                              value is 0-based.
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elemenents</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:printTitles</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">firstRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">firstColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">lastRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lastColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:printArea</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">firstRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">firstColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">lastRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">lastColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         defines a print title between A1:A10 and a print area between B2:J10.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.worksheetcommands"/>19.12. Worksheet Commands</h2></div></div></div><p>
         Worksheet commands are children of workbooks and are usually executed
         only once.
      </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.worksheetcommands.grouping"/>19.12.1. Grouping</h3></div></div></div><p>Provides grouping of columns and rows.</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:groupRows&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">startRow</code>
                                 — The row to start the grouping at. The
                                 value is a number. Note that the value is
                                 0-based.
                              </p></li><li><p>
                                 <code class="literal">endRow</code>
                                 — The row to end the grouping at. The
                                 value is a number. Note that the value is
                                 0-based.
                              </p></li><li><p>
                                 <code class="literal">collapse</code>
                                 — Should the grouping be collapsed
                                 initially? The value is a boolean.
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elements</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:groupColumns&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">startColumn</code>
                                 — The column to start the grouping at. The
                                 value is a number. Note that the value is
                                 0-based.
                              </p></li><li><p>
                                 <code class="literal">endColumn</code>
                                 — The column to end the grouping at. The
                                 value is a number. Note that the value is
                                 0-based.
                              </p></li><li><p>
                                 <code class="literal">collapse</code>
                                 — Should the grouping be collapsed
                                 initially? The value is a boolean.
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elements</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:groupRows</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">endRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">collapse</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:groupColumns</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">endColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">collapse</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
            groups rows 5 through 10 and columns 5 through 10 so that the rows
            are initially collapsed (but not the columns).
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.worksheetcommands.pagebreaks"/>19.12.2. Page breaks</h3></div></div></div><p>Provides page breaks</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:rowPageBreak&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">row</code>
                                 — The row to break at. The value is a
                                 number. Note that the value is 0-based.
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elements</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:rowPageBreak</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">row</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;4&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>breaks page at row 5.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.worksheetcommands.merging"/>19.12.3. Merging</h3></div></div></div><p>Provides cell merging</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:mergeCells&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">startRow</code>
                                 — The row to start the merging from. The
                                 value is a number. Note that the value is
                                 0-based.
                              </p></li><li><p>
                                 <code class="literal">startColumn</code>
                                 — The column to start the merging from.
                                 The value is a number. Note that the value is
                                 0-based.
                              </p></li><li><p>
                                 <code class="literal">endRow</code>
                                 — The row to end the merging at. The value
                                 is a number. Note that the value is 0-based.
                              </p></li><li><p>
                                 <code class="literal">endColumn</code>
                                 — The column to end the merging at. The
                                 value is a number. Note that the value is
                                 0-based.
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elements</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:mergeCells</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">startColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">endRow</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">endColumn</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;9&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:worksheet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>merges the cells in the range A1:J10</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.datatableexporter"/>19.13. Datatable exporter</h2></div></div></div><p>
         If you prefer to export an existing JSF datatable instead of writing a
         dedicated XHTML document, this can also be achieved easily by executing
         the <code class="literal">org.jboss.seam.excel.excelExporter.export</code>
         component, passing in the id of the datatable as an Seam EL parameter.
         Consider you have a data table
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;theForm&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;theDataTable&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personList.personList}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         that you want to view as an
         <span class="trademark">Microsoft</span>®
         <span class="trademark">Excel</span>®
         spreadsheet. Place a
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Export&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{excelExporter.export('theForm:theDataTable')}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
         in the form and you're done. You can of course execute the exporter
         with a button, s:link or other preferred method. There are also plans
         for a dedicated export tag that can be placed inside the datatable tag
         so you won't have to refer to the datatable by ID.
      </p><p>
         See <a class="xref" href="#excel.fontsandlayout" title="19.14. Fonts and layout">Section 19.14, “Fonts and layout”</a> for formatting.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.fontsandlayout"/>19.14. Fonts and layout</h2></div></div></div><p>
         Controlling how the output look is done with a combination of CSSish
         style attributes and tag attributes. The most common ones (fonts, borders,
         backgrounds etc) are CSS and some more general settings are in tag attributes. 
      </p><p>
         The CSS attributes cascade down from parent to children and within one tag
         cascades over the CSS classes referenced in the <code class="literal">styleClass</code>
         attributes and finally over the CSS attributes defined in the 
         <code class="literal">style</code> attribute. You can place them pretty much anywhere but
         e.g. placing a column width setting in a cell nested within that column makes
         little sense.
      </p><p>
         If you have format masks or fonts that use special characters, such as spaces
         and semicolons, you can escape the css string with '' characters like xls-format-mask:'$;$'
      </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.link"/>19.14.1. Stylesheet links</h3></div></div></div><p>
            External stylesheets are references with the e:link tag. They are placed as
            children of the workbook.
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>
                           <code class="literal">&lt;e:link&gt;</code>
                        </p>
                     </td><td valign="top">
                        <p>
                           <span class="emphasis"><em>Attributes</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">URL</code>
                                 — The URL to the stylesheet
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Child elemenents</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                        <p>
                           <span class="emphasis"><em>Facets</em></span>
                        </p>
                        <div class="itemizedlist"><ul><li><p>
                                 <code class="literal">none</code>
                              </p></li></ul></div>
                     </td></tr></tbody></table></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">e:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">URL</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/css/excel.css&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">e:workbook</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>References a stylesheet that can be found at /css/excel.css</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.fonts"/>19.14.2. Fonts</h3></div></div></div><p>
            This group of XLS-CSS attributes define a font and its attributes
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>xls-font-family</p>
                     </td><td valign="top">
                        <p>
                           The name of the font. Make sure that it's one that is
                           supported by your system. 
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-size</p>
                     </td><td valign="top">
                        <p>The font size. Use a plain number</p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-color</p>
                     </td><td valign="top">
                        <p>
                           The color of the font (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Colour.html">
                              jxl.format.Colour
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-bold</p>
                     </td><td valign="top">
                        <p>
                           Should the font be bold? Valid values are "true" and
                           "false"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-italic</p>
                     </td><td valign="top">
                        <p>
                           Should the font be italic? Valid values are "true"
                           and "false"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-script-style</p>
                     </td><td valign="top">
                        <p>
                           The script style of the font (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/ScriptStyle.html">
                              jxl.format.ScriptStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-underline-style</p>
                     </td><td valign="top">
                        <p>
                           The underline style of the font (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/UnderlineStyle.html">
                              jxl.format.UnderlineStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font-struck-out</p>
                     </td><td valign="top">
                        <p>
                           Should the font be struck out? Valid values are
                           "true" and "false"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-font</p>
                     </td><td valign="top">
                        <p>
                          A shorthand notation for setting all the values. Place
                          the font name last and use tick marks for fonts with
                          spaces in them, e.g. 'Times New Roman'. Use "italic", "bold" 
                          and "struckout". 
                        </p>
                        <p>
                          Example style="xls-font: red bold italic 22 Verdana"
                        </p>
                     </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.borders"/>19.14.3. Borders</h3></div></div></div><p>
            This group of XLS-CSS attributes defines the borders of the cell
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>xls-border-left-color</p>
                     </td><td valign="top">
                        <p>
                           The border color of the left edge of the cell
                           (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Colour.html">
                              jxl.format.Colour
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-left-line-style</p>
                     </td><td valign="top">
                        <p>
                           The border line style of the left edge of the cell (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/BorderLineStyle.html">
                              jxl.format.BorderLineStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-left</p>
                     </td><td valign="top">
                        <p>
                           A shorthand for setting line style and color of the left edge
                           of the cell, e.g style="xls-border-left: thick red"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-top-color</p>
                     </td><td valign="top">
                        <p>
                           The border color of the top edge of the cell
                           (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Colour.html">
                              jxl.format.Colour
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-top-line-style</p>
                     </td><td valign="top">
                        <p>
                           The border line style of the top edge of the cell (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/BorderLineStyle.html">
                              jxl.format.BorderLineStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-top</p>
                     </td><td valign="top">
                        <p>
                           A shorthand for setting line style and color of the top edge
                           of the cell, e.g style="xls-border-top: red thick"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-right-color</p>
                     </td><td valign="top">
                        <p>
                           The border color of the right edge of the cell
                           (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Colour.html">
                              jxl.format.Colour
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-right-line-style</p>
                     </td><td valign="top">
                        <p>
                           The border line style of the right edge of the cell (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/BorderLineStyle.html">
                              jxl.format.BorderLineStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-right</p>
                     </td><td valign="top">
                        <p>
                           A shorthand for setting line style and color of the right edge
                           of the cell, e.g style="xls-border-right: thick red"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-bottom-color</p>
                     </td><td valign="top">
                        <p>
                           The border color of the bottom edge of the cell
                           (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Colour.html">
                              jxl.format.Colour
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-bottom-line-style</p>
                     </td><td valign="top">
                        <p>
                           The border line style of the bottom edge of the cell (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/BorderLineStyle.html">
                              jxl.format.BorderLineStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border-bottom</p>
                     </td><td valign="top">
                        <p>
                           A shorthand for setting line style and color of the bottom edge
                           of the cell, e.g style="xls-border-bottom: thick red"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-border</p>
                     </td><td valign="top">
                        <p>
                           A shorthand for setting line style and color for all edges
                           of the cell, e.g style="xls-border: thick red"
                        </p>
                     </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.background"/>19.14.4. Background</h3></div></div></div><p>
            This group of XLS-CSS attributes defines the background of the cell
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>xls-background-color</p>
                     </td><td valign="top">
                        <p>
                           The color of the background (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/BorderLineStyle.html">
                              jxl.format.BorderLineStyle
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-background-pattern</p>
                     </td><td valign="top">
                        <p>
                           The pattern of the background (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Pattern.html">
                              jxl.format.Pattern
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-background</p>
                     </td><td valign="top">
                        <p>
                           A shorthand for setting the background color and pattern. See above for rules.
                        </p>
                     </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.columnsettings"/>19.14.5. Column settings</h3></div></div></div><p>
            This group of XLS-CSS attributes defines the column widths etc.
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>xls-column-width</p>
                     </td><td valign="top">
                        <p>
                           The width of the column. Use largeish values (~5000) to start with.
                           Used by the e:column in xhtml mode.
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-column-widths</p>
                     </td><td valign="top">
                        <p>
                           The width of the column. Use largeish values (~5000) to start with.
                           Used by the excel exporter, placed in the datatable style attribute.
                           Use numerical values or * to bypass a column.
                        </p>
                        <p>
                           Example style="xls-column-widths: 5000, 5000, *, 10000"
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-column-autosize</p>
                     </td><td valign="top">
                        <p>
                           Should an attempt be made to autosize the column? Valid values
                           are "true" and "false".
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-column-hidden</p>
                     </td><td valign="top">
                        <p>
                           Should the column be hidden? Valid values are "true" and "false".
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-column-export</p>
                     </td><td valign="top">
                        <p>
                           Should the column be shown in export? Valid values are "true" and "false". Default is "true".
                        </p>
                     </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.cellsettings"/>19.14.6. Cell settings</h3></div></div></div><p>
            This group of XLS-CSS attributes defines the cell properties
         </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                        <p>xls-alignment</p>
                     </td><td valign="top">
                        <p>
                           The alignment of the cell value (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Alignment.html">
                              jxl.format.Alignment
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-force-type</p>
                     </td><td valign="top">
                        <p>
                           The forced type of the cell data. The value is a string that can be one 
                           of "general", "number", "text", "date", "formula" or "bool". The type 
                           is automatically detected so there is rarely any use for this attribute.
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-format-mask</p>
                     </td><td valign="top">
                        <p>
                           The format mask of the cell, see <a class="xref" href="#excel.cells.formatmasks" title="19.6.2. Format masks">Section 19.6.2, “Format masks”</a>
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-indentation</p>
                     </td><td valign="top">
                        <p>
                           The indentation of the cell value. The value is numeric.
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-locked</p>
                     </td><td valign="top">
                        <p>
                           Should the cell be locked. Use with workbook level locked. 
                           Valid values are "true" and "false".
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-orientation</p>
                     </td><td valign="top">
                        <p>
                           The orientation of the cell value (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/Orientation.html">
                              jxl.format.Orientation
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-vertical-alignment</p>
                     </td><td valign="top">
                        <p>
                           The vertical alignment of the cell value (see
                           <a class="ulink" href="http://jexcelapi.sourceforge.net/resources/javadocs/current/docs/jxl/format/VerticalAlignment.html">
                              jxl.format.VerticalAlignment
                           </a>
                           ).
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-shrink-to-fit</p>
                     </td><td valign="top">
                        <p>
                           Should the cell values shrink to fit?
                           Valid values are "true" and "false".
                        </p>
                     </td></tr><tr><td valign="top">
                        <p>xls-wrap</p>
                     </td><td valign="top">
                        <p>
                           Should the cell wrap with newlines?
                           Valid values are "true" and "false".
                        </p>
                     </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.datatableexporter"/>19.14.7. The datatable exporter</h3></div></div></div><p>
            The datatable exporter uses the same xls-css attributes as the xhtml
            document with the exception that column widths are defined with the 
            <code class="literal">xls-column-widths</code> attribute on the datatable (since
            the UIColumn doesn't support the style or styleClass attributes).
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.examples"/>19.14.8. Layout examples</h3></div></div></div><p>
            TODO
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="excel.fontsandlayout.limitations"/>19.14.9. Limitations</h3></div></div></div><p>
            In the current version there are some known limitations regarding 
            CSS support
         </p><div class="itemizedlist"><ul><li><p>
                  When using .xhtml documents, stylesheets must be referenced
                  through the <code class="literal">&lt;e:link&gt;</code> tag
               </p></li><li><p>
                  When using the datatable exporter, CSS must be entered through
                  style-attributes, external stylesheets are not supported 
               </p></li></ul></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.i18n"/>19.15. Internationalization</h2></div></div></div><p>
        There are only two resources bundle keys used, both for invalid data format and both take a
        parameter (the invalid value)
      </p><div class="itemizedlist"><ul><li><p>
         		<code class="literal">org.jboss.seam.excel.not_a_number</code>
                — When a value thought to be a number could not be treated as such
            </p></li><li><p>
            	<code class="literal">org.jboss.seam.excel.not_a_date</code>
                — When a value thought to be a date could not be treated as such
            </p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="excel.links"/>19.16. Links and further documentation</h2></div></div></div><p>
         The core of the the Microsoft® Excel® spreadsheet application functionality is based on the excellent 
         JExcelAPI library which can be found on 
         <a class="ulink" href="http://jexcelapi.sourceforge.net">http://jexcelapi.sourceforge.net/</a>
         and most features and possible limitations are inherited from here.
      </p><p>
         If you use the forum or mailing list, please remember that they don't
         know anything about Seam and the usage of their library, any issues are
         best reported in the JBoss Seam JIRA under the "excel" module.
      </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="rss"/>Chapter 20. RSS support</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#rss.installation">20.1. Installation</a></span></dt><dt><span class="section"><a href="#rss.usage">20.2. Generating feeds</a></span></dt><dt><span class="section"><a href="#rss.feeds">20.3. Feeds</a></span></dt><dt><span class="section"><a href="#rss.entries">20.4. Entries</a></span></dt><dt><span class="section"><a href="#rss.links">20.5. Links and further documentation</a></span></dt></dl></div><p>
      It is now easy to integrate RSS feeds in Seam through the
      <a class="ulink" href="http://yarfraw.sourceforge.net/">YARFRAW</a>
      library. The RSS support is currently in the state of "tech preview"
      in the current release.	
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="rss.installation"/>20.1. Installation</h2></div></div></div><p>
         To enable RSS support, include the <code class="literal">jboss-seam-rss.jar</code>
         in your applications <code class="literal">WEB-INF/lib</code> directory. The RSS
         library also has some dependent libraries that should be placed in the
         same directory. See <a class="xref" href="#dependencies.rss" title="38.2.6. Seam RSS support">Section 38.2.6, “Seam RSS support”</a> for a list of 
         libraries to include.
      </p><p>
         The Seam RSS support requires the use of Facelets as the view 
         technology.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="rss.usage"/>20.2. Generating feeds</h2></div></div></div><p>
         The <code class="literal">examples/rss</code> project contains an example of
         RSS support in action. It demonstrates proper deployment 
         packaging, and it shows the exposed functionality.
      </p><p>
         A feed is a xhtml-page that consist of a feed and a list of nested
         entry items.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">r:feed</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:ui</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:r</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/rss&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rss.feed.title}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">uid</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rss.feed.uid}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">subtitle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rss.feed.subtitle}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">updated</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rss.feed.updated}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">link</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rss.feed.link}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{rss.feed.entries}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">r:entry</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">uid</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.uid}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.title}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">link</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.link}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">author</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.author}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">summary</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.summary}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">published</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.published}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">updated</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entry.updated}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">r:feed</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="rss.feeds"/>20.3. Feeds</h2></div></div></div><p>
         Feeds are the top-level entities that describe the properties of the
         information source. It contains zero or more nested entries.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;r:feed&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">uid</code>
                              — An optional unique feed id. The value is a string.
                           </p></li><li><p>
                              <code class="literal">title</code>
                              — The title of the feed. The value is a string.
                           </p></li><li><p>
                              <code class="literal">subtitle</code>
                              — The subtitle of the feed. The value is a string.
                           </p></li><li><p>
                              <code class="literal">updated</code>
                              — When was the feed updated? The value is a date.
                           </p></li><li><p>
                              <code class="literal">link</code>
                              — The link to the source of the information.
                              The value is a string.
                           </p></li><li><p>
                              <code class="literal">feedFormat</code>
                              — The feed format. The value is a string and defaults
                              to ATOM1. Valid values are RSS10, RSS20, ATOM03 and ATOM10.
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elements</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">Zero or more feed entries</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="rss.entries"/>20.4. Entries</h2></div></div></div><p>
         Entries are the "headlines" in the feed.
      </p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td valign="top">
                     <p>
                        <code class="literal">&lt;r:feed&gt;</code>
                     </p>
                  </td><td valign="top">
                     <p>
                        <span class="emphasis"><em>Attributes</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">uid</code>
                              — An optional unique entry id. The value is a string.
                           </p></li><li><p>
                              <code class="literal">title</code>
                              — The title of the entry. The value is a string.
                           </p></li><li><p>
                              <code class="literal">link</code>
                              — A link to the item. The value is a string.
                           </p></li><li><p>
                              <code class="literal">author</code>
                              — The author of the story. The value is a string.
                           </p></li><li><p>
                              <code class="literal">summary</code>
                              — The body of the story. The value is a string.
                           </p></li><li><p>
                              <code class="literal">textFormat</code>
                              — The format of the body and title of the story. 
                              The value is a string and valid values are "text" and 
                              "html". Defaults to "html".
                           </p></li><li><p>
                              <code class="literal">published</code>
                              — When was the story first published? The value is a date.
                           </p></li><li><p>
                              <code class="literal">updated</code>
                              — When was the story updated? The value is a date.
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Child elements</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                     <p>
                        <span class="emphasis"><em>Facets</em></span>
                     </p>
                     <div class="itemizedlist"><ul><li><p>
                              <code class="literal">none</code>
                           </p></li></ul></div>
                  </td></tr></tbody></table></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="rss.links"/>20.5. Links and further documentation</h2></div></div></div><p>
         The core of the RSs functionality is based on the YARFRAW library
         which can be found on <a class="ulink" href="http://yarfraw.sourceforge.net/">http://yarfraw.sourceforge.net/</a> and most 
         features and possible limitations are inherited from here.
      </p><p>
        For details on the ATOM 1.0 format, have a look at 
        <a class="ulink" href="http://atompub.org/2005/07/11/draft-ietf-atompub-format-10.html">
        the specs</a>
      </p><p>
        For details on the RSS 2.0 format, have a look at 
        <a class="ulink" href="http://cyber.law.harvard.edu/rss/rss.html">the specs</a>
	  </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="mail"/>Chapter 21. Email</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e20280">21.1. Creating a message</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e20321">21.1.1. Attachments</a></span></dt><dt><span class="section"><a href="#d0e20399">21.1.2. HTML/Text alternative part</a></span></dt><dt><span class="section"><a href="#d0e20406">21.1.3. Multiple recipients</a></span></dt><dt><span class="section"><a href="#d0e20416">21.1.4. Multiple messages</a></span></dt><dt><span class="section"><a href="#d0e20426">21.1.5. Templating</a></span></dt><dt><span class="section"><a href="#d0e20461">21.1.6. Internationalisation</a></span></dt><dt><span class="section"><a href="#d0e20472">21.1.7. Other Headers</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e20488">21.2. Receiving emails</a></span></dt><dt><span class="section"><a href="#d0e20535">21.3. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e20560">21.3.1. mailSession</a></span></dt></dl></dd><dt><span class="section"><a href="#mail.tags">21.4. Tags</a></span></dt></dl></div><p>
    Seam now includes an optional components for templating and sending emails.
  </p><p>
    Email support is provided by <code class="literal">jboss-seam-mail.jar</code>. This 
    JAR contains the mail JSF controls, which are used to construct emails,
    and the <code class="literal">mailSession</code> manager component. 
  </p><p>
    The examples/mail project contains an example of the email support in 
    action. It demonstrates proper packaging, and it contains a number of 
    example that demonstrate the key features currently supported. 
  </p><p>
    You can also test your mail's using Seam's integration testing environment.
    See <a class="xref" href="#testing.mail" title="37.2.3.4. Integration Testing Seam Mail">Section 37.2.3.4, “Integration Testing Seam Mail”</a>.
  </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e20280"/>21.1. Creating a message</h2></div></div></div><p>
      You don't need to learn a whole new templating language to use Seam Mail 
      — an email is just facelet!
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:m</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/mail&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Peter&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">address</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;peter@example.com&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstname}&nbsp;#{person.lastname}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{person.address}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:to</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:subject</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Try&nbsp;out&nbsp;Seam!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:subject</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Dear&nbsp;#{person.firstname}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">,</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">You&nbsp;can&nbsp;try&nbsp;out&nbsp;Seam&nbsp;by&nbsp;visiting&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://labs.jboss.com/jbossseam&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">http://labs.jboss.com/jbossseam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Regards,</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Pete</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      The <code class="literal">&lt;m:message&gt;</code> tag wraps the whole message, 
      and tells Seam to start rendering an email.  Inside the <code class="literal">&lt;m:message&gt;</code>
      tag we use an <code class="literal">&lt;m:from&gt;</code> tag to set who the 
      message is from, a <code class="literal">&lt;m:to&gt;</code> tag to	specify a 
      sender (notice how we use EL as we would in a normal facelet), and a 
      <code class="literal">&lt;m:subject&gt;</code> tag.
    </p><p>
      The <code class="literal">&lt;m:body&gt;</code> tag wraps the body of the email. 
      You can use regular HTML tags inside the body as well as JSF components.
    </p><p>
      So, now you have your email template, how do you go about sending it? 
      Well, at the end of rendering the <code class="literal">m:message</code> the 
      <code class="literal">mailSession</code> is called to send the email, so all you 
      have to do is ask Seam to render the view:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">create</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Renderer</span><span class="java_plain">&nbsp;renderer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;send</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderer</span><span class="java_separator">.</span><span class="java_plain">render</span><span class="java_separator">(</span><span class="java_literal">&quot;/simple.xhtml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Email&nbsp;sent&nbsp;successfully&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_literal">&quot;Email&nbsp;sending&nbsp;failed:&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;e</span><span class="java_separator">.</span><span class="java_plain">getMessage</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
      If, for example, you entered an invalid email address, then an exception 
      would be thrown, which is caught and then displayed to the user.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20321"/>21.1.1. Attachments</h3></div></div></div><p>
        Seam makes it easy to attach files to an email.  It supports most of 
        the standard java types used when working with files.
      </p><p>
        If you wanted to email the <code class="literal">jboss-seam-mail.jar</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/WEB-INF/lib/jboss-seam-mail.jar&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Seam will load the file from the classpath, and attach it to the email.
        By default it would be attached as <code class="literal">jboss-seam-mail.jar</code>;
   		if you wanted it to have another name you would just add the <code class="literal">fileName</code> attribute:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/WEB-INF/lib/jboss-seam-mail.jar&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fileName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;this-is-so-cool.jar&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        You could also attach a <code class="literal">java.io.File</code>, a <code class="literal">java.net.URL</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{numbers}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Or a <code class="literal">byte[]</code> or a <code class="literal">java.io.InputStream</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.photo}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">contentType</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image/png&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        You'll notice that for a <code class="literal">byte[]</code> and a <code class="literal">java.io.InputStream</code>
        you need to specify the MIME type of the attachment (as that 
        information is not carried as part of the file).
      </p><p>
        And it gets even better, you can attach a Seam generated PDF, or any 
        standard JSF view, just by wrapping a <code class="literal">&lt;m:attachment&gt;</code> 
        around the normal tags you would use:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fileName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;tiny.pdf&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p:document</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;very&nbsp;tiny&nbsp;PDF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p:document</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:attachment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        If you had a set of files you wanted to attach (for example a set of 
        pictures loaded from a database) you can just use a <code class="literal">&lt;ui:repeat&gt;</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;person&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.photo}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">contentType</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image/jpeg&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fileName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstname}_#{person.lastname}.jpg&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        And if you want to display an attached image inline:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:attachment</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.photo}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">contentType</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image/jpeg&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">fileName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstname}_#{person.lastname}.jpg&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">status</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;personPhoto&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">disposition</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;inline&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">img</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cid:#{personPhoto.contentId}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        You may be wondering what <code class="literal">cid:#{...}</code> does. Well, the
        IETF specified that by putting this as the src for your image, the 
        attachments will be looked at when trying to locate the image (the 
        <code class="literal">Content-ID</code>'s must match) — magic!
      </p><p>
        You must declare the attachment before trying to access the status object.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20399"/>21.1.2. HTML/Text alternative part</h3></div></div></div><p>
        Whilst most mail readers nowadays support HTML, some don't, so you can 
        add a plain text alternative to your email body:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;alternative&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Sorry,&nbsp;your&nbsp;email&nbsp;reader&nbsp;can't&nbsp;show&nbsp;our&nbsp;fancy&nbsp;email,&nbsp;</span><br />
<span class="xml_plain">please&nbsp;go&nbsp;to&nbsp;http://labs.jboss.com/jbossseam&nbsp;to&nbsp;explore&nbsp;Seam.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20406"/>21.1.3. Multiple recipients</h3></div></div></div><p>
        Often you'll want to send an email to a group of recipients (for 
        example your users).  All of the recipient mail tags can be placed 
        inside a <code class="literal">&lt;ui:repeat&gt;</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{allUsers}&nbsp;var=&quot;</span><span class="xml_attribute_name">user</span><span class="xml_attribute_value">&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="xml_attribute_name">m:to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.firstname}&nbsp;#{user.lastname}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">address</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.emailAddress}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20416"/>21.1.4. Multiple messages</h3></div></div></div><p>
        Sometimes, however, you need to send a slightly different message to 
        each recipient (e.g. a password	reset).  The best way to do this is to 
        place the whole message inside a <code class="literal">&lt;ui:repeat&gt;</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:repeat</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{people}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;p&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstname}&nbsp;#{person.lastname}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{person.address}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:from</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{p.firstname}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{p.address}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:to</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:repeat</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20426"/>21.1.5. Templating</h3></div></div></div><p>
        The mail templating example shows that facelets templating just works 
        with the Seam mail tags.
      </p><p>
        Our <code class="literal">template.xhtml</code> contains:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:from</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Seam&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">address</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;do-not-reply@jboss.com&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:to</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.firstname}&nbsp;#{person.lastname}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{person.address}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:to</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:subject</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{subject}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:subject</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:insert</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;body&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;is&nbsp;the&nbsp;default&nbsp;body,&nbsp;specified&nbsp;by&nbsp;the&nbsp;template.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:insert</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Our <code class="literal">templating.xhtml</code> contains:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;subject&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Templating&nbsp;with&nbsp;Seam&nbsp;Mail&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;body&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;example&nbsp;demonstrates&nbsp;that&nbsp;you&nbsp;can&nbsp;easily&nbsp;use&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">facelets&nbsp;templating</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">i</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;in&nbsp;email!</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        You can also use facelets source tags in your email, but you must place
        them in a jar in <code class="literal">WEB-INF/lib</code> - referencing the 
        <code class="literal">.taglib.xml</code> from <code class="literal">web.xml</code> isn't 
        reliable when using Seam Mail (if you send your mail asynchronously 
        Seam Mail doesn't have access to the full JSF or Servlet context, and 
        so doesn't know about <code class="literal">web.xml</code> configuration 
        parameters).
      </p><p>
        If you do need more configure Facelets or JSF when sending mail, you'll
        need to override the Renderer component and do the configuration 
        programmatically - only for advanced users!
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20461"/>21.1.6. Internationalisation</h3></div></div></div><p>
        Seam supports sending internationalised messages.  By default, the 
        encoding provided by JSF is used, but this can be overridden on the 
        template:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">charset</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;UTF-8&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">m:message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        The body, subject and recipient (and from) name will be encoded.  
        You'll need to make sure facelets uses the correct charset for parsing
        your pages by setting encoding of the template:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20472"/>21.1.7. Other Headers</h3></div></div></div><p>
        Sometimes you'll want to add other headers to your email.  Seam 
        provides support for some (see <a class="xref" href="#mail.tags" title="21.4. Tags">Section 21.4, “Tags”</a>). For 
        example, we can set the importance of the email, and ask for a read 
        receipt:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:m</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/mail&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">importance</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;low&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">requestReadReceipt</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
        Otherwise you can add any header to the message using the 
        <code class="literal">&lt;m:header&gt;</code> tag:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">m:header</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;X-Sent-From&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;JBoss&nbsp;Seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e20488"/>21.2. Receiving emails</h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2>Please be reminded that this section is not updated for JBoss AS 7.x!</div><p>
      If you are using EJB then you can use a MDB (Message Driven Bean) to 
      receive email.  JBoss provides a JCA adaptor — 
      <code class="literal">mail-ra.rar</code> — but the version distributed with
      JBoss AS 4.x has a number of limitations (and isn't bundled in some versions)
      therefore we recommend using the <code class="literal">mail-ra.rar</code> 
      distributed with Seam (it's in the <code class="literal">extras/</code>
      directory in the Seam bundle).  <code class="literal">mail-ra.rar</code> should 
      be placed in <code class="literal">$JBOSS_HOME/server/default/deploy</code>; if the
      version of JBoss AS you use already has this file, replace it.
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>JBoss AS 5.x and newer has mail-ra.rar applied the patches,
    	 so there is no need to copy the mail-ra.rar from Seam distribution.</p></div><p>
      You can configure it like this:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">MessageDriven</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">activationConfig</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span><span class="java_plain">propertyName</span><span class="java_operator">=</span><span class="java_literal">&quot;mailServer&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;propertyValue</span><span class="java_operator">=</span><span class="java_literal">&quot;localhost&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span><span class="java_plain">propertyName</span><span class="java_operator">=</span><span class="java_literal">&quot;mailFolder&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;propertyValue</span><span class="java_operator">=</span><span class="java_literal">&quot;INBOX&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span><span class="java_plain">propertyName</span><span class="java_operator">=</span><span class="java_literal">&quot;storeProtocol&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;propertyValue</span><span class="java_operator">=</span><span class="java_literal">&quot;pop3&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span><span class="java_plain">propertyName</span><span class="java_operator">=</span><span class="java_literal">&quot;userName&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;propertyValue</span><span class="java_operator">=</span><span class="java_literal">&quot;seam&quot;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span><span class="java_plain">propertyName</span><span class="java_operator">=</span><span class="java_literal">&quot;password&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;propertyValue</span><span class="java_operator">=</span><span class="java_literal">&quot;seam&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_separator">})</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">ResourceAdapter</span><span class="java_separator">(</span><span class="java_literal">&quot;mail-ra.rar&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;mailListener&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MailListenerMDB</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">MailListener</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">OrderProcessor</span><span class="java_plain">&nbsp;orderProcessor</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onMessage</span><span class="java_separator">(</span><span class="java_type">Message</span><span class="java_plain">&nbsp;message</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Process</span><span class="java_plain">&nbsp;the&nbsp;message</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderProcessor</span><span class="java_separator">.</span><span class="java_plain">process</span><span class="java_separator">(</span><span class="java_plain">message</span><span class="java_separator">.</span><span class="java_plain">getSubject</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
      Each message received will cause <code class="literal">onMessage(Message message)</code> 
      to be called.  Most Seam annotations will work inside a MDB but you 
      must not access the persistence context.
    </p><p>
      You can find more information on <code class="literal">mail-ra.rar</code>
      at <a class="ulink" href="http://www.jboss.org/community/wiki/InboundJavaMail">http://www.jboss.org/community/wiki/InboundJavaMail</a>.
    </p><p>
      If you aren't using JBoss AS you can still use <code class="literal">mail-ra.rar</code> 
      or you may find your application server includes a similar adapter.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e20535"/>21.3. Configuration</h2></div></div></div><p>
      To include Email support in your application, include <code class="literal">jboss-seam-mail.jar</code>
      in your <code class="literal">WEB-INF/lib</code> directory. If you are using JBoss 
      AS there is no further configuration needed to use Seam's email support.
      Otherwise you need to make sure you have the JavaMail API, an 
      implementation of the JavaMail API present (the API and impl used in 
      JBoss AS are distributed with seam as <code class="literal">lib/mail.jar</code>),
      and a copy of the Java Activation Framework (distributed with Seam as 
      <code class="literal">lib/activation.jar</code>.
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
         The Seam Mail module requires the use of Facelets as the view 
         technology. This is the default View technology in JSF 2. 
         Additionally, it requires the use of the jboss-seam-ui module.
      </p></div><p>
      The <code class="literal">mailSession</code> component uses JavaMail to talk to a 
      'real' SMTP server.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20560"/>21.3.1. <code class="literal">mailSession</code></h3></div></div></div><p>
        A JavaMail Session may be available via a JNDI lookup if you are 
        working in an JEE environment or you can use a Seam configured Session.
      </p><p>
        The mailSession component's properties are described in more detail in 
        <a class="xref" href="#components.mail" title="32.9. Mail-related components">Section 32.9, “Mail-related components”</a>.
      </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e20570"/>21.3.1.1. JNDI lookup in JBoss AS</h4></div></div></div><p>
          The JBoss AS 7 Mail service is defined in <code class="filename">standalone/configuration/standalone.xml</code> file. It configures a 
          JavaMail session binding into JNDI.  The default service 
          configuration will need altering for your network.  
          <a class="ulink" href="http://www.mastertheboss.com/jboss-application-server/379-jboss-mail-service-configuration.html">Full article how to configure Mail system in JBoss AS 7</a>
          describes the service in more detail.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:core</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:mail</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/mail&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mail:mail-session</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">session-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:jboss/mail/Default&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
          Here we tell Seam to get the mail session bound to 
          <code class="literal">java:jboss/mail/Default</code> from JNDI.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e20588"/>21.3.1.2. Seam configured Session</h4></div></div></div><p>
          A mail session can be configured via <code class="literal">components.xml</code>.
          Here we tell Seam to use <code class="literal">smtp.example.com</code> as the 
          smtp server:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:core</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:mail</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/mail&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mail:mail-session</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">host</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;smtp.example.com&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="mail.tags"/>21.4. Tags</h2></div></div></div><p>
      Emails are generated using tags in the <code class="literal">http://jboss.org/schema/seam/mail</code>
      namespace. Documents should always have the <code class="literal">message</code>
      tag at the root of the message. The message tag prepares Seam to generate
      an email.
    </p><p>
      The standard templating tags of facelets can be used as normal. Inside
      the body you can use any JSF tag; if it  requires access to external 
      resources (stylesheets, javascript) then be sure to set the 
      <code class="literal">urlBase</code>.
    </p><div class="variablelist"><dl><dt><span class="term">&lt;m:message&gt;</span></dt><dd><p>
	        Root tag of a mail message
	      </p><div class="itemizedlist"><ul><li><p>
	            <code class="literal">importance</code> — low, normal or high.  By
                default normal, this sets the importance of the mail message.
              </p></li><li><p>
                <code class="literal">precedence</code> — sets the precedence of
                the message (e.g. bulk).
              </p></li><li><p>
                <code class="literal">requestReadReceipt</code> — by default false,
                if set, a read receipt request will be will be added, with the
                read receipt being sent to the <code class="literal">From:</code>
                address.
              </p></li><li><p>
                <code class="literal">urlBase</code> — If set, the value is
                prepended to the <code class="literal">requestContextPath</code> allowing
                you to use components such as
                <code class="literal">&lt;h:graphicImage&gt;</code> in your emails.
              </p></li><li><p>
                <code class="literal">messageId</code> — Sets the Message-ID explicitly
              </p></li></ul></div></dd><dt><span class="term">&lt;m:from&gt;</span></dt><dd><p>
            Set's the From: address for the email.  You can only have one of 
            these per email.
          </p><div class="itemizedlist"><ul><li><p>
                <code class="literal">name</code> — the name the email should come
                from.
              </p></li><li><p>
                <code class="literal">address</code> — the email address the email
                should come from.
              </p></li></ul></div></dd><dt><span class="term">&lt;m:replyTo&gt;</span></dt><dd><p>
              Set's the Reply-to: address for the email.  You can only have one
              of these per email.
            </p><div class="itemizedlist"><ul><li><p>
                 <code class="literal">address</code> — the email address the email
                 should come from.
               </p></li></ul></div></dd><dt><span class="term">&lt;m:to&gt;</span></dt><dd><p>
            Add a recipient to the email. Use multiple &lt;m:to&gt; tags for
            multiple recipients. This tag can be safely placed inside a repeat 
            tag such as &lt;ui:repeat&gt;.
        </p><div class="itemizedlist"><ul><li><p>
                <code class="literal">name</code> — the name of the recipient.
              </p></li><li><p>
                <code class="literal">address</code> — the email address of the recipient.
              </p></li></ul></div></dd><dt><span class="term">&lt;m:cc&gt;</span></dt><dd><p>
              Add a cc recipient to the email. Use multiple &lt;m:cc&gt; tags
              for multiple ccs. This tag can be safely placed inside a iterator
              tag such as &lt;ui:repeat&gt;.
            </p><div class="itemizedlist"><ul><li><p>
                  <code class="literal">name</code> — the name of the recipient.
                </p></li><li><p>
                  <code class="literal">address</code> —  the email address of the
                  recipient.
                </p></li></ul></div></dd><dt><span class="term">&lt;m:bcc&gt;</span></dt><dd><p>
              Add a bcc recipient to the email. Use multiple &lt;m:bcc&gt; 
              tags for multiple bccs. This tag can be safely placed inside a
              repeat tag such as &lt;ui:repeat&gt;.
            </p><div class="itemizedlist"><ul><li><p>
                  <code class="literal">name</code> — the name of the recipient.
                </p></li><li><p>
                  <code class="literal">address</code> — the email address of the
                  recipient.
                </p></li></ul></div></dd><dt><span class="term">&lt;m:header&gt;</span></dt><dd><p>
              Add a header to the email (e.g. <code class="literal">X-Sent-From: JBoss Seam</code>)
            </p><div class="itemizedlist"><ul><li><p>
                  <code class="literal">name</code> — The name of the header to 
                  add (e.g. <code class="literal">X-Sent-From</code>).
                </p></li><li><p>
                  <code class="literal">value</code> — The value of the header to
                  add (e.g. <code class="literal">JBoss Seam</code>).
                </p></li></ul></div></dd><dt><span class="term">&lt;m:attachment&gt;</span></dt><dd><p>
            Add an attachment to the email.
          </p><div class="itemizedlist"><ul><li><p>
                <code class="literal">value</code> — The file to attach:
              </p><div class="itemizedlist"><ul><li><p>
                    <code class="literal">String</code> — A <code class="literal">String</code>
                     is interpreted as a path to file within the classpath
                  </p></li><li><p>
                    <code class="literal">java.io.File</code> — An EL expression
                    can reference a <code class="literal">File</code> object
                  </p></li><li><p>
                   <code class="literal">java.net.URL</code> — An EL expression
                   can reference a <code class="literal">URL</code> object
                  </p></li><li><p>
                    <code class="literal">java.io.InputStream</code> — An EL 
                    expression can reference an <code class="literal">InputStream</code>. 
                    In this case both a <code class="literal">fileName</code> and a 
                    <code class="literal">contentType</code> must be specified.
                  </p></li><li><p>
                    <code class="literal">byte[]</code> — An EL expression can
                    reference an <code class="literal">byte[]</code>. In this case both
                    a <code class="literal">fileName</code> and a 
                    <code class="literal">contentType</code> must be specified.
                  </p></li></ul></div><p>If the value attribute is ommitted:</p><div class="itemizedlist"><ul><li><p>
                    If this tag contains a <code class="literal">&lt;p:document&gt;</code>
                    tag, the document described will be generated and 
                    attached to the email.  A <code class="literal">fileName</code>
                    should be specified.
                  </p></li><li><p>
                    If this tag contains other JSF tags a HTML document will 
                    be generated from them and attached to the email. A 
                    <code class="literal">fileName</code> should be specified.
                  </p></li></ul></div></li><li><p>
                <code class="literal">fileName</code> — Specify the file name to
                use for the attached file.
              </p></li><li><p>
                <code class="literal">contentType</code> — Specify the MIME type
                of the attached file
              </p></li></ul></div></dd><dt><span class="term">&lt;m:subject&gt;</span></dt><dd><p>
            Set's the subject for the email.
          </p></dd><dt><span class="term">&lt;m:body&gt;</span></dt><dd><p>
            Set's the body for the email.  Supports an <code class="literal">alternative</code>
            facet which, if an HTML email is generated can contain
            alternative text for a mail reader which doesn't support html.
          </p><div class="itemizedlist"><ul><li><p>
                <code class="literal">type</code> — If set to <code class="literal">plain</code>
                then a plain text email will be generated otherwise an HTML 
                email is generated.  
              </p></li></ul></div></dd></dl></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jms"/>Chapter 22. Asynchronicity and messaging</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#d0e20932">22.1. Messaging in Seam</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e20939">22.1.1. Configuration</a></span></dt><dt><span class="sect2"><a href="#d0e20983">22.1.2. Sending messages</a></span></dt><dt><span class="sect2"><a href="#d0e21000">22.1.3. Receiving messages using a message-driven bean</a></span></dt><dt><span class="sect2"><a href="#d0e21024">22.1.4. Receiving messages in the client</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e21031">22.2. Asynchronicity</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e21076">22.2.1. Asynchronous methods</a></span></dt><dt><span class="sect2"><a href="#d0e21151">22.2.2. Asynchronous methods with the Quartz Dispatcher</a></span></dt><dt><span class="sect2"><a href="#d0e21226">22.2.3. Asynchronous events</a></span></dt><dt><span class="sect2"><a href="#d0e21246">22.2.4. Handling exceptions from asynchronous calls</a></span></dt></dl></dd></dl></div><p>
        Seam makes it very easy to perform work asynchronously from a web request. When most people
        think of asynchronicity in Java EE, they think of using JMS. This is certainly one way to
        approach the problem in Seam, and is the right way when you have strict and well-defined
        quality of service requirements. Seam makes it easy to send and receive JMS messages using
        Seam components.
    </p><p>
        But for cases when you are simply want to use a worker thread, JMS is overkill. Seam layers a simple
        asynchronous method and event facility over your choice of <span class="emphasis"><em>dispatchers</em></span>:
    </p><div class="itemizedlist"><ul><li><p>
                <code class="literal">java.util.concurrent.ScheduledThreadPoolExecutor</code> (by default)
            </p></li><li><p>
                the EJB timer service (for EJB 3.0 environments)
            </p></li><li><p>
                Quartz
            </p></li></ul></div><p>
        This chapter first covers how to leverage Seam to simplify JMS and then explains how to use the
        simpler asynchronous method and event facility.
    </p><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e20932"/>22.1. Messaging in Seam</h2></div></div></div><p>
        Seam makes it easy to send and receive JMS messages to and from
        Seam components. Both the message publisher and the message receiver
        can be Seam components.
    </p><p>
        You'll first learn to setup a queue and topic message publisher and then 
        look at an example that illustrates how to perform the message exchange.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20939"/>22.1.1. Configuration</h3></div></div></div><p>
            To configure Seam's infrastructure for sending JMS messages,
            you need to tell Seam about any topics and queues you want to
            send messages to, and also tell Seam where to find the
            <code class="literal">QueueConnectionFactory</code> and/or
            <code class="literal">TopicConnectionFactory</code>.
        </p><p>
            Seam defaults to using <code class="literal">UIL2ConnectionFactory</code>
            which is the usual connection factory for use with JBossMQ. If
            you are using some other JMS provider, you need to set one or
            both of <code class="literal">queueConnection.queueConnectionFactoryJndiName</code>
            and <code class="literal">topicConnection.topicConnectionFactoryJndiName</code>
            in <code class="literal">seam.properties</code>, <code class="literal">web.xml</code>
            or <code class="literal">components.xml</code>.
        </p><p>
            You also need to list topics and queues in <code class="literal">components.xml</code>
            to install Seam managed <code class="literal">TopicPublisher</code>s and
            <code class="literal">QueueSender</code>s:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jms:managed-topic-publisher</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stockTickerPublisher&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">topic-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;topic/stockTickerTopic&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jms:managed-queue-sender</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;paymentQueueSender&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">queue-jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;queue/paymentQueue&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20983"/>22.1.2. Sending messages</h3></div></div></div><p>
            Now, you can inject a JMS <code class="literal">TopicPublisher</code> and
            <code class="literal">TopicSession</code> into any Seam component to publish
            an object to a topic:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;stockPriceChangeNotifier&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">StockPriceChangeNotifier</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">TopicPublisher</span><span class="java_plain">&nbsp;stockTickerPublisher</span><span class="java_separator">;</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">TopicSession</span><span class="java_plain">&nbsp;topicSession</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;publish</span><span class="java_separator">(</span><span class="java_type">StockPrice</span><span class="java_plain">&nbsp;price</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stockTickerPublisher</span><span class="java_separator">.</span><span class="java_plain">publish</span><span class="java_separator">(</span><span class="java_plain">topicSession</span><span class="java_separator">.</span><span class="java_plain">createObjectMessage</span><span class="java_separator">(</span><span class="java_plain">price</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">RuntimeException</span><span class="java_separator">(</span><span class="java_plain">ex</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>or to a queue:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;paymentDispatcher&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentDispatcher</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">QueueSender</span><span class="java_plain">&nbsp;paymentQueueSender</span><span class="java_separator">;</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">QueueSession</span><span class="java_plain">&nbsp;queueSession</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;publish</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paymentQueueSender</span><span class="java_separator">.</span><span class="java_plain">send</span><span class="java_separator">(</span><span class="java_plain">queueSession</span><span class="java_separator">.</span><span class="java_plain">createObjectMessage</span><span class="java_separator">(</span><span class="java_plain">payment</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">RuntimeException</span><span class="java_separator">(</span><span class="java_plain">ex</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21000"/>22.1.3. Receiving messages using a message-driven bean</h3></div></div></div><p>
            You can process messages using any EJB 3 message-driven bean. The MDB
            can even be a Seam component, in which case it's possible to inject
            other event- and application- scoped Seam components. Here's an example
            of the payment receiver, which delegates to a payment processor.
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                You'll likely need to set the create attribute on the <code class="literal">@In</code> annotation to true (i.e.
                create = true) to have Seam create an instance of the component being injected. This isn't necessary if
                the component supports auto-creation (e.g., it's annotated with <code class="literal">@Autocreate</code>).
            </p></div><p>
            First, create an MDB to receive the message.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">MessageDriven</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">activationConfig&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;propertyName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;destinationType&quot;</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;propertyValue&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;javax.jms.Queue&quot;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ActivationConfigProperty</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;propertyName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;destination&quot;</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;propertyValue&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;queue/paymentQueue&quot;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_separator">})</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentReceiver&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentReceiver</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">MessageListener</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentProcessor</span><span class="java_plain">&nbsp;paymentProcessor</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onMessage</span><span class="java_separator">(</span><span class="java_type">Message</span><span class="java_plain">&nbsp;message</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paymentProcessor</span><span class="java_separator">.</span><span class="java_plain">processPayment</span><span class="java_separator">((</span><span class="java_type">Payment</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">((</span><span class="java_type">ObjectMessage</span><span class="java_separator">)</span><span class="java_plain">&nbsp;message</span><span class="java_separator">).</span><span class="java_plain">getObject</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">JMSException</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">error</span><span class="java_separator">(</span><span class="java_literal">&quot;Message&nbsp;payload&nbsp;did&nbsp;not&nbsp;contain&nbsp;a&nbsp;Payment&nbsp;object&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Then, implement the Seam component to which the receiver delegates processing of the payment.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;paymentProcessor&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentProcessor</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;perhaps&nbsp;</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;something&nbsp;more&nbsp;fancy</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">persist</span><span class="java_separator">(</span><span class="java_plain">payment</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            If you are going to be performing transaction operations in your MDB, you should ensure that you
            are working with an XA datasource. Otherwise, it won't be possible to rollback database changes
            if the database transaction commits and a subsequent operation being performed by the message
            fails.
        </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21024"/>22.1.4. Receiving messages in the client</h3></div></div></div><p>
            Seam Remoting lets you subscribe to a JMS topic from client-side JavaScript. This is
            described in <a class="xref" href="#remoting" title="Chapter 25. Remoting">Chapter 25, <i>Remoting</i></a>.
        </p></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21031"/>22.2. Asynchronicity</h2></div></div></div><p>
            Asynchronous events and method calls have the same quality of service expectations as  
            the underlying dispatcher mechanism. The default dispatcher, based upon a 
            <code class="literal">ScheduledThreadPoolExecutor</code> performs efficiently but provides no
            support for persistent asynchronous tasks, and hence no guarantee that a task
            will ever actually be executed. If you're working in an environment that supports
            EJB 3.0, and add the following line to <code class="literal">components.xml</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">async:timer-service-dispatcher</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            then your asynchronous tasks will be processed by the container's EJB timer service. If 
            you're not familiar with the Timer service, don't worry, you don't need to interact with 
            it directly if you want to use asynchronous methods in Seam. The important thing to know
            is that any good EJB 3.0 implementation will have the option of using persistent timers, 
            which gives some guarantee that the tasks will eventually be processed.
        </p><p>
            Another alternative is to use the open source Quartz library to manage asynchronous method. 
            You need to bundle the Quartz library JAR (found in the <code class="literal">lib</code> directory) 
            in your EAR and declare it as a Java module in <code class="literal">application.xml</code>.
            The Quartz dispatcher may be configured by adding a Quartz property file to the classpath. 
           	It must be named <code class="literal">seam.quartz.properties</code>.  In addition, 
            you need to add the following line to <code class="literal">components.xml</code> to install the 
            Quartz dispatcher. 
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">async:quartz-dispatcher</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The Seam API for the default <code class="literal">ScheduledThreadPoolExecutor</code>, the EJB3 
            <code class="literal">Timer</code>, and the Quartz <code class="literal">Scheduler</code> are largely the 
            same. They can just "plug and play" by adding a line to <code class="literal">components.xml</code>.
        </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21076"/>22.2.1. Asynchronous methods</h3></div></div></div><p>
            In simplest form, an asynchronous call just lets a method call be processed asynchronously 
            (in a different thread) from the caller. We usually use an asynchronous call when we want 
            to return an immediate response to the client, and let some expensive work be processed in
            the background. This pattern works very well in applications which use AJAX, where the
            client can automatically poll the server for the result of the work.
        </p><p>
            For EJB components, we annotate the local interface to specify that a method is processed
            asynchronously.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Local</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            (For JavaBean components we have to annotate the component implementation class.)
        </p><p>
            The use of asynchronicity is transparent to the bean class:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentHandler&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandlerBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;some&nbsp;work</span><span class="java_operator">!</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            And also transparent to the client:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentAction&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CreatePaymentAction</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span><span class="java_plain">&nbsp;paymentHandler</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Bill</span><span class="java_plain">&nbsp;bill</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;pay</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paymentHandler</span><span class="java_separator">.</span><span class="java_plain">processPayment</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Payment</span><span class="java_separator">(</span><span class="java_plain">bill</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;success&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Please distinguish between 
            <a class="ulink" href="http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part3.html#asynejb">
            EJB 3.1 annotation
            <code class="literal">javax.ejb.Asynchronous</code></a> and Seam annotation
            <code class="literal">org.jboss.seam.annotations.async.Asynchronous</code>.
            While first is designated for session beans only, the latter works 
            in non-EJB environment too.
            </p></div><p>
            The asynchronous method is processed in a completely new event context and does
            not have access to the session or conversation context state of the caller. However,
            the business process context <span class="emphasis"><em>is</em></span> propagated.
        </p><p>
            Asynchronous method calls may be scheduled for later execution using the
            <code class="literal">@Duration</code>, <code class="literal">@Expiration</code> and
            <code class="literal">@IntervalDuration</code> annotations.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Local</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processScheduledPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">,</span><span class="java_plain">&nbsp;@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;date</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processRecurringPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;date</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">IntervalDuration</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;interval</span><span class="java_separator">)</span><span class="java_plain">'</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentAction&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CreatePaymentAction</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span><span class="java_plain">&nbsp;paymentHandler</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Bill</span><span class="java_plain">&nbsp;bill</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;schedulePayment</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paymentHandler</span><span class="java_separator">.</span><span class="java_plain">processScheduledPayment</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Payment</span><span class="java_separator">(</span><span class="java_plain">bill</span><span class="java_separator">),</span><span class="java_plain">&nbsp;bill</span><span class="java_separator">.</span><span class="java_plain">getDueDate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;success&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;scheduleRecurringPayment</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paymentHandler</span><span class="java_separator">.</span><span class="java_plain">processRecurringPayment</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Payment</span><span class="java_separator">(</span><span class="java_plain">bill</span><span class="java_separator">),</span><span class="java_plain">&nbsp;bill</span><span class="java_separator">.</span><span class="java_plain">getDueDate</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ONE_MONTH&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;success&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Both client and server may access the <code class="literal">Timer</code> object associated with
            the invocation. The <code class="literal">Timer</code> object shown below is the EJB3 timer when you use the EJB3 dispatcher. For the default <code class="literal">ScheduledThreadPoolExecutor</code>, the returned object is <code class="literal">Future</code> from the JDK. For the Quartz dispatcher, it returns <code class="literal">QuartzTriggerHandle</code>, which we will discuss in the next section.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Local</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Timer</span><span class="java_plain">&nbsp;processScheduledPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">,</span><span class="java_plain">&nbsp;@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;date</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentHandler&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandlerBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Timer</span><span class="java_plain">&nbsp;timer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Timer</span><span class="java_plain">&nbsp;processScheduledPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">,</span><span class="java_plain">&nbsp;@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;date</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;some&nbsp;work</span><span class="java_operator">!</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;timer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">note&nbsp;that&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;value&nbsp;is&nbsp;completely&nbsp;ignored</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;paymentAction&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CreatePaymentAction</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentHandler</span><span class="java_plain">&nbsp;paymentHandler</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Bill</span><span class="java_plain">&nbsp;bill</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;schedulePayment</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Timer</span><span class="java_plain">&nbsp;timer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;paymentHandler</span><span class="java_separator">.</span><span class="java_plain">processScheduledPayment</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Payment</span><span class="java_separator">(</span><span class="java_plain">bill</span><span class="java_separator">),</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bill</span><span class="java_separator">.</span><span class="java_plain">getDueDate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;success&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Asynchronous methods cannot return any other value to the caller.
        </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21151"/>22.2.2. Asynchronous methods with the Quartz Dispatcher</h3></div></div></div><p>
            The Quartz dispatcher (see earlier on how to install it) allows you to use the <code class="literal">@Asynchronous</code>, <code class="literal">@Duration</code>, <code class="literal">@Expiration</code>, and <code class="literal">@IntervalDuration</code> annotations as above. But it has some powerful additional features. The Quartz dispatcher supports three new annotations.
        </p><p>The <code class="literal">@FinalExpiration</code> annotation specifies an end date for the recurring task. Note that you can inject the <code class="code">QuartzTriggerHandle</code>.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">QuartzTriggerHandle</span><span class="java_plain">&nbsp;timer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Defines</span><span class="java_plain">&nbsp;the&nbsp;method&nbsp;in&nbsp;the&nbsp;</span><span class="java_literal">&quot;processor&quot;</span><span class="java_plain">&nbsp;component</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">QuartzTriggerHandle</span><span class="java_plain">&nbsp;schedulePayment</span><span class="java_separator">(</span><span class="java_plain">@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;when</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">IntervalDuration</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;interval</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FinalExpiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;endDate</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;the&nbsp;repeating&nbsp;or&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;running&nbsp;task&nbsp;until&nbsp;endDate</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Schedule</span><span class="java_plain">&nbsp;the&nbsp;task&nbsp;in&nbsp;the&nbsp;business&nbsp;logic&nbsp;processing&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Starts</span><span class="java_plain">&nbsp;now</span><span class="java_separator">,</span><span class="java_plain">&nbsp;repeats&nbsp;every&nbsp;hour</span><span class="java_separator">,</span><span class="java_plain">&nbsp;and&nbsp;ends&nbsp;on&nbsp;</span><span class="java_type">May</span><span class="java_plain">&nbsp;</span><span class="java_literal">10</span><span class="java_plain">th</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">2010</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Calendar</span><span class="java_plain">&nbsp;cal&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">getInstance&nbsp;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;cal</span><span class="java_separator">.</span><span class="java_plain">set&nbsp;</span><span class="java_separator">(</span><span class="java_literal">2010</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Calendar</span><span class="java_separator">.</span><span class="java_plain">MAY</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">10</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;processor</span><span class="java_separator">.</span><span class="java_plain">schedulePayment</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;</span><span class="java_literal">60</span><span class="java_operator">*</span><span class="java_literal">60</span><span class="java_operator">*</span><span class="java_literal">1000</span><span class="java_separator">,</span><span class="java_plain">&nbsp;cal</span><span class="java_separator">.</span><span class="java_plain">getTime</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">);</span>
</pre><p>Note that the method returns the <code class="literal">QuartzTriggerHandle</code> object, which you can use later to stop, pause, and resume the scheduler. The <code class="literal">QuartzTriggerHandle</code> object is serializable, so you can save it into the database if you need to keep it around for extended period of time.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">QuartzTriggerHandle</span><!-- <br/> --><span class="java_plain">&nbsp;handle&nbsp;</span><!-- <br/> --><span class="java_operator">=</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processor</span><span class="java_separator">.</span><span class="java_plain">schedulePayment</span><span class="java_separator">(</span><span class="java_plain">payment</span><span class="java_separator">.</span><span class="java_plain">getPaymentDate</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payment</span><span class="java_separator">.</span><span class="java_plain">getPaymentCron</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payment</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payment</span><span class="java_separator">.</span><span class="java_plain">setQuartzTriggerHandle</span><span class="java_separator">(</span><span class="java_plain">&nbsp;handle&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Save</span><span class="java_plain">&nbsp;payment&nbsp;to&nbsp;DB</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;later&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Retrieve</span><span class="java_plain">&nbsp;payment&nbsp;from&nbsp;DB</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Cancel</span><span class="java_plain">&nbsp;the&nbsp;remaining&nbsp;scheduled&nbsp;tasks</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payment</span><span class="java_separator">.</span><span class="java_plain">getQuartzTriggerHandle</span><span class="java_separator">().</span><span class="java_plain">cancel</span><span class="java_separator">();</span>
</pre><p>The <code class="literal">@IntervalCron</code> annotation supports Unix cron job syntax for task scheduling. For instance, the following asynchronous method runs at 2:10pm and at 2:44pm every Wednesday in the month of March.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Define</span><span class="java_plain">&nbsp;the&nbsp;method</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">QuartzTriggerHandle</span><span class="java_plain">&nbsp;schedulePayment</span><span class="java_separator">(</span><span class="java_plain">@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;when</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">IntervalCron</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;cron</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;the&nbsp;repeating&nbsp;or&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;running&nbsp;task</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Schedule</span><span class="java_plain">&nbsp;the&nbsp;task&nbsp;in&nbsp;the&nbsp;business&nbsp;logic&nbsp;processing&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">QuartzTriggerHandle</span><span class="java_plain">&nbsp;handle&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processor</span><span class="java_separator">.</span><span class="java_plain">schedulePayment</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;0&nbsp;10,44&nbsp;14&nbsp;?&nbsp;3&nbsp;WED&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">);</span>
</pre><p>The <code class="literal">@IntervalBusinessDay</code> annotation supports invocation on the "nth Business Day" scenario. For instance, the following asynchronous method runs at 14:00 on the 2nd business day of each month. By default, it excludes all weekends and US federal holidays until 2010 from the business days.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Define</span><span class="java_plain">&nbsp;the&nbsp;method</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Asynchronous</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">QuartzTriggerHandle</span><span class="java_plain">&nbsp;schedulePayment</span><span class="java_separator">(</span><span class="java_plain">@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;when</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">IntervalBusinessDay</span><span class="java_plain">&nbsp;</span><span class="java_type">NthBusinessDay</span><span class="java_plain">&nbsp;nth</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_keyword">do</span><span class="java_plain">&nbsp;the&nbsp;repeating&nbsp;or&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;running&nbsp;task</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Schedule</span><span class="java_plain">&nbsp;the&nbsp;task&nbsp;in&nbsp;the&nbsp;business&nbsp;logic&nbsp;processing&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">QuartzTriggerHandle</span><span class="java_plain">&nbsp;handle&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processor</span><span class="java_separator">.</span><span class="java_plain">schedulePayment</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">NthBusinessDay</span><span class="java_separator">(</span><span class="java_literal">2</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;14:00&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;WEEKLY</span><span class="java_separator">),</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">);</span>
</pre><p>The <code class="literal">NthBusinessDay</code> object contains the configuration of the invocation trigger. You can specify more holidays (e.g., company holidays, non-US holidays etc.) via the <code class="literal">additionalHolidays</code> property.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">NthBusinessDay</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;n</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;fireAtTime</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_plain">&nbsp;</span><span class="java_operator">&lt;</span><span class="java_type">Date</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;additionalHolidays</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BusinessDayIntervalType</span><span class="java_plain">&nbsp;interval</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;excludeWeekends</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;excludeUsFederalHolidays</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;enum&nbsp;</span><span class="java_type">BusinessDayIntervalType</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;WEEKLY</span><span class="java_separator">,</span><span class="java_plain">&nbsp;MONTHLY</span><span class="java_separator">,</span><span class="java_plain">&nbsp;YEARLY&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">NthBusinessDay</span><span class="java_plain">&nbsp;</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fireAtTime&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;12:00&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;additionalHolidays&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_plain">&nbsp;</span><span class="java_operator">&lt;</span><span class="java_type">Date</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">BusinessDayIntervalType</span><span class="java_separator">.</span><span class="java_plain">WEEKLY</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excludeWeekends&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excludeUsFederalHolidays&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><p>The <code class="literal">@IntervalDuration</code>, <code class="literal">@IntervalCron</code>, and <code class="literal">@IntervalNthBusinessDay</code> annotations are mutually exclusive. If they are used in the same method, a <code class="literal">RuntimeException</code> will be thrown.</p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21226"/>22.2.3. Asynchronous events</h3></div></div></div><p>
                Component-driven events may also be asynchronous. To raise an event for asynchronous
                processing, simply call the <code class="literal">raiseAsynchronousEvent()</code> method of 
                the <code class="literal">Events</code> class. To schedule a timed event, call the
                <code class="literal">raiseTimedEvent()</code> method, passing a <span class="emphasis"><em>schedule</em></span>
                object (for the default dispatcher or timer service dispatcher, use <code class="literal">TimerSchedule</code>). 
                Components may observe asynchronous events in the usual way, but remember that only the 
                business process context is propagated to the asynchronous thread.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21246"/>22.2.4. Handling exceptions from asynchronous calls</h3></div></div></div><p>
                Each asynchronous dispatcher behaves differently when an
                exception propagates through it. For example, the 
                <code class="literal">java.util.concurrent</code> dispatcher will suspend
                further executions of a call which repeats, and the EJB3 timer
                service will swallow the exception. Seam therefore catches any
                exception which propagates out of the asynchronous call before
                it reaches the dispatcher.
            </p><p>
                By default, any exception which propagates out from an 
                asynchronous execution will be caught and logged at error level.
                You can customize this behavior globally by overriding the
                <code class="literal">org.jboss.seam.async.asynchronousExceptionHandler</code>
                component: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Scope</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">STATELESS</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;org.jboss.seam.async.asynchronousExceptionHandler&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyAsynchronousExceptionHandler</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">AsynchronousExceptionHandler</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Logger</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;log</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">Future</span><span class="java_plain">&nbsp;timer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;handleException</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;exception</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">debug</span><span class="java_separator">(</span><span class="java_plain">exception</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer</span><span class="java_separator">.</span><span class="java_plain">cancel</span><span class="java_separator">(</span><span class="java_literal">false</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                Here, for example, using <code class="literal">java.util.concurrent</code>
                dispatcher, we inject its control object and cancel all future
                invocations when an exception is encountered
            </p><p>
                You can also alter this behavior for an individual component by
                implementing the method 
                <code class="literal">public void handleAsynchronousException(Exception exception);</code>
                on the component. For example: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;handleAsynchronousException</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">Exception</span><!-- <br/> --><span class="java_plain">&nbsp;exception</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log</span><span class="java_separator">.</span><span class="java_plain">fatal</span><span class="java_separator">(</span><span class="java_plain">exception</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></pre></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="cache"/>Chapter 23. Caching</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e21318">23.1. Using Caching in Seam</a></span></dt><dt><span class="section"><a href="#d0e21520">23.2. Page fragment caching</a></span></dt></dl></div><p>
      In almost all enterprise applications, the database is the primary
      bottleneck, and the least scalable tier of the runtime environment. People
      from a PHP/Ruby environment will try to tell you that so-called "shared
      nothing" architectures scale well. While that may be literally true, I
      don't know of many interesting multi-user applications which can be
      implemented with no sharing of resources between different nodes of the
      cluster. What these silly people are really thinking of is a "share
      nothing except for the database" architecture. Of course, sharing the
      database is the primary problem with scaling a multi-user
      application — so the claim that this architecture is highly scalable
      is absurd, and tells you a lot about the kind of applications that these
      folks spend most of their time working on.
   </p><p>
      Almost anything we can possibly do to share the database
      <span class="emphasis"><em>less often</em></span> is worth doing.
   </p><p>
      This calls for a cache. Well, not just one cache. A well designed Seam
      application will feature a rich, multi-layered caching strategy that
      impacts every layer of the application:
   </p><div class="itemizedlist"><ul><li><p>
            The database, of course, has its own cache. This is super-important,
            but can't scale like a cache in the application tier.
         </p></li><li><p>
            Your ORM solution (Hibernate, or some other JPA implementation) has
            a second-level cache of data from the database. This is a very
            powerful capability, but is often misused. In a clustered
            environment, keeping the data in the cache transactionally
            consistent across the whole cluster, and with the database, is quite
            expensive. It makes most sense for data which is shared between many
            users, and is updated rarely. In traditional stateless
            architectures, people often try to use the second-level cache for
            conversational state. This is always bad, and is especially wrong in
            Seam.
         </p></li><li><p>
            The Seam conversation context is a cache of conversational state.
            Components you put into the conversation context can hold and cache
            state relating to the current user interaction.
         </p></li><li><p>
            In particular, the Seam-managed persistence context (or an extended
            EJB container-managed persistence context associated with a
            conversation-scoped stateful session bean) acts as a cache of data
            that has been read in the current conversation. This cache tends to
            have a pretty high hitrate! Seam optimizes the replication of
            Seam-managed persistence contexts in a clustered environment, and
            there is no requirement for transactional consistency with the
            database (optimistic locking is sufficient) so you don't need to
            worry too much about the performance implications of this cache,
            unless you read thousands of objects into a single persistence
            context.
         </p></li><li><p>
            The application can cache non-transactional state in the Seam
            application context. State kept in the application context is of
            course not visible to other nodes in the cluster.
         </p></li><li><p>
            The application can cache transactional state using the Seam
            <code class="literal">cacheProvider</code> component, which integrates 
            JBossCache, JBoss POJO Cache, Infinispan or EHCache into the Seam environment. 
            This state will be visible to other nodes if your cache supports
            running in a clustered mode.
         </p></li><li><p>
            Finally, Seam lets you cache rendered fragments of a JSF page.
            Unlike the ORM second-level cache, this cache is not automatically
            invalidated when data changes, so you need to write application code
            to perform explicit invalidation, or set appropriate expiration
            policies.
         </p></li></ul></div><p>
      For more information about the second-level cache, you'll need to refer to
      the documentation of your ORM solution, since this is an extremely complex
      topic. In this section we'll discuss the use of caching directly, via
      the <code class="literal">cacheProvider</code> component, or as the page fragment cache,
      via the <code class="literal">&lt;s:cache&gt;</code> control.
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21318"/>23.1. Using Caching in Seam</h2></div></div></div><p>
         The built-in <code class="literal">cacheProvider</code> component manages an instance
         of:
      </p><div class="variablelist"><dl><dt><span class="term">
               Infinispan 5.x (suitable for use in JBoss AS 7.1.x or later and other
               containers)
            </span></dt><dd><p>
                  <code class="literal">org.infninispan.tree.TreeCache</code>
               </p></dd><dt><span class="term">
               JBoss Cache 1.x (suitable for use in JBoss 4.2.x or later and other
               containers)
            </span></dt><dd><p>
                  <code class="literal">org.jboss.cache.TreeCache</code>
               </p></dd><dt><span class="term">
               JBoss Cache 2.x (suitable for use in JBoss 5.x and other
               containers)
            </span></dt><dd><p>
                  <code class="literal">org.jboss.cache.Cache</code>
               </p></dd><dt><span class="term">
               JBoss POJO Cache 1.x (suitable for use in JBoss 4.2.x or later and other
               containers)
            </span></dt><dd><p>
                  <code class="literal">org.jboss.cache.aop.PojoCache</code>
               </p></dd><dt><span class="term">
               EHCache (suitable for use in any container)
            </span></dt><dd><p>
                  <code class="literal">net.sf.ehcache.CacheManager</code>
               </p></dd></dl></div><p>  
         You can safely put any immutable Java object in the cache, and it will 
         be stored in the cache and replicated across the cluster (assuming that
         replication is supported and enabled). If you want to keep mutable 
         objects in the cache read the documentation of the underling caching 
         project documentation to discover how to notify the cache of changes to 
         the cache.
      </p><p>
         To use <code class="literal">cacheProvider</code>, you need to include the jars 
         of the cache implementation in your project:
      </p><div class="variablelist"><dl><dt><span class="term">
               Infinispan 5.x
            </span></dt><dd><div class="itemizedlist"><ul><li><p>
                        <code class="literal">infinispan-core.jar</code> - Infinispan Core 5.1.x.Final
                     </p><p>
                        <code class="literal">infinispan-tree.jar</code> - Infinispan TreeCache 5.1.x.Final
                     </p></li><li><p>
                        <code class="literal">jgroups.jar</code> - JGroups 3.0
                     </p></li></ul></div></dd><dt><span class="term">
               JBoss Cache 1.x
            </span></dt><dd><div class="itemizedlist"><ul><li><p>
                        <code class="literal">jboss-cache.jar</code> - JBoss Cache 1.4.1
                     </p></li><li><p>
                        <code class="literal">jgroups.jar</code> - JGroups 2.4.1
                     </p></li></ul></div></dd><dt><span class="term">
               JBoss Cache 2.x
            </span></dt><dd><div class="itemizedlist"><ul><li><p>
                        <code class="literal">jboss-cache.jar</code> - JBoss Cache 2.2.0
                     </p></li><li><p>
                        <code class="literal">jgroups.jar</code> - JGroups 2.6.2
                     </p></li></ul></div></dd><dt><span class="term">
               JBoss POJO Cache 1.x
            </span></dt><dd><div class="itemizedlist"><ul><li><p>
                        <code class="literal">jboss-cache.jar</code> - JBoss Cache 1.4.1
                     </p></li><li><p>
                        <code class="literal">jgroups.jar</code> - JGroups 2.4.1
                     </p></li><li><p>
                        <code class="literal">jboss-aop.jar</code> - JBoss AOP 1.5.0
                     </p></li></ul></div></dd><dt><span class="term">
               EHCache
            </span></dt><dd><div class="itemizedlist"><ul><li><p>
                        <code class="literal">ehcache.jar</code> - EHCache 1.2.3
                     </p></li></ul></div></dd></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>Tip</h2><p>
            If you would like to know more details about Infinispan, look at the Infinispan 
            <a class="ulink" href="https://docs.jboss.org/author/display/ISPN/Home">Documentation</a> page.
         </p></div><p>
         For an EAR deployment of Seam, we recommend that the infinispan jars and
         configuration go directly into the EAR.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>JBoss AS7 already provides Infinispan and JGroups jars, so you need to turn on that 
        dependencies in your JBoss AS 7 deployment file or modify <code class="literal">META-INF/Manifest.mf</code>
        to have this dependencies. Check the Blog example or JBoss AS7 documentation how to do that.</p></div><p>
         You'll also need to provide a configuration file for Infinispan. Place
         <code class="literal">infinispan.xml</code> with an appropriate cache 
         configuration into the Web applicaiton classpath (e.g. the ejb jar or
         <code class="literal">WEB-INF/classes</code>). Infinispan  has many configuration settings,
          so we won't discuss them here. Please refer to the Infinispan documentation for more information.
      </p><p>
         You can find a sample configuration file <code class="literal">infinispan.xml</code> in
         <code class="literal">examples-ee6/blog/blog-web/src/main/resources/infinispan.xml</code>.
      </p><p>
         EHCache will run in it's default configuration without a configuration
         file
      </p><p>
         To alter the configuration file in use, configure your cache in
         <code class="literal">components.xml</code>:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:cache</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/cache&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cache:infinispan-cache-provider</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">configuration</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;infinispan.xml&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Now you can inject the cache into any Seam component:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;chatroomUsers&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">STATELESS</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ChatroomUsers</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">CacheProvider</span><span class="java_plain">&nbsp;cacheProvider</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Unwrap</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getUsers</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">CacheException</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;userList&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;cacheProvider</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_literal">&quot;chatroom&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;userList&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">userList</span><span class="java_operator">==</span><span class="java_literal">null</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userList&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">HashSet</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cacheProvider</span><span class="java_separator">.</span><span class="java_plain">put</span><span class="java_separator">(</span><span class="java_literal">&quot;chatroom&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;userList&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;userList</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;userList</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
         If you want to have multiple cache configurations in your
         application, use <code class="literal">components.xml</code> to configure
         multiple cache providers:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:cache</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/cache&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cache:infinispan-cache-provider</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myCache&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">configuration</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myown/cache.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cache:infinispan-cache-provider</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myOtherCache&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">configuration</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myother/cache.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21520"/>23.2. Page fragment caching</h2></div></div></div><p>
         The most interesting use of caching in Seam is the 
         <code class="literal">&lt;s:cache&gt;</code> tag, Seam's solution to the problem 
         of page fragment caching in JSF. <code class="literal">&lt;s:cache&gt;</code>
         uses <code class="literal">pojoCache</code> internally, so you need to follow the
         steps listed above before you can use it. (Put the jars in the EAR, 
         wade through the scary configuration options, etc.)
      </p><p>
         <code class="literal">&lt;s:cache&gt;</code> is used for caching some rendered 
         content which changes rarely. For example, the welcome page of our blog
         displays the recent blog entries:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;recentEntries-#{blog.id}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">region</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;welcomePageFragments&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.recentEntries}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{blogEntry.title}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:formattedText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.body}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:cache</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         The <code class="literal">key</code> let's you have multiple cached versions of 
         each page fragment. In this case, there is one cached version per blog.
         The <code class="literal">region</code> determines the cache or region node that 
         all version will be stored in. Different nodes may have different 
         expiry policies. (That's the stuff you set up using the aforementioned 
         scary configuration options.)
      </p><p>
         Of course, the big problem with <code class="literal">&lt;s:cache&gt;</code> is 
         that it is too stupid to know when the underlying data changes (for
         example, when the blogger posts a new entry). So you need to evict the
         cached fragment manually:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;post</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">persist</span><span class="java_separator">(</span><span class="java_plain">blogEntry</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;cacheProvider</span><span class="java_separator">.</span><span class="java_plain">remove</span><span class="java_separator">(</span><span class="java_literal">&quot;welcomePageFragments&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;recentEntries-&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;blog</span><span class="java_separator">.</span><span class="java_plain">getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
         Alternatively, if it is not critical that changes are immediately
         visible to the user, you could set a short expiry time on the
         cache node.
      </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="webservices"/>Chapter 24. Web Services</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#d0e21563">24.1. Configuration and Packaging</a></span></dt><dt><span class="sect1"><a href="#d0e21587">24.2. Conversational Web Services</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e21617">24.2.1. A Recommended Strategy</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e21632">24.3. An example web service</a></span></dt><dt><span class="sect1"><a href="#d0e21700">24.4. RESTful HTTP webservices with RESTEasy</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e21715">24.4.1. RESTEasy configuration and request serving</a></span></dt><dt><span class="sect2"><a href="#d0e21903">24.4.2. Resources as Seam components</a></span></dt><dt><span class="sect2"><a href="#d0e21977">24.4.3. Securing resources</a></span></dt><dt><span class="sect2"><a href="#d0e22000">24.4.4. Mapping exceptions to HTTP responses</a></span></dt><dt><span class="sect2"><a href="#d0e22057">24.4.5. Exposing entities via RESTful API</a></span></dt><dt><span class="sect2"><a href="#d0e22225">24.4.6. Testing resources and providers</a></span></dt></dl></dd></dl></div><p>
    Seam integrates with JBossWS to allow standard Java EE web services to take full advantage of Seam's contextual framework,
    including support for conversational web services. This chapter walks through the steps required to allow web 
    services to run within a Seam environment.
  </p><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21563"/>24.1. Configuration and Packaging</h2></div></div></div><p>
      To allow Seam to intercept web service requests so that the necessary Seam contexts can be created for the request, 
      a special SOAP handler must be configured; <code class="literal">org.jboss.seam.webservice.SOAPRequestHandler</code>
      is a <code class="literal">SOAPHandler</code> implementation that does the work of managing Seam's lifecycle during the scope
      of a web service request.  
    </p><p>
      A special configuration file, <code class="literal">soap-handlers.xml</code> should be placed 
      into the <code class="literal">META-INF</code> directory of the <code class="literal">jar</code> file that contains the 
      web service classes.  This file contains the following SOAP handler configuration:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler-chains</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler-chain</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SOAP&nbsp;Request&nbsp;Handler</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.webservice.SOAPRequestHandler</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler-chain</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler-chains</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21587"/>24.2. Conversational Web Services</h2></div></div></div><p>
      So how are conversations propagated between web service requests?  Seam uses a SOAP header element present
      in both the SOAP request and response messages to carry the conversation ID from the consumer to the service,
      and back again.  Here's an example of a web service request that contains a conversation ID:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">soapenv:Envelope</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:soapenv</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:sb</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://seambay.example.seam.jboss.org/&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">soapenv:Header</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:conversationId</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:seam</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">'http://www.jboss.org/seam/webservice'</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">4</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">seam:conversationId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">soapenv:Header</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">soapenv:Body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sb:setAuctionPrice</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">arg0</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">100</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">arg0</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sb:setAuctionPrice</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">soapenv:Body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">soapenv:Envelope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
      As you can see in the above SOAP message, there is a <code class="literal">conversationId</code> element within the
      SOAP header that contains the conversation ID for the request, in this case <code class="literal">4</code>.  
      Unfortunately, because web services may be consumed by a variety of web service clients written in a 
      variety of languages, it is up to the developer to implement conversation ID propagation between individual 
      web services that are intended to be used within the scope of a single conversation.
    </p><p>
      An important thing to note is that the <code class="literal">conversationId</code> header element must be qualified
      with a namespace of <code class="literal">http://www.jboss.org/seam/webservice</code>, otherwise Seam will not be
      able to read the conversation ID from the request. Here's an example of a response to the above request message:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">soap:Envelope</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:soap</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">soap:Header</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:conversationId</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:seam</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.jboss.org/seam/webservice&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">4</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">seam:conversationId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">soap:Header</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">soap:Body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ns2:setAuctionPriceResponse</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:ns2</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://seambay.example.seam.jboss.org/&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">soap:Body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">soap:Envelope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>
      As you can see, the response message contains the same <code class="literal">conversationId</code> element as the request.
    </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21617"/>24.2.1. A Recommended Strategy</h3></div></div></div><p>
        As web services must be implemented as either a stateless session bean or POJO, it is recommended that for
        conversational web services, the web service acts as a facade to a conversational Seam component.
      </p><div class="mediaobject" align="center"><img src="images/ws-strategy.png" align="middle"/></div><p>
        If the web service is written as a stateless session bean, then it is also possible to make it a Seam
        component by giving it a <code class="literal">@Name</code>.  Doing this allows Seam's bijection (and other) 
        features to be used in the web service class itself. 
      </p></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21632"/>24.3. An example web service</h2></div></div></div><p>
      Let's walk through an example web service.  The code in this section all comes from the seamBay example
      application in Seam's <code class="literal">/examples</code> directory, and follows the recommended strategy as
      described in the previous section.  Let's first take a look at the web service class and one of its web
      service methods:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;auctionService&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">WebService</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;AuctionService&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">HandlerChain</span><span class="java_separator">(</span><span class="java_plain">file&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;soap-handlers.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AuctionService</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">AuctionServiceRemote</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">WebMethod</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;login</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;username</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;password</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">setUsername</span><span class="java_separator">(</span><span class="java_plain">username</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">setPassword</span><span class="java_separator">(</span><span class="java_plain">password</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">login</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">isLoggedIn</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;snip</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
      As you can see, our web service is a stateless session bean, and is annotated using the JWS annotations 
      from the <code class="literal">javax.jws</code> package, as defined by JSR-181.  The <code class="literal">@WebService</code> 
      annotation tells the container that this class implements a web service, and the <code class="literal">@WebMethod</code> 
      annotation on the <code class="literal">login()</code> method identifies the method as a web service method.  
      The <code class="literal">name</code> and <code class="literal">serviceName</code> attributes in the <code class="literal">@WebService</code> 
      annotation are optional.
    </p><p>
      As is required by the specification, each method that is to be exposed as a web service method must also be 
      declared in the remote interface of the web service class (when the web service is a stateless session bean).  
      In the above example, the <code class="literal">AuctionServiceRemote</code> interface must declare the <code class="literal">login()</code> 
      method as it is annotated as a <code class="literal">@WebMethod</code>.
    </p><p>
      As you can see in the above code, the web service implements a <code class="literal">login()</code> method that 
      delegates to Seam's built-in <code class="literal">Identity</code> component.  In keeping with our recommended strategy,
      the web service is written as a simple facade, passing off the real work to a Seam component.  This allows
      for the greatest reuse of business logic between web services and other clients.
    </p><p>
      Let's look at another example.  This web service method begins a new conversation by delegating to the
      <code class="literal">AuctionAction.createAuction()</code> method:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">WebMethod</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;createAuction</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;title</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;description</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;categoryId</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">AuctionAction</span><span class="java_plain">&nbsp;action&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">AuctionAction</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">Component</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">(</span><span class="java_type">AuctionAction</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action</span><span class="java_separator">.</span><span class="java_plain">createAuction</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action</span><span class="java_separator">.</span><span class="java_plain">setDetails</span><span class="java_separator">(</span><span class="java_plain">title</span><span class="java_separator">,</span><span class="java_plain">&nbsp;description</span><span class="java_separator">,</span><span class="java_plain">&nbsp;categoryId</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></pre><p>
      And here's the code from <code class="literal">AuctionAction</code>:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">Begin</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;createAuction</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auction&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Auction</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auction</span><span class="java_separator">.</span><span class="java_plain">setAccount</span><span class="java_separator">(</span><span class="java_plain">authenticatedAccount</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auction</span><span class="java_separator">.</span><span class="java_plain">setStatus</span><span class="java_separator">(</span><span class="java_type">Auction</span><span class="java_separator">.</span><span class="java_plain">STATUS_UNLISTED</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;durationDays&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;DEFAULT_AUCTION_DURATION</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></pre><p>
      From this we can see how web services can participate in long running conversations, by acting as a facade
      and delegating the real work to a conversational Seam component.
    </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e21700"/>24.4. RESTful HTTP webservices with RESTEasy</h2></div></div></div><p>
        Seam integrates the RESTEasy implementation of the JAX-RS specification (JSR 311). You can decide how
        "deep" the integration into your Seam application is going to be:
     </p><div class="itemizedlist"><ul><li><p>
               Seamless integration of RESTEasy bootstrap and configuration, automatic detection of resources
               and providers.
            </p></li><li><p>
               Serving HTTP/REST requests with the SeamResourceServlet, no external servlet or configuration in
               web.xml required.
            </p></li><li><p>
               Writing resources as Seam components, with full Seam lifecycle management and interception (bijection).
            </p></li></ul></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21715"/>24.4.1. RESTEasy configuration and request serving</h3></div></div></div><p>
            First, get the RESTEasy libraries and the <code class="literal">jaxrs-api.jar</code>, deploy them with the
            other libraries of your application. Also deploy the integration library,
            <code class="literal">jboss-seam-resteasy.jar</code>. 
         </p><p>
	         In seam-gen based projects, this can be done by appending <code class="literal">jaxrs-api.jar</code>, <code class="literal">resteasy-jaxrs.jar</code>
	         and <code class="literal">jboss-seam-resteasy.jar</code> to the <code class="literal">deployed-jars.list</code> (war deployment) or 
	         <code class="literal">deployed-jars-ear.list</code> (ear deployment) file. For a JBoss Tools based project, copy the libraries mentioned 
	         above to the <code class="literal">EarContent/lib</code> (ear deployment) or <code class="literal">WebContent/WEB-INF/lib</code> (war deployment) 
	         folder and reload the project in the IDE.
         </p><p>
            On startup, all classes annotated <code class="literal">@javax.ws.rs.Path</code> will be discovered automatically
            and registered as HTTP resources. Seam automatically accepts and serves HTTP requests with its built-in
            <code class="literal">SeamResourceServlet</code>. The URI of a resource is build as follows:
         </p><div class="itemizedlist"><ul><li><p>
                   The URI starts with the host and context path of your application,
                    e.g. <code class="literal">http://your.hostname/myapp</code>.
                </p></li><li><p>
                  Then the pattern mapped in <code class="literal">web.xml</code> for the <code class="literal">SeamResourceServlet</code>,
                   e.g <code class="literal">/seam/resource</code> if you follow the common examples, is appended.
                  Change this setting to expose your RESTful resources under a different base.
                  Note that this is a global change and other Seam resources (e.g. <code class="literal">s:graphicImage</code> and <code class="literal">s:captcha</code>)
                  are then also served under that base path.
               </p></li><li><p>
                  The RESTEasy integration for Seam then appends a configurable string to the base path, by default
                  this is <code class="literal">/rest</code>. Hence, the full base path of your resources would e.g. be
                  <code class="literal">/myapp/seam/resource/rest</code>. We recommend that you change this string in your application (details below).
                  You could for example add a version number to prepare for a future REST API upgrade of your services
                  (old clients would keep the old URI base): <code class="literal">/myapp/seam/resource/restv1</code>.
               </p></li><li><p>
                  Finally, the actual resource is available under the defined <code class="literal">@Path</code>, e.g. a resource
                  mapped with <code class="literal">@Path("/customer")</code> would be available under
                  <code class="literal">/myapp/seam/resource/rest/customer</code>.
               </p></li></ul></div><p>
            As an example, the following resource definition would return a plaintext representation for any
            GET requests using the URI <code class="literal">http://your.hostname/myapp/seam/resource/rest/customer/123</code>:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Path</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;/customer&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyCustomerResource</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@GET</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;/{customerId}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Produces</span><span class="java_separator">(</span><span class="java_literal">&quot;text/plain&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">(</span><span class="java_plain">@</span><span class="java_type">PathParam</span><span class="java_separator">(</span><span class="java_literal">&quot;customerId&quot;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_separator">...;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            No additional configuration is required; you do not have to edit <code class="literal">web.xml</code> or any
            other setting if these defaults are acceptable. However, you can configure RESTEasy in your Seam application.
            First import the <code class="literal">resteasy</code> namespace into your XML configuration (<code class="literal">components.xml</code>) file header:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:resteasy</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/resteasy&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">http:</span><span class="xml_plain">//</span><span class="xml_attribute_name">jboss.org</span><span class="xml_plain">/</span><span class="xml_attribute_name">schema</span><span class="xml_plain">/</span><span class="xml_attribute_name">seam</span><span class="xml_plain">/</span><span class="xml_attribute_name">resteasy</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">http:</span><span class="xml_plain">//</span><span class="xml_attribute_name">jboss.org</span><span class="xml_plain">/</span><span class="xml_attribute_name">schema</span><span class="xml_plain">/</span><span class="xml_attribute_name">seam</span><span class="xml_plain">/</span><span class="xml_attribute_name">resteasy-2.3.xsd</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">http:</span><span class="xml_plain">//</span><span class="xml_attribute_name">jboss.org</span><span class="xml_plain">/</span><span class="xml_attribute_name">schema</span><span class="xml_plain">/</span><span class="xml_attribute_name">seam</span><span class="xml_plain">/</span><span class="xml_attribute_name">components</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">http:</span><span class="xml_plain">//</span><span class="xml_attribute_name">jboss.org</span><span class="xml_plain">/</span><span class="xml_attribute_name">schema</span><span class="xml_plain">/</span><span class="xml_attribute_name">seam</span><span class="xml_plain">/</span><span class="xml_attribute_name">components-2.3.xsd</span><span class="xml_attribute_value">&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can then change the <code class="literal">/rest</code> prefix as mentioned earlier:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:application</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource-path-prefix</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/restv1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The full base path to your resources is now <code class="literal">/myapp/seam/resource/restv1/{resource}</code> - note
            that your <code class="literal">@Path</code> definitions and mappings do NOT change. This is an application-wide
            switch usually used for versioning of the HTTP interface.
         </p><p>
            Seam will scan your classpath for any deployed <code class="literal">@javax.ws.rs.Path</code> resources and any
            <code class="literal">@javax.ws.rs.ext.Provider</code> classes. You can disable scanning and configure these
            classes manually:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:application</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">scan-providers</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">scan-resources</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">use-builtin-providers</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:resource-class-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.foo.MyCustomerResource</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.foo.MyOrderResource</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.foo.MyStatelessEJBImplementation</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resteasy:resource-class-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:provider-class-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.foo.MyFancyProvider</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resteasy:provider-class-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resteasy:application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The <code class="literal">use-built-in-providers</code> switch enables (default) or disables the RESTEasy built-in
            providers. We recommend you leave them enabled, as they provide plaintext, JSON, and JAXB marshalling
            out of the box.
         </p><p>
            RESTEasy supports plain EJBs (EJBs that are not Seam components) as resources. Instead of configuring the
            JNDI names in a non-portable fashion in <code class="literal">web.xml</code> (see RESTEasy documentation), you can
            simply list the EJB implementation classes, not the business interfaces, in <code class="literal">components.xml</code>
            as shown above. Note that you have to annotate the <code class="literal">@Local</code> interface of the EJB with
            <code class="literal">@Path</code>, <code class="literal">@GET</code>, and so on - not the bean implementation class. This allows
            you to keep your application deployment-portable with the global Seam <code class="literal">jndi-pattern</code> switch
            on <code class="literal">&lt;core:init/&gt;</code>. Note that plain (non-Seam component) EJB resources will not be found
            even if scanning of resources is enabled, you always have to list them manually. Again, this whole paragraph
            is only relevant for EJB resources that are not also Seam components and that do not have
            an <code class="literal">@Name</code> annotation.
         </p><p>
            Finally, you can configure media type and language URI extensions:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:media-type-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">txt</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">text/plain</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resteasy:media-type-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:language-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">deutsch</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">de-DE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resteasy:language-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resteasy:application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            This definition would map the URI suffix of <code class="literal">.txt.deutsch</code> to
            additional <code class="literal">Accept</code> and <code class="literal">Accept-Language</code> header values
            <code class="literal">text/plain</code> and <code class="literal">de-DE</code>.
         </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21903"/>24.4.2. Resources as Seam components</h3></div></div></div><p>
            Any resource and provider instances are managed by RESTEasy by default. That means a resource class
            will be instantiated by RESTEasy and serve a single request, after which it will be destroyed. This is
            the default JAX-RS lifecycle. Providers are instantiated once for the whole application and are
            effectively singletons and supposed to be stateless.
         </p><p>
            You can write resources as Seam components and benefit from the richer lifecycle management
            of Seam, and interception for bijection, security, and so on. Simply make your resource class a
            Seam component:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;customerResource&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;/customer&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyCustomerResource</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CustomerDAO</span><span class="java_plain">&nbsp;customerDAO</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@GET</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;/{customerId}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Produces</span><span class="java_separator">(</span><span class="java_literal">&quot;text/plain&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">(</span><span class="java_plain">@</span><span class="java_type">PathParam</span><span class="java_separator">(</span><span class="java_literal">&quot;customerId&quot;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customerDAO</span><span class="java_separator">.</span><span class="java_plain">find</span><span class="java_separator">(</span><span class="java_plain">id</span><span class="java_separator">).</span><span class="java_plain">getName</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            An instance of <code class="literal">customerResource</code> is now handled by Seam when a request hits the
            server. This is a Seam JavaBean component that is <code class="literal">EVENT</code>-scoped, hence no different
            than the default JAX-RS lifecycle. You get full Seam injection and interception support, and all other Seam
            components and contexts are available to you. Currently also supported are <code class="literal">APPLICATION</code>
            and <code class="literal">STATELESS</code> resource Seam components. These three scopes allow you to create an effectively
            stateless Seam middle-tier HTTP request-processing application.
         </p><p>
            You can annotate an interface and keep the implementation free from JAX-RS annotations:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Path</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;/customer&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">MyCustomerResource</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@GET</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;/{customerId}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Produces</span><span class="java_separator">(</span><span class="java_literal">&quot;text/plain&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">(</span><span class="java_plain">@</span><span class="java_type">PathParam</span><span class="java_separator">(</span><span class="java_literal">&quot;customerId&quot;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;id</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;customerResource&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">STATELESS</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyCustomerResourceBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">MyCustomerResource</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CustomerDAO</span><span class="java_plain">&nbsp;customerDAO</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">(</span><span class="java_type">int</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customerDAO</span><span class="java_separator">.</span><span class="java_plain">find</span><span class="java_separator">(</span><span class="java_plain">id</span><span class="java_separator">).</span><span class="java_plain">getName</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
           You can use <code class="literal">SESSION</code>-scoped Seam components. By default, the session will however be shortened
           to a single request. In other words, when an HTTP request is being processed by the RESTEasy integration code,
           an HTTP session will be created so that Seam components can utilize that context. When the request has
           been processed, Seam will look at the session and decide if the session was created only to serve that
           single request (no session identifier has been provided with the request, or no session existed for the request).
           If the session has been created only to serve this request, the session will be destroyed after the request!
         </p><p>
           Assuming that your Seam application only uses event, application, or stateless components, this procedure
           prevents exhaustion of available HTTP sessions on the server. The RESTEasy integration with Seam assumes
           by default that sessions are not used, hence anemic sessions would add up as every REST request would start
           a session that will only be removed when timed out.
         </p><p>
            If your RESTful Seam application has to preserve session state across REST HTTP requests, disable this
            behavior in your configuration file:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:application</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">destroy-session-after-request</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
             Every REST HTTP request will now create a new session that will only be removed by timeout or explicit
             invalidation in your code through <code class="literal">Session.instance().invalidate()</code>.
             It is your responsibility to pass a valid session identifier along with your HTTP requests, if you want
             to utilize the session context across requests.
         </p><p>
            <code class="literal">CONVERSATION</code>-scoped resource components and mapping of conversations to temporary HTTP
            resources and paths is planned but currently not supported.
         </p><p>
            EJB Seam components are supported as REST resources. Always annotate the local business interface, not
            the EJB implementation class, with JAX-RS annotations. The EJB has to be <code class="literal">STATELESS</code>.
         </p><p>
            Sub-resources as defined in the JAX RS specification, section 3.4.1, can also be Seam component instances:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Path</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;/garage&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;garage&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">GarageService</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;/vehicles&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">VehicleService</span><span class="java_plain">&nbsp;getVehicles</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">VehicleService</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">Component</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">(</span><span class="java_type">VehicleService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                RESTEasy components do not support hot redeployment. As a result, the components should never 
                be placed in the <code class="literal">src/hot</code> folder. The <code class="literal">src/main</code> folder should
                be used instead.
            </p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                Provider classes can currently not be Seam components. Although you can configure an
                <code class="literal">@Provider</code> annotated class as a Seam component, it will at runtime be managed
                by RESTEasy as a singleton with no Seam interception, bijection, etc. The instance will not be
                a Seam component instance. We plan to support Seam component lifecycle for JAX-RS providers in
                the future.
            </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21977"/>24.4.3. Securing resources</h3></div></div></div><p>
            You can enable the Seam authentication filter for HTTP Basic and Digest authentication in
            <code class="literal">components.xml</code>:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:authentication-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/seam/resource/rest/*&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">auth-type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;basic&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            See the Seam security chapter on how to write an authentication routine.
         </p><p>
            After successful authentication, authorization rules with the common
            <code class="literal">@Restrict</code> and <code class="literal">@PermissionCheck</code> annotations are in effect. You can
            also access the client <code class="literal">Identity</code>, work with permission mapping, and so on. All
            regular Seam security features for authorization are available.
         </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22000"/>24.4.4. Mapping exceptions to HTTP responses</h3></div></div></div><p>
            Section 3.3.4 of the JAX-RS specification defines how checked or unchecked exceptions are handled by the
            JAX RS implementation. In addition to using an exception mapping provider as defined by JAX-RS, the integration
            of RESTEasy with Seam allows you to map exceptions to HTTP response codes within Seam's <code class="literal">pages.xml</code>
            facility. If you are already using <code class="literal">pages.xml</code> declarations, this is easier to maintain than
            potentially many JAX RS exception mapper classes.
         </p><p>
            Exception handling within Seam requires that the Seam filter is executed for your HTTP request. Ensure that
            you do filter <span class="emphasis"><em>all</em></span> requests in your <code class="literal">web.xml</code>, not - as
            some Seam examples might show - a request URI pattern that doesn't cover your REST request paths.
            The following example intercepts <span class="emphasis"><em>all</em></span> HTTP requests and enables Seam exception handling:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            To convert the unchecked <code class="literal">UnsupportedOperationException</code> thrown by your resource
            methods to a <code class="literal">501 Not Implemented</code> HTTP status response, add the following to your
            <code class="literal">pages.xml</code> descriptor:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.lang.UnsupportedOperationException&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">http-error</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">error-code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;501&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;requested&nbsp;operation&nbsp;is&nbsp;not&nbsp;supported</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">http-error</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Custom or checked exceptions are handled the same:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">exception</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;my.CustomException&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">log</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">http-error</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">error-code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;503&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Service&nbsp;not&nbsp;available:&nbsp;#{org.jboss.seam.handledException.message}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">message</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">http-error</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">exception</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You do not have to send an HTTP error to the client if an exception occurs. Seam allows you to map the
            exception as a redirect to a view of your Seam application. As this feature is typically used for human
            clients (web browsers) and not for REST API remote clients, you should pay extra attention to conflicting
            exception mappings in <code class="literal">pages.xml</code>.
         </p><p>
            Note that the HTTP response still passes through the servlet container, so an additional mapping might apply
            if you have <code class="literal">&lt;error-page&gt;</code> mappings in your <code class="literal">web.xml</code> configuration.
            The HTTP status code would then be mapped to a rendered HTML error page with status <code class="literal">200 OK</code>!
         </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22057"/>24.4.5. Exposing entities via RESTful API</h3></div></div></div><p>
            Seam makes it really easy to use a RESTful approach for accessing application data. One of the improvements that
            Seam introduces is the ability to expose parts of your SQL database for remote access via plain HTTP calls.
            For this purpose, the Seam/RESTEasy integration module provides two components: <code class="literal">ResourceHome</code> and
            <code class="literal">ResourceQuery</code>, which benefit from the API provided by the Seam Application Framework
            (<a class="xref" href="#framework" title="Chapter 13. The Seam Application Framework">Chapter 13, <i>The Seam Application Framework</i></a>). These components allow you to bind domain model entity classes to an HTTP API.
         </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22070"/>24.4.5.1. ResourceQuery</h4></div></div></div><p>
         		ResourceQuery exposes entity querying capabilities as a RESTful web service. By default, a simple
         		underlying Query component, which returns a list of instances of a given entity class, is created automatically. 
         		Alternatively, the ResourceQuery component can be attached to an existing Query component in more sophisticated 
         		cases. The following example demonstrates how easily ResourceQuery can be configured:
         	</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:resource-query</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">path</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/user&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userResourceQuery&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.example.User&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         		With this single XML element, a ResourceQuery component is set up. The configuration is straightforward:
         	</p><div class="itemizedlist"><ul><li><p>
         	 			The component will return a list of <code class="literal">com.example.User</code> instances.
         	 		</p></li><li><p>
         	 			The component will handle HTTP requests on the URI path <code class="literal">/user</code>.
         	 		</p></li><li><p>
         	 			The component will by default transform the data into XML or JSON (based on client's preference).
         	 			The set of supported mime types can be altered by using the <code class="literal">media-types</code> attribute,
                      for example:
         	 		</p></li></ul></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:resource-query</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">path</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/user&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userResourceQuery&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;com.example.User&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">media-types</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;application/fastinfoset&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>	
				Alternatively, if you do not like configuring components using XML, you can set up the component by extension:
			</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;userResourceQuery&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;user&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserResourceQuery</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceQuery</span><span class="java_operator">&lt;</span><span class="java_type">User</span><span class="java_operator">&gt;</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
				Queries are read-only operations, the resource only responds to GET requests. Furthermore, ResourceQuery allows
            clients  of a web service to manipulate the resultset of a query using the following path parameters:
			</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Parameter name</th><th>Example</th><th>Description</th></tr></thead><tbody><tr><td>start</td><td>/user?start=20</td><td>Returns a subset of a database query result starting with the 20th entry.</td></tr><tr><td>show</td><td>/user?show=10</td><td>Returns a subset of the database query result limited to 10 entries.</td></tr></tbody></table></div><p>
				For example, you can send an HTTP GET request to <code class="literal">/user?start=30&amp;show=10</code> to get a list of
            entries representing 10 rows starting with row 30.
			</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                	RESTEasy uses JAXB to marshall entities. Thus, in order to be able to transfer them over the wire, you
                  need to annotate entity classes with <code class="literal">@XMLRootElement</code>. Consult the JAXB and
                  RESTEasy documentation for more information.
            	</p></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22142"/>24.4.5.2. ResourceHome</h4></div></div></div><p>
         		Just as ResourceQuery makes Query's API available for remote access, so does ResourceHome for the Home
               component. The following table describes how the two APIs (HTTP and Home) are bound together.
         	</p><div class="table"><a id="d0e22147"/><p class="title"><b>Table 24.1. </b></p><div class="table-contents"><table border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th>HTTP method</th><th>Path</th><th>Function</th><th>ResourceHome method</th></tr></thead><tbody><tr><td>GET</td><td>{path}/{id}</td><td>Read</td><td>getResource()</td></tr><tr><td>POST</td><td>{path}</td><td>Create</td><td>postResource()</td></tr><tr><td>PUT</td><td>{path}/{id}</td><td>Update</td><td>putResource()</td></tr><tr><td>DELETE</td><td>{path}/{id}</td><td>Delete</td><td>deleteResource()</td></tr></tbody></table></div></div><br class="table-break"/><div class="itemizedlist"><ul><li><p>
               			You can GET, PUT, and DELETE a particular user instance by sending HTTP requests to /user/{userId}
               		</p></li><li><p>
               			Sending a POST request to <code class="literal">/user</code> creates a new user entity instance and persists it.
                        Usually, you leave it up to the persistence layer to provide the entity instance with an identifier
                        value and thus an URI. Therefore, the URI is sent back to the client in the
                        <code class="literal">Location</code> header of the HTTP response.
               		</p></li></ul></div><p>
         		The configuration of ResourceHome is very similar to ResourceQuery except that you need to explicitly specify the underlying 
         		Home component and the Java type of the entity identifier property.
         	</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resteasy:resource-home</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">path</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/user&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userResourceHome&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-home</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{userHome}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-id-class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.lang.Integer&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Again, you can write a subclass of ResourceHome instead of XML:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;userResourceHome&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Path</span><span class="java_separator">(</span><span class="java_literal">&quot;user&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserResourceHome</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceHome</span><span class="java_operator">&lt;</span><span class="java_type">User</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_operator">&gt;</span>
<!--  --><br/><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityHome</span><span class="java_operator">&lt;</span><span class="java_type">User</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;userHome</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Home</span><span class="java_operator">&lt;?</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getEntityHome</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;userHome</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
				For more examples of ResourceHome and ResourceQuery components, take a look at the <span class="emphasis"><em>Seam Tasks</em></span> 
            example application, which demonstrates how Seam/RESTEasy integration can be used together with a jQuery web client.
            In addition, you can find more code example in the <span class="emphasis"><em>Restbay</em></span> example, which is used mainly
            for testing purposes.
			</p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22225"/>24.4.6. Testing resources and providers</h3></div></div></div><p>
            Seam includes a unit testing utility class that helps you create unit tests for a RESTful
            architecture. Extend the <code class="literal">SeamTest</code> class as usual and use the
            <code class="literal">ResourceRequestEnvironment.ResourceRequest</code> to emulate HTTP requests/response cycles:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">import</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">jboss</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">seam</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">mock</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_type">ResourceRequestEnvironment</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">mock</span><span class="java_separator">.</span><span class="java_type">EnhancedMockHttpServletRequest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">mock</span><span class="java_separator">.</span><span class="java_type">EnhancedMockHttpServletResponse</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">mock</span><span class="java_separator">.</span><span class="java_type">ResourceRequestEnvironment</span><span class="java_separator">.</span><span class="java_type">ResourceRequest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">mock</span><span class="java_separator">.</span><span class="java_type">ResourceRequestEnvironment</span><span class="java_separator">.</span><span class="java_type">Method</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyTest</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">SeamTest</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">ResourceRequestEnvironment</span><span class="java_plain">&nbsp;sharedEnvironment</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">BeforeClass</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;prepareSharedEnvironment</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sharedEnvironment&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceRequestEnvironment</span><span class="java_separator">(</span><span class="java_keyword">this</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getDefaultHeaders</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">HashMap</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_operator">&gt;</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put</span><span class="java_separator">(</span><span class="java_literal">&quot;Accept&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;text/plain&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Test</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;test</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_type">Not</span><span class="java_plain">&nbsp;shared</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceRequest</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceRequestEnvironment</span><span class="java_separator">(</span><span class="java_keyword">this</span><span class="java_separator">),</span><span class="java_plain">&nbsp;</span><span class="java_type">Method</span><span class="java_separator">.</span><span class="java_plain">GET</span><span class="java_separator">,</span><span class="java_plain">&nbsp;&quot;</span><span class="java_operator">/</span><span class="java_plain">my</span><span class="java_operator">/</span><span class="java_plain">relative</span><span class="java_operator">/</span><span class="java_plain">uri</span><span class="java_separator">)</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ResourceRequest</span><span class="java_separator">(</span><span class="java_plain">sharedEnvironment</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Method</span><span class="java_separator">.</span><span class="java_plain">GET</span><span class="java_separator">,</span><span class="java_plain">&nbsp;&quot;</span><span class="java_operator">/</span><span class="java_plain">my</span><span class="java_operator">/</span><span class="java_plain">relative</span><span class="java_operator">/</span><span class="java_plain">uri</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;prepareRequest</span><span class="java_separator">(</span><span class="java_type">EnhancedMockHttpServletRequest</span><span class="java_plain">&nbsp;request</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request</span><span class="java_separator">.</span><span class="java_plain">addQueryParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;foo&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;123&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request</span><span class="java_separator">.</span><span class="java_plain">addHeader</span><span class="java_separator">(</span><span class="java_literal">&quot;Accept-Language&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;en_US,&nbsp;de&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onResponse</span><span class="java_separator">(</span><span class="java_type">EnhancedMockHttpServletResponse</span><span class="java_plain">&nbsp;response</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;response</span><span class="java_separator">.</span><span class="java_plain">getStatus</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">200</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;response</span><span class="java_separator">.</span><span class="java_plain">getContentAsString</span><span class="java_separator">().</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;foobar&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}.</span><span class="java_plain">run</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            This test only executes local calls, it does not communicate with the <code class="literal">SeamResourceServlet</code>
            through TCP. The mock request is passed through the Seam servlet and filters and the response is then
            available for test assertions. Overriding the <code class="literal">getDefaultHeaders()</code> method in a shared
            instance of <code class="literal">ResourceRequestEnvironment</code> allows you to set request headers for every
            test method in the test class.
         </p><p>
            Note that a <code class="literal">ResourceRequest</code> has to be executed in a <code class="literal">@Test</code> method
            or in a <code class="literal">@BeforeMethod</code> callback. You can not execute it in any other callback,
            such as <code class="literal">@BeforeClass</code>.
         </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="remoting"/>Chapter 25. Remoting</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e22268">25.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e22300">25.2. The "Seam" object</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22317">25.2.1. A Hello World example</a></span></dt><dt><span class="section"><a href="#d0e22406">25.2.2. Seam.Component</a></span></dt><dt><span class="section"><a href="#d0e22472">25.2.3. Seam.Remoting</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22502">25.3. Client Interfaces</a></span></dt><dt><span class="section"><a href="#d0e22523">25.4. The Context</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22528">25.4.1. Setting and reading the Conversation ID</a></span></dt><dt><span class="section"><a href="#d0e22544">25.4.2. Remote calls within the current conversation scope</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22551">25.5. Batch Requests</a></span></dt><dt><span class="section"><a href="#d0e22577">25.6. Working with Data types</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22580">25.6.1. Primitives / Basic Types</a></span></dt><dt><span class="section"><a href="#d0e22618">25.6.2. JavaBeans</a></span></dt><dt><span class="section"><a href="#d0e22660">25.6.3. Dates and Times</a></span></dt><dt><span class="section"><a href="#d0e22674">25.6.4. Enums</a></span></dt><dt><span class="section"><a href="#d0e22693">25.6.5. Collections</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22743">25.7. Debugging</a></span></dt><dt><span class="section"><a href="#d0e22765">25.8. Handling Exceptions</a></span></dt><dt><span class="section"><a href="#d0e22787">25.9. The Loading Message</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22792">25.9.1. Changing the message</a></span></dt><dt><span class="section"><a href="#d0e22802">25.9.2. Hiding the loading message</a></span></dt><dt><span class="section"><a href="#d0e22815">25.9.3. A Custom Loading Indicator</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22828">25.10. Controlling what data is returned</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22848">25.10.1. Constraining normal fields</a></span></dt><dt><span class="section"><a href="#d0e22883">25.10.2. Constraining Maps and Collections</a></span></dt><dt><span class="section"><a href="#d0e22942">25.10.3. Constraining objects of a specific type</a></span></dt><dt><span class="section"><a href="#d0e22949">25.10.4. Combining Constraints</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e22956">25.11. Transactional Requests</a></span></dt><dt><span class="section"><a href="#d0e22969">25.12. JMS Messaging</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e22974">25.12.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e22993">25.12.2. Subscribing to a JMS Topic</a></span></dt><dt><span class="section"><a href="#d0e23034">25.12.3. Unsubscribing from a Topic</a></span></dt><dt><span class="section"><a href="#d0e23044">25.12.4. Tuning the Polling Process</a></span></dt></dl></dd></dl></div><p> Seam provides a convenient method of remotely accessing components from a web page, using AJAX (Asynchronous
    Javascript and XML). The framework for this functionality is provided with almost no up-front development effort -
    your components only require simple annotating to become accessible via AJAX. This chapter describes the steps
    required to build an AJAX-enabled web page, then goes on to explain the features of the Seam Remoting framework in
    more detail. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22268"/>25.1. Configuration</h2></div></div></div><p> To use remoting, the Seam Resource servlet must first be configured in your <code class="literal">web.xml</code> file: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamResourceServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/seam/resource/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The next step is to import the necessary Javascript into your web page. There are a minimum of two scripts
      that must be imported. The first one contains all the client-side framework code that enables remoting
      functionality: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/resource/remote.js&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The second script contains the stubs and type definitions for the components you wish to call. It is
      generated dynamically based on the local interface of your components, and includes type definitions for all of
      the classes that can be used to call the remotable methods of the interface. The name of the script reflects the
      name of your component. For example, if you have a stateless session bean annotated with
        <code class="literal">@Name("customerAction")</code>, then your script tag should look like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/interface.js?customerAction&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> If you wish to access more than one component from the same page, then include them all as parameters of your
      script tag: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/interface.js?customerAction&amp;accountAction&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      Alternatively, you may use the <code class="literal">s:remote</code> tag to import the required Javascript.  Separate each
      component or class name you wish to import with a comma: 
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerAction,accountAction&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22300"/>25.2. The "Seam" object</h2></div></div></div><p> Client-side interaction with your components is all performed via the <code class="literal">Seam</code> Javascript
      object. This object is defined in <code class="literal">remote.js</code>, and you'll be using it to make asynchronous calls
      against your component. It is split into two areas of functionality; <code class="literal">Seam.Component</code> contains
      methods for working with components and <code class="literal">Seam.Remoting</code> contains methods for executing remote
      requests. The easiest way to become familiar with this object is to start with a simple example. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22317"/>25.2.1. A Hello World example</h3></div></div></div><p> Let's step through a simple example to see how the <code class="literal">Seam</code> object works. First of all,
        let's create a new Seam component called <code class="literal">helloAction</code>. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;helloAction&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloAction</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">WebRemote</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;sayHello</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Hello,&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>Take special note of the
          <code class="literal">@WebRemote</code> annotation, as it's required to make our method accessible via remoting:</p><p> That's all the server-side code we need to write.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>If you are performing a persistence operation in the method marked <code class="literal">@WebRemote</code> you will
         also need to add a <code class="literal">@Transactional</code> annotation to the method. Otherwise, your method would
         execute outside of a transaction without this extra hint.That's because unlike a JSF request, Seam does not
         wrap the remoting request in a transaction automatically.</p></div><p>Now for our web page - create a new page and import the 
          <code class="literal">helloAction</code> component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;helloAction&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> To make this a fully interactive user experience, let's add a button to our page: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">onclick</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;javascript:sayHello()&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Say&nbsp;Hello</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">button</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> We'll also need to add some more script to make our button actually do something when it's clicked: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;//</span><span class="xml_char_data">&lt;![CDATA[</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;function&nbsp;sayHello()&nbsp;{</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;name&nbsp;=&nbsp;prompt(&quot;What&nbsp;is&nbsp;your&nbsp;name?&quot;);</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;&nbsp;Seam.Component.getInstance(&quot;helloAction&quot;).sayHello(name,&nbsp;sayHelloCallback);</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;}</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;function&nbsp;sayHelloCallback(result)&nbsp;{</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;&nbsp;alert(result);</span><span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;}</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_char_data">&nbsp;&nbsp;&nbsp;//&nbsp;]]&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> We're done! Deploy your application and browse to your page. Click the button, and enter a name when
        prompted. A message box will display the hello message confirming that the call was successful. If you want to
        save some time, you'll find the full source code for this Hello World example in Seam's
          <code class="literal">/examples/remoting/helloworld</code> directory. </p><p> So what does the code of our script actually do? Let's break it down into smaller pieces. To start with,
        you can see from the Javascript code listing that we have implemented two methods - the first method is
        responsible for prompting the user for their name and then making a remote request. Take a look at the following
        line: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Component.getInstance(&quot;helloAction&quot;).sayHello(name,&nbsp;sayHelloCallback);</span><br />
</pre><p> The first section of this line, <code class="literal">Seam.Component.getInstance("helloAction")</code> returns a
        proxy, or "stub" for our <code class="literal">helloAction</code> component. We can invoke the methods of our component
        against this stub, which is exactly what happens with the remainder of the line: <code class="literal">sayHello(name,
          sayHelloCallback);</code>. </p><p> What this line of code in its completeness does, is invoke the <code class="literal">sayHello</code> method of our
        component, passing in <code class="literal">name</code> as a parameter. The second parameter,
        <code class="literal">sayHelloCallback</code> isn't a parameter of our component's <code class="literal">sayHello</code> method,
        instead it tells the Seam Remoting framework that once it receives the response to our request, it should pass
        it to the <code class="literal">sayHelloCallback</code> Javascript method. This callback parameter is entirely optional,
        so feel free to leave it out if you're calling a method with a <code class="literal">void</code> return type or if you
        don't care about the result. </p><p> The <code class="literal">sayHelloCallback</code> method, once receiving the response to our remote request then pops
        up an alert message displaying the result of our method call. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22406"/>25.2.2. Seam.Component</h3></div></div></div><p> The <code class="literal">Seam.Component</code> Javascript object provides a number of client-side methods for
        working with your Seam components. The two main methods, <code class="literal">newInstance()</code> and
          <code class="literal">getInstance()</code> are documented in the following sections however their main difference is
        that <code class="literal">newInstance()</code> will always create a new instance of a component type, and
          <code class="literal">getInstance()</code> will return a singleton instance. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22426"/>25.2.2.1. Seam.Component.newInstance()</h4></div></div></div><p> Use this method to create a new instance of an entity or Javabean component. The object returned by this
          method will have the same getter/setter methods as its server-side counterpart, or alternatively if you wish
          you can access its fields directly. Take the following Seam entity component for example: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;customer&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getCustomerId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCustomerId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">customerId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;customerId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFirstName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setFirstName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">firstName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setLastName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">lastName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> To create a client-side Customer you would write the following code: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">var&nbsp;customer&nbsp;=&nbsp;Seam.Component.newInstance(&quot;customer&quot;);</span><br />
</pre><p> Then from here you can set the fields of the customer object: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">customer.setFirstName(&quot;John&quot;);</span><br />
<span class="xml_plain">//&nbsp;Or&nbsp;you&nbsp;can&nbsp;set&nbsp;the&nbsp;fields&nbsp;directly</span><br />
<span class="xml_plain">customer.lastName&nbsp;=&nbsp;&quot;Smith&quot;;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22441"/>25.2.2.2. Seam.Component.getInstance()</h4></div></div></div><p> The <code class="literal">getInstance()</code> method is used to get a reference to a Seam session bean component
          stub, which can then be used to remotely execute methods against your component. This method returns a
          singleton for the specified component, so calling it twice in a row with the same component name will return
          the same instance of the component. </p><p> To continue our example from before, if we have created a new <code class="literal">customer</code> and we now wish
          to save it, we would pass it to the <code class="literal">saveCustomer()</code> method of our
          <code class="literal">customerAction</code> component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Component.getInstance(&quot;customerAction&quot;).saveCustomer(customer);</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22462"/>25.2.2.3. Seam.Component.getComponentName()</h4></div></div></div><p> Passing an object into this method will return its component name if it is a component, or
          <code class="literal">null</code> if it is not. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">if&nbsp;(Seam.Component.getComponentName(instance)&nbsp;==&nbsp;&quot;customer&quot;)</span><br />
<span class="xml_plain">&nbsp;&nbsp;alert(&quot;Customer&quot;);</span><br />
<span class="xml_plain">else&nbsp;if&nbsp;(Seam.Component.getComponentName(instance)&nbsp;==&nbsp;&quot;staff&quot;)</span><br />
<span class="xml_plain">&nbsp;&nbsp;alert(&quot;Staff&nbsp;member&quot;);</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22472"/>25.2.3. Seam.Remoting</h3></div></div></div><p> Most of the client side functionality for Seam Remoting is contained within the
        <code class="literal">Seam.Remoting</code> object. While you shouldn't need to directly call most of its methods, there
        are a couple of important ones worth mentioning. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22480"/>25.2.3.1. Seam.Remoting.createType()</h4></div></div></div><p> If your application contains or uses Javabean classes that aren't Seam components, you may need to create
          these types on the client side to pass as parameters into your component method. Use the
          <code class="literal">createType()</code> method to create an instance of your type. Pass in the fully qualified Java
          class name as a parameter: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">var&nbsp;widget&nbsp;=&nbsp;Seam.Remoting.createType(&quot;com.acme.widgets.MyWidget&quot;);</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22490"/>25.2.3.2. Seam.Remoting.getTypeName()</h4></div></div></div><p> This method is the equivalent of <code class="literal">Seam.Component.getComponentName()</code> but for
          non-component types. It will return the name of the type for an object instance, or <code class="literal">null</code> if
          the type is not known. The name is the fully qualified name of the type's Java class. </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22502"/>25.3. Client Interfaces</h2></div></div></div><p> In the configuration section above, the interface, or "stub" for our component is imported into our page 
        either via <code class="literal">seam/resource/remoting/interface.js</code>: or using the <code class="literal">s:remote</code>
        tag:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam/resource/remoting/interface.js?customerAction&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerAction&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> By including this script in our page, the interface definitions for our component, plus any other components
      or types that are required to execute the methods of our component are generated and made available for the
      remoting framework to use. </p><p> There are two types of client stub that can be generated, "executable" stubs and "type" stubs. Executable
      stubs are behavioural, and are used to execute methods against your session bean components, while type stubs
      contain state and represent the types that can be passed in as parameters or returned as a result. </p><p> The type of client stub that is generated depends on the type of your Seam component. If the component is a
      session bean, then an executable stub will be generated, otherwise if it's an entity or JavaBean, then a type stub
      will be generated. There is one exception to this rule; if your component is a JavaBean (ie it is not a session
      bean nor an entity bean) and any of its methods are annotated with @WebRemote, then an executable stub will be
      generated for it instead of a type stub. This allows you to use remoting to call methods of your JavaBean
      components in a non-EJB environment where you don't have access to session beans. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22523"/>25.4. The Context</h2></div></div></div><p> The Seam Remoting Context contains additional information which is sent and received as part of a remoting
      request/response cycle. At this stage it only contains the conversation ID but may be expanded in the future. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22528"/>25.4.1. Setting and reading the Conversation ID</h3></div></div></div><p> If you intend on using remote calls within the scope of a conversation then you need to be able to read or
      set the conversation ID in the Seam Remoting Context. To read the conversation ID after making a remote request
      call <code class="literal">Seam.Remoting.getContext().getConversationId()</code>. To set the conversation ID before making a
      request, call <code class="literal">Seam.Remoting.getContext().setConversationId()</code>. </p><p> If the conversation ID hasn't been explicitly set with
        <code class="literal">Seam.Remoting.getContext().setConversationId()</code>, then it will be automatically assigned the
      first valid conversation ID that is returned by any remoting call. If you are working with multiple conversations
      within your page, then you may need to explicitly set the conversation ID before each call. If you are working
      with just a single conversation, then you don't need to do anything special. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22544"/>25.4.2. Remote calls within the current conversation scope</h3></div></div></div><p> In some circumstances it may be required to make a remote call within the scope of the
        current view's conversation.  To do this, you must explicitly set the conversation ID to that
        of the view before making the remote call.  This small snippet of JavaScript will set the
        conversation ID that is used for remoting calls to the current view's conversation ID: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.getContext().setConversationId(&nbsp;#{conversation.id}&nbsp;);</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22551"/>25.5. Batch Requests</h2></div></div></div><p> Seam Remoting allows multiple component calls to be executed within a single request. It is recommended that
      this feature is used wherever it is appropriate to reduce network traffic. </p><p> The method <code class="literal">Seam.Remoting.startBatch()</code> will start a new batch, and any component calls
      executed after starting a batch are queued, rather than being sent immediately. When all the desired component
      calls have been added to the batch, the <code class="literal">Seam.Remoting.executeBatch()</code> method will send a single
      request containing all of the queued calls to the server, where they will be executed in order. After the calls
      have been executed, a single response containning all return values will be returned to the client and the
      callback functions (if provided) triggered in the same order as execution. </p><p> If you start a new batch via the <code class="literal">startBatch()</code> method but then decide you don't want to
      send it, the <code class="literal">Seam.Remoting.cancelBatch()</code> method will discard any calls that were queued and
      exit the batch mode. </p><p> To see an example of a batch being used, take a look at <code class="literal">/examples/remoting/chatroom</code>.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22577"/>25.6. Working with Data types</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22580"/>25.6.1. Primitives / Basic Types</h3></div></div></div><p> This section describes the support for basic data types. On the server side these values are generally
        compatible with either their primitive type or their corresponding wrapper class. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22585"/>25.6.1.1. String</h4></div></div></div><p> Simply use Javascript String objects when setting String parameter values. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22590"/>25.6.1.2. Number</h4></div></div></div><p> There is support for all number types supported by Java. On the client side, number values are always
          serialized as their String representation and then on the server side they are converted to the correct
          destination type. Conversion into either a primitive or wrapper type is supported for <code class="literal">Byte</code>,
            <code class="literal">Double</code>, <code class="literal">Float</code>, <code class="literal">Integer</code>, <code class="literal">Long</code> and
            <code class="literal">Short</code> types. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22613"/>25.6.1.3. Boolean</h4></div></div></div><p> Booleans are represented client side by Javascript Boolean values, and server side by a Java boolean.
        </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22618"/>25.6.2. JavaBeans</h3></div></div></div><p> In general these will be either Seam entity or JavaBean components, or some other non-component class. Use
        the appropriate method (either <code class="literal">Seam.Component.newInstance()</code> for Seam components or
          <code class="literal">Seam.Remoting.createType()</code> for everything else) to create a new instance of the object. </p><p> It is important to note that only objects that are created by either of these two methods should be used as
        parameter values, where the parameter is not one of the other valid types mentioned anywhere else in this
        section. In some situations you may have a component method where the exact parameter type cannot be determined,
        such as: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;myAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">MyActionLocal</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doSomethingWithObject</span><span class="java_separator">(</span><span class="java_type">Object</span><span class="java_plain">&nbsp;obj</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p> In this case you might want to pass in an instance of your <code class="literal">myWidget</code> component, however
        the interface for <code class="literal">myAction</code> won't include <code class="literal">myWidget</code> as it is not directly
        referenced by any of its methods. To get around this, <code class="literal">MyWidget</code> needs to be explicitly
        imported: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myAction,myWidget&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> This will then allow a <code class="literal">myWidget</code> object to be created with
          <code class="literal">Seam.Component.newInstance("myWidget")</code>, which can then be passed to
          <code class="literal">myAction.doSomethingWithObject()</code>. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22660"/>25.6.3. Dates and Times</h3></div></div></div><p> Date values are serialized into a String representation that is accurate to the millisecond. On the client
        side, use a Javascript Date object to work with date values. On the server side, use any
        <code class="literal">java.util.Date</code> (or descendent, such as <code class="literal">java.sql.Date</code> or
          <code class="literal">java.sql.Timestamp</code> class. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22674"/>25.6.4. Enums</h3></div></div></div><p> On the client side, enums are treated the same as Strings. When setting the value for an enum parameter,
        simply use the String representation of the enum. Take the following component as an example: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;paintAction&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;paintAction&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;paintLocal&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;enum&nbsp;</span><span class="java_type">Color</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">red</span><span class="java_separator">,</span><span class="java_plain">&nbsp;green</span><span class="java_separator">,</span><span class="java_plain">&nbsp;blue</span><span class="java_separator">,</span><span class="java_plain">&nbsp;yellow</span><span class="java_separator">,</span><span class="java_plain">&nbsp;orange</span><span class="java_separator">,</span><span class="java_plain">&nbsp;purple</span><span class="java_separator">};</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;paint</span><span class="java_separator">(</span><span class="java_type">Color</span><span class="java_plain">&nbsp;color</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;code</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></pre><p> To call the <code class="literal">paint()</code> method with the color <code class="literal">red</code>, pass the parameter
        value as a String literal: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Component.getInstance(&quot;paintAction&quot;).paint(&quot;red&quot;);</span><br />
</pre><p> The inverse is also true - that is, if a component method returns an enum parameter (or contains an enum
        field anywhere in the returned object graph) then on the client-side it will be represented as a String. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22693"/>25.6.5. Collections</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22696"/>25.6.5.1. Bags</h4></div></div></div><p> Bags cover all collection types including arrays, collections, lists, sets, (but excluding Maps - see the
          next section for those), and are implemented client-side as a Javascript array. When calling a component
          method that accepts one of these types as a parameter, your parameter should be a Javascript array. If a
          component method returns one of these types, then the return value will also be a Javascript array. The
          remoting framework is clever enough on the server side to convert the bag to an appropriate type for the
          component method call. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e22701"/>25.6.5.2. Maps</h4></div></div></div><p> As there is no native support for Maps within Javascript, a simple Map implementation is provided with
          the Seam Remoting framework. To create a Map which can be used as a parameter to a remote call, create a new
            <code class="literal">Seam.Remoting.Map</code> object: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">var&nbsp;map&nbsp;=&nbsp;new&nbsp;Seam.Remoting.Map();</span><br />
</pre><p> This Javascript implementation provides basic methods for working with Maps: <code class="literal">size()</code>,
            <code class="literal">isEmpty()</code>, <code class="literal">keySet()</code>, <code class="literal">values()</code>,
          <code class="literal">get(key)</code>, <code class="literal">put(key, value)</code>, <code class="literal">remove(key)</code> and
            <code class="literal">contains(key)</code>. Each of these methods are equivalent to their Java counterpart. Where the
          method returns a collection, such as <code class="literal">keySet()</code> and <code class="literal">values()</code>, a Javascript
          Array object will be returned that contains the key or value objects (respectively). </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22743"/>25.7. Debugging</h2></div></div></div><p> To aid in tracking down bugs, it is possible to enable a debug mode which will display the contents of all
      the packets send back and forth between the client and server in a popup window. To enable debug mode, either
      execute the <code class="literal">setDebug()</code> method in Javascript: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.setDebug(true);</span><br />
</pre><p> Or configure it via components.xml: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">remoting:remoting</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">debug</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> To turn off debugging, call <code class="literal">setDebug(false)</code>. If you want to write your own messages to the
      debug log, call <code class="literal">Seam.Remoting.log(message)</code>. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22765"/>25.8. Handling Exceptions</h2></div></div></div><p>
      When invoking a remote component method, it is possible to specify an exception handler which will process
      the response in the event of an exception during component invocation.  To specify an exception handler function, 
      include a reference to it after the callback parameter in your JavaScript:
    </p><pre class="programlisting">var callback = function(result) { alert(result); };
var exceptionHandler = function(ex) { alert("An exception occurred: " + ex.getMessage()); };
Seam.Component.getInstance("helloAction").sayHello(name, callback, exceptionHandler);</pre><p>
      If you do not have a callback handler defined, you must specify <code class="literal">null</code> in its place:
    </p><pre class="programlisting">var exceptionHandler = function(ex) { alert("An exception occurred: " + ex.getMessage()); };
Seam.Component.getInstance("helloAction").sayHello(name, null, exceptionHandler);</pre><p>
      The exception object that is passed to the exception handler exposes one method, <code class="literal">getMessage()</code>
      that returns the exception message which is produced by the exception thrown by the <code class="literal">@WebRemote</code>
      method.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22787"/>25.9. The Loading Message</h2></div></div></div><p> The default loading message that appears in the top right corner of the screen can be modified, its rendering
      customised or even turned off completely. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22792"/>25.9.1. Changing the message</h3></div></div></div><p> To change the message from the default "Please Wait..." to something different, set the value of
          <code class="literal">Seam.Remoting.loadingMessage</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.loadingMessage&nbsp;=&nbsp;&quot;Loading...&quot;;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22802"/>25.9.2. Hiding the loading message</h3></div></div></div><p> To completely suppress the display of the loading message, override the implementation of
          <code class="literal">displayLoadingMessage()</code> and <code class="literal">hideLoadingMessage()</code> with functions that
        instead do nothing: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">//&nbsp;don't&nbsp;display&nbsp;the&nbsp;loading&nbsp;indicator</span><br />
<span class="xml_plain">Seam.Remoting.displayLoadingMessage&nbsp;=&nbsp;function()&nbsp;{};</span><br />
<span class="xml_plain">Seam.Remoting.hideLoadingMessage&nbsp;=&nbsp;function()&nbsp;{};</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22815"/>25.9.3. A Custom Loading Indicator</h3></div></div></div><p> It is also possible to override the loading indicator to display an animated icon, or anything else that
        you want. To do this override the <code class="literal">displayLoadingMessage()</code> and
        <code class="literal">hideLoadingMessage()</code> messages with your own implementation: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;Seam.Remoting.displayLoadingMessage&nbsp;=&nbsp;function()&nbsp;{</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;code&nbsp;here&nbsp;to&nbsp;display&nbsp;the&nbsp;indicator</span><br />
<span class="xml_plain">&nbsp;&nbsp;};</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;Seam.Remoting.hideLoadingMessage&nbsp;=&nbsp;function()&nbsp;{</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;code&nbsp;here&nbsp;to&nbsp;hide&nbsp;the&nbsp;indicator</span><br />
<span class="xml_plain">&nbsp;&nbsp;};</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22828"/>25.10. Controlling what data is returned</h2></div></div></div><p> When a remote method is executed, the result is serialized into an XML response that is returned to the
      client. This response is then unmarshaled by the client into a Javascript object. For complex types (i.e.
      Javabeans) that include references to other objects, all of these referenced objects are also serialized as part
      of the response. These objects may reference other objects, which may reference other objects, and so forth. If
      left unchecked, this object "graph" could potentially be enormous, depending on what relationships exist between
      your objects. And as a side issue (besides the potential verbosity of the response), you might also wish to
      prevent sensitive information from being exposed to the client. </p><p> Seam Remoting provides a simple means to "constrain" the object graph, by specifying the
      <code class="literal">exclude</code> field of the remote method's <code class="literal">@WebRemote</code> annotation. This field
      accepts a String array containing one or more paths specified using dot notation. When invoking a remote method,
      the objects in the result's object graph that match these paths are excluded from the serialized result packet. </p><p> For all our examples, we'll use the following <code class="literal">Widget</code> class: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;widget&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;secret</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;child</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Widget</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;widgetMap</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Widget</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;widgetList</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;getters&nbsp;and&nbsp;setters&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;all&nbsp;fields</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22848"/>25.10.1. Constraining normal fields</h3></div></div></div><p> If your remote method returns an instance of <code class="literal">Widget</code>, but you don't want to expose the
          <code class="literal">secret</code> field because it contains sensitive information, you would constrain it like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span></pre><p> The value "secret" refers to the <code class="literal">secret</code> field of the returned object. Now, suppose that
        we don't care about exposing this particular field to the client. Instead, notice that the
        <code class="literal">Widget</code> value that is returned has a field <code class="literal">child</code> that is also a
          <code class="literal">Widget</code>. What if we want to hide the <code class="literal">child</code>'s <code class="literal">secret</code>
        value instead? We can do this by using dot notation to specify this field's path within the result's object
        graph: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;child.secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22883"/>25.10.2. Constraining Maps and Collections</h3></div></div></div><p> The other place that objects can exist within an object graph are within a <code class="literal">Map</code> or some
        kind of collection (<code class="literal">List</code>, <code class="literal">Set</code>, <code class="literal">Array</code>, etc). Collections
        are easy, and are treated like any other field. For example, if our <code class="literal">Widget</code> contained a list
        of other <code class="literal">Widget</code>s in its <code class="literal">widgetList</code> field, to constrain the
        <code class="literal">secret</code> field of the <code class="literal">Widget</code>s in this list the annotation would look like
        this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;widgetList.secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span></pre><p> To constrain a <code class="literal">Map</code>'s key or value, the notation is slightly different. Appending
          <code class="literal">[key]</code> after the <code class="literal">Map</code>'s field name will constrain the
        <code class="literal">Map</code>'s key object values, while <code class="literal">[value]</code> will constrain the value object
        values. The following example demonstrates how the values of the <code class="literal">widgetMap</code> field have their
          <code class="literal">secret</code> field constrained: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;widgetMap[value].secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22942"/>25.10.3. Constraining objects of a specific type</h3></div></div></div><p> There is one last notation that can be used to constrain the fields of a type of object no matter where in
        the result's object graph it appears. This notation uses either the name of the component (if the object is a
        Seam component) or the fully qualified class name (only if the object is not a Seam component) and is expressed
        using square brackets: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;[widget].secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22949"/>25.10.4. Combining Constraints</h3></div></div></div><p> Constraints can also be combined, to filter objects from multiple paths within the object graph: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;widgetList.secret&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">&quot;widgetMap[value].secret&quot;</span><!-- <br/> --><span class="java_separator">})</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;getWidget</span><span class="java_separator">();</span></pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22956"/>25.11. Transactional Requests</h2></div></div></div><p>
      By default there is no active transaction during a remoting request, so if you wish to perform database updates 
      during a remoting request, you need to annotate the <code class="literal">@WebRemote</code> method with 
      <code class="literal">@Transactional</code>, like so:
    </p><pre class="programlisting">  @WebRemote @Transactional(TransactionPropagationType.REQUIRED)
  public void updateOrder(Order order) {
    entityManager.merge(order);
  }</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e22969"/>25.12. JMS Messaging</h2></div></div></div><p> Seam Remoting provides experimental support for JMS Messaging. This section describes the JMS support that is
      currently implemented, but please note that this may change in the future. It is currently not recommended that
      this feature is used within a production environment. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22974"/>25.12.1. Configuration</h3></div></div></div><p> Before you can subscribe to a JMS topic, you must first configure a list of the topics that can be
        subscribed to by Seam Remoting. List the topics under
          <code class="literal">org.jboss.seam.remoting.messaging.subscriptionRegistry.allowedTopics</code> in
          <code class="literal">seam.properties</code>, <code class="literal">web.xml</code> or <code class="literal">components.xml</code>. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">remoting:remoting</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-interval</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e22993"/>25.12.2. Subscribing to a JMS Topic</h3></div></div></div><p> The following example demonstrates how to subscribe to a JMS Topic: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">function&nbsp;subscriptionCallback(message)</span><br />
<span class="xml_plain">{</span><br />
<span class="xml_plain">&nbsp;&nbsp;if&nbsp;(message&nbsp;instanceof&nbsp;Seam.Remoting.TextMessage)</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;Received&nbsp;message:&nbsp;&quot;&nbsp;+&nbsp;message.getText());</span><br />
<span class="xml_plain">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">Seam.Remoting.subscribe(&quot;topicName&quot;,&nbsp;subscriptionCallback);</span><br />
</pre><p> The <code class="literal">Seam.Remoting.subscribe()</code> method accepts two parameters, the first being the name of
        the JMS Topic to subscribe to, the second being the callback function to invoke when a message is received. </p><p> There are two types of messages supported, Text messages and Object messages. If you need to test for the
        type of message that is passed to your callback function you can use the <code class="literal">instanceof</code> operator
        to test whether the message is a <code class="literal">Seam.Remoting.TextMessage</code> or
          <code class="literal">Seam.Remoting.ObjectMessage</code>. A <code class="literal">TextMessage</code> contains the text value in
        its <code class="literal">text</code> field (or alternatively call <code class="literal">getText()</code> on it), while an
          <code class="literal">ObjectMessage</code> contains its object value in its <code class="literal">value</code> field (or call its
          <code class="literal">getValue()</code> method). </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23034"/>25.12.3. Unsubscribing from a Topic</h3></div></div></div><p> To unsubscribe from a topic, call <code class="literal">Seam.Remoting.unsubscribe()</code> and pass in the topic
        name: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">Seam.Remoting.unsubscribe(&quot;topicName&quot;);</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23044"/>25.12.4. Tuning the Polling Process</h3></div></div></div><p> There are two parameters which you can modify to control how polling occurs. The first one is
          <code class="literal">Seam.Remoting.pollInterval</code>, which controls how long to wait between subsequent polls for
        new messages. This parameter is expressed in seconds, and its default setting is 10. </p><p> The second parameter is <code class="literal">Seam.Remoting.pollTimeout</code>, and is also expressed as seconds. It
        controls how long a request to the server should wait for a new message before timing out and sending an empty
        response. Its default is 0 seconds, which means that when the server is polled, if there are no messages ready
        for delivery then an empty response will be immediately returned. </p><p> Caution should be used when setting a high <code class="literal">pollTimeout</code> value; each request that has to
        wait for a message means that a server thread is tied up until a message is received, or until the request times
        out. If many such requests are being served simultaneously, it could mean a large number of threads become tied
        up because of this reason. </p><p> It is recommended that you set these options via components.xml, however they can be overridden via
        Javascript if desired. The following example demonstrates how to configure the polling to occur much more
        aggressively. You should set these parameters to suitable values for your application: </p><p> Via components.xml: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">remoting:remoting</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">poll-interval</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> Via JavaScript: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">//&nbsp;Only&nbsp;wait&nbsp;1&nbsp;second&nbsp;between&nbsp;receiving&nbsp;a&nbsp;poll&nbsp;response&nbsp;and&nbsp;sending&nbsp;the&nbsp;next&nbsp;poll&nbsp;request.</span><br />
<span class="xml_plain">Seam.Remoting.pollInterval&nbsp;=&nbsp;1;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">//&nbsp;Wait&nbsp;up&nbsp;to&nbsp;5&nbsp;seconds&nbsp;on&nbsp;the&nbsp;server&nbsp;for&nbsp;new&nbsp;messages</span><br />
<span class="xml_plain">Seam.Remoting.pollTimeout&nbsp;=&nbsp;5;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="gwt"/>Chapter 26. Seam and the Google Web Toolkit</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e23082">26.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e23089">26.2. Preparing your component</a></span></dt><dt><span class="section"><a href="#d0e23123">26.3. Hooking up a GWT widget to the Seam component</a></span></dt><dt><span class="section"><a href="#d0e23158">26.4. GWT Ant Targets</a></span></dt><dt><span class="section"><a href="#d0e23188">26.5. GWT Maven plugin</a></span></dt></dl></div><p>
    For those that prefer to use the Google Web Toolkit (GWT) to develop dynamic AJAX applications, Seam provides
    an integration layer that allows GWT widgets to interact directly with Seam components.
  </p><p>
    To use GWT, we assume that you are already familiar with the GWT tools - more information can be found at
    <a class="ulink" href="http://code.google.com/webtoolkit/">http://code.google.com/webtoolkit/</a>.  This chapter 
    does not attempt to explain how GWT works or how to use it.
  </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23082"/>26.1. Configuration</h2></div></div></div><p>
      There is no special configuration required to use GWT in a Seam application, however the Seam resource servlet 
      must be installed.  See <a class="xref" href="#configuration" title="Chapter 30. Configuring Seam and packaging Seam applications">Chapter 30, <i>Configuring Seam and packaging Seam applications</i></a> for details.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23089"/>26.2. Preparing your component</h2></div></div></div><p>
      The first step in preparing a Seam component to be called via GWT, is to create both synchronous and
      asynchronous service interfaces for the methods you wish to call.  Both of these interfaces should extend the
      GWT interface <code class="literal">com.google.gwt.user.client.rpc.RemoteService</code>:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">interface</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MyService</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">extends</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">RemoteService</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;askIt</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;question</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>
      The asynchronous interface should be identical, except that it also contains an additional 
      <code class="literal">AsyncCallback</code> parameter for each of the methods it declares:    
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">interface</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MyServiceAsync</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">extends</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">RemoteService</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;askIt</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;question</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">AsyncCallback</span><span class="java_plain">&nbsp;callback</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
      The asynchronous interface, in this example <code class="literal">MyServiceAsync</code>, will be implemented by GWT and
      should never be implemented directly.
    </p><p>
      The next step, is to create a Seam component that implements the synchronous interface:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;org.jboss.seam.example.remoting.gwt.client.MyService&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ServiceImpl</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">MyService</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">WebRemote</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;askIt</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;question</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_operator">!</span><span class="java_plain">validate</span><span class="java_separator">(</span><span class="java_plain">question</span><span class="java_separator">))</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">IllegalStateException</span><span class="java_separator">(</span><span class="java_literal">&quot;Hey,&nbsp;this&nbsp;shouldn't&nbsp;happen,&nbsp;I&nbsp;checked&nbsp;on&nbsp;the&nbsp;client,&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;but&nbsp;its&nbsp;always&nbsp;good&nbsp;to&nbsp;double&nbsp;check.&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;42.&nbsp;Its&nbsp;the&nbsp;real&nbsp;question&nbsp;that&nbsp;you&nbsp;seek&nbsp;now.&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;validate</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;q</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ValidationUtility</span><span class="java_plain">&nbsp;util&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ValidationUtility</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;util</span><span class="java_separator">.</span><span class="java_plain">isValid</span><span class="java_separator">(</span><span class="java_plain">q</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>     
      The name of the seam component <span class="emphasis"><em>must</em></span> match the fully
      qualified name of the GWT client interface (as shown), or the seam
      resource servlet will not be able to find it when a client makes a GWT
      call. The methods that are to be made accessible via GWT also need to be
      annotated with the <code class="literal">@WebRemote</code> annotation.      
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23123"/>26.3. Hooking up a GWT widget to the Seam component</h2></div></div></div><p>
      The next step, is to write a method that returns the asynchronous interface to the component.  This method
      can be located inside the widget class, and will be used by the widget to obtain a reference to the
      asynchronous client stub:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MyServiceAsync</span><!-- <br/> --><span class="java_plain">&nbsp;getService</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;endpointURL&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;GWT</span><span class="java_separator">.</span><span class="java_plain">getModuleBaseURL</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;seam/resource/gwt&quot;</span><span class="java_separator">;</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">MyServiceAsync</span><span class="java_plain">&nbsp;svc&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">MyServiceAsync</span><span class="java_separator">)</span><span class="java_plain">&nbsp;GWT</span><span class="java_separator">.</span><span class="java_plain">create</span><span class="java_separator">(</span><span class="java_type">MyService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">((</span><span class="java_type">ServiceDefTarget</span><span class="java_separator">)</span><span class="java_plain">&nbsp;svc</span><span class="java_separator">).</span><span class="java_plain">setServiceEntryPoint</span><span class="java_separator">(</span><span class="java_plain">endpointURL</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;svc</span><span class="java_separator">;</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
       The final step is to write the widget code that invokes the method on the client stub.  The following example
       creates a simple user interface with a label, text input and a button:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AskQuestionWidget</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Composite</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">AbsolutePanel</span><span class="java_plain">&nbsp;panel&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">AbsolutePanel</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">AskQuestionWidget</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Label</span><span class="java_plain">&nbsp;lbl&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Label</span><span class="java_separator">(</span><span class="java_literal">&quot;OK,&nbsp;what&nbsp;do&nbsp;you&nbsp;want&nbsp;to&nbsp;know?&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">lbl</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">TextBox</span><span class="java_plain">&nbsp;box&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">TextBox</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box</span><span class="java_separator">.</span><span class="java_plain">setText</span><span class="java_separator">(</span><span class="java_literal">&quot;What&nbsp;is&nbsp;the&nbsp;meaning&nbsp;of&nbsp;life?&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">box</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Button</span><span class="java_plain">&nbsp;ok&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Button</span><span class="java_separator">(</span><span class="java_literal">&quot;Ask&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><span class="java_separator">.</span><span class="java_plain">addClickListener</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ClickListener</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onClick</span><span class="java_separator">(</span><span class="java_type">Widget</span><span class="java_plain">&nbsp;w</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ValidationUtility</span><span class="java_plain">&nbsp;valid&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ValidationUtility</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_operator">!</span><span class="java_plain">valid</span><span class="java_separator">.</span><span class="java_plain">isValid</span><span class="java_separator">(</span><span class="java_plain">box</span><span class="java_separator">.</span><span class="java_plain">getText</span><span class="java_separator">()))</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Window</span><span class="java_separator">.</span><span class="java_plain">alert</span><span class="java_separator">(</span><span class="java_literal">&quot;A&nbsp;question&nbsp;has&nbsp;to&nbsp;end&nbsp;with&nbsp;a&nbsp;'?'&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;askServer</span><span class="java_separator">(</span><span class="java_plain">box</span><span class="java_separator">.</span><span class="java_plain">getText</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">});</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">ok</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initWidget</span><span class="java_separator">(</span><span class="java_plain">panel</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;askServer</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;text</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getService</span><span class="java_separator">().</span><span class="java_plain">askIt</span><span class="java_separator">(</span><span class="java_plain">text</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">AsyncCallback</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onFailure</span><span class="java_separator">(</span><span class="java_type">Throwable</span><span class="java_plain">&nbsp;t</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Window</span><span class="java_separator">.</span><span class="java_plain">alert</span><span class="java_separator">(</span><span class="java_plain">t</span><span class="java_separator">.</span><span class="java_plain">getMessage</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onSuccess</span><span class="java_separator">(</span><span class="java_type">Object</span><span class="java_plain">&nbsp;data</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Window</span><span class="java_separator">.</span><span class="java_plain">alert</span><span class="java_separator">((</span><span class="java_type">String</span><span class="java_separator">)</span><span class="java_plain">&nbsp;data</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">});</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span></pre><p>
      When clicked, the button invokes the <code class="literal">askServer()</code> method passing the contents of the input text (in this
      example, validation is also performed to ensure that the input is a valid question).  The <code class="literal">askServer()</code>
      method acquires a reference to the asynchronous client stub (returned by the <code class="literal">getService()</code> method)
      and invokes the <code class="literal">askIt()</code> method.  The result (or error message if the call fails) is shown in an alert window.      
    </p><div class="mediaobject" align="center"><img src="images/gwt-helloworld.png" align="middle"/></div><p>
      The complete code for this example can be found in the Seam distribution in the <code class="literal">examples/remoting/gwt</code>
      directory.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23158"/>26.4. GWT Ant Targets</h2></div></div></div><p>
      For deployment of GWT apps, there is a compile-to-Javascript step (which compacts and obfuscates the code).  There is an
      ant utility which can be used instead of the command line or GUI utility that GWT provides.  To use this, you will need
      to have the ant task jar in your ant classpath, as well as GWT downloaded (which you will need for hosted mode anyway).
      </p><p>
      Then, in your ant file, place (near the top of your ant file):
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">taskdef</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">uri</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;antlib:de.samaflost.gwttasks&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;de/samaflost/gwttasks/antlib.xml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">classpath</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;./lib/gwttasks.jar&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">file</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;build.properties&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      Create a <code class="literal">build.properties</code> file, which has the contents:
    </p><pre class="programlisting">gwt.home=/gwt_home_dir</pre><p>
      This of course should point to the directory where GWT is installed.  Then to use it, create a target:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_comment">&lt;!--&nbsp;the&nbsp;following&nbsp;are&nbsp;are&nbsp;handy&nbsp;utilities&nbsp;for&nbsp;doing&nbsp;GWT&nbsp;development.</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;To&nbsp;use&nbsp;GWT,&nbsp;you&nbsp;will&nbsp;of&nbsp;course&nbsp;need&nbsp;to&nbsp;download&nbsp;GWT&nbsp;seperately&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">target</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;gwt-compile&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;in&nbsp;this&nbsp;case,&nbsp;we&nbsp;are&nbsp;&quot;re&nbsp;homing&quot;&nbsp;the&nbsp;gwt&nbsp;generated&nbsp;stuff,&nbsp;so&nbsp;in&nbsp;this&nbsp;case</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;can&nbsp;only&nbsp;have&nbsp;one&nbsp;GWT&nbsp;module&nbsp;-&nbsp;we&nbsp;are&nbsp;doing&nbsp;this&nbsp;deliberately&nbsp;to&nbsp;keep&nbsp;the&nbsp;URL&nbsp;short&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">delete</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fileset</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;view&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">delete</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">gwt:compile</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">outDir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;build/gwt&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">gwtHome</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${gwt.home}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">classBase</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;${gwt.module.name}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">sourceclasspath</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;src&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">copy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">todir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;view&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">fileset</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dir</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;build/gwt/${gwt.module.name}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">copy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">target</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
      This target when called will compile the GWT application, and copy it to the specified directory (which would be
      in the <code class="literal">webapp</code> part of your war - remember GWT generates HTML and Javascript artifacts).  You
      never edit the resulting code that <code class="literal">gwt-compile</code> generates - you always edit in the GWT source
      directory.
    </p><p>
      Remember that GWT comes with a hosted mode browser - you should be using that if you are developing with GWT.  If you
      aren't using that, and are just compiling it each time, you aren't getting the most out of the toolkit (in fact, if
      you can't or won't use the hosted mode browser, I would go far as to say you should NOT be using GWT at all - it's
      that valuable!).
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23188"/>26.5. GWT Maven plugin</h2></div></div></div><p>
      For a deployment of GWT apps, there is a set of maven GWT goals which does everything what GWT supports.  The
      maven-gwt-plugin usage is in more
      details at <a class="ulink" href="http://mojo.codehaus.org/gwt-maven-plugin/">GWT </a>.
    </p><p>
        Basic set up is for instance here:
    </p><pre class="programlisting">
     &lt;build&gt;
        &lt;plugins&gt;
            [...]
            &lt;plugin&gt;
                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
                &lt;artifactId&gt;gwt-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.2&lt;/version&gt; &lt;!-- version 1.2 allows us to specify gwt version by gwt-user dependency --&gt;
                &lt;configuration&gt;
                    &lt;generateDirectory&gt;${project.build.outoutDirectory}/${project.build.finalName}&lt;/generateDirectory&gt;
                    &lt;inplace&gt;false&lt;/inplace&gt;
                    &lt;logLevel&gt;TRACE&lt;/logLevel&gt;
                    &lt;extraJvmArgs&gt;-Xmx512m -DDEBUG&lt;/extraJvmArgs&gt;
                    &lt;soyc&gt;false&lt;/soyc&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;resources&lt;/goal&gt;
                            &lt;goal&gt;compile&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
            [...]
        &lt;/plugins&gt;
            [...]
    &lt;/build&gt;
    </pre><p>
        More can be seen here 
        <a class="ulink" href="http://mojo.codehaus.org/gwt-maven-plugin/user-guide/compile.html">http://mojo.codehaus.org/gwt-maven-plugin/user-guide/compile.html</a>
    </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="spring"/>Chapter 27. Spring Framework integration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e23250">27.1. Injecting Seam components into Spring beans</a></span></dt><dt><span class="section"><a href="#d0e23297">27.2. Injecting Spring beans into Seam components</a></span></dt><dt><span class="section"><a href="#d0e23336">27.3. Making a Spring bean into a Seam component</a></span></dt><dt><span class="section"><a href="#d0e23377">27.4. Seam-scoped Spring beans</a></span></dt><dt><span class="section"><a href="#spring-transactions">27.5. Using Spring PlatformTransactionManagement</a></span></dt><dt><span class="section"><a href="#spring-persistence">27.6. Using a Seam Managed Persistence Context in Spring</a></span></dt><dt><span class="section"><a href="#spring-hibernate">27.7. Using a Seam Managed Hibernate Session in Spring</a></span></dt><dt><span class="section"><a href="#d0e23553">27.8. Spring Application Context as a Seam Component</a></span></dt><dt><span class="section"><a href="#d0e23593">27.9. Using a Spring TaskExecutor for @Asynchronous</a></span></dt></dl></div><p>The Spring integration (part of the Seam IoC module) allows easy migration of Spring-based projects to Seam and allows Spring
        applications to take advantage of key Seam features like conversations and Seam's more sophisticated persistence
        context management.</p><p>Note! The Spring integration code is included in the jboss-seam-ioc library.  This dependency is required for
    all seam-spring integration techniques covered in this chapter.</p><p>Seam's support for Spring provides the ability to: </p><div class="itemizedlist"><ul><li><p>inject Seam component instances into Spring beans</p></li><li><p>inject Spring beans into Seam components</p></li><li><p>turn Spring beans into Seam components</p></li><li><p>allow Spring beans to live in any Seam context</p></li><li><p>start a spring WebApplicationContext with a Seam component</p></li><li><p>Support for Spring PlatformTransactionManagement</p></li><li><p>provides a Seam managed replacement for Spring's <code class="literal">OpenEntityManagerInViewFilter</code> and <code class="literal">OpenSessionInViewFilter</code></p></li><li><p>Support for Spring <code class="literal">TaskExecutors</code> to back <code class="literal">@Asynchronous</code> calls</p></li></ul></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23250"/>27.1. Injecting Seam components into Spring beans</h2></div></div></div><p> Injecting Seam component instances into Spring beans is accomplished using the
                <code class="literal">&lt;seam:instance/&gt;</code> namespace handler. To enable the Seam namespace
            handler, the Seam namespace must be added to the Spring beans definition file:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">beans</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.springframework.org/schema/beans&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:seam</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/spring-seam&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.springframework.org/schema/beans</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-2.0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/spring-seam</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/spring-seam-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Now any Seam component may be injected into any Spring bean: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;prototype&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someProperty&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:instance</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someComponent&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> An EL expression may be used instead of a component name: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;prototype&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someProperty&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:instance</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{someExpression}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Seam component instances may even be made available for injection into Spring beans by a Spring bean id. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:instance</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someComponent&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSeamComponentInstance&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;prototype&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someProperty&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSeamComponentInstance&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Now for the caveat!</p><p> Seam was designed from the ground up to support a stateful component model with multiple contexts. Spring
            was not. Unlike Seam bijection, Spring injection does not occur at method invocation time. Instead,
            injection happens only when the Spring bean is instantiated. So the instance available when the bean is
            instantiated will be the same instance that the bean uses for the entire life of the bean. For example, if a
            Seam <code class="literal">CONVERSATION</code>-scoped component instance is directly injected into a singleton Spring
            bean, that singleton will hold a reference to the same instance long after the conversation is over! We call
            this problem <span class="emphasis"><em>scope impedance</em></span>. Seam bijection ensures that scope impedance is maintained
            naturally as an invocation flows through the system. In Spring, we need to inject a proxy of the Seam
            component, and resolve the reference when the proxy is invoked.</p><p>The <code class="literal">&lt;seam:instance/&gt;</code> tag lets us automatically proxy the Seam component.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:instance</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamManagedEM&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someManagedEMComponent&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">proxy</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManager&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamManagedEM&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> This example shows one way to use a Seam-managed persistence context from a Spring bean. (For a more robust
            way to use Seam-managed persistence contexts as a replacement for the Spring
                <code class="literal">OpenEntityManagerInView</code> filter see section on
                <a class="link" href="#spring-persistence" title="27.6. Using a Seam Managed Persistence Context in Spring">Using a Seam Managed Persistence Context in Spring</a>)</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23297"/>27.2. Injecting Spring beans into Seam components</h2></div></div></div><p> It is even easier to inject Spring beans into Seam component instances. Actually, there are two possible
            approaches: </p><div class="itemizedlist"><ul><li><p> inject a Spring bean using an EL expression </p></li><li><p> make the Spring bean a Seam component </p></li></ul></div><p> We'll discuss the second option in the next section. The easiest approach is to access the Spring beans
            via EL. </p><p> The Spring <code class="literal">DelegatingVariableResolver</code> is an integration point Spring provides for
            integrating Spring with JSF. This <code class="literal">VariableResolver</code> makes all Spring beans available in EL
            by their bean id. You'll need to add the <code class="literal">DelegatingVariableResolver</code> to
                <code class="literal">faces-config.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">variable-resolver</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.jsf.DelegatingVariableResolver</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">variable-resolver</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Then you can inject Spring beans using <code class="literal">@In</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;#{bookingService}&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">BookingService</span><span class="java_plain">&nbsp;bookingService</span><span class="java_separator">;</span></pre><p>The use of Spring beans in EL is not limited to injection. Spring beans may be used anywhere that EL
            expressions are used in Seam: process and pageflow definitions, working memory assertions, etc... </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23336"/>27.3. Making a Spring bean into a Seam component</h2></div></div></div><p> The <code class="literal">&lt;seam:component/&gt;</code> namespace handler can be used to make any Spring
            bean a Seam component. Just place the <code class="literal">&lt;seam:component/&gt;</code> tag within the
            declaration of the bean that you wish to be a Seam component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;prototype&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:component</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> By default, <code class="literal">&lt;seam:component/&gt;</code> will create a <code class="literal">STATELESS</code>
            Seam component with class and name provided in the bean definition. Occasionally, such as when a
                <code class="literal">FactoryBean</code> is used, the class of the Spring bean may not be the class appearing in
            the bean definition. In such cases the <code class="literal">class</code> should be explicitly specified. A Seam
            component name may be explicitly specified in cases where there is potential for a naming conflict. </p><p> The <code class="literal">scope</code> attribute of <code class="literal">&lt;seam:component/&gt;</code> may be used
            if you wish the Spring bean to be managed in a particular Seam scope. The Spring bean must be scoped to
                <code class="literal">prototype</code> if the Seam scope specified is anything other than
            <code class="literal">STATELESS</code>. Pre-existing Spring beans usually have a fundamentally stateless character, so
            this attribute is not usually needed. </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23377"/>27.4. Seam-scoped Spring beans</h2></div></div></div><p> The Seam integration package also lets you use Seam's contexts as Spring 2.0 style custom scopes. This
            lets you declare any Spring bean in any of Seam's contexts. However, note once again that Spring's component
            model was never architected to support statefulness, so please use this feature with great care. In
            particular, clustering of session or conversation scoped Spring beans is deeply problematic, and care must
            be taken when injecting a bean or component from a wider scope into a bean of a narrower scope.</p><p> By specifying <code class="literal">&lt;seam:configure-scopes/&gt;</code> once in a Spring bean factory
            configuration, all of the Seam scopes will be available to Spring beans as custom scopes. To associate a
            Spring bean with a particular Seam scope, specify the Seam scope in the <code class="literal">scope</code> attribute
            of the bean definition. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_comment">&lt;!--&nbsp;Only&nbsp;needs&nbsp;to&nbsp;be&nbsp;specified&nbsp;once&nbsp;per&nbsp;bean&nbsp;factory--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:configure-scopes</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam.CONVERSATION&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> The prefix of the scope name may be changed by specifying the <code class="literal">prefix</code> attribute in the
                <code class="literal">configure-scopes</code> definition. (The default prefix is <code class="literal">seam.</code>) </p><p> By default an instance of a Spring Component registered in this way is not automatically created when
		        referenced using <code class="literal">@In</code>.  To have an instance auto-created you must either specify <code class="literal">@In(create=true)</code>
		        at the injection point to identify a specific bean to be auto created or you can use the <code class="literal">default-auto-create</code>
		        attribute of <code class="literal">configure-scopes</code> to make all spring beans who use a seam scope auto created.</p><p> Seam-scoped Spring beans defined this way can be injected into other Spring beans without the use of
                <code class="literal">&lt;seam:instance/&gt;</code>. However, care must be taken to ensure scope impedance
            is maintained. The normal approach used in Spring is to specify
            <code class="literal">&lt;aop:scoped-proxy/&gt;</code> in the bean definition. However, Seam-scoped Spring
            beans are <span class="emphasis"><em>not</em></span> compatible with <code class="literal">&lt;aop:scoped-proxy/&gt;</code>. So
            if you need to inject a Seam-scoped Spring bean into a singleton,
            <code class="literal">&lt;seam:instance/&gt;</code> must be used: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SomeSpringBeanClass&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seam.CONVERSATION&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSingleton&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSeamScopedSpringBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">seam:instance</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;someSpringBean&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">proxy</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="spring-transactions"/>27.5. Using Spring PlatformTransactionManagement</h2></div></div></div><p>Spring provides an extensible transaction management abstraction with support for many
        transaction APIs (JPA, Hibernate, JDO, and JTA)  Spring also provides tight integrations with many application
        server TransactionManagers such as Websphere and Weblogic.  Spring
        transaction management exposes support for many advanced features such as nested
        transactions and supports full Java EE transaction propagation rules like REQUIRES_NEW and NOT_SUPPORTED.  For more
        information see the spring documentation
        <a class="ulink" href="http://static.springframework.org/spring/docs/2.0.x/reference/transaction.html">here</a>.</p><p>To configure Seam to use Spring transactions enable the SpringTransaction component like so:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">spring:spring-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">platform-transaction-manager</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{transactionManager}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			The <code class="literal">spring:spring-transaction</code> component will utilize Springs transaction synchronization
			capabilities for synchronization callbacks.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="spring-persistence"/>27.6. Using a Seam Managed Persistence Context in Spring</h2></div></div></div><p>One of the most powerful features of Seam is its conversation scope and the ability to
        have an EntityManager open for the life of a conversation.  This eliminates many
        of the problems associated with the detachment and re-attachment of entities as well as mitigates occurrences
        of the dreaded <code class="literal">LazyInitializationException</code>.  Spring does not provide a way to manage
        an persistence context beyond the scope of a single web request
        (<code class="literal">OpenEntityManagerInViewFilter</code>).  So, it would be nice if Spring developers
        could have access to a Seam managed persistence context using all of the same tools Spring provides
        for integration with JPA(e.g. <code class="literal">PersistenceAnnotationBeanPostProcessor</code>,
        <code class="literal">JpaTemplate</code>, etc.)</p><p>Seam provides a way for Spring to access a Seam managed persistence context with
        Spring's provided JPA tools bringing conversation scoped persistence context capabilities to
        Spring applications.</p><p>This integration work provides the following functionality:</p><div class="itemizedlist"><ul><li><p>transparent access to a Seam managed persistence context using Spring provided tools</p></li><li><p>access to Seam conversation scoped persistence contexts in a non web request
                (e.g. asynchronous quartz job)</p></li><li><p>allows for using Seam managed persistence contexts with Spring managed transactions (will need to
                flush the persistence context manually)</p></li></ul></div><p>Spring's persistence context propagation model allows only one open EntityManager per EntityManagerFactory
        so the Seam integration works by wrapping an EntityManagerFactory around a Seam managed persistence
        context.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamEntityManagerFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.ioc.spring.SeamManagedEntityManagerFactoryBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceContextName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManager&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Where 'persistenceContextName' is the name of the Seam managed persistence context component.  By default
		this EntityManagerFactory has a unitName equal to  the Seam component name or in this case 'entityManager'.
		If you wish to provide a different unitName you can do so by providing a persistenceUnitName like so:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamEntityManagerFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.ioc.spring.SeamManagedEntityManagerFactoryBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceContextName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManager&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase:extended&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>This EntityManagerFactory can then be used in any Spring provided tools.  For example,
		 using Spring's <code class="literal">PersistenceAnnotationBeanPostProcessor</code> is the exact same as before.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>If you define your real EntityManagerFactory in Spring but wish to use a Seam managed persistence context
		you can tell the <code class="literal">PersistenceAnnotationBeanPostProcessor</code> which persistenctUnitName you wish
		to use by default by specifying the <code class="literal">defaultPersistenceUnitName</code> property.
		</p><p>The <code class="literal">applicationContext.xml</code> might look like:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManagerFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.springframework.orm.jpa.LocalEntityManagerFactoryBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamEntityManagerFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.ioc.spring.SeamManagedEntityManagerFactoryBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceContextName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManager&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase:extended&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;defaultPersistenceUnitName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase:extended&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>The <code class="literal">component.xml</code> might look like:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManager&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">auto-create</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entity-manager-factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entityManagerFactory}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p><code class="literal">JpaTemplate</code> and <code class="literal">JpaDaoSupport</code> are configured the same way for a
		Seam managed persistence context as they would be fore a Seam managed persistence context.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingService&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.example.spring.BookingService&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManagerFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamEntityManagerFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="spring-hibernate"/>27.7. Using a Seam Managed Hibernate Session in Spring</h2></div></div></div><p>The Seam Spring integration also provides support for complete access to a Seam managed Hibernate session
        using spring's tools.  This integration is very similar to the <a class="link" href="#spring-persistence" title="27.6. Using a Seam Managed Persistence Context in Spring">JPA integration</a>.</p><p>Like Spring's JPA integration spring's propagation model allows only one open EntityManager per
        EntityManagerFactory per transaction??? to be available to spring tools.  So, the Seam Session integration works
        by wrapping a proxy SessionFactory around a Seam managed Hibernate session
        context.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;seamSessionFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.ioc.spring.SeamManagedSessionFactoryBean&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sessionName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateSession&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Where 'sessionName' is the name of the <code class="literal">persistence:managed-hibernate-session</code> component.
		 This SessionFactory can then be used in any Spring provided tools.  The integration
		 also provides support for calls to <code class="literal">SessionFactory.getCurrentInstance()</code> as long as you call
		 getCurrentInstance() on the <code class="literal">SeamManagedSessionFactory</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23553"/>27.8. Spring Application Context as a Seam Component</h2></div></div></div><p> Although it is possible to use the Spring <code class="literal">ContextLoaderListener</code> to start your
        	application's Spring ApplicationContext there are a couple of limitations.</p><div class="itemizedlist"><ul><li><p> the Spring ApplicationContext must be started <span class="emphasis"><em>after</em></span> the
                	<code class="literal">SeamListener</code> </p></li><li><p> it can be tricky starting a Spring ApplicationContext for use in Seam unit and integration
                	tests </p></li></ul></div><p> To overcome these two limitations the Spring integration includes a Seam component that will start a
        	Spring ApplicationContext.  To use this Seam component place the
        	<code class="literal">&lt;spring:context-loader/&gt;</code> definition in the <code class="literal">components.xml</code>.
        	Specify your Spring context file location in the <code class="literal">config-locations</code> attribute.  If more
        	than one config file is needed you can place them in the nested
        	<code class="literal">&lt;spring:config-locations/&gt;</code> element following standard
        	<code class="literal">components.xml</code> multi value practices. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:spring</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/spring&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/spring</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/spring-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">spring:context-loader</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">config-locations</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/WEB-INF/applicationContext.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23593"/>27.9. Using a Spring TaskExecutor for @Asynchronous</h2></div></div></div><p>Spring provides an abstraction for executing code asynchronously called a <code class="literal">TaskExecutor</code>.
        The Spring Seam integration allows for the use of a Spring <code class="literal">TaskExecutor</code> for executing
        immediate <code class="literal">@Asynchronous</code> method calls.  To enable this functionality install the
        <code class="literal">SpringTaskExecutorDispatchor</code> and provide a spring bean defined taskExecutor like so:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">spring:task-executor-dispatcher</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">task-executor</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{springThreadPoolTaskExecutor}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Because a Spring <code class="literal">TaskExecutor</code> does not support scheduling of an asynchronous event
        a fallback Seam <code class="literal">Dispatcher</code> can be provided to handle scheduled asynchronous event like so:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Install&nbsp;a&nbsp;ThreadPoolDispatcher&nbsp;to&nbsp;handle&nbsp;scheduled&nbsp;asynchronous&nbsp;event&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:thread-pool-dispatcher</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;threadPoolDispatcher&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--&nbsp;Install&nbsp;the&nbsp;SpringDispatcher&nbsp;as&nbsp;default&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">spring:task-executor-dispatcher</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">task-executor</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{springThreadPoolTaskExecutor}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">schedule-dispatcher</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{threadPoolDispatcher}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="guice"/>Chapter 28. Guice integration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e23632">28.1. Creating a hybrid Seam-Guice component</a></span></dt><dt><span class="section"><a href="#d0e23654">28.2. Configuring an injector</a></span></dt><dt><span class="section"><a href="#d0e23680">28.3. Using multiple injectors</a></span></dt></dl></div><p>
      Google Guice is a library that provides lightweight dependency injection through type-safe
      resolution. The Guice integration (part of the Seam IoC module) allows use of Guice injection
      for all Seam components annotated with the <code class="literal">@Guice</code> annotation. In addition
      to the regular bijection that Seam performs (which becomes optional), Seam also delegates
      to known Guice injectors to satisfy the dependencies of the component. Guice may be useful to
      tie non-Seam parts of large or legacy applications together with Seam. 
   </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>
      The Guice integration is bundled in the jboss-seam-ioc library. This dependency is required
      for all integration techniques covered in this chapter. You will also need the Guice JAR file
      on the classpath.
   </div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23632"/>28.1. Creating a hybrid Seam-Guice component</h2></div></div></div><p>
         The goal is to create a hybrid Seam-Guice component. The rule for how to do this is very
         simple. If you want to use Guice injection in your Seam component, annotate it with the
         <code class="literal">@Guice</code> annotation (after importing the type
         <code class="literal">org.jboss.seam.ioc.guice.Guice</code>).
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;myGuicyComponent&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Guice</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyGuicyComponent</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Inject</span><span class="java_plain">&nbsp;</span><span class="java_type">MyObject</span><span class="java_plain">&nbsp;myObject</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Inject</span><span class="java_plain">&nbsp;@</span><span class="java_type">Special</span><span class="java_plain">&nbsp;</span><span class="java_type">MyObject</span><span class="java_plain">&nbsp;mySpecialObject</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          This Guice injection will happen on every method call, just like with bijection. Guice
          injects based on type and binding. To satisfy the dependencies in the previous example,
          you might have bound the following implementations in a Guice module, where
          <code class="literal">@Special</code> is an annotation you define in your application.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MyGuicyModule</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">implements</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Module</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;configure</span><span class="java_separator">(</span><span class="java_type">Binder</span><span class="java_plain">&nbsp;binder</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binder</span><span class="java_separator">.</span><span class="java_plain">bind</span><span class="java_separator">(</span><span class="java_type">MyObject</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">toInstance</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">MyObject</span><span class="java_separator">(</span><span class="java_literal">&quot;regular&quot;</span><span class="java_separator">));</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binder</span><span class="java_separator">.</span><span class="java_plain">bind</span><span class="java_separator">(</span><span class="java_type">MyObject</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">).</span><span class="java_plain">annotatedWith</span><span class="java_separator">(</span><span class="java_type">Special</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">toInstance</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">MyObject</span><span class="java_separator">(</span><span class="java_literal">&quot;special&quot;</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
          Great, but which Guice injector will be used to inject the dependencies?  Well, you need
          to perform some setup first.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23654"/>28.2. Configuring an injector</h2></div></div></div><p>
         You tell Seam which Guice injector to use by hooking it into the injection property
         of the Guice initialization component in the Seam component descriptor (components.xml):
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:guice</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/guice&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/guice</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/guice-2.3.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://jboss.org/schema/seam/components-2.3.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">guice:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">injector</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{myGuiceInjector}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         <code class="literal">myGuiceInjector</code> must resolve to a Seam component that implements the
         Guice <code class="literal">Injector</code> interface.
      </p><p>
         Having to create an injector is boiler-plate code, though. What you really want to be able
         to do is simply hook up Seam to your Guice modules. Fortunately, there is a built-in Seam
         component that implements the <code class="literal">Injector</code> interface to do exactly that. You
         can configure it in the Seam component descriptor with this additional stanza.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">guice:injector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;myGuiceInjector&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">guice:modules</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.example.guice.GuiceModule1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.example.guice.GuiceModule2</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">guice:modules</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">guice:injector</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         Of course you can also use an injector that is already used in other, possibly non-Seam
         part of you application. That's one of the main motivations for creating this integration.
         Since the injector is defined with EL expression, you can obtain it in whatever way you
         like. For instance, you may use the Seam factory component pattern to provide injector.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;myGuiceInjectorFactory&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">InjectorFactory</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Factory</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;myGuiceInjector&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;APPLICATION</span><span class="java_separator">,</span><span class="java_plain">&nbsp;create&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Injector</span><span class="java_plain">&nbsp;getInjector</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Your</span><span class="java_plain">&nbsp;code&nbsp;that&nbsp;returns&nbsp;injector&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23680"/>28.3. Using multiple injectors</h2></div></div></div><p>
         By default, an injector configured in the Seam component descriptor is used. If you really
         need to use multiple injectors (AFAIK, you should use multiple modules instead), you can
         specify different injector for every Seam component in the <code class="literal">@Guice</code>
         annotation.
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;myGuicyComponent&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Guice</span><span class="java_separator">(</span><span class="java_literal">&quot;myGuiceInjector&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyGuicyComponent</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Inject</span><span class="java_plain">&nbsp;</span><span class="java_type">MyObject</span><span class="java_plain">&nbsp;myObject</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div><p>
      That's all there is to it! Check out the guice example in the Seam distribution to see the
      Seam Guice integration in action!
   </p></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="search"/>Chapter 29. Hibernate Search</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e23695">29.1. Introduction</a></span></dt><dt><span class="section"><a href="#d0e23707">29.2. Configuration</a></span></dt><dt><span class="section"><a href="#d0e23755">29.3. Usage</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23695"/>29.1. Introduction</h2></div></div></div><p>Full text search engines like Apache Lucene™ are a very powerful
	technology that bring full text and efficient queries to applications.
	Hibernate Search, which uses Apache Lucene under the covers, indexes your
	domain model with the addition of a few annotations, takes care of the
	database / index synchronization and returns regular managed objects that
	are matched by full text queries. Keep in mind, thought, that there are
	mismatches that arise when dealing with an object domain model over a text
	index (keeping the index up to date, mismatch between the index structure
	and the domain model, and querying mismatch). But the benefits of speed
	and efficiency far outweigh these limitations.</p><p>Hibernate Search has been designed to integrate nicely and as
    naturally as possible with JPA and Hibernate. As a natural extension,
    JBoss Seam provides an Hibernate Search integration.</p><p>Please refer to the <a class="ulink" href="">Hibernate
	Search documentation</a> for information specific to the Hibernate
	Search project.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23707"/>29.2. Configuration</h2></div></div></div><p>Hibernate Search is configured either in the
    <code class="filename">META-INF/persistence.xml</code> or
    <code class="filename">hibernate.cfg.xml</code> file.</p><p>Hibernate Search configuration has sensible defaults for most
	configuration parameters. Here is a minimal persistence unit configuration
	to get started.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sample&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jta-data-source</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:jboss/datasources/ExampleDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jta-data-source</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[...]</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;use&nbsp;a&nbsp;file&nbsp;system&nbsp;based&nbsp;index&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.search.default.directory_provider&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;filesystem&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;directory&nbsp;where&nbsp;the&nbsp;indexes&nbsp;will&nbsp;be&nbsp;stored&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.search.default.indexBase&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/Users/prod/apps/dvdstore/dvdindexes&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>In addition to the configuration file, the following jars have to be
    deployed:</p><div class="itemizedlist"><ul><li><p>hibernate-search.jar</p></li><li><p>hibernate-search-orm.jar</p></li><li><p>hibernate-search-engine.jar</p></li><li><p>lucene-core.jar</p></li></ul></div><p>Maven coordinates for using Hibernate Search:
    </p><pre class="programlisting">
    &lt;dependency&gt;
       &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
       &lt;artifactId&gt;hibernate-search&lt;/artifactId&gt;
       &lt;version&gt;4.1.1.Final&lt;/version&gt;
    &lt;/dependency&gt;</pre><p>
    </p><p>Some Hibernate Search extensions require additional dependencies,
      a commonly used is <code class="filename">hibernate-search-analyzers.jar</code>.
      For details, see the <a class="ulink" href="http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html_single">
      Hibernate Search documentation</a> for details.
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>If you deploy those in a EAR, don't forget to update
      <code class="filename">application.xml</code></p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23755"/>29.3. Usage</h2></div></div></div><p>Hibernate Search uses annotations to map entities to a Lucene index,
    check the <a class="ulink" href="http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html_single">reference
    documentation</a> for more informations.</p><p>Hibernate Search is fully integrated with the API and semantic of
    JPA / Hibernate. Switching from a HQL or Criteria based query requires
    just a few lines of code. The main API the application interacts with is
    the <code class="classname">FullTextSession</code> API (subclass of Hibernate's
    <code class="classname">Session</code>).</p><p>When Hibernate Search is present, JBoss Seam injects a
    <code class="classname">FullTextSession</code>.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;search&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSearchAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSearch</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSession</span><span class="java_plain">&nbsp;session</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;search</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">apache</span><span class="java_separator">.</span><span class="java_plain">lucene</span><span class="java_separator">.</span><span class="java_plain">search</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;luceneQuery&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getLuceneQuery</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;query&nbsp;session</span><span class="java_separator">.</span><span class="java_plain">createFullTextQuery</span><span class="java_separator">(</span><span class="java_plain">luceneQuery</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Product</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchResults&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;query</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setMaxResults</span><span class="java_separator">(</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setFirstResult</span><span class="java_separator">(</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">*</span><span class="java_plain">&nbsp;currentPage</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">list</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br/><span class="java_separator">}</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p><code class="classname">FullTextSession</code> extends
      <code class="classname">org.hibernate.Session</code> so that it can be used as a
      regular Hibernate Session</p></div><p>If the Java Persistence API is used, a smoother integration is
    proposed.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;search&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSearchAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSearch</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextEntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;search</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">apache</span><span class="java_separator">.</span><span class="java_plain">lucene</span><span class="java_separator">.</span><span class="java_plain">search</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;luceneQuery&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getLuceneQuery</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">persistence</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;query&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">createFullTextQuery</span><span class="java_separator">(</span><span class="java_plain">luceneQuery</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Product</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchResults&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;query</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setMaxResults</span><span class="java_separator">(</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setFirstResult</span><span class="java_separator">(</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">*</span><span class="java_plain">&nbsp;currentPage</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>When Hibernate Search is present, a
    <code class="classname">FulltextEntityManager</code> is injected.
    <code class="classname">FullTextEntityManager</code> extends
    <code class="classname">EntityManager</code> with search specific methods, the
    same way <code class="classname">FullTextSession</code> extends
    <code class="classname">Session</code>.</p><p>When an EJB 3.0 Session or Message Driven Bean injection is used (i.e.
    via the @PersistenceContext annotation), it is not possible to replace the
    <code class="classname">EntityManager</code> interface by the
    <code class="classname">FullTextEntityManager</code> interface in the declaration
    statement. However, the implementation injected will be a
    <code class="classname">FullTextEntityManager</code> implementation: downcasting
    is then possible.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateful</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;search&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSearchAction</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">FullTextSearch</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PersistenceContext</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;search</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;searchString</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">apache</span><span class="java_separator">.</span><span class="java_plain">lucene</span><span class="java_separator">.</span><span class="java_plain">search</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;luceneQuery&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getLuceneQuery</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FullTextEntityManager</span><span class="java_plain">&nbsp;ftEm&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">FullTextEntityManager</span><span class="java_separator">)</span><span class="java_plain">&nbsp;em</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">persistence</span><span class="java_separator">.</span><span class="java_type">Query</span><span class="java_plain">&nbsp;query&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;ftEm</span><span class="java_separator">.</span><span class="java_plain">createFullTextQuery</span><span class="java_separator">(</span><span class="java_plain">luceneQuery</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Product</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchResults&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;query</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setMaxResults</span><span class="java_separator">(</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setFirstResult</span><span class="java_separator">(</span><span class="java_plain">pageSize&nbsp;</span><span class="java_operator">*</span><span class="java_plain">&nbsp;currentPage</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br/><span class="java_separator">}</span></pre><p/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="caution"><h2>Caution</h2><p>For people accustomed to Hibernate Search out of Seam, note that
      using <code class="methodname">Search.getFullTextSession</code> is not
      necessary.</p></div><p>Check the DVDStore or the blog examples of the JBoss Seam
    distribution for a concrete use of Hibernate Search.</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="configuration"/>Chapter 30. Configuring Seam and packaging Seam applications</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e23834">30.1. Basic Seam configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e23839">30.1.1. Integrating Seam with JSF and your servlet container</a></span></dt><dt><span class="section"><a href="#d0e23889">30.1.2. Seam Resource Servlet</a></span></dt><dt><span class="section"><a href="#d0e23899">30.1.3. Seam servlet filters</a></span></dt><dt><span class="section"><a href="#config.integration.ejb.container">30.1.4. Integrating Seam with your EJB container</a></span></dt><dt><span class="section"><a href="#d0e24358">30.1.5. Don't forget!</a></span></dt></dl></dd><dt><span class="section"><a href="#alt-jpa-providers">30.2. Using Alternate JPA Providers</a></span></dt><dt><span class="section"><a href="#d0e24436">30.3. Configuring Seam in Java EE 6</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24446">30.3.1. Packaging</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e24502">30.4. Configuring Seam without EJB</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24525">30.4.1. Boostrapping Hibernate in Seam</a></span></dt><dt><span class="section"><a href="#d0e24548">30.4.2. Boostrapping JPA in Seam</a></span></dt><dt><span class="section"><a href="#d0e24571">30.4.3. Packaging</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e24580">30.5. Configuring Seam in Java SE</a></span></dt><dt><span class="section"><a href="#d0e24596">30.6. Configuring jBPM in Seam</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e24618">30.6.1. Packaging</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e24625">30.7. Deployment in JBoss AS 7</a></span></dt><dt><span class="section"><a href="#d0e24677">30.8. Configuring SFSB and Session Timeouts in JBoss AS 7</a></span></dt><dt><span class="section"><a href="#d0e24710">30.9. Running Seam in a Portlet</a></span></dt><dt><span class="section"><a href="#d0e24718">30.10. Deploying custom resources</a></span></dt></dl></div><p> Configuration is a very boring topic and an extremely tedious pastime. Unfortunately, several lines of XML
        are required to integrate Seam into your JSF implementation and servlet container. There's no need to be too put
        off by the following sections; you'll never need to type any of this stuff yourself, since you can just use 
        seam-gen to start your application or you can copy and paste from the example applications! </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e23834"/>30.1. Basic Seam configuration</h2></div></div></div><p> First, let's look at the basic configuration that is needed whenever we use Seam with JSF. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23839"/>30.1.1. Integrating Seam with JSF and your servlet container</h3></div></div></div><p> Of course, you need a faces servlet! </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Faces&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">javax.faces.webapp.FacesServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">load-on-startup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">load-on-startup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Faces&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> (You can adjust the URL pattern to suit your taste.) </p><p> In addition, Seam requires the following entry in your <code class="literal">web.xml</code> file: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> This listener is responsible for bootstrapping Seam, and for destroying session and application
                contexts. </p><p> Some JSF implementations have a broken implementation of server-side state saving that interferes
                with Seam's conversation propagation. If you have problems with conversation propagation during form
                submissions, try switching to client-side state saving. You'll need this in <code class="literal">web.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">javax.faces.STATE_SAVING_METHOD</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">client</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>Setting of <code class="literal">javax.faces.STATE_SAVING_METHOD</code> to <code class="literal">client</code>
                can lead to security issues and it should be set environment entry <code class="literal">com.sun.faces.ClientStateSavingPassword</code>
                in <code class="filename">web.xml</code> like:
                </p><pre class="programlisting">
                &lt;env-entry&gt;
                    &lt;env-entry-name&gt;com.sun.faces.ClientStateSavingPassword&lt;/env-entry-name&gt;
                    &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
                    &lt;env-entry-value&gt;INSERT_YOUR_PASSWORD&lt;/env-entry-value&gt;
                &lt;/env-entry&gt;</pre><p>
                </p></div><p>
                There is a minor gray area in the JSF specification regarding the mutability of view state values. Since
                Seam uses the JSF view state to back its PAGE scope this can become an issue in some cases. If you're
                using server side state saving with the JSF-RI and you want a PAGE scoped bean to keep its exact value
                for a given view of a page you will need to specify the following context-param. Otherwise if a user
                uses the "back" button a PAGE scoped component will have the latest value if it has changed not the
                value of the "back" page. (see
                <a class="ulink" href="https://javaserverfaces-spec-public.dev.java.net/issues/show_bug.cgi?id=295">
                    Spec Issue
                </a>
                ). This setting is not enabled by default because of the performance hit of serializing the JSF view
                with every request.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.sun.faces.serializeServerState</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23889"/>30.1.2. Seam Resource Servlet</h3></div></div></div><p> The Seam Resource Servlet provides resources used by Seam Remoting, captchas (see the security
                chapter) and some JSF UI controls. Configuring the Seam Resource Servlet requires the following entry in
                    <code class="literal">web.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamResourceServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Resource&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/seam/resource/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e23899"/>30.1.3. Seam servlet filters</h3></div></div></div><p> Seam doesn't need any servlet filters for basic operation. However, there are several features which
                depend upon the use of filters. To make things easier, Seam lets you add and configure
                servlet filters just like you would configure other built-in Seam components. To take advantage of this
                feature, we must first install a master filter in <code class="literal">web.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>The Seam master filter <span class="emphasis"><em>must</em></span> be the first filter specified in
                <code class="literal">web.xml</code>. This ensures it is run first. </p><p>
               The Seam filters share a number of common attributes, you can set these in 
               <code class="literal">components.xml</code> in addition to any parameters discussed
               below:
            </p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">url-pattern</code> — Used to specify which requests are filtered, the
                         default is all requests. <code class="literal">url-pattern</code> is a Tomcat style pattern
                         which allows a wildcard suffix.
                  </p></li><li><p>
                     <code class="literal">regex-url-pattern</code> — Used to specify which requests are filtered, the
                     default is all requests. <code class="literal">regex-url-pattern</code> is a true regular expression
                     match for request path.
                  </p></li><li><p>
                     <code class="literal">disabled</code> — Used to disable a built in filter.
                  </p></li></ul></div><p>
              Note that the patterns are matched against the URI path of the request (see
              <code class="literal">HttpServletRequest.getURIPath()</code>) and that the name of the servlet context is
              removed before matching.
           </p><p> Adding the master filter enables the following built-in filters. </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e23954"/>30.1.3.1. Exception handling</h4></div></div></div><p> This filter provides the exception mapping functionality in <code class="literal">pages.xml</code> (almost
                    all applications will need this). It also takes care of rolling back uncommitted transactions when
                    uncaught exceptions occur. (According to the Java EE specification, the web container should do this
                    automatically, but we've found that this behavior cannot be relied upon in all application servers.
                    And it is certainly not required of plain servlet engines like Tomcat.) </p><p> By default, the exception handling filter will process all requests, however this behavior may be
                    adjusted by adding a <code class="literal">&lt;web:exception-filter&gt;</code> entry to
                        <code class="literal">components.xml</code>, as shown in this example: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:web</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/web&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:exception-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e23972"/>30.1.3.2. Conversation propagation with redirects</h4></div></div></div><p> This filter allows Seam to propagate the conversation context across browser redirects. It
                    intercepts any browser redirects and adds a request parameter that specifies the Seam conversation
                    identifier. </p><p> The redirect filter will process all requests by default, but this behavior can also be adjusted
                    in <code class="literal">components.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:redirect-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="configuration.filters.rewrite"/>30.1.3.3. URL rewriting</h4></div></div></div><p> This filter allows Seam to apply URL rewriting for views based on configuration in the 
                    <code class="literal">pages.xml</code> file.  This filter is not activate by default, but can be 
                    activated
                    by adding the configuration to <code class="literal">components.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:rewrite-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-mapping</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>The <code class="literal">view-mapping</code> parameter must match the servlet mapping defined for the Faces Servlet
                    in the <code class="literal">web.xml</code> file.  If ommitted, the rewrite filter assumes 
                    the pattern <code class="literal">*.seam</code>.
                </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24008"/>30.1.3.4. Multipart form submissions</h4></div></div></div><p> This feature is necessary when using the Seam file upload JSF control. It detects multipart form
                    requests and processes them according to the multipart/form-data specification (RFC-2388). To
                    override the default settings, add the following entry to <code class="literal">components.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:multipart-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">create-temp-files</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">max-request-size</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1000000&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><div class="itemizedlist"><ul><li><p>
                            <code class="literal">create-temp-files</code> — If set to <code class="literal">true</code>, uploaded
                            files are written to a temporary file (instead of held in memory). This may be an important
                            consideration if large file uploads are expected. The default setting is
                            <code class="literal">false</code>. </p></li><li><p>
                            <code class="literal">max-request-size</code> — If the size of a file upload request
                            (determined by reading the <code class="literal">Content-Length</code> header in the request) exceeds
                            this value, the request will be aborted. The default setting is 0 (no size limit). </p></li></ul></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24040"/>30.1.3.5. Character encoding</h4></div></div></div><p> Sets the character encoding of submitted form data. </p><p> This filter is not installed by default and requires an entry in
                    <code class="literal">components.xml</code> to enable it: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:character-encoding-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">encoding</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;UTF-16&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">override-client</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><div class="itemizedlist"><ul><li><p>
                            <code class="literal">encoding</code> — The encoding to use. </p></li><li><p>
                            <code class="literal">override-client</code> — If this is set to <code class="literal">true</code>,
                            the request encoding will be set to whatever is specified by <code class="literal">encoding</code> no
                            matter whether the request already specifies an encoding or not. If set to
                            <code class="literal">false</code>, the request encoding will only be set if the request doesn't
                            already specify an encoding. The default setting is <code class="literal">false</code>. </p></li></ul></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24077"/>30.1.3.6. RichFaces</h4></div></div></div><p> 
                  If RichFaces is used in your project, Seam will install the
                  RichFaces Ajax filter for you, making sure to install it
                  before all other built-in filters. You don't need to install
                  the RichFaces Ajax filter in <code class="literal">web.xml</code>
                  yourself.
                </p><p>
                  The RichFaces Ajax filter is only installed if the RichFaces
                  jars are present in your project.
                </p><p> To override the default settings, add the following entry to <code class="literal">components.xml</code>.
                    The options are the same as those specified in the RichFaces Developer Guide: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:ajax4jsf-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">force-parser</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">enable-cache</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">log4j-init-file</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;custom-log4j.xml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><div class="itemizedlist"><ul><li><p>
                            <code class="literal">force-parser</code> — forces all JSF pages to be validated by
                            Richfaces's XML syntax checker. If <code class="literal">false</code>, only AJAX responses are
                            validated and converted to well-formed XML. Setting <code class="literal">force-parser</code> to
                                <code class="literal">false</code> improves performance, but can provide visual artifacts on AJAX
                            updates. </p></li><li><p>
                            <code class="literal">enable-cache</code> — enables caching of framework-generated resources
                            (e.g. javascript, CSS, images, etc). When developing custom javascript or CSS, setting to
                            true prevents the browser from caching the resource. </p></li><li><p>
                            <code class="literal">log4j-init-file</code> — is used to setup per-application logging. A
                            path, relative to web application context, to the log4j.xml configuration file should be
                            provided. </p></li></ul></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24122"/>30.1.3.7. Identity Logging</h4></div></div></div><p> 
                    This filter adds the authenticated user name to the log4j mapped diagnostic context so that it 
                    can be included in formatted log output if desired, by adding %X{username} to the pattern.                       
                </p><p> By default, the logging filter will process all requests, however this behavior may be
                     adjusted by adding a <code class="literal">&lt;web:logging-filter&gt;</code> entry to
                     <code class="literal">components.xml</code>, as shown in this example: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">components</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/components&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:web</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/web&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:logging-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">components</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24137"/>30.1.3.8. Context management for custom servlets</h4></div></div></div><p> Requests sent direct to some servlet other than the JSF servlet are not processed through the JSF
                    lifecycle, so Seam provides a servlet filter that can be applied to any other servlet that needs
                    access to Seam components. </p><p> This filter allows custom servlets to interact with the Seam contexts. It sets up the Seam
                    contexts at the beginning of each request, and tears them down at the end of the request. You should
                    make sure that this filter is <span class="emphasis"><em>never</em></span> applied to the JSF
                    <code class="literal">FacesServlet</code>. Seam uses the phase listener for context management in a JSF
                    request. </p><p> This filter is not installed by default and requires an entry in
                    <code class="literal">components.xml</code> to enable it: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:context-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/media/*&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> The context filter expects to find the conversation id of any conversation context in a request
                    parameter named <code class="literal">conversationId</code>. You are responsible for ensuring that it gets
                    sent in the request. </p><p> You are also responsible for ensuring propagation of any new conversation id back to the client.
                    Seam exposes the conversation id as a property of the built in component
                    <code class="literal">conversation</code>. </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24167"/>30.1.3.9. Enabling HTTP cache-control headers</h4></div></div></div><p>
                    Seam does <span class="emphasis"><em>not</em></span> automatically add <code class="literal">cache-control</code> HTTP headers to
                    any resources served by the Seam resource servlet, or directly from your view directory by the servlet
                    container. This means that your images, Javascript and CSS files, and resource representations from
                    Seam resource servlet such as Seam Remoting Javascript interfaces are usually not cached by the browser.
                    This is convenient in development but should be changed in production when optimizing the application.
                </p><p>
                    You can configure a Seam filter to enable automatic addition of <code class="literal">cache-control</code> headers
                    depending on the requested URI in <code class="literal">components.xml</code>:
                </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:cache-control-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;commonTypesCacheControlFilter&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">regex-url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;.*(\.gif|\.png|\.jpg|\.jpeg|\.css|\.js)&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;max-age=86400&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;1&nbsp;day&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:cache-control-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;anotherCacheControlFilter&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/my/cachable/resources/*&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;max-age=432000&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;5&nbsp;days&nbsp;--&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                    You do not have to name the filters unless you have more than one filter enabled.
                </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24190"/>30.1.3.10. Adding custom filters</h4></div></div></div><p> Seam can install your filters for you, allowing you to specify <span class="emphasis"><em>where</em></span> in the
                    chain your filter is placed (the servlet specification doesn't provide a well defined order if you
                    specify your filters in a <code class="literal">web.xml</code>). Just add the <code class="literal">@Filter</code>
                    annotation to your Seam component (which must implement <code class="literal">javax.servlet.Filter</code>): </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Startup</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">APPLICATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;org.jboss.seam.web.multipartFilter&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">BypassInterceptors</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Filter</span><span class="java_separator">(</span><span class="java_plain">within</span><span class="java_operator">=</span><span class="java_literal">&quot;org.jboss.seam.web.ajax4jsfFilter&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MultipartFilter</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">AbstractFilter</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></pre><p> Adding the <code class="literal">@Startup</code> annotation means that the component is available during
                    Seam startup; bijection isn't available here (<code class="literal">@BypassInterceptors</code>); and the filter
                    should be further down the chain than the RichFaces filter
                        (<code class="literal">@Filter(within="org.jboss.seam.web.ajax4jsfFilter")</code>). </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="config.integration.ejb.container"/>30.1.4. Integrating Seam with your EJB container</h3></div></div></div><p> In a Seam application, EJB components have a certain duality, as they are managed by both the EJB
                container and Seam. Actually, it's more that Seam resolves EJB component references, manages the
                lifetime of stateful session bean components, and also participates in each method call via
                interceptors. Let's start with the configuration of the Seam interceptor chain.</p><p> We need to apply the <code class="literal">SeamInterceptor</code> to our Seam EJB components. This interceptor
                delegates to a set of built-in server-side interceptors that handle such concerns as bijection,
                conversation demarcation, and business process signals. The simplest way to do this across an entire
                application is to add the following interceptor configuration in <code class="literal">ejb-jar.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptors</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.ejb.SeamInterceptor</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptors</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">assembly-descriptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-binding</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.ejb.SeamInterceptor</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">interceptor-binding</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">assembly-descriptor</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Seam needs to know where to go to find session beans in JNDI. One way to do this is specify the
                    <code class="literal">@JndiName</code> annotation on every session bean Seam component. However, this is quite
                tedious. A better approach is to specify a pattern that Seam can use to calculate the JNDI name from the
                EJB name. Fortunately, new portable JNDI Syntax was introduced in Java EE 6. There are three JNDI namespaces for
                portable JNDI lookups - <code class="literal">java:global</code>, <code class="literal">java:module</code> and <code class="literal">java:app</code>.
                More in <a class="ulink" href="http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html#girgn">Java EE 6 tutorial</a>
                We usually specify this option in <code class="literal">components.xml</code>. </p><p> For JBoss AS 7, the following pattern is correct: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">jndi-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:app/</span><span class="xml_tag_symbols">&lt;</span><span class="xml_attribute_name">ejb-module-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/#{ejbName}&quot;&nbsp;/&gt;</span><br />
</pre><p> In this case, <code class="literal">&lt;ejb-module-name&gt;</code> is the name of the EJB module (by default it is filename of ejb jar)
             in which the bean is deployed, Seam replaces <code class="literal">#{ejbName}</code> with the name of the EJB. </p><p> How these JNDI names are resolved and somehow locate an EJB component might appear a bit like black
                magic at this point, so let's dig into the details. First, let's talk about how the EJB components get
                into JNDI.</p><p> EJB components would get assigned a global JNDI name automatically, using the pattern
                described in <a class="ulink" href="http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html#girgn">Java EE 6 tutorial</a>.
                 The EJB name is the first non-empty value from the following list: </p><div class="itemizedlist"><ul><li><p>The value of the <code class="literal">&lt;ejb-name&gt;</code> element in ejb-jar.xml</p></li><li><p>The value of the <code class="literal">name</code> attribute in the @Stateless or @Stateful annotation</p></li><li><p>The simple name of the bean class</p></li></ul></div><p> Let's look at an example. Assume that you have the following EJB bean and interface defined. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;com</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">example</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">myapp</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">ejb</span><span class="java_separator">.</span><span class="java_type">Local</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Local</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">Authenticator</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;authenticate</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;com</span><span class="java_separator">.</span><span class="java_plain">example</span><span class="java_separator">.</span><span class="java_plain">myapp</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">ejb</span><span class="java_separator">.</span><span class="java_type">Stateless</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;authenticator&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AuthenticatorBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Authenticator</span>
<!--  --><br/><span class="java_separator">{</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;authenticate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><p> Assuming your EJB bean class is deployed in an EAR named myapp, the global JNDI name 
                myapp/AuthenticatorBean/local will be assigned to it on JBoss AS. As you learned, you can reference this
                EJB component as a Seam component with the name <code class="literal">authenticator</code> and Seam will take care
                of finding it in JNDI according to the JNDI pattern (or <code class="literal">@JndiName</code> annotation).
                </p><p>So what about the rest of the application servers? Well, according to the Java EE spec, which most
                vendors try to adhere to religiously, you have to declare an EJB reference for your EJB in order for it
                to be assigned a JNDI name. That requires some XML. It also means that it is up to you to establish a
                JNDI naming convention so that you can leverage the Seam JNDI pattern. You might find the JBoss
                convention a good one to follow.</p><p>There are two places you have to define the EJB reference when using Seam on non-JBoss application
                servers. If you are going to be looking up the Seam EJB component through JSF (in a JSF view or as a JSF
                action listener) or a Seam JavaBean component, then you must declare the EJB reference in web.xml. Here
                is the EJB reference for the example component just shown: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-local-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-ref-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">myapp/AuthenticatorBean</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-ref-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-ref-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Session</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-ref-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">local</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.example.vehicles.action.Authenticator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">local</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-local-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>This reference will cover most uses of the component in a Seam application. However, if you want to
                be able to inject a Seam EJB component into another Seam EJB component using <code class="literal">@In</code>, you
                need to define this EJB reference in another location. This time, it must be defined in ejb-jar.xml, and
                it's a bit tricker. </p><p>Within the context of an EJB method call, you have to deal with a somewhat sheltered JNDI context.
                When Seam attempts to find another Seam EJB component to satisfy an injection point defined using
                <code class="literal">@In</code>, whether or not it finds it depends on whether an EJB reference exists in
                JNDI. Strictly speaking, you cannot simply resolve JNDI names as you please. You have to define
                the references explicitly. Fortunately, JBoss recognized how aggravating this would be for the
                developer and all versions of JBoss automatically register EJBs so they are always available in
                JNDI, both to the web container and the EJB container. So if you are using JBoss, you can skip the next
                few paragraphs. However, if you are deploying to GlassFish, pay close attention.</p><p>For application servers that stubbornly adhere to the EJB specification, EJB references must always be
                defined explicitly. But unlike with the web context, where a single resource reference covers all
                uses of the EJB from the web environment, you cannot declare EJB references globally in the EJB container.
                Instead, you have to specify the JNDI resources for a given EJB component one-by-one.</p><p> Let's assume that we have an EJB named RegisterAction (the name is resolved using the three steps
                mentioned previously). That EJB has the following Seam injection:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">create&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_type">Authenticator</span><span class="java_plain">&nbsp;authenticator</span><span class="java_separator">;</span>
</pre><p> In order for this injection to work, the link must be established in the ejb-jar.xml file as follows: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-jar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">enterprise-beans</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">RegisterAction</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-local-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-ref-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">myapp/AuthenticatorAction/local</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-ref-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ejb-ref-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Session</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-ref-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">local</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">com.example.myapp.Authenticator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">local</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-local-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">enterprise-beans</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ejb-jar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> Notice that the contents of the <code class="literal">&lt;ejb-local-ref&gt;</code> are identical to what we
                defined in web.xml. What we are doing is bringing the reference into the EJB context where it can be
                used by the RegisterAction bean. You will need to add one of these references for any injection of a
                Seam EJB component into another Seam EJB component using <code class="literal">@In</code>. (You can see an
                example of this setup in the jee5/booking example).</p><p> But what about <code class="literal">@EJB</code>? It's true that you can inject one EJB into another using
                <code class="literal">@EJB</code>. However, by doing so, you are injecting the actual EJB reference rather than the
                Seam EJB component instance. In this case, some Seam features will work, while others won't. That's
                because Seam's interceptor is invoked on any method call to an EJB component. But that only invokes
                Seam's server-side interceptor chain. What you lose is Seam's state management and Seam's client-side
                interceptor chain. Client-side interceptors handle concerns such as security and concurrency. Also, when
                injecting a SFSB, there is no guarantee that you will get the SFSB bound to the active session or
                conversation, whatever the case may be. Thus, you definitely want to inject the Seam EJB component using
                <code class="literal">@In</code>.</p><p>
                Finally, let's talk about transactions. In an EJB environment, we recommend the use of a special
                built-in component for transaction management, that is fully aware of container transactions, and can
                correctly process transaction success events registered with the <code class="literal">Events</code> component. If
                you don't add this line to your <code class="literal">components.xml</code> file, Seam won't know when
                container-managed transactions end: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:ejb-transaction</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24358"/>30.1.5. Don't forget!</h3></div></div></div><p> There is one final item you need to know about. You must place a <code class="literal">seam.properties</code>,
                    <code class="literal">META-INF/seam.properties</code> or <code class="literal">META-INF/components.xml</code> file in
                any archive in which your Seam components are deployed (even an empty properties file will do). At
                startup, Seam will scan any archives with <code class="literal">seam.properties</code> files for seam components. </p><p> In a web archive (WAR) file, you must place a <code class="literal">seam.properties</code> file in the
                    <code class="literal">WEB-INF/classes</code> directory if you have any Seam components included here. </p><p> That's why all the Seam examples have an empty <code class="literal">seam.properties</code> file. You can't
                just delete this file and expect everything to still work! </p><p> You might think this is silly and what kind of idiot framework designers would make an empty file
                affect the behavior of their software?? Well, this is a workaround for a limitation of the
                JVM — if we didn't use this mechanism, our next best option would be to force you to list every
                component explicitly in <code class="literal">components.xml</code>, just like some other competing frameworks do!
                I think you'll like our way better. </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="alt-jpa-providers"/>30.2. Using Alternate JPA Providers</h2></div></div></div><p> Seam comes packaged and configured with Hibernate as the default JPA provider.
        If you require using a different JPA provider you must tell <code class="literal">seam</code>
        about it.  
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>This is a workaround</h2><p>
            Configuration of the JPA provider will be easier in the future and will
            not require configuration changes, unless you are adding a custom persistence provider
            implementation.
            </p></div><p>Telling seam about a different JPA provider can be done in one of two ways:</p><p>Update your application's <code class="literal">components.xml</code>
              so that the generic <code class="literal">PersistenceProvider</code> takes
              precedence over the hibernate version.  Simply add the following
              to the file:                    
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.persistenceProvider&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.PersistenceProvider&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">scope</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stateless&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>If you want to take advantage of your JPA provider's 
        non-standard features you will need to write you own implementation of
        the <code class="literal">PersistenceProvider</code>.  Use 
        <code class="literal">HibernatePersistenceProvider</code> as a starting 
        point (don't forget to give back to the community :).  Then you
        will need to tell <code class="literal">seam</code> to use it as before.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.persistenceProvider&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.your.package.YourPersistenceProvider&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>All that is left is updating the <code class="literal">persistence.xml</code>
            file with the correct provider class, and what ever properties your
            provider needs.  Don't forget to package your new provider's jar files in the 
            application if they are needed.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24436"/>30.3. Configuring Seam in Java EE 6</h2></div></div></div><div class="mediaobject" align="center"><img src="images/ee6.png" align="middle"/></div><p> If you're running in a Java EE environment, this is all the configuration required to start using Seam! </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24446"/>30.3.1. Packaging</h3></div></div></div><p> Once you've packaged all this stuff together into an EAR, the archive structure will look something
                like this: </p><pre class="programlisting">my-application.ear/
    jboss-seam.jar
    lib/
        jboss-el.jar
    META-INF/
        MANIFEST.MF
        application.xml
        jboss-deployment-structure.xml
    my-application.war/
        META-INF/
            MANIFEST.MF
        WEB-INF/
            web.xml
            components.xml
            faces-config.xml
            lib/
                jboss-seam-ui.jar
        login.jsp
        register.jsp
        ...
    my-application.jar/
        META-INF/
            MANIFEST.MF
            persistence.xml
        seam.properties
        org/
            jboss/
                myapplication/
                    User.class
                    Login.class
                    LoginBean.class
                    Register.class
                    RegisterBean.class
                    ...</pre><p>
                You should declare <code class="literal">jboss-seam.jar</code> as an ejb module in <code class="literal">META-INF/application.xml</code>; 
               <code class="literal">jboss-el.jar</code> should be placed in the EAR's lib directory (putting it in the EAR classpath.
            </p><p> If you want to use jBPM or Drools, you must include the needed jars in the EAR's lib directory.</p><p> If you want to use the Seam tag library (most Seam applications do), you must include
                    <code class="literal">jboss-seam-ui.jar</code> in the <code class="literal">WEB-INF/lib</code> directory of the WAR. If
                you want to use the PDF or email tag libraries, you need to put <code class="literal">jboss-seam-pdf.jar</code> or
                    <code class="literal">jboss-seam-mail.jar</code> in <code class="literal">WEB-INF/lib</code>. </p><p> If you want to use the Seam debug page (only works for applications using facelets), you must include
                    <code class="literal">jboss-seam-debug.jar</code> in the <code class="literal">WEB-INF/lib</code> directory of the WAR. </p><p> Seam ships with several example applications that are deployable in any Java EE container that
                supports EJB 3.1. </p><p><code class="filename">faces-config.xml</code> is not required in JSF 2, but if you want to set up something non-default 
            you need to place it in <code class="filename">WAR/WEB-INF</code>.</p><p> I really wish that was all there was to say on the topic of configuration but unfortunately we're
                only about a third of the way there. If you're too overwhelmed by all this tedious configuration stuff,
                feel free to skip over the rest of this section and come back to it later. </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24502"/>30.4. Configuring Seam without EJB</h2></div></div></div><p> Seam is useful even if you're not yet ready to take the plunge into EJB 3.1. In this case you would use
            Hibernate 4 instead of EJB 3.1 persistence, and plain JavaBeans instead of session beans. You'll miss
            out on some of the nice features of session beans but it will be very easy to migrate to EJB 3.1 when you're
            ready and, in the meantime, you'll be able to take advantage of Seam's unique declarative state management
            architecture. </p><div class="mediaobject" align="center"><img src="images/hibernate-ee6.png" align="middle"/></div><p> Seam JavaBean components do not provide declarative transaction demarcation like session beans do. You
                <span class="emphasis"><em>could</em></span> manage your transactions manually using the JTA
            <code class="literal">UserTransaction</code> or declaratively using Seam's <code class="literal">@Transactional</code>
            annotation. But most applications will just use Seam managed transactions when using Hibernate with
            JavaBeans. </p><p> The Seam distribution includes a version of the booking example application that uses Hibernate and
            JavaBeans instead of EJB, and another version that uses JPA and JavaBeans. These example applications are
            ready to deploy into any Java EE application server. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24525"/>30.4.1. Boostrapping Hibernate in Seam</h3></div></div></div><p> Seam will bootstrap a Hibernate <code class="literal">SessionFactory</code> from your
                    <code class="literal">hibernate.cfg.xml</code> file if you install a built-in component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:hibernate-session-factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateSessionFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> You will also need to configure a <span class="emphasis"><em>managed session</em></span> if you want a Seam managed
                Hibernate <code class="literal">Session</code> to be available via injection. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-hibernate-session</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernateSession&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">session-factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hibernateSessionFactory}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24548"/>30.4.2. Boostrapping JPA in Seam</h3></div></div></div><p> Seam will bootstrap a JPA <code class="literal">EntityManagerFactory</code> from your
                <code class="literal">persistence.xml</code> file if you install this built-in component: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:entity-manager-factory</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManagerFactory&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> You will also need to configure a <span class="emphasis"><em>managed persistence context</em></span> if you want a
                Seam managed JPA <code class="literal">EntityManager</code> to be available via injection. </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence:managed-persistence-context</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entityManager&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">entity-manager-factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entityManagerFactory}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24571"/>30.4.3. Packaging</h3></div></div></div><p> We can package our application as a WAR, in the following structure: </p><pre class="programlisting">my-application.war/
    META-INF/
        MANIFEST.MF
        jboss-deployment-structure.xml
    WEB-INF/
        web.xml
        components.xml
        faces-config.xml
        lib/
            jboss-seam.jar
            jboss-seam-ui.jar
            jboss-el.jar
            hibernate-core.jar
            hibernate-annotations.jar
            hibernate-validator.jar
            ...
            my-application.jar/
                META-INF/
                   MANIFEST.MF
                seam.properties
                hibernate.cfg.xml
                org/
                    jboss/
                        myapplication/
                            User.class
                            Login.class
                            Register.class
                            ...
    login.jsp
    register.jsp
    ...</pre><p> If we want to deploy Hibernate in a non-EE environment like Tomcat or TestNG, we need to do a little
                bit more work. </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24580"/>30.5. Configuring Seam in Java SE</h2></div></div></div><p> It is possible to use Seam completely outside of an EE environment. In this case, you need to tell Seam
            how to manage transactions, since there will be no JTA available. If you're using JPA, you can tell
            Seam to use JPA resource-local transactions, ie. <code class="literal">EntityTransaction</code>, like so: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:entity-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">entity-manager</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{entityManager}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> If you're using Hibernate, you can tell Seam to use the Hibernate transaction API like this: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">transaction:hibernate-transaction</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">session</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{session}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> Of course, you'll also need to define a datasource.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24596"/>30.6. Configuring jBPM in Seam</h2></div></div></div><p> Seam's jBPM integration is not installed by default, so you'll need to enable jBPM by installing a
            built-in component. You'll also need to explicitly list your process and pageflow definitions. In
                <code class="literal">components.xml</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:pageflow-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">createDocument.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">editDocument.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">approveDocument.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:pageflow-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bpm:process-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">documentLifecycle.jpdl.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:process-definitions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bpm:jbpm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> No further special configuration is needed if you only have pageflows. If you do have business process
            definitions, you need to provide a jBPM configuration, and a Hibernate configuration for jBPM. The Seam DVD
            Store demo includes example <code class="literal">jbpm.cfg.xml</code> and <code class="literal">hibernate.cfg.xml</code> files
            that will work with Seam: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jbpm-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jbpm-context</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">service</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistence&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jbpm.persistence.db.DbPersistenceServiceFactory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;isTransactionEnabled&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">false</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">service</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">service</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;tx&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jbpm.tx.TxServiceFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">service</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;message&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jbpm.msg.db.DbMessageServiceFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">service</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;scheduler&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jbpm.scheduler.db.DbSchedulerServiceFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">service</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;logging&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jbpm.logging.db.DbLoggingServiceFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">service</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;authentication&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">factory</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jbpm.security.authentication.DefaultAuthenticationServiceFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jbpm-context</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jbpm-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The most important thing to notice here is that jBPM transaction control is disabled. Seam or EJB3 should
            control the JTA transactions. </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24618"/>30.6.1. Packaging</h3></div></div></div><p> There is not yet any well-defined packaging format for jBPM configuration and process/pageflow
                definition files. In the Seam examples we've decided to simply package all these files into the root of
                the EAR. In future, we will probably design some other standard packaging format. So the EAR looks
                something like this: </p><pre class="programlisting">my-application.ear/
    jboss-seam.jar
    lib/
       jboss-el.jar
       jbpm-jpdl.jar
    META-INF/
        MANIFEST.MF
        application.xml
        jboss-deployment-structure.xml
    my-application.war/
        META-INF/
            MANIFEST.MF
        WEB-INF/
            web.xml
            components.xml
            faces-config.xml
            lib/
                jboss-seam-ui.jar
        login.jsp
        register.jsp
        ...
    my-application.jar/
        META-INF/
            MANIFEST.MF
            persistence.xml
        seam.properties
        org/
            jboss/
                myapplication/
                    User.class
                    Login.class
                    LoginBean.class
                    Register.class
                    RegisterBean.class
                    ...
    jbpm.cfg.xml
    hibernate.cfg.xml
    createDocument.jpdl.xml
    editDocument.jpdl.xml
    approveDocument.jpdl.xml
    documentLifecycle.jpdl.xml</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24625"/>30.7. Deployment in JBoss AS 7</h2></div></div></div><p>JBoss AS 7 is default deployment target for all examples in Seam 2.3 distribution.</p><p>Seam 2.3 requires to have setup special deployment metada file <code class="filename">jboss-deployment-structure.xml</code>
         for correct initialization. Minimal content for EAR is: 
         </p><div class="example"><a id="d0e24635"/><p class="title"><b>Example 30.1. jboss-deployment-structure.xml</b></p><div class="example-contents"><pre class="programlisting">&lt;jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0"&gt;
  &lt;deployment&gt;
      &lt;dependencies&gt;
          &lt;module name="org.dom4j" export="true"/&gt;
          &lt;module name="org.apache.commons.collections" export="true"/&gt;
          &lt;module name="javax.faces.api" export="true"/&gt;
        &lt;/dependencies&gt;
  &lt;/deployment&gt;  
&lt;/jboss-deployment-structure&gt;</pre></div></div><p><br class="example-break"/>    
            More details about new AS 7 classloading can be found at 
            <a class="ulink" href="https://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-ClassloadinginJBossAS7">https://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-ClassloadinginJBossAS7</a> 
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Deployment of multiple modules in one EAR</h2><p>There is a significant enhancement for speed up the application deployment in AS 7. This unfortunatelly can
         cause some issues while you have multiple war/ejb modules in your application.</p><p>
         This situation requires to use and set up new Java EE 6 configuration parameter -
         <span class="emphasis"><em>Module initialization order</em></span>
         - in
         <code class="filename">application.xml</code>
         -
         <code class="literal">initialize-in-order</code>
         to true.
         This causes that initialization will happen in defined order like it is in
         <code class="filename">application.xml</code>.
         Example of <code class="filename">application.xml</code>:
         </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  version="6" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd"&gt;
  &lt;application-name&gt;test-app&lt;/application-name&gt;
  &lt;initialize-in-order&gt;true&lt;/initialize-in-order&gt;
  &lt;module&gt;
    &lt;ejb&gt;jboss-seam.jar&lt;/ejb&gt;
  &lt;/module&gt;
  &lt;module&gt;
    &lt;web&gt;
      &lt;web-uri&gt;test-web1.war&lt;/web-uri&gt;
      &lt;context-root&gt;test&lt;/context-root&gt;
    &lt;/web&gt;
    &lt;web&gt;
      &lt;web-uri&gt;test-web2.war&lt;/web-uri&gt;
      &lt;context-root&gt;test&lt;/context-root&gt;
    &lt;/web&gt;
  &lt;/module&gt;
&lt;/application&gt;</pre><p>
      </p><p>
         If you are using <code class="literal">maven-ear-plugin</code> for generation of your application,
          you can use this plugin configuration:
            </p><pre class="programlisting">&lt;plugin&gt;
    &lt;artifactId&gt;maven-ear-plugin&lt;/artifactId&gt;
    &lt;!-- from version 2.6 the plugin supports Java EE 6 descriptor --&gt;
    &lt;version&gt;2.7&lt;/version&gt;
    &lt;configuration&gt; 
        &lt;version&gt;6&lt;/version&gt;
        &lt;generateApplicationXml&gt;true&lt;/generateApplicationXml&gt; 
        &lt;defaultLibBundleDir&gt;lib&lt;/defaultLibBundleDir&gt;                
        &lt;initializeInOrder&gt;true&lt;/initializeInOrder&gt;
        &lt;modules&gt; 
            &lt;jarModule&gt; 
                &lt;groupId&gt;org.jboss.el&lt;/groupId&gt; 
                &lt;artifactId&gt;jboss-el&lt;/artifactId&gt; 
                &lt;includeInApplicationXml&gt;false&lt;/includeInApplicationXml&gt; 
                &lt;bundleDir&gt;lib&lt;/bundleDir&gt; 
            &lt;/jarModule&gt; 
            &lt;ejbModule&gt; 
                &lt;groupId&gt;org.jboss.seam&lt;/groupId&gt; 
                &lt;artifactId&gt;jboss-seam&lt;/artifactId&gt; 
                &lt;bundleFileName&gt;jboss-seam.jar&lt;/bundleFileName&gt;                         
            &lt;/ejbModule&gt; 
            &lt;ejbModule&gt; 
                &lt;groupId&gt;some.user.module&lt;/groupId&gt; 
                &lt;artifactId&gt;hello-ejbs&lt;/artifactId&gt; 
                &lt;bundleFileName&gt;hello-ejbs.jar&lt;/bundleFileName&gt;                         
            &lt;/ejbModule&gt; 
            &lt;webModule&gt; 
                &lt;groupId&gt;some.user.module&lt;/groupId&gt; 
                &lt;artifactId&gt;hello-web1&lt;/artifactId&gt; 
                &lt;contextRoot&gt;/hello1&lt;/contextRoot&gt; 
                &lt;bundleFileName&gt;hello-web1.war&lt;/bundleFileName&gt; 
            &lt;/webModule&gt; 
            &lt;webModule&gt; 
                &lt;groupId&gt;some.user.module&lt;/groupId&gt; 
                &lt;artifactId&gt;hello-web2&lt;/artifactId&gt; 
                &lt;contextRoot&gt;/hello2&lt;/contextRoot&gt; 
                &lt;bundleFileName&gt;hello-web2.war&lt;/bundleFileName&gt; 
            &lt;/webModule&gt;                                         
        &lt;/modules&gt; 
    &lt;/configuration&gt; 
&lt;/plugin&gt;</pre><p>
      </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24677"/>30.8. Configuring SFSB and Session Timeouts in JBoss AS 7</h2></div></div></div><p> It is very important that the timeout for Stateful Session Beans is set higher than the timeout for HTTP
            Sessions, otherwise SFSB's may time out before the user's HTTP session has ended. JBoss Application Server
            has a default session bean timeout of 30 minutes, which is configured in
                <code class="literal">standalone/configuration/standalone.xml</code> (replace <span class="emphasis"><em>standalone.xml</em></span> with your
            standalone-full.xml if you use full profile). </p><p> The default SFSB timeout can be adjusted by modifying the value of <code class="literal">default-access-timeout</code> in
            the EJB subsystem <code class="literal">subsystem xmlns="urn:jboss:domain:ejb3:1.2"</code>: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">subsystem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;urn:jboss:domain:ejb3:1.2&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">stateless</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean-instance-pool-ref</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">pool-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;slsb-strict-max-pool&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">stateless</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">stateful</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">default-access-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5000&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cache-ref</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;simple&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">singleton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">default-access-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5000&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">subsystem</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p> The default HTTP session timeout can't be modified in JBoss AS 7.</p><p> To override default value for your own application, simply include <code class="literal">session-timeout</code> entry in your application's own
                <code class="literal">web.xml</code>: </p><pre class="programlisting">
        &lt;session-config&gt;
            &lt;session-timeout&gt;30&lt;/session-timeout&gt;
        &lt;/session-config&gt;</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24710"/>30.9. Running Seam in a Portlet</h2></div></div></div><p>
           If you want to run your Seam application in a portlet, take a look at
           the JBoss Portlet Bridge, an implementation of JSR-301 that supports
           JSF within a portlet, with extensions for Seam and RichFaces. See
           <a class="ulink" href="http://labs.jboss.com/portletbridge">http://labs.jboss.com/portletbridge</a>
           for more.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24718"/>30.10. Deploying custom resources</h2></div></div></div><p>
            Seam scans all jars containing <code class="literal">/seam.properties</code>,
            <code class="literal">/META-INF/components.xml</code> or <code class="literal">/META-INF/seam.properties</code>
            on startup for resources. For example, all classes annotated with
            <code class="literal">@Name</code> are registered with Seam as Seam components.
        </p><p>
            You may also want Seam to handle custom resources. A common use case
            is to handle a specific annotation and Seam provides specific 
            support for this. First, tell Seam which annotations to handle in
            <code class="literal">/META-INF/seam-deployment.properties</code>:
        </p><pre class="programlisting"># A colon-separated list of annotation types to handle
org.jboss.seam.deployment.annotationTypes=com.acme.Foo:com.acme.Bar</pre><p>
            Then, during application startup you can get hold of all classes
            annotated with <code class="literal">@Foo</code>:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;fooStartup&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">APPLICATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Startup</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FooStartup</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_literal">&quot;#{deploymentStrategy.annotatedClasses['com.acme.Foo']}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Class</span><span class="java_operator">&lt;</span><span class="java_type">Object</span><span class="java_operator">&gt;&gt;</span><span class="java_plain">&nbsp;fooClasses</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_literal">&quot;#{hotDeploymentStrategy.annotatedClasses['com.acme.Foo']}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Class</span><span class="java_operator">&lt;</span><span class="java_type">Object</span><span class="java_operator">&gt;&gt;</span><span class="java_plain">&nbsp;hotFooClasses</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;create</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Class</span><span class="java_plain">&nbsp;clazz</span><span class="java_operator">:</span><span class="java_plain">&nbsp;fooClasses</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleClass</span><span class="java_separator">(</span><span class="java_plain">clazz</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Class</span><span class="java_plain">&nbsp;clazz</span><span class="java_operator">:</span><span class="java_plain">&nbsp;hotFooClasses</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleClass</span><span class="java_separator">(</span><span class="java_plain">clazz</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;handleClass</span><span class="java_separator">(</span><span class="java_type">Class</span><span class="java_plain">&nbsp;clazz</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>    
            You can also handle <span class="emphasis"><em>any</em></span> resource. For example, 
            you process any files with the extension <code class="literal">.foo.xml</code>.
            To do this, we need to write a custom deployment handler:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">FooDeploymentHandler</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">implements</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">DeploymentHandler</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">DeploymentMetadata</span><span class="java_plain">&nbsp;FOO_METADATA&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">DeploymentMetadata</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFileNameSuffix</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;.foo.xml&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;fooDeploymentHandler&quot;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">DeploymentMetadata</span><span class="java_plain">&nbsp;getMetadata</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;FOO_METADATA</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Here we are just building a list of any files with the suffix 
            <code class="literal">.foo.xml</code>. 
        </p><p>
            Then, we need to register the deployment handler with Seam in
            <code class="literal">/META-INF/seam-deployment.properties</code>.  
            You can register multiple deployment handler using a comma 
            separated list.
        </p><pre class="programlisting"># For standard deployment
org.jboss.seam.deployment.deploymentHandlers=com.acme.FooDeploymentHandler
# For hot deployment
org.jboss.seam.deployment.hotDeploymentHandlers=com.acme.FooDeploymentHandler</pre><p>

         </p><p>
             Seam uses deployment handlers internally to install components and
             namespaces. You can easily access the deployment handler during an 
             <code class="literal">APPLICATION</code> scoped component's startup: 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;fooStartup&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">APPLICATION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Startup</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FooStartup</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_literal">&quot;#{deploymentStrategy.deploymentHandlers['fooDeploymentHandler']}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">FooDeploymentHandler</span><span class="java_plain">&nbsp;myDeploymentHandler</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_literal">&quot;#{hotDeploymentStrategy.deploymentHandlers['fooDeploymentHandler']}&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">FooDeploymentHandler</span><span class="java_plain">&nbsp;myHotDeploymentHandler</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;create</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">FileDescriptor</span><span class="java_plain">&nbsp;fd</span><span class="java_operator">:</span><span class="java_plain">&nbsp;myDeploymentHandler</span><span class="java_separator">.</span><span class="java_plain">getResources</span><span class="java_separator">())</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleFooXml</span><span class="java_separator">(</span><span class="java_plain">fd</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">FileDescriptor</span><span class="java_plain">&nbsp;f</span><span class="java_operator">:</span><span class="java_plain">&nbsp;myHotDeploymentHandler</span><span class="java_separator">.</span><span class="java_plain">getResources</span><span class="java_separator">())</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleFooXml</span><span class="java_separator">(</span><span class="java_plain">fd</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;handleFooXml</span><span class="java_separator">(</span><span class="java_type">FileDescriptor</span><span class="java_plain">&nbsp;fd</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="annotations"/>Chapter 31. Seam annotations</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e24790">31.1. Annotations for component definition</a></span></dt><dt><span class="section"><a href="#d0e25047">31.2. Annotations for bijection</a></span></dt><dt><span class="section"><a href="#d0e25273">31.3. Annotations for component lifecycle methods</a></span></dt><dt><span class="section"><a href="#d0e25321">31.4. Annotations for context demarcation</a></span></dt><dt><span class="section"><a href="#d0e25642">31.5. Annotations for use with Seam JavaBean components in a J2EE environment</a></span></dt><dt><span class="section"><a href="#d0e25732">31.6. Annotations for exceptions</a></span></dt><dt><span class="section"><a href="#d0e25807">31.7. Annotations for Seam Remoting</a></span></dt><dt><span class="section"><a href="#d0e25829">31.8. Annotations for Seam interceptors</a></span></dt><dt><span class="section"><a href="#d0e25860">31.9. Annotations for asynchronicity</a></span></dt><dt><span class="section"><a href="#d0e25914">31.10. Annotations for use with JSF</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e25964">31.10.1. Annotations for use with dataTable</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e26118">31.11. Meta-annotations for databinding</a></span></dt><dt><span class="section"><a href="#d0e26152">31.12. Annotations for packaging</a></span></dt><dt><span class="section"><a href="#d0e26182">31.13. Annotations for integrating with the servlet container</a></span></dt></dl></div><p>
      When you write a Seam application, you'll use a lot of annotations. Seam 
      lets you use annotations to achieve a declarative style of programming. 
      Most of the annotations you'll use are defined by the EJB 3.0 
      specification. The annotations for data validation are defined by the 
      Bean Validation standard. Finally, Seam defines its own set of 
      annotations, which we'll describe in this chapter. 
   </p><p>
      All of these annotations are defined in the package 
      <code class="literal">org.jboss.seam.annotations</code>. 
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24790"/>31.1. Annotations for component definition</h2></div></div></div><p>
         The first group of annotations lets you define a Seam component. These 
         annotations appear on the component class. 
      </p><div class="variablelist"><dl><dt><a id="name-annotation"/><span class="term">
               <code class="literal">@Name</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;componentName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Defines the Seam component name for a class. This annotation 
                  is required for all Seam components. 
               </p></dd><dt><a id="scope-annotation"/><span class="term">
               <code class="literal">@Scope</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Scope</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">CONVERSATION</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Defines the default context of the component. The possible 
                  values are defined by the <code class="literal">ScopeType</code> 
                  enumeration: <code class="literal">EVENT, PAGE, CONVERSATION, SESSION, BUSINESS_PROCESS, APPLICATION, STATELESS</code>.
               </p><p> 
                  When no scope is explicitly specified, the default depends 
                  upon the component type. For stateless session beans, the 
                  default is <code class="literal">STATELESS</code>. For entity beans and
                  stateful session beans, the default is 
                  <code class="literal">CONVERSATION</code>. For JavaBeans, the default is 
                  <code class="literal">EVENT</code>. 
               </p></dd><dt><a id="role-annotation"/><span class="term">
               <code class="literal">@Role</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Role</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;roleName&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;scope</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">SESSION</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Allows a Seam component to be bound to multiple contexts 
                  variables. The <code class="literal">@Name</code>/<code class="literal">@Scope</code> 
                  annotations define a "default role". Each <code class="literal">@Role</code> 
                  annotation defines an additional role. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">name</code> — the context variable 
                        name.
                     </p></li><li><p>
                        <code class="literal">scope</code> — the context variable 
                        scope. When no scope is explicitly specified, the 
                        default depends upon the component type, as above. 
                     </p></li></ul></div></dd><dt><a id="roles-annotation"/><span class="term">
               <code class="literal">@Roles</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Roles</span><!-- <br/> --><span class="java_separator">({</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Role</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;user&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope</span><span class="java_operator">=</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">CONVERSATION</span><span class="java_separator">),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Role</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;currentUser&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;scope</span><span class="java_operator">=</span><span class="java_type">ScopeType</span><span class="java_separator">.</span><span class="java_plain">SESSION</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">})</span></pre><p>
                  Allows specification of multiple additional roles. 
               </p></dd><dt><a id="intercept-annotation"/><span class="term">
               <code class="literal">@BypassInterceptors</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">BypassInterceptors</span></pre><p>
                  Disables Seam all interceptors on a particular component or 
                  method of a component.
               </p></dd><dt><a id="jndiname-annotation"/><span class="term">
               <code class="literal">@JndiName</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">JndiName</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;my/jndi/name&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p> 
                  Specifies the JNDI name that Seam will use to look up the EJB 
                  component. If no JNDI name is explicitly specified, Seam will 
                  use the JNDI pattern specified by 
                  <code class="literal">org.jboss.seam.core.init.jndiPattern</code>. 
               </p></dd><dt><a id="conversational-annotation"/><span class="term">
               <code class="literal">@Conversational</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Conversational</span></pre><p>
                  Specifies that a conversation scope component is 
                  conversational, meaning that no method of the component may be 
                  called unless a long-running conversation is active. 
               </p></dd><dt><a id="pernestedconversation-annotation"/><span class="term">
               <code class="literal">@PerNestedConversation</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">PerNestedConversation</span></pre><p>
                  Limits the scope of a CONVERSATION-scoped component to just 
                  the parent conversation in which it was instantiated. The 
                  component instance will not be visible to nested child 
                  conversations, which will get their own instance.
               </p><p>
                  Warning: this is ill-defined, since it implies that a 
                  component will be visible for some part of a request cycle, 
                  and invisible after that. It is not recommended that 
                  applications use this feature!
               </p></dd><dt><a id="startup-annotation"/><span class="term">
               <code class="literal">@Startup</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Scope</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">APPLICATION</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Startup</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">depends</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;org.jboss.seam.bpm.jbpm&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that an application scope component is started 
                  immediately at initialization time. This is mainly used for 
                  certain built-in components that bootstrap critical 
                  infrastructure such as JNDI, datasources, etc. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Scope</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">SESSION</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Startup</span></pre><p>
                  Specifies that a session scope component is started 
                  immediately at session creation time. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">depends</code> — specifies that the 
                        named components must be started first, if they are 
                        installed. 
                     </p></li></ul></div></dd><dt><a id="install-annotation"/><span class="term">
               <code class="literal">@Install</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Install</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">false</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies whether or not a component should be installed by 
                  default. The lack of an <code class="literal">@Install</code> annotation 
                  indicates a component should be installed.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Install</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">dependencies</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;org.jboss.seam.bpm.jbpm&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component should only be stalled if the 
                  components listed as dependencies are also installed.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Install</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">genericDependencies</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">ManagedQueueSender</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component should only be installed if a 
                  component that is implemented by a certain class is installed. 
                  This is useful when the dependency doesn't have a single 
                  well-known name.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Install</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">classDependencies</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;org.hibernate.Session&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component should only be installed if the 
                  named class is in the classpath. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Install</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">precedence</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">BUILT_IN</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies the precedence of the component. If multiple 
                  components with the same name exist, the one with the higher 
                  precedence will be installed. The defined precedence values 
                  are (in ascending order):
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">BUILT_IN</code> — Precedence of all 
                        built-in Seam components
                     </p></li><li><p>
                        <code class="literal">FRAMEWORK</code> — Precedence to use 
                        for components of frameworks which extend Seam
                     </p></li><li><p>
                        <code class="literal">APPLICATION</code> — Precedence of 
                        application components (the default precedence)
                     </p></li><li><p>
                        <code class="literal">DEPLOYMENT</code> — Precedence to use 
                        for components which override application components in 
                        a particular deployment
                     </p></li><li><p>
                        <code class="literal">MOCK</code> — Precedence for mock 
                        objects used in testing
                     </p></li></ul></div></dd><dt><a id="synchronized-annotation"/><span class="term">
               <code class="literal">@Synchronized</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Synchronized</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">timeout</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">1000</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component is accessed concurrently by 
                  multiple clients, and that Seam should serialize requests. If 
                  a request is not able to obtain its lock on the component in 
                  the given timeout period, an exception will be raised. 
               </p></dd><dt><a id="readonly-annotation"/><span class="term">
               <code class="literal">@ReadOnly</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">ReadOnly</span></pre><p>
                  Specifies that a JavaBean component or component method does 
                  not require state replication at the end of the invocation. 
               </p></dd><dt><a id="autocreate-annotation"/><span class="term">
               <code class="literal">@AutoCreate</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">AutoCreate</span></pre><p>
                  Specifies that a component will be automatically created, even 
                  if the client does not specify <code class="literal">create=true</code>. 
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25047"/>31.2. Annotations for bijection</h2></div></div></div><p>
         The next two annotations control bijection. These attributes occur on 
         component instance variables or property accessor methods. 
      </p><div class="variablelist"><dl><dt><a id="in-annotation"/><span class="term">
               <code class="literal">@In</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span></pre><p>
                  Specifies that a component attribute is to be injected from a 
                  context variable at the beginning of each component 
                  invocation. If the context variable is null, an exception 
                  will be thrown.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">required</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">false</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component attribute is to be injected from a 
                  context variable at the beginning of each component 
                  invocation. The context variable may be null. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">create</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component attribute is to be injected from a 
                  context variable at the beginning of each component 
                  invocation. If the context variable is null, an instance of 
                  the component is instantiated by Seam. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;contextVariableName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p> 
                  Specifies the name of the context variable explicitly, instead 
                  of using the annotated instance variable name. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;#{customer.addresses['shipping']}&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component attribute is to be injected by 
                  evaluating a JSF EL expression at the beginning of each 
                  component invocation. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">value</code> — specifies the name of 
                        the context variable. Default to the name of the 
                        component attribute. Alternatively, specifies a JSF EL 
                        expression, surrounded by <code class="literal">#{...}</code>. 
                     </p></li><li><p>
                        <code class="literal">create</code> — specifies that Seam 
                        should instantiate the component with the same name as 
                        the context variable if the context variable is 
                        undefined (null) in all contexts. Default to false. 
                     </p></li><li><p>
                        <code class="literal">required</code> — specifies Seam 
                        should throw an exception if the context variable is 
                        undefined in all contexts. 
                     </p></li></ul></div></dd><dt><a id="out-annotation"/><span class="term">
               <code class="literal">@Out</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Out</span></pre><p>
                  Specifies that a component attribute that is a Seam component 
                  is to be outjected to its context variable at the end of the 
                  invocation. If the attribute is null, an exception is thrown. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Out</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">required</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">false</span><!-- <br/> --><span class="java_separator">)</span></pre><p> 
                  Specifies that a component attribute that is a Seam component 
                  is to be outjected to its context variable at the end of the 
                  invocation. The attribute may be null. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Out</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">scope</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">ScopeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">SESSION</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component attribute that is 
                  <span class="emphasis"><em>not</em></span> a Seam component type is to be 
                  outjected to a specific scope at the end of the invocation. 
               </p><p> 
                  Alternatively, if no scope is explicitly specified, the scope 
                  of the component with the <code class="literal">@Out</code> attribute is
                  used (or the <code class="literal">EVENT</code> scope if the component 
                  is stateless). 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Out</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;contextVariableName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies the name of the context variable explicitly, instead
                  of using the annotated instance variable name. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">value</code> — specifies the name of 
                        the context variable. Default to the name of the 
                        component attribute. 
                     </p></li><li><p>
                        <code class="literal">required</code> — specifies Seam 
                        should throw an exception if the component attribute is 
                        null during outjection. 
                     </p></li></ul></div></dd></dl></div><p>
         Note that it is quite common for these annotations to occur together, 
         for example: 
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">create</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Out</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">User</span><!-- <br/> --><span class="java_plain">&nbsp;currentUser</span><!-- <br/> --><span class="java_separator">;</span></pre><p> 
         The next annotation supports the <span class="emphasis"><em>manager component</em></span> 
         pattern; a Seam component manages the lifecycle of an 
         instance of some other class that is to be injected. It appears on a
         component getter method. 
      </p><div class="variablelist"><dl><dt><a id="unwrap-annotation"/><span class="term">
               <code class="literal">@Unwrap</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Unwrap</span></pre><p>
                  Specifies that the object returned by the annotated getter 
                  method is the thing that is injected instead of the component 
                  instance itself. 
               </p></dd></dl></div><p>
         The next annotation supports the <span class="emphasis"><em>factory component</em></span> 
         pattern; a Seam component is responsible for initializing the 
         value of a context variable. This is especially useful for initializing 
         any state needed for rendering the response to a non-faces request. It 
         appears on a component method. 
      </p><div class="variablelist"><dl><dt><a id="factory-annotation"/><span class="term">
               <code class="literal">@Factory</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Factory</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;processInstance&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;createProcessInstance</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">...</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">}</span></pre><p>
                  Specifies that the method of the component is used to 
                  initialize the value of the named context variable, when the 
                  context variable has no value. This style is used with methods
                  that return <code class="literal">void</code>.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Factory</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;processInstance&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;scope</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">CONVERSATION</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">ProcessInstance</span><!-- <br/> --><span class="java_plain">&nbsp;createProcessInstance</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">...</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">}</span></pre><p>
                  Specifies that the method returns a value that Seam should use
                  to initialize the value of the named context variable, when 
                  the context variable has no value. This style is used with 
                  methods that return a value. If no scope is explicitly 
                  specified, the scope of the component with the 
                  <code class="literal">@Factory</code> method is used (unless the 
                  component is stateless, in which case the <code class="literal">EVENT</code>
                  context is used). 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">value</code> — specifies the name of 
                        the context variable. If the method is a getter method, 
                        default to the JavaBeans property name. 
                     </p></li><li><p>
                        <code class="literal">scope</code> — specifies the scope 
                        that Seam should bind the returned value to. Only 
                        meaningful for factory methods which return a value. 
                     </p></li><li><p>
                        <code class="literal">autoCreate</code> — specifies that 
                        this factory method should be automatically called 
                        whenever the variable is asked for, even if 
                        <code class="literal">@In</code> does not specify 
                        <code class="literal">create=true</code>. 
                     </p></li></ul></div></dd></dl></div><p>
         This annotation lets you inject a <code class="literal">Log</code>: 
      </p><div class="variablelist"><dl><dt><a id="logger-annotation"/><span class="term">
               <code class="literal">@Logger</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Logger</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;categoryName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component field is to be injected with an 
                  instance of <code class="literal">org.jboss.seam.log.Log</code>. For 
                  entity beans, the field must be declared as static.
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">value</code> — specifies the name of 
                        the log category. Default to the name of the component 
                        class.
                     </p></li></ul></div></dd></dl></div><p>
         The last annotation lets you inject a request parameter value: 
      </p><div class="variablelist"><dl><dt><a id="requestparameter-annotation"/><span class="term">
               <code class="literal">@RequestParameter</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">RequestParameter</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;parameterName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that a component attribute is to be injected with the 
                  value of a request parameter. Basic type conversions are 
                  performed automatically. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">value</code> — specifies the name of 
                        the request parameter. Default to the name of the 
                        component attribute.
                     </p></li></ul></div></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25273"/>31.3. Annotations for component lifecycle methods</h2></div></div></div><p>
         These annotations allow a component to react to its own lifecycle 
         events. They occur on methods of the component. There may be only one 
         of each per component class. 
      </p><div class="variablelist"><dl><dt><a id="create-annotation"/><span class="term">
               <code class="literal">@Create</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Create</span></pre><p>
                  Specifies that the method should be called when an instance of
                  the component is instantiated by Seam. Note that create 
                  methods are only supported for JavaBeans and stateful session 
                  beans.
               </p></dd><dt><a id="destroy-annotation"/><span class="term">
               <code class="literal">@Destroy</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Destroy</span></pre><p>
                  Specifies that the method should be called when the context 
                  ends and its context variables are destroyed. Note that 
                  destroy methods are only supported for JavaBeans and stateful session
                  beans. 
               </p><p> 
                  Destroy methods should be used only for cleanup. 
                  <span class="emphasis"><em>Seam catches, logs and swallows any exception that 
                  propagates out of a destroy method.</em></span>
               </p></dd><dt><a id="observer-annotation"/><span class="term">
               <code class="literal">@Observer</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Observer</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;somethingChanged&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that the method should be called when a 
                  component-driven event of the specified type occurs.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Observer</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;somethingChanged&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">create</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">false</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that the method should be called when an event of 
                  the specified type occurs but that an instance should not be 
                  created if one doesn't exist.  If an instance does not exist
                  and create is false, the event will not be observed.  The 
                  default value for create is true.
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25321"/>31.4. Annotations for context demarcation</h2></div></div></div><p>
         These annotations provide declarative conversation demarcation. They 
         appear on methods of Seam components, usually action listener methods. 
      </p><p>
         Every web request has a conversation context associated with it. Most 
         of these conversations end at the end of the request. If you want a 
         conversation that span multiple requests, you must "promote" the 
         current conversation to a <span class="emphasis"><em>long-running conversation</em></span> 
         by calling a method marked with <code class="literal">@Begin</code>. 
      </p><div class="variablelist"><a id="begin-annotation"/><dl><dt><span class="term">
               <code class="literal">@Begin</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Begin</span></pre><p>
                  Specifies that a long-running conversation begins when this 
                  method returns a non-null outcome without exception.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Begin</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">join</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that if a long-running conversation is already in
                  progress, the conversation context is simply propagated.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Begin</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">nested</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that if a long-running conversation is already in
                  progress, a new <span class="emphasis"><em>nested</em></span> conversation 
                  context begins. The nested conversation will end when the next
                  <code class="literal">@End</code> is encountered, and the outer 
                  conversation will resume. It is perfectly legal for multiple 
                  nested conversations to exist concurrently in the same outer 
                  conversation. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Begin</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">pageflow</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;process&nbsp;definition&nbsp;name&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies a jBPM process definition name that defines the 
                  pageflow for this conversation.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Begin</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">flushMode</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">FlushModeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">MANUAL</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specify the flush mode of any Seam-managed persistence 
                  contexts. <code class="literal">flushMode=FlushModeType.MANUAL</code> 
                  supports the use of <span class="emphasis"><em>atomic conversations</em></span> 
                  where all write operations are queued in the conversation 
                  context until an explicit call to <code class="literal">flush()</code> 
                  (which usually occurs at the end of the conversation).
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">join</code> — determines the behavior 
                        when a long-running conversation is already in progress.
                        If <code class="literal">true</code>, the context is propagated. 
                        If <code class="literal">false</code>, an exception is thrown. 
                        Default to <code class="literal">false</code>. This setting is 
                        ignored when <code class="literal">nested=true</code> is 
                        specified.
                     </p></li><li><p>
                        <code class="literal">nested</code> — specifies that a 
                        nested conversation should be started if a long-running 
                        conversation is already in progress. 
                     </p></li><li><p>
                        <code class="literal">flushMode</code> — set the flush mode 
                        of any Seam-managed Hibernate sessions or JPA 
                        persistence contexts that are created during this
                        conversation.
                     </p></li><li><p>
                        <code class="literal">pageflow</code> — a process definition
                        name of a jBPM process definition deployed via 
                        <code class="literal">org.jboss.seam.bpm.jbpm.pageflowDefinitions.</code>
                     </p></li></ul></div></dd><dt><a id="end-annotation"/><span class="term">
               <code class="literal">@End</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">End</span></pre><p>
                  Specifies that a long-running conversation ends when this 
                  method returns a non-null outcome without exception.
	          </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">beforeRedirect</code> — by default,
                        the conversation will not actually be destroyed until 
                        after any redirect has occurred. Setting 
                        <code class="literal">beforeRedirect=true</code> specifies that
                        the conversation should be destroyed at the end of 
                        the current request, and that the redirect will be 
                        processed in a new temporary conversation context. 
                     </p></li><li><p>
                        <code class="literal">root</code> — by default,
                        ending a nested conversation simply pops the conversation 
                        stack and resumes the outer conversation.  Setting 
                        <code class="literal">root=true</code> specifies that the root 
                        conversation should be destroyed which effectively destroys 
                        the entire conversation stack.  If the conversation is not
                        nested, the current conversation is simply ended.
                     </p></li></ul></div></dd><dt><a id="starttask-annotation"/><span class="term">
               <code class="literal">@StartTask</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">StartTask</span></pre><p>
                  "Starts" a jBPM task. Specifies that a long-running 
                  conversation begins when this method returns a non-null 
                  outcome without exception. This conversation is associated 
                  with the jBPM task specified in the named request 
                  parameter. Within the context of this conversation, a 
                  business process context is also defined, for the business 
                  process instance of the task instance. 
               </p><div class="itemizedlist"><ul><li><p>
                        The jBPM <code class="literal">TaskInstance</code> will be 
                        available in a request context variable named 
                        <code class="literal">taskInstance</code>. The jBPM 
                        <code class="literal">ProcessInstance</code> will be available 
                        in a request context variable named 
                        <code class="literal">processInstance</code>. (Of course, these 
                        objects are available for injection via 
                        <code class="literal">@In</code>.) 
                     </p></li><li><p>
                        <code class="literal">taskIdParameter</code> — the name 
                        of a request parameter which holds the id of the 
                        task. Default to <code class="literal">"taskId"</code>, which 
                        is also the default used by the Seam 
                        <code class="literal">taskList</code> JSF component. 
                     </p></li><li><p>
                        <code class="literal">flushMode</code> — set the flush 
                        mode of any Seam-managed Hibernate sessions or JPA 
                        persistence contexts that are created during this 
                        conversation.
		            </p></li></ul></div></dd><dt><a id="begintask-annotation"/><span class="term">
               <code class="literal">@BeginTask</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">BeginTask</span></pre><p>
                  Resumes work on an incomplete jBPM task. Specifies that a 
                  long-running conversation begins when this method returns a
                  non-null outcome without exception. This conversation is 
                  associated with the jBPM task specified in the named 
                  request parameter. Within the context of this conversation,
                  a business process context is also defined, for the 
                  business process instance of the task instance. 
               </p><div class="itemizedlist"><ul><li><p>
                        The jBPM <code class="literal">org.jbpm.taskmgmt.exe.TaskInstance</code>
                        will be available in a request context variable named 
                        <code class="literal">taskInstance</code>. The jBPM 
                        <code class="literal">org.jbpm.graph.exe.ProcessInstance</code> 
                        will be available in a request context variable named 
                        <code class="literal">processInstance</code>.
	                </p></li><li><p>
                        <code class="literal">taskIdParameter</code> — the name 
                        of a request parameter which holds the id of the 
                        task. Default to <code class="literal">"taskId"</code>, which 
                        is also the default used by the Seam 
                        <code class="literal">taskList</code> JSF component. 
                     </p></li><li><p>
                        <code class="literal">flushMode</code> — set the flush 
                        mode of any Seam-managed Hibernate sessions or JPA 
                        persistence contexts that are created during this
                        conversation. 
                     </p></li></ul></div></dd><dt><a id="endtask-annotation"/><span class="term">
               <code class="literal">@EndTask</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">EndTask</span></pre><p>
                  "Ends" a jBPM task. Specifies that a long-running 
                  conversation ends when this method returns a non-null 
                  outcome, and that the current task is complete. Triggers a 
                  jBPM transition. The actual transition triggered will be 
                  the default transition unless the application has called
                  <code class="literal">Transition.setName()</code> on the built-in 
                  component named <code class="literal">transition</code>. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">EndTask</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">transition</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;transitionName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Triggers the given jBPM transition. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">transition</code> — the name of the 
                        jBPM transition to be triggered when ending the task.
                         Defaults to the default transition. 
                     </p></li><li><p>
                        <code class="literal">beforeRedirect</code> — by default,
                        the conversation will not actually be destroyed until
                        after any redirect has occurred. Setting 
                        <code class="literal">beforeRedirect=true</code> specifies that
                        the conversation should be destroyed at the end of 
                        the current request, and that the redirect will be 
                        processed in a new temporary conversation context. 
                     </p></li></ul></div></dd><dt><a id="createprocess-annotation"/><span class="term">
               <code class="literal">@CreateProcess</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">CreateProcess</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">definition</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;process&nbsp;definition&nbsp;name&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Creates a new jBPM process instance when the method returns
                  a non-null outcome without exception. The 
                  <code class="literal">ProcessInstance</code> object will be available
                  in a context variable named 
                  <code class="literal">processInstance</code>. 
               </p><div class="itemizedlist"><ul><li><p>
                         <code class="literal">definition</code> — the name of the
                         jBPM process definition deployed via 
                         <code class="literal">org.jboss.seam.bpm.jbpm.processDefinitions</code>. 
                      </p></li></ul></div></dd><dt><a id="resumeprocess-annotation"/><span class="term">
               <code class="literal">@ResumeProcess</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">ResumeProcess</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">processIdParameter</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;processId&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Re-enters the scope of an existing jBPM process instance 
                  when the method returns a non-null outcome without 
                  exception. The <code class="literal">ProcessInstance</code> object 
                  will be available in a context variable named 
                  <code class="literal">processInstance</code>.
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">processIdParameter</code> — the name 
                        a request parameter holding the process id. Default to
                        <code class="literal">"processId"</code>. 
                     </p></li></ul></div></dd><dt><a id="transition-annotation"/><span class="term">
               <code class="literal">@Transition</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Transition</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;cancel&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Marks a method as signaling a transition in the current jBPM 
                  process instance whenever the method returns a non-null 
                  result.
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25642"/>31.5. Annotations for use with Seam JavaBean components in a J2EE environment</h2></div></div></div><p>
         Seam provides an annotation that lets you force a rollback of the JTA 
         transaction for certain action listener outcomes. 
      </p><div class="variablelist"><dl><dt><a id="transactional-annotation"/><span class="term">
               <code class="literal">@Transactional</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Transactional</span></pre><p>
                  Specifies that a JavaBean component should have a similar 
                  transactional behavior to the default behavior of a session
                  bean component. ie. method invocations should take place in a 
                  transaction, and if no transaction exists when the method is 
                  called, a transaction will be started just for that method. 
                  This annotation may be applied at either class or method level.
               </p><p>
                  <span class="emphasis"><em>Do not use this annotation on EJB 3.0 components,
                  use <code class="literal">@TransactionAttribute</code>!</em></span>
               </p></dd><dt><span class="term">
               <code class="literal">@ApplicationException</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">ApplicationException</span></pre><p> 
                  Synonym for javax.ejb.ApplicationException, for use in a pre 
                  Java EE 5 environment.  Applied to an exception to denote that
                  it is an application exception and should be reported to the 
                  client directly(i.e., unwrapped).
               </p><p>   
                  <span class="emphasis"><em>Do not use this annotation on EJB 3.0 components, 
                  use <code class="literal">@javax.ejb.ApplicationException</code> 
                  instead</em></span>.
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">rollback</code> — by default 
                        <code class="literal">false</code>, if <code class="literal">true</code>
                        this exception should set the transaction to rollback 
                        only 
                     </p></li><li><p>
                        <code class="literal">end</code> — by default 
                        <code class="literal">false</code>, if <code class="literal">true</code> this
                        exception should end the current long-running 
                        conversation
                     </p></li></ul></div></dd><dt><span class="term">
               <code class="literal">@Interceptors</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptors</span><!-- <br/> --><span class="java_separator">({</span><!-- <br/> --><span class="java_type">DVDInterceptor</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">CDInterceptor</span><!-- <br/> --><span class="java_separator">})</span></pre><p> 
                  Synonym for javax.interceptors.Interceptors, for use in a pre 
                  Java EE 5 environment. Note that this may only be used as a 
                  meta-annotation. Declares an ordered list of interceptors for 
                  a class or method.
               </p><p>   
                  <span class="emphasis"><em>Do not use this annotations on EJB 3.0 components, 
                  use <code class="literal">@javax.interceptor.Interceptors</code> 
                  instead</em></span>.
              </p></dd></dl></div><p>
         These annotations are mostly useful for JavaBean Seam components. If 
         you use EJB 3.0 components, you should use the standard Java EE5 
         annotation.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25732"/>31.6. Annotations for exceptions</h2></div></div></div><p>
         These annotations let you specify how Seam should handle an exception 
         that propagates out of a Seam component. 
      </p><div class="variablelist"><dl><dt><a id="redirect-annotation"/><span class="term">
               <code class="literal">@Redirect</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Redirect</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">viewId</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;error.jsp&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that the annotated exception causes a browser 
                  redirect to a specified view id. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">viewId</code> — specifies the JSF view
                        id to redirect to.  You can use EL here. 
                     </p></li><li><p>
                        <code class="literal">message</code> — a message to be 
                        displayed, default to the exception message.
                     </p></li><li><p>
                        <code class="literal">end</code> — specifies that the 
                        long-running conversation should end, default to 
                        <code class="literal">false</code>. 
                     </p></li></ul></div></dd><dt><a id="httperror-annotation"/><span class="term">
               <code class="literal">@HttpError</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">HttpError</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">errorCode</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">404</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that the annotated exception causes a HTTP error to 
                  be sent. 
               </p><div class="itemizedlist"><ul><li><p>
                        <code class="literal">errorCode</code> — the HTTP error 
                        code, default to <code class="literal">500</code>. 
                     </p></li><li><p>
                        <code class="literal">message</code> — a message to be sent 
                        with the HTTP error, default to the exception message. 
                     </p></li><li><p>
                        <code class="literal">end</code> — specifies that the 
                        long-running conversation should end, default to 
                        <code class="literal">false</code>. 
                     </p></li></ul></div></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25807"/>31.7. Annotations for Seam Remoting</h2></div></div></div><p>
         Seam Remoting requires that the local interface of a session bean be 
         annotated with the following annotation:
      </p><div class="variablelist"><dl><dt><a id="webremote-annotation"/><span class="term">
               <code class="literal">@WebRemote</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">WebRemote</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">exclude</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;path.to.exclude&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Indicates that the annotated method may be called from 
                  client-side JavaScript. The <code class="literal">exclude</code> 
                  property is optional and allows objects to be excluded from 
                  the result's object graph (see the <a class="xref" href="#remoting" title="Chapter 25. Remoting">Chapter 25, <i>Remoting</i></a> chapter for more 
                  details).
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25829"/>31.8. Annotations for Seam interceptors</h2></div></div></div><p>
         The following annotations appear on Seam interceptor classes. 
      </p><p>
         Please refer to the documentation for the EJB 3.0 specification for 
         information about the annotations required for EJB interceptor definition. 
      </p><div class="variablelist"><dl><dt><a id="interceptor-annotation"/><span class="term">
               <code class="literal">@Interceptor</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptor</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">stateless</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that this interceptor is stateless and Seam may 
                  optimize replication. 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptor</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">type</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">CLIENT</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that this interceptor is a "client-side" 
                  interceptor that is called before the EJB container.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptor</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">around</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_type">SomeInterceptor</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">OtherInterceptor</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">})</span></pre><p>
                  Specifies that this interceptor is positioned higher in 
                  the stack than the given interceptors.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Interceptor</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">within</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_type">SomeInterceptor</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">OtherInterceptor</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">})</span></pre><p> 
                  Specifies that this interceptor is positioned deeper in 
                  the stack than the given interceptors.
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25860"/>31.9. Annotations for asynchronicity</h2></div></div></div><p>
         The following annotations are used to declare an asynchronous method, 
         for example: 
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Asynchronous</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;scheduleAlert</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">Alert</span><!-- <br/> --><span class="java_plain">&nbsp;alert</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Expiration</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Date</span><!-- <br/> --><span class="java_plain">&nbsp;date</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">...</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Asynchronous</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Timer</span><!-- <br/> --><span class="java_plain">&nbsp;scheduleAlerts</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">Alert</span><!-- <br/> --><span class="java_plain">&nbsp;alert</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Expiration</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;date</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">IntervalDuration</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;interval</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><div class="variablelist"><dl><dt><a id="asynchronous-annotation"/><span class="term">
               <code class="literal">@Asynchronous</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Asynchronous</span></pre><p>
                  Specifies that the method call is processed asynchronously. 
               </p></dd><dt><a id="duration-annotation"/><span class="term">
               <code class="literal">@Duration</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Duration</span></pre><p>
                  Specifies that a parameter of the asynchronous call is the 
                  duration before the call is processed (or first processed for 
                  recurring calls). 
               </p></dd><dt><a id="expiration-annotation"/><span class="term">
               <code class="literal">@Expiration</code>
             </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Expiration</span></pre><p>
                   Specifies that a parameter of the asynchronous call is the 
                   datetime at which the call is processed (or first processed 
                   for recurring calls). 
                </p></dd><dt><a id="intervalduration-annotation"/><span class="term">
               <code class="literal">@IntervalDuration</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">IntervalDuration</span></pre><p>
                  Specifies that an asynchronous method call recurs, and that 
                  the annotation parameter is duration between recurrences. 
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25914"/>31.10. Annotations for use with JSF</h2></div></div></div><p> 
            The following annotations make working with JSF easier.
         </p><div class="variablelist"><dl><dt><span class="term">
                  <code class="literal">@Converter</code>
               </span></dt><dd><p>
                     Allows a Seam component to act as a JSF converter. The 
                     annotated class must be a Seam component, and must 
                     implement <code class="literal">javax.faces.convert.Converter</code>.
                  </p><div class="itemizedlist"><ul><li><p>
                           <code class="literal">id</code> — the JSF converter id. 
                           Defaults to the component name.
                        </p></li><li><p>
                           <code class="literal">forClass</code> — if specified, 
                           register this component as the default converter for 
                           a type.
                        </p></li></ul></div></dd><dt><span class="term">
                  <code class="literal">@Validator</code>
               </span></dt><dd><p>
                     Allows a Seam component to act as a JSF validator. The 
                     annotated class must be a Seam component, and must 
                     implement <code class="literal">javax.faces.validator.Validator</code>.
                  </p><div class="itemizedlist"><ul><li><p>
                           <code class="literal">id</code> — the JSF validator id. 
                           Defaults to the component name.
                        </p></li></ul></div></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25964"/>31.10.1. Annotations for use with <code class="literal">dataTable</code></h3></div></div></div><p>
               The following annotations make it easy to implement clickable 
               lists backed by a stateful session bean. They appear on 
               attributes. 
            </p><div class="variablelist"><dl><dt><a id="datamodel-annotation"/><span class="term">
                     <code class="literal">@DataModel</code>
                  </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">DataModel</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;variableName&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                     Outjects a property of type <code class="literal">List</code>, 
                     <code class="literal">Map</code>, <code class="literal">Set</code> or 
                     <code class="literal">Object[]</code> as a JSF 
                     <code class="literal">DataModel</code> into the scope of the owning 
                     component (or the <code class="literal">EVENT</code> scope if the 
                     owning component is <code class="literal">STATELESS</code>). In the 
                     case of <code class="literal">Map</code>, each row of the 
                     <code class="literal">DataModel</code> is a 
                     <code class="literal">Map.Entry</code>. 
                  </p><div class="itemizedlist"><ul><li><p>
                           <code class="literal">value</code> — name of the 
                           conversation context variable. Default to the 
                           attribute name. 
                        </p></li><li><p>
                           <code class="literal">scope</code> — if 
                           <code class="literal">scope=ScopeType.PAGE</code> is explicitly
                           specified, the <code class="literal">DataModel</code> will be 
                           kept in the <code class="literal">PAGE</code> context. 
                        </p></li></ul></div></dd><dt><a id="datamodelselection-annotation"/><span class="term">
                  <code class="literal">@DataModelSelection</code>
               </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">DataModelSelection</span></pre><p> 
                     Injects the selected value from the JSF 
                     <code class="literal">DataModel</code> (this is the element of the 
                     underlying collection, or the map value). If only one 
                     <code class="literal">@DataModel</code> attribute is defined for a 
                     component, the selected value from that 
                     <code class="literal">DataModel</code> will be injected. Otherwise, 
                     the component name of each 
                     <code class="literal">@DataModel</code> must be specified in the 
                     value attribute for each 
                     <code class="literal">@DataModelSelection</code>.
                  </p><p> 
                     If <code class="literal">PAGE</code> scope is specified on the 
                     associated <code class="literal">@DataModel</code>, then, in addition
                     to the DataModel Selection being injected, the associated 
                     DataModel will also be injected.  In this case, if the 
                     property annotated with <code class="literal">@DataModel</code> is
                     a getter method, then a setter method for the property must
                     also be part of the Business API of the containing Seam 
                     Component.
                  </p><div class="itemizedlist"><ul><li><p>
                           <code class="literal">value</code> — name of the 
                           conversation context variable. Not needed if there is
                           exactly one <code class="literal">@DataModel</code> in the 
                           component.
                        </p></li></ul></div></dd><dt><a id="datamodelselectionindex-annotation"/><span class="term">
                  <code class="literal">@DataModelSelectionIndex</code>
               </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">DataModelSelectionIndex</span></pre><p>
                     Exposes the selection index of the JSF 
                     <code class="literal">DataModel</code> as an attribute of the 
                     component (this is the row number of the underlying 
                     collection, or the map key). If only one
                     <code class="literal">@DataModel</code> attribute is defined for a 
                     component, the selected value from that 
                     <code class="literal">DataModel</code> will be injected. Otherwise, 
                     the component name of each <code class="literal">@DataModel</code> 
                     must be specified in the value attribute for each 
                     <code class="literal">@DataModelSelectionIndex</code>.
                  </p><div class="itemizedlist"><ul><li><p>
                           <code class="literal">value</code> — name of the 
                           conversation context variable. Not needed if there 
                           is exactly one <code class="literal">@DataModel</code> in the 
                           component. 
                        </p></li></ul></div></dd></dl></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26118"/>31.11. Meta-annotations for databinding</h2></div></div></div><p> 
         These meta-annotations make it possible to implement similar 
         functionality to <code class="literal">@DataModel</code> and 
         <code class="literal">@DataModelSelection</code> for other datastructures apart
         from lists.
      </p><div class="variablelist"><dl><dt><a id="databinderclass-annotation"/><span class="term">
               <code class="literal">@DataBinderClass</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">DataBinderClass</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">DataModelBinder</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that an annotation is a databinding annotation. 
               </p></dd><dt><a id="dataselectorclass-annotation"/><span class="term">
               <code class="literal">@DataSelectorClass</code>
             </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">DataSelectorClass</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">DataModelSelector</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                   Specifies that an annotation is a dataselection annotation. 
                </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26152"/>31.12. Annotations for packaging</h2></div></div></div><p>
         This annotation provides a mechanism for declaring information about a 
         set of components that are packaged together. It can be applied to any 
         Java package.
      </p><div class="variablelist"><dl><dt><a id="namespace-annotation"/><span class="term">
               <code class="literal">@Namespace</code>
            </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Namespace</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;http://jboss.org/schema/seam/example/seampay&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies that components in the current package are associated
                  with the given namespace. The declared namespace can be used as
                  an XML namespace in a <code class="literal">components.xml</code> file to
                  simplify application configuration.
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Namespace</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">value</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;http://jboss.org/schema/seam/core&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;prefix</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">&quot;org.jboss.seam.core&quot;</span><!-- <br/> --><span class="java_separator">)</span></pre><p>
                  Specifies a namespace to associate with a given package. 
                  Additionally, it specifies a component name prefix to be 
                  applied to component names specified in the XML file. For 
                  example, an XML element named <code class="literal">init</code> that is 
                  associated with this namespace would be understood to actually 
                  refer to a component named 
                  <code class="literal">org.jboss.seam.core.init</code>. 
               </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26182"/>31.13. Annotations for integrating with the servlet container</h2></div></div></div><p>
         These annotations allow you to integrate your Seam components with the 
         servlet container.
      </p><div class="variablelist"><dl><dt><span class="term">
               <code class="literal">@Filter</code>
             </span></dt><dd><p>
                   Use the Seam component (which implements 
                   <code class="literal">javax.servlet.Filter</code>) annotated with 
                   <code class="literal">@Filter</code> as a servlet filter.  It will be 
                   executed by Seam's master filter.
                </p><div class="itemizedlist"><ul><li><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Filter</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">around</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;seamComponent&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">&quot;otherSeamComponent&quot;</span><!-- <br/> --><span class="java_separator">})</span></pre><p>
                         Specifies that this filter is positioned higher in the 
                         stack than the given filters.
                     </p></li><li><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Filter</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">within</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_literal">&quot;seamComponent&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">&quot;otherSeamComponent&quot;</span><!-- <br/> --><span class="java_separator">})</span></pre><p>
                        Specifies that this filter is positioned deeper in the 
                        stack than the given filters. 
                     </p></li></ul></div></dd></dl></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="components"/>Chapter 32. Built-in Seam components</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e26230">32.1. Context injection components</a></span></dt><dt><span class="section"><a href="#d0e26260">32.2. JSF-related components</a></span></dt><dt><span class="section"><a href="#d0e26393">32.3. Utility components</a></span></dt><dt><span class="section"><a href="#d0e26496">32.4. Components for internationalization and themes</a></span></dt><dt><span class="section"><a href="#d0e26697">32.5. Components for controlling conversations</a></span></dt><dt><span class="section"><a href="#d0e26845">32.6. jBPM-related components</a></span></dt><dt><span class="section"><a href="#d0e27074">32.7. Security-related components</a></span></dt><dt><span class="section"><a href="#d0e27100">32.8. JMS-related components</a></span></dt><dt><span class="section"><a href="#components.mail">32.9. Mail-related components</a></span></dt><dt><span class="section"><a href="#d0e27202">32.10. Infrastructural components</a></span></dt><dt><span class="section"><a href="#d0e27495">32.11. Miscellaneous components</a></span></dt><dt><span class="section"><a href="#d0e27532">32.12. Special components</a></span></dt></dl></div><p>
        This chapter describes Seam's built-in components, and their
        configuration properties. The built-in components will be created even if they
        are not listed in your <code class="literal">components.xml</code> file, but if you need to
        override default properties or specify more than one component of a certain type,
        <code class="literal">components.xml</code> is used.
    </p><p>
        Note that you can replace any of the built in components with
        your own implementations simply by specifying the name of one 
        of the built in components on your own class using 
        <code class="literal">@Name</code>.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26230"/>32.1. Context injection components</h2></div></div></div><p>
            The first set of built in components exist purely to support
            injection of various contextual objects. For example, the
            following component instance variable would have the Seam
            session context object injected:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Context</span><!-- <br/> --><span class="java_plain">&nbsp;sessionContext</span><!-- <br/> --><span class="java_separator">;</span></pre><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.contexts</code></span></dt><dd><p>
                        Component that provides access to Seam Context objects, for
                        example <code class="literal">org.jboss.seam.core.contexts.sessionContext['user']</code>.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.facesContext</code></span></dt><dd><p>
                        Manager component for the <code class="literal">FacesContext</code> context 
                        object (not a true Seam context)
                    </p></dd></dl></div><p>
            All of these components are always installed.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26260"/>32.2. JSF-related components</h2></div></div></div><p>
            The following set of components are provided to supplement JSF.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.faces.dateConverter</code></span></dt><dd><p>
                        Provides a default JSF converter for properties of type
                        <code class="literal">java.util.Date</code>.
                    </p><p>
                        This converter is automatically registered with JSF. It
                        is provided to save a developer from having to specify
                        a DateTimeConverter on an input field or page
                        parameter. By default, it assumes the type to be a date
                        (as opposed to a time or date plus time) and uses the
                        short input style adjusted to the Locale of the user.
                        For Locale.US, the input pattern is mm/DD/yy. However,
                        to comply with Y2K, the year is changed from two digits
                        to four (e.g., mm/DD/yyyy).
                    </p><p>
                        It's possible to override the input pattern globally
                        using component configuration. Consult the JavaDoc for
                        this class to see examples.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.facesMessages</code></span></dt><dd><p>
                        Allows faces success messages to propagate across a browser redirect.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">add(FacesMessage facesMessage)</code> — add 
                            a faces message, which will be displayed during the next render
                            response phase that occurs in the current conversation.
                        </p></li><li><p>
                            <code class="literal">add(String messageTemplate)</code> — add 
                            a faces message, rendered from the given message template
                            which may contain EL expressions.
                        </p></li><li><p>
                            <code class="literal">add(Severity severity, String messageTemplate)</code> — 
                            add a faces message, rendered from the given message template
                            which may contain EL expressions.
                        </p></li><li><p>
                            <code class="literal">addFromResourceBundle(String key)</code> — 
                            add a faces message, rendered from a message template defined
                            in the Seam resource bundle which may contain EL expressions.
                        </p></li><li><p>
                            <code class="literal">addFromResourceBundle(Severity severity, String key)</code> — 
                            add a faces message, rendered from a message template defined
                            in the Seam resource bundle which may contain EL expressions.
                        </p></li><li><p>
                            <code class="literal">clear()</code> — clear all messages.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.redirect</code></span></dt><dd><p>
                        A convenient API for performing redirects with parameters (this
                        is especially useful for bookmarkable search results screens).
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">redirect.viewId</code> — the JSF view id
                            to redirect to.
                        </p></li><li><p>
                            <code class="literal">redirect.conversationPropagationEnabled</code> — 
                            determines whether the conversation will propagate across the 
                            redirect.
                        </p></li><li><p>
                            <code class="literal">redirect.parameters</code> — a map of
                            request parameter name to value, to be passed in the redirect
                            request.
                        </p></li><li><p>
                            <code class="literal">execute()</code> — perform the redirect
                            immediately.
                        </p></li><li><p>
                            <code class="literal">captureCurrentRequest()</code> — stores 
                            the view id and request parameters of the current GET 
                            request (in the conversation context), for later use
                            by calling <code class="literal">execute()</code>.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.httpError</code></span></dt><dd><p>
                        A convenient API for sending HTTP errors.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.ui.renderStampStore</code></span></dt><dd><p>
                        A component (session-scoped by default) responsible for maintaining a
                        collection of render stamps. A render stamp is an indicator as to whether a
                        form which was rendered has been submitted. This store is useful when the
                        client-side state saving method of JSF is being used because it puts the
                        determination of whether a form has been posted in the control of the server
                        rather than in the component tree which is maintained on the client.
                    </p><p>
                        To unbind this check from the session (which is one of the main design goals
                        of client-side state saving) an implementation must be provided that stores
                        the render stamps in the application (valid as long as the application is
                        running) or the database (valid across server restarts).
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">maxSize</code> — The maximum number of stamps
                            to be kept in the store. Default: 100
                        </p></li></ul></div></dd></dl></div><p>
            These components are installed when the class <code class="literal">javax.faces.context.FacesContext</code>
            is available on the classpath.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26393"/>32.3. Utility components</h2></div></div></div><p>
            These components are merely useful.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.events</code></span></dt><dd><p>
                        An API for raising events that can be observed via
                        <code class="literal">@Observer</code> methods, or method
                        bindings in <code class="literal">components.xml</code>.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">raiseEvent(String type)</code> — raise
                            an event of a particular type and distribute to all
                            observers.
                        </p></li><li><p>
                            <code class="literal">raiseAsynchronousEvent(String type)</code> — 
                            raise an event to be processed asynchronously by the EJB3
                            timer service.
                        </p></li><li><p>
                            <code class="literal">raiseTimedEvent(String type, ....)</code> — 
                            schedule an event to be processed asynchronously by the EJB3
                            timer service.
                        </p></li><li><p>
                            <code class="literal">addListener(String type, String methodBinding)</code> 
                            — add an observer for a particular event type.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.interpolator</code></span></dt><dd><p>
                        An API for interpolating the values of JSF EL expressions in
                        Strings.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">interpolate(String template)</code> — scan
                            the template for JSF EL expressions of the form <code class="literal">#{...}</code>
                            and replace them with their evaluated values.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.expressions</code></span></dt><dd><p>
                        An API for creating value and method bindings.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">createValueBinding(String expression)</code> — create
                            a value binding object.
                        </p></li><li><p>
                            <code class="literal">createMethodBinding(String expression)</code> — create
                            a method binding object.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.pojoCache</code></span></dt><dd><p>
                        Manager component for a JBoss Cache <code class="literal">PojoCache</code> 
                        instance.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">pojoCache.cfgResourceName</code> — the name of 
                            the configuration file. Default to <code class="literal">treecache.xml</code>.
                        </p></li></ul></div></dd></dl></div><p>
            All of these components are always installed.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26496"/>32.4. Components for internationalization and themes</h2></div></div></div><p>
            The next group of components make it easy to build internationalized user interfaces
            using Seam.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.locale</code></span></dt><dd><p>
                        The Seam locale.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.international.timezone</code></span></dt><dd><p>
                        The Seam timezone. The timezone is session scoped.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.resourceBundle</code></span></dt><dd><p>
                        The Seam resource bundle. The resource bundle is stateless. The Seam
                        resource bundle performs a depth-first search for keys in a list of Java
                        resource bundles.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.resourceLoader</code></span></dt><dd><p>
                        The resource loader provides access to application resources and resource bundles.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">resourceLoader.bundleNames</code> — the names of 
                            the Java resource bundles to search when the Seam resource bundle is
                            used. Default to <code class="literal">messages</code>.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.international.localeSelector</code></span></dt><dd><p>
                        Supports selection of the locale either at configuration time, 
                        or by the user at runtime.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">select()</code> — select the specified locale.
                        </p></li><li><p>
                            <code class="literal">localeSelector.locale</code> — the actual
                            <code class="literal">java.util.Locale</code>.
                        </p></li><li><p>
                            <code class="literal">localeSelector.localeString</code> — the 
                            stringified representation of the locale.
                        </p></li><li><p>
                            <code class="literal">localeSelector.language</code> — the language for
                            the specified locale.
                        </p></li><li><p>
                            <code class="literal">localeSelector.country</code> — the country for
                            the specified locale.
                        </p></li><li><p>
                            <code class="literal">localeSelector.variant</code> — the variant for
                            the specified locale.
                        </p></li><li><p>
                            <code class="literal">localeSelector.supportedLocales</code> — a list
                            of <code class="literal">SelectItem</code>s representing the supported locales 
                            listed in <code class="literal">jsf-config.xml</code>.
                        </p></li><li><p>
                            <code class="literal">localeSelector.cookieEnabled</code> — specifies
                            that the locale selection should be persisted via a cookie.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.international.timezoneSelector</code></span></dt><dd><p>
                        Supports selection of the timezone either at configuration time, 
                        or by the user at runtime.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">select()</code> — select the specified locale.
                        </p></li><li><p>
                            <code class="literal">timezoneSelector.timezone</code> — the actual
                            <code class="literal">java.util.TimeZone</code>.
                        </p></li><li><p>
                            <code class="literal">timezoneSelector.timeZoneId</code> — the 
                            stringified representation of the timezone.
                        </p></li><li><p>
                            <code class="literal">timezoneSelector.cookieEnabled</code> — specifies
                            that the timezone selection should be persisted via a cookie.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.international.messages</code></span></dt><dd><p>
                        A map containing internationalized messages rendered from message
                        templates defined in the Seam resource bundle.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.theme.themeSelector</code></span></dt><dd><p>
                        Supports selection of the theme either at configuration time, 
                        or by the user at runtime.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">select()</code> — select the specified theme.
                        </p></li><li><p>
                            <code class="literal">theme.availableThemes</code> — the list of
                            defined themes.
                        </p></li><li><p>
                            <code class="literal">themeSelector.theme</code> — the selected
                            theme.
                        </p></li><li><p>
                            <code class="literal">themeSelector.themes</code> — a list
                            of <code class="literal">SelectItem</code>s representing the defined
                            themes.
                        </p></li><li><p>
                            <code class="literal">themeSelector.cookieEnabled</code> — specifies
                            that the theme selection should be persisted via a cookie.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.theme.theme</code></span></dt><dd><p>
                        A map containing theme entries.
                    </p></dd></dl></div><p>
            All of these components are always installed.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26697"/>32.5. Components for controlling conversations</h2></div></div></div><p>
            The next group of components allow control of conversations by the application or 
            user interface.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.conversation</code></span></dt><dd><p>
                        API for application control of attributes of the current Seam conversation.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">getId()</code> — returns the current conversation id
                        </p></li><li><p>
                            <code class="literal">isNested()</code> — is the current conversation a
                            nested conversation?
                        </p></li><li><p>
                            <code class="literal">isLongRunning()</code> — is the current conversation a
                            long-running conversation?
                        </p></li><li><p>
                            <code class="literal">getId()</code> — returns the current conversation id
                        </p></li><li><p>
                            <code class="literal">getParentId()</code> — returns the conversation id
                            of the parent conversation
                        </p></li><li><p>
                            <code class="literal">getRootId()</code> — returns the conversation id
                            of the root conversation
                        </p></li><li><p>
                            <code class="literal">setTimeout(int timeout)</code> — sets the timeout
                            for the current conversation
                        </p></li><li><p>
                            <code class="literal">setViewId(String outcome)</code> — sets the view id
                            to be used when switching back to the current conversation from the 
                            conversation switcher, conversation list, or breadcrumbs.
                        </p></li><li><p>
                            <code class="literal">setDescription(String description)</code> — sets the 
                            description of the current conversation to be displayed in the 
                            conversation switcher, conversation list, or breadcrumbs.
                        </p></li><li><p>
                            <code class="literal">redirect()</code> — redirect to the last well-defined
                            view id for this conversation (useful after login challenges).
                        </p></li><li><p>
                            <code class="literal">leave()</code> — exit the scope of this conversation,
                            without actually ending the conversation.
                        </p></li><li><p>
                            <code class="literal">begin()</code> — begin a long-running conversation
                            (equivalent to <code class="literal">@Begin</code>).
                        </p></li><li><p>
                            <code class="literal">beginPageflow(String pageflowName)</code> — begin a 
                            long-running conversation with a pageflow (equivalent to 
                            <code class="literal">@Begin(pageflow="...")</code>).
                        </p></li><li><p>
                            <code class="literal">end()</code> — end a long-running conversation
                            (equivalent to <code class="literal">@End</code>).
                        </p></li><li><p>
                            <code class="literal">pop()</code> — pop the conversation stack, returning
                            to the parent conversation.
                        </p></li><li><p>
                            <code class="literal">root()</code> — return to the root conversation of 
                            the conversation stack.
                        </p></li><li><p>
                            <code class="literal">changeFlushMode(FlushModeType flushMode)</code> — change 
                            the flush mode of the conversation.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.conversationList</code></span></dt><dd><p>
                        Manager component for the conversation list.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.conversationStack</code></span></dt><dd><p>
                        Manager component for the conversation stack (breadcrumbs).
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.switcher</code></span></dt><dd><p>
                        The conversation switcher.
                    </p></dd></dl></div><p>
            All of these components are always installed.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e26845"/>32.6. jBPM-related components</h2></div></div></div><p>
            These components are for use with jBPM.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.pageflow.pageflow</code></span></dt><dd><p>
                        API control of Seam pageflows.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">isInProcess()</code> — returns <code class="literal">true</code>
                            if there is currently a pageflow in process
                        </p></li><li><p>
                            <code class="literal">getProcessInstance()</code> — returns jBPM
                            <code class="literal">ProcessInstance</code> for the current pageflow
                        </p></li><li><p>
                            <code class="literal">begin(String pageflowName)</code> — begin a pageflow
                            in the context of the current conversation
                        </p></li><li><p>
                            <code class="literal">reposition(String nodeName)</code> — reposition the
                            current pageflow to a particular node
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.actor</code></span></dt><dd><p>
                        API for application control of attributes of the jBPM actor associated
                        with the current session.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">setId(String actorId)</code> — sets the jBPM
                            actor id of the current user.
                        </p></li><li><p>
                            <code class="literal">getGroupActorIds()</code> — returns a 
                            <code class="literal">Set</code> to which jBPM actor ids for the
                            current users groups may be added.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.transition</code></span></dt><dd><p>
                        API for application control of the jBPM transition for the current
                        task.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">setName(String transitionName)</code> — sets the 
                            jBPM transition name to be used when the current task is ended
                            via <code class="literal">@EndTask</code>.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.businessProcess</code></span></dt><dd><p>
                        API for programmatic control of the association between the
                        conversation and business process.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">businessProcess.taskId</code> — the id of the task 
                            associated with the current conversation.
                        </p></li><li><p>
                            <code class="literal">businessProcess.processId</code> — the id of the process
                            associated with the current conversation.
                        </p></li><li><p>
                            <code class="literal">businessProcess.hasCurrentTask()</code> — is a task
                            instance associated with the current conversation?
                        </p></li><li><p>
                            <code class="literal">businessProcess.hasCurrentProcess()</code> — is a process
                            instance associated with the current conversation.
                        </p></li><li><p>
                            <code class="literal">createProcess(String name)</code> — create an
                            instance of the named process definition and associate it with
                            the current conversation.
                        </p></li><li><p>
                            <code class="literal">startTask()</code> — start the task 
                            associated with the current conversation.
                        </p></li><li><p>
                            <code class="literal">endTask(String transitionName)</code> — end the task 
                            associated with the current conversation.
                        </p></li><li><p>
                            <code class="literal">resumeTask(Long id)</code> — associate the task with
                            the given id with the current conversation.
                        </p></li><li><p>
                            <code class="literal">resumeProcess(Long id)</code> — associate the process 
                            with the given id with the current conversation.
                        </p></li><li><p>
                            <code class="literal">transition(String transitionName)</code> — trigger
                            the transition.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.taskInstance</code></span></dt><dd><p>
                        Manager component for the jBPM <code class="literal">TaskInstance</code>.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.processInstance</code></span></dt><dd><p>
                        Manager component for the jBPM <code class="literal">ProcessInstance</code>.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.jbpmContext</code></span></dt><dd><p>
                        Manager component for an event-scoped <code class="literal">JbpmContext</code>.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.taskInstanceList</code></span></dt><dd><p>
                        Manager component for the jBPM task list.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.pooledTaskInstanceList</code></span></dt><dd><p>
                        Manager component for the jBPM pooled task list.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.taskInstanceListForType</code></span></dt><dd><p>
                        Manager component for the jBPM task lists.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.pooledTask</code></span></dt><dd><p>
                        Action handler for pooled task assignment.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.processInstanceFinder</code></span></dt><dd><p>
                        Manager for the process instance task list.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.processInstanceList</code></span></dt><dd><p>
                         The process instance task list.
                    </p></dd></dl></div><p>
            All of these components are installed whenever the component
            <code class="literal">org.jboss.seam.bpm.jbpm</code> is installed.
        </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e27074"/>32.7. Security-related components</h2></div></div></div><p>
            These components relate to web-tier security.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.web.userPrincipal</code></span></dt><dd><p>
                        Manager component for the current user <code class="literal">Principal</code>.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.web.isUserInRole</code></span></dt><dd><p>
                        Allows JSF pages to choose to render a control, depending upon
                        the roles available to the current principal.
                        <code class="literal">&lt;h:commandButton value="edit" rendered="#{isUserInRole['admin']}"/&gt;</code>.
                    </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e27100"/>32.8. JMS-related components</h2></div></div></div><p>
            These components are for use with managed <code class="literal">TopicPublisher</code>s
            and <code class="literal">QueueSender</code>s (see below).
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.jms.queueSession</code></span></dt><dd><p>
                        Manager component for a JMS <code class="literal">QueueSession</code> .
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.jms.topicSession</code></span></dt><dd><p>
                        Manager component for a JMS <code class="literal">TopicSession</code> .
                    </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="components.mail"/>32.9. Mail-related components</h2></div></div></div><p>
            These components are for use with Seam's Email support 
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.mail.mailSession</code></span></dt><dd><p>
                        Manager component for a JavaMail <code class="literal">Session</code>. The
                        session can be either looked up in the JNDI context (by setting the
                        <code class="literal">sessionJndiName</code> property) or it can created from the
                        configuration options in which case the <code class="literal">host</code> is
                        mandatory. 
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.host</code> — the hostname of the SMTP server to use
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.port</code> — the port of the SMTP server to use
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.username</code> —  the username to use to connect to the SMTP server.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.password</code> — the password to use to connect to the SMTP server
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.debug</code> — enable JavaMail debugging (very verbose)
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.ssl</code> — enable SSL connection to SMTP (will default to port 465)
                        </p><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.tls</code> — by default true, enable TLS support in the mail session
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.mail.mailSession.sessionJndiName</code> — name under which a javax.mail.Session is bound to JNDI.
                            If supplied, all other properties will be ignored.
                        </p></li></ul></div></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e27202"/>32.10. Infrastructural components</h2></div></div></div><p>
            These components provide critical platform infrastructure. You can install a component
            which isn't installed by default by setting <code class="literal">install="true"</code> on the 
            component in <code class="literal">components.xml</code>.
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.init</code></span></dt><dd><p>
                        Initialization settings for Seam. Always installed.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.core.init.jndiPattern</code> — the JNDI
                            pattern used for looking up session beans
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.core.init.debug</code> — enable Seam
                            debug mode. This should be set to false when in production. You may see
                            errors if the system is placed under any load and debug is enabled.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.core.init.clientSideConversations</code> — 
                            if set to <code class="literal">true</code>, Seam will save conversation context
                            variables in the client instead of in the <code class="literal">HttpSession</code>.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.manager</code></span></dt><dd><p>
                        Internal component for Seam page and conversation context management. 
                        Always installed.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.core.manager.conversationTimeout</code> — 
                            the conversation context timeout in milliseconds.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.core.manager.concurrentRequestTimeout</code> — 
                            maximum wait time for a thread attempting to gain a lock on the long-running 
                            conversation context.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.core.manager.conversationIdParameter</code> — 
                            the request parameter used to propagate the conversation id, default
                            to <code class="literal">conversationId</code>.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.core.manager.conversationIsLongRunningParameter</code> — 
                            the request parameter used to propagate information about whether the conversation
                            is long-running, default to <code class="literal">conversationIsLongRunning</code>.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.core.manager.defaultFlushMode</code> — 
                            set the flush mode set by default on any Seam Managed Persistence Context.
                            By default <code class="literal">AUTO</code>.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.navigation.pages</code></span></dt><dd><p>
                        Internal component for Seam workspace management. Always installed.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.navigation.pages.noConversationViewId</code> 
                            — global setting for the view id to redirect to when a 
                            conversation entry is not found on the server side.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.navigation.pages.loginViewId</code> 
                            — global setting for the view id to redirect to when an 
                            unauthenticated user tries to access a protected view.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.navigation.pages.httpPort</code> 
                            — global setting for the port to use when the http scheme 
                            is requested.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.navigation.pages.httpsPort</code> 
                            — global setting for the port to use when the https scheme 
                            is requested.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.navigation.pages.resources</code> 
                            — a list of resources to search for <code class="literal">pages.xml</code>
                            style resources.  Defaults to <code class="literal">WEB-INF/pages.xml</code>.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.bpm.jbpm</code></span></dt><dd><p>
                        Bootstraps a <code class="literal">JbpmConfiguration</code>. Install as class 
                        <code class="literal">org.jboss.seam.bpm.Jbpm</code>. 
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.bpm.jbpm.processDefinitions</code> — 
                            a list of resource names of jPDL files to be used for orchestration
                            of business processes.
                        </p></li><li><p>
                            <code class="literal">org.jboss.seam.bpm.jbpm.pageflowDefinitions</code> — 
                            a list of resource names of jPDL files to be used for orchestration
                            of conversation page flows.
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.conversationEntries</code></span></dt><dd><p>
                        Internal session-scoped component recording the active long-running conversations
                        between requests.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.facesPage</code></span></dt><dd><p>
                        Internal page-scoped component recording the conversation context associated
                        with a page.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.persistence.persistenceContexts</code></span></dt><dd><p>
                        Internal component recording the persistence contexts which were used in
                        the current conversation.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.jms.queueConnection</code></span></dt><dd><p>
                        Manages a JMS <code class="literal">QueueConnection</code>. Installed whenever
                        managed <code class="literal">QueueSender</code> is installed.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.jms.queueConnection.queueConnectionFactoryJndiName</code> 
                            — the JNDI name of a JMS <code class="literal">QueueConnectionFactory</code>. Default
                            to <code class="literal">UIL2ConnectionFactory</code>
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.jms.topicConnection</code></span></dt><dd><p>
                        Manages a JMS <code class="literal">TopicConnection</code>. Installed whenever
                        managed <code class="literal">TopicPublisher</code> is installed.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">org.jboss.seam.jms.topicConnection.topicConnectionFactoryJndiName</code> 
                            — the JNDI name of a JMS <code class="literal">TopicConnectionFactory</code>. Default
                            to <code class="literal">UIL2ConnectionFactory</code>
                        </p></li></ul></div></dd><dt><span class="term"><code class="literal">org.jboss.seam.persistence.persistenceProvider</code></span></dt><dd><p>
                        Abstraction layer for non-standardized features of JPA provider.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.core.validators</code></span></dt><dd><p>
                        Caches instances of Hibernate Validator <code class="literal">ClassValidator</code>.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.validation</code></span></dt><dd><p>
                        Allows the application to determine whether validation
                        failed or was successful.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.debug.introspector</code></span></dt><dd><p>
                        Support for the Seam Debug Page.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.debug.contexts</code></span></dt><dd><p>
                        Support for the Seam Debug Page.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.exception.exceptions</code></span></dt><dd><p>
                        Internal component for exception handling.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.transaction.transaction</code></span></dt><dd><p>
                         API for controlling transactions and abstracting the underlying
                         transaction management implementation behind a JTA-compatible
                         interface.
                    </p></dd><dt><span class="term"><code class="literal">org.jboss.seam.faces.safeActions</code></span></dt><dd><p>
                        Decides if an action expression in an incoming URL is safe.  This 
                        is done by checking that the action expression exists in the view.
                    </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e27495"/>32.11. Miscellaneous components</h2></div></div></div><p>
            These components don't fit into 
        </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.async.dispatcher</code></span></dt><dd><p>
                        Dispatcher stateless session bean for asynchronous methods.
                    </p></dd></dl></div><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.image</code></span></dt><dd><p>
                         Image manipulation and interrogation.
                    </p></dd></dl></div><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.pojoCache</code></span></dt><dd><p>
                        Manager component for a PojoCache instance.
                    </p></dd></dl></div><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.jboss.seam.core.uiComponent</code></span></dt><dd><p>
                        Manages a map of UIComponents keyed by component id.
                    </p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e27532"/>32.12. Special components</h2></div></div></div><p>
            Certain special Seam component classes are installable multiple times under names
            specified in the Seam configuration. For example, the following lines in 
            <code class="literal">components.xml</code> install and configure two Seam components:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;bookingDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.ManagedPersistenceContext&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitJndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/comp/emf/bookingPersistence</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userDatabase&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.persistence.ManagedPersistenceContext&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;persistenceUnitJndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/comp/emf/userPersistence</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The Seam component names are <code class="literal">bookingDatabase</code> and 
            <code class="literal">userDatabase</code>.
        </p><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>&lt;entityManager&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.persistence.ManagedPersistenceContext</code></span></dt><dd><p>
                        Manager component for a conversation scoped managed <code class="literal">EntityManager</code>
                        with an extended persistence context.
                    </p><div class="itemizedlist"><ul><li><p>
                           <span class="emphasis"><em>&lt;entityManager&gt;</em></span>.entityManagerFactory 
                            — a value binding expression that evaluates to an instance of 
                            <code class="literal">EntityManagerFactory</code>.
                        </p><p>
                           <span class="emphasis"><em>&lt;entityManager&gt;</em></span>.persistenceUnitJndiName 
                            — the JNDI name of the entity manager factory, default to 
                            java:/<span class="emphasis"><em>&lt;managedPersistenceContext&gt;</em></span>.
                        </p></li></ul></div></dd><dt><span class="term"><span class="emphasis"><em>&lt;entityManagerFactory&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.persistence.EntityManagerFactory</code></span></dt><dd><p>
                        Manages a JPA <code class="literal">EntityManagerFactory</code>. This is most useful
                        when using JPA outside of an EJB 3.0 supporting environment.
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">entityManagerFactory.persistenceUnitName</code> — 
                            the name of the persistence unit.
                        </p></li></ul></div><p>
                        See the API JavaDoc for further configuration properties.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>&lt;session&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.persistence.ManagedSession</code></span></dt><dd><p>
                        Manager component for a conversation scoped managed Hibernate <code class="literal">Session</code>.
                    </p><div class="itemizedlist"><ul><li><p>
                           <span class="emphasis"><em>&lt;session&gt;</em></span>.sessionFactory 
                            — a value binding expression that evaluates to an instance of 
                            <code class="literal">SessionFactory</code>.
                        </p><p>
                           <span class="emphasis"><em>&lt;session&gt;</em></span>.sessionFactoryJndiName 
                            — the JNDI name of the session factory, default to 
                            java:/<span class="emphasis"><em>&lt;managedSession&gt;</em></span>.
                        </p></li></ul></div></dd><dt><span class="term"><span class="emphasis"><em>&lt;sessionFactory&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.persistence.HibernateSessionFactory</code></span></dt><dd><p>
                        Manages a Hibernate <code class="literal">SessionFactory</code>.  
                    </p><div class="itemizedlist"><ul><li><p>
                            <code class="literal">&lt;sessionFactory&gt;.cfgResourceName</code> — 
                            the path to the configuration file. Default to <code class="literal">hibernate.cfg.xml</code>.
                        </p></li></ul></div><p>
                        See the API JavaDoc for further configuration properties.
                    </p></dd><dt><span class="term"><span class="emphasis"><em>&lt;managedQueueSender&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.jms.ManagedQueueSender</code></span></dt><dd><p>
                        Manager component for an event scoped managed JMS <code class="literal">QueueSender</code>.
                    </p><div class="itemizedlist"><ul><li><p>
                           <span class="emphasis"><em>&lt;managedQueueSender&gt;</em></span>.queueJndiName 
                            — the JNDI name of the JMS queue.
                        </p></li></ul></div></dd><dt><span class="term"><span class="emphasis"><em>&lt;managedTopicPublisher&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.jms.ManagedTopicPublisher</code></span></dt><dd><p>
                        Manager component for an event scoped managed JMS <code class="literal">TopicPublisher</code>.
                    </p><div class="itemizedlist"><ul><li><p>
                           <span class="emphasis"><em>&lt;managedTopicPublisher&gt;</em></span>.topicJndiName 
                            — the JNDI name of the JMS topic.
                        </p></li></ul></div></dd><dt><span class="term"><span class="emphasis"><em>&lt;managedWorkingMemory&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.drools.ManagedWorkingMemory</code></span></dt><dd><p>
                        Manager component for a conversation scoped managed Drools <code class="literal">WorkingMemory</code>.
                    </p><div class="itemizedlist"><ul><li><p>
                           <span class="emphasis"><em>&lt;managedWorkingMemory&gt;</em></span>.ruleBase 
                            — a value expression that evaluates to an instance of <code class="literal">RuleBase</code>.
                        </p></li></ul></div></dd><dt><span class="term"><span class="emphasis"><em>&lt;ruleBase&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.drools.RuleBase</code></span></dt><dd><p>
                        Manager component for an application scoped Drools <code class="literal">RuleBase</code>.
                        <span class="emphasis"><em>Note that this is not really intended for production usage, since
                        it does not support dynamic installation of new rules.</em></span>
                    </p><div class="itemizedlist"><ul><li><p>
                           <span class="emphasis"><em>&lt;ruleBase&gt;</em></span>.ruleFiles 
                            — a list of files containing Drools rules.
                        </p><p>
                           <span class="emphasis"><em>&lt;ruleBase&gt;</em></span>.dslFile 
                            — a Drools DSL definition.
                        </p></li></ul></div></dd><dt><span class="term"><span class="emphasis"><em>&lt;entityHome&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.framework.EntityHome</code></span></dt><dd><p/></dd><dt><span class="term"><span class="emphasis"><em>&lt;hibernateEntityHome&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.framework.HibernateEntityHome</code></span></dt><dd><p/></dd><dt><span class="term"><span class="emphasis"><em>&lt;entityQuery&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.framework.EntityQuery</code></span></dt><dd><p/></dd><dt><span class="term"><span class="emphasis"><em>&lt;hibernateEntityQuery&gt;</em></span>, </span><span class="term"><code class="literal">org.jboss.seam.framework.HibernateEntityQuery</code></span></dt><dd><p/></dd></dl></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="controls"/>Chapter 33. Seam JSF controls</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#controls.tags">33.1. Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e27808">33.1.1. Navigation Controls</a></span></dt><dt><span class="section"><a href="#d0e28167">33.1.2. Converters and Validators</a></span></dt><dt><span class="section"><a href="#d0e28477">33.1.3. Formatting</a></span></dt><dt><span class="section"><a href="#d0e28670">33.1.4. Seam Text</a></span></dt><dt><span class="section"><a href="#d0e28709">33.1.5. Form support</a></span></dt><dt><span class="section"><a href="#d0e28980">33.1.6. Other</a></span></dt></dl></dd><dt><span class="section"><a href="#controls.annotations">33.2. Annotations</a></span></dt></dl></div><p>
      Seam includes a number of JSF controls that are useful for working with
      Seam. These are intended to complement the built-in JSF controls, and
      controls from other third-party libraries. We recommend
      JBoss RichFaces, ICEsoft ICEfaces and Apache MyFaces Trinidad tag libraries for use with Seam.
      We do not recommend the use of the Tomahawk tag library.
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="controls.tags"/>33.1. Tags</h2></div></div></div><p>
         To use these tags, define the "<code class="literal">s</code>" namespace in your page 
         as follows (facelets only):
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
         The ui example demonstrates the use of a number of these tags.
      </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e27808"/>33.1.1. Navigation Controls</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e27811"/>33.1.1.1. <code class="literal">&lt;s:button&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               A button that supports invocation of an action with control over 
               conversation propagation. <span class="emphasis"><em>Does not submit the 
               form.</em></span>
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">value</code> — the label.
                  </p></li><li><p>
                     <code class="literal">action</code> — a method binding that 
                     specified the action
                     listener.
                  </p></li><li><p>
                     <code class="literal">view</code> — the JSF view id to link to.
                  </p></li><li><p>
                     <code class="literal">fragment</code> — the fragment 
                     identifier to link to.
                  </p></li><li><p>
                     <code class="literal">disabled</code> — is the link disabled?
                  </p></li><li><p>
                     <code class="literal">propagation</code> — determines the 
                     conversation propagation style: <code class="literal">begin</code>, 
                     <code class="literal">join</code>, <code class="literal">nested</code>, 
                     <code class="literal">none</code>, <code class="literal">end</code> 
                     or <code class="literal">endRoot</code>.
                  </p></li><li><p>
                     <code class="literal">pageflow</code> — a pageflow definition 
                     to begin. (This is only useful when 
                     <code class="literal">propagation="begin"</code> or
                     <code class="literal">propagation="join"</code> is used).
                  </p></li><li><p>
                     <code class="literal">includePageParams</code> — when set to false,
                     page parameters defined in <code class="literal">pages.xml</code> will be
                     excluded from rendering.
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:button</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cancel&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Cancel&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hotelBooking.cancel}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               You can specify both <code class="literal">view</code> and 
               <code class="literal">action</code> on <code class="literal">&lt;s:link /&gt;</code>. 
               In this case, the action will be called once the redirect to the 
               specified view has occurred.
            </p><p>
               The use of action listeners (including the default JSF action
               listener) is not supported with <code class="literal">&lt;s:button /&gt;</code>.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e27923"/>33.1.1.2. <code class="literal">&lt;s:conversationId&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Add the conversation id to JSF link or button (e.g.
               <code class="literal">&lt;h:commandLink /&gt;</code> ,
               <code class="literal">&lt;s:button /&gt;</code>).
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>None</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e27943"/>33.1.1.3. <code class="literal">&lt;s:taskId&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Add the task id to an output link (or similar JSF control), 
               when the task is available via <code class="literal">#{task}</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
                None.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e27960"/>33.1.1.4. <code class="literal">&lt;s:link&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               A link that supports invocation of an action with control over 
               conversation propagation. <span class="emphasis"><em>Does not submit the 
               form.</em></span>
            </p><p>
               The use of action listeners (including the default JSF action
               listener) is not supported with <code class="literal">&lt;s:link /&gt;</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">value</code> — the label.
                  </p></li><li><p>
                     <code class="literal">action</code>  — a method binding that 
                     specified the action listener.
                  </p></li><li><p>
                     <code class="literal">view</code> — the JSF view id to link to.
                  </p></li><li><p>
                     <code class="literal">fragment</code> — the fragment identifier
                     to link to.
                  </p></li><li><p>
                     <code class="literal">disabled</code> — is the link disabled?
                  </p></li><li><p>
                     <code class="literal">propagation</code> — determines the 
                     conversation propagation style: <code class="literal">begin</code>,
                     <code class="literal">join</code>, <code class="literal">nested</code>,
                     <code class="literal">none</code>, <code class="literal">end</code> 
                     or <code class="literal">endRoot</code>.
                  </p></li><li><p>
                     <code class="literal">pageflow</code> — a pageflow definition 
                     to begin. (This is only useful when using
                     <code class="literal">propagation="begin"</code> or
                     <code class="literal">propagation="join"</code>.)
                  </p></li><li><p>
                     <code class="literal">includePageParams</code> — when set to false,
                     page parameters defined in <code class="literal">pages.xml</code> will be
                     excluded from rendering.
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;register&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/register.xhtml&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Register&nbsp;New&nbsp;User&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               You can specify both <code class="literal">view</code> and 
               <code class="literal">action</code> on <code class="literal">&lt;s:link /&gt;</code>.
               In this case, the action will be called once the redirect to the 
               specified view has occured.
            </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28072"/>33.1.1.5. <code class="literal">&lt;s:conversationPropagation&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Customize the conversation propagation for a command link or button
               (or similar JSF control). <span class="emphasis"><em>Facelets only.</em></span>
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">type</code> — determines the conversation
                     propagation style: <code class="literal">begin</code>, 
                     <code class="literal">join</code>, <code class="literal">nested</code>, 
                     <code class="literal">none</code>, <code class="literal">end</code> 
                     or <code class="literal">endRoot</code>.
                  </p></li><li><p>
                     <code class="literal">pageflow</code> — a pageflow definition to 
                     begin. (This is only useful when using 
                     <code class="literal">propagation="begin"</code> or 
                     <code class="literal">propagation="join"</code>.)
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Apply&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{personHome.update}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:conversationPropagation</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;join&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28129"/>33.1.1.6. 
               <code class="literal">&lt;s:defaultAction&gt;</code>
            </h4></div></div></div><p>
               <span class="emphasis"><em>Description</em></span>
            </p><p>
               Specify the default action to run when the form is submitted using
               the enter key.
            </p><p>
               Currently you can only nest it inside buttons (e.g.
               <code class="literal">&lt;h:commandButton /&gt;</code>,
               <code class="literal">&lt;a:commandButton /&gt;</code> or
               <code class="literal">&lt;tr:commandButton /&gt;</code>).
            </p><p>
               You must specify an id on the action source. You can only have one
               default action per form.
            </p><p>
               <span class="emphasis"><em>Attributes</em></span>
            </p><p>None.</p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;foo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Foo&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{manager.foo}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:defaultAction</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:commandButton</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e28167"/>33.1.2. Converters and Validators</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28170"/>33.1.2.1. <code class="literal">&lt;s:convertDateTime&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>Perform date or time conversions in the Seam timezone.</p><p><span class="emphasis"><em>Attributes</em></span></p><p>None.</p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{item.orderDate}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;both&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">dateStyle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;full&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28189"/>33.1.2.2. <code class="literal">&lt;s:convertEntity&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Assigns an entity converter to the current component. This is
               useful for radio button and dropdown controls.
            </p><p>
               The converter works with any managed entity - either simple or
               composite. The converter should be able to find the items 
               declared in the JSF controls on form submission, otherwise you 
               will receive a validation error.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>None.</p><p><span class="emphasis"><em>Configuration</em></span></p><p>
               You must use <span class="emphasis"><em>Seam managed transactions</em></span> (see
               <a class="xref" href="#persistence.seam-managed-transactions" title="9.2. Seam managed transactions">Section 9.2, “Seam managed transactions”</a>) with
               <code class="literal">&lt;s:convertEntity /&gt;</code>.
            </p><p>
               If your <span class="emphasis"><em>Managed Persistence Context</em></span> isn't 
               called <code class="literal">entityManager</code>, then you need to set it 
               in components.xml:
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.org/schema/seam/components"
            xmlns:ui="http://jboss.org/schema/seam/ui"&gt;
 
   &lt;ui:jpa-entity-loader entity-manager="#{em}" /&gt;</pre><p>
               If you are using a <span class="emphasis"><em>Managed Hibernate Session</em></span>
               then you need to set it in components.xml:
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.org/schema/seam/components"
            xmlns:ui="http://jboss.org/schema/seam/ui"&gt;
 
   &lt;ui:hibernate-entity-loader /&gt;</pre><p>
               If your <span class="emphasis"><em>Managed Hibernate Session</em></span> isn't 
               called <code class="literal">session</code>, then you need to set it 
               in components.xml:
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.org/schema/seam/components"
            xmlns:ui="http://jboss.org/schema/seam/ui"&gt;
            
   &lt;ui:hibernate-entity-loader session="#{hibernateSession}" /&gt;</pre><p>
               If you want to use more than one entity manager with the entity
               converter, you can create a copy of the entity converter for each
               entity manager in <code class="literal">components.xml</code> - note how 
               the entity converter delegates to the entity loader to perform
               persistence operations:
            </p><pre class="programlisting">&lt;components xmlns="http://jboss.org/schema/seam/components"
            xmlns:ui="http://jboss.org/schema/seam/ui"&gt;
 
   &lt;ui:entity-converter name="standardEntityConverter" entity-loader="#{standardEntityLoader}" /&gt;
            
   &lt;ui:jpa-entity-loader name="standardEntityLoader" entity-manager="#{standardEntityManager}" /&gt;
   
   &lt;ui:entity-converter name="restrictedEntityConverter" entity-loader="#{restrictedEntityLoader}" /&gt;
            
   &lt;ui:jpa-entity-loader name="restrictedEntityLoader" entity-manager="#{restrictedEntityManager}" /&gt;</pre><pre class="programlisting">&lt;h:selectOneMenu value="#{person.continent}"&gt;
   &lt;s:selectItems value="#{continents.resultList}" var="continent" 
                  label="#{continent.name}" /&gt;
    &lt;f:converter converterId="standardEntityConverter" /&gt;
&lt;/h:selectOneMenu&gt;</pre><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.continent}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{continents.resultList}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;continent&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{continent.name}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">noSelectionLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Please&nbsp;Select...&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:convertEntity</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28259"/>33.1.2.3. <code class="literal">&lt;s:convertEnum&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Assigns an enum converter to the current component. This is
               primarily useful for radio button and dropdown controls.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>None.</p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.honorific}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{honorifics}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;honorific&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{honorific.label}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">noSelectionLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Please&nbsp;select&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:convertEnum</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28278"/>33.1.2.4. <code class="literal">&lt;s:convertAtomicBoolean&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               <code class="literal">javax.faces.convert.Converter</code> for 
               <code class="literal">java.util.concurrent.atomic.AtomicBoolean</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
               None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:outputText value="#{item.valid}"&gt;
   &lt;s:convertAtomicBoolean /&gt;
&lt;/h:outputText&gt;</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28303"/>33.1.2.5. <code class="literal">&lt;s:convertAtomicInteger&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               <code class="literal">javax.faces.convert.Converter</code> for 
               <code class="literal">java.util.concurrent.atomic.AtomicInteger</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:outputText value="#{item.id}"&gt;
   &lt;s:convertAtomicInteger /&gt;
&lt;/h:outputText&gt;</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28328"/>33.1.2.6. <code class="literal">&lt;s:convertAtomicLong&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               <code class="literal">javax.faces.convert.Converter</code> for 
               <code class="literal">java.util.concurrent.atomic.AtomicLong</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
              None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:outputText value="#{item.id}"&gt;
   &lt;s:convertAtomicLong /&gt;
&lt;/h:outputText&gt;</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28353"/>33.1.2.7. <code class="literal">&lt;s:validateEquality&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
				Tag to nest inside an input control to validate that its parent's
				value is equal (or not equal!) to the referenced control's value.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">for</code> — The id of a control to validate against.
                  </p></li><li><p>
                     <code class="literal">message</code> — Message to show on failure.
                  </p></li><li><p>
                     <code class="literal">required</code> — False will disable a check that a value at all is inputted in fields. 
                  </p></li><li><p>
                     <code class="literal">messageId</code> — Message id to show on failure.
                  </p></li><li><p>
                     <code class="literal">operator</code> — What operator to use when comparing the values
					 Valid operators are:
					 </p><div class="itemizedlist"><ul><li><p>
                              <code class="literal">equal</code> — Validates that value.equals(forValue)
						   </p></li><li><p>
                              <code class="literal">not_equal</code> — Validates that !value.equals(forValue)
						   </p></li><li><p>
                              <code class="literal">greater</code> — Validates that ((Comparable)value).compareTo(forValue) &gt; 0
						   </p></li><li><p>
                              <code class="literal">greater_or_equal</code> — Validates that ((Comparable)value).compareTo(forValue) &gt;= 0
						   </p></li><li><p>
                              <code class="literal">less</code> — Validates that ((Comparable)value).compareTo(forValue) &lt; 0
						   </p></li><li><p>
                              <code class="literal">less_or_equal</code> — Validates that ((Comparable)value).compareTo(forValue) &lt;= 0
						   </p></li></ul></div><p>
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre class="programlisting">&lt;h:inputText id="name" value="#{bean.name}"/&gt;
&lt;h:inputText id="nameVerification" &gt;
   &lt;s:validateEquality for="name" /&gt;
&lt;/h:inputText&gt;</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28439"/>33.1.2.8. <code class="literal">&lt;s:validate&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               A non-visual control, validates a JSF input field against the 
               bound property using Hibernate Validator.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
               None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{customer.userName}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validate</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:inputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;error&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28458"/>33.1.2.9. <code class="literal">&lt;s:validateAll&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               A non-visual control, validates all child JSF input fields 
               against their bound properties using Hibernate Validator.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
               None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;username&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Username:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;username&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.username}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;username&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;error&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Password:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputSecret</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.password}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;error&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;verify&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Verify&nbsp;Password:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputLabel</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputSecret</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;verify&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{register.verify}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">for</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;verify&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;error&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e28477"/>33.1.3. Formatting</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28480"/>33.1.3.1. <code class="literal">&lt;s:decorate&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               "Decorate" a JSF input field when validation fails or when
               <code class="literal">required="true"</code> is set.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">template</code> — the facelets template 
                     to use to decorate the component
                </p></li><li><p>
                     <code class="literal">enclose</code> — if true, the template 
                     	 used to decorate the input field is enclosed by the 
                     	 element specified with the "element" attribute. By 
                     	 default this is a div element.
                </p></li><li><p>
                     <code class="literal">element</code> — the element to enclose 
                         the template used to decorate the input field.  By default, 
                         the template is enclosed with a div element.
                </p></li></ul></div><p>
               <code class="literal">#{invalid}</code> and <code class="literal">#{required}</code> 
               are available inside <code class="literal">s:decorate</code>; 
               <code class="literal">#{required}</code> evaluates to 
               <code class="literal">true</code> if you have set the input component being
               decorated as required, and <code class="literal">#{invalid}</code> 
               evaluates to <code class="literal">true</code> if a validation error occurs.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:decorate</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;edit.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:define</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Country:</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:define</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:decorate</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:composition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:ui</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:label</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{invalid?'error':''}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:insert</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:span</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{required}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">span</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{invalid?'error':''}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:insert</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:validateAll</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:message</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;error&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:composition</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28544"/>33.1.3.2. <code class="literal">&lt;s:div&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Render a HTML <code class="literal">&lt;div&gt;</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
               None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{selectedMember&nbsp;==&nbsp;null}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;Sorry,&nbsp;but&nbsp;this&nbsp;member&nbsp;does&nbsp;not&nbsp;exist.</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28566"/>33.1.3.3. <code class="literal">&lt;s:span&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Render a HTML <code class="literal">&lt;span&gt;</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
            </p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">title</code> — Title for a span.
                </p></li></ul></div><p>
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:span</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{required}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">title</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Small&nbsp;tooltip&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28596"/>33.1.3.4. <code class="literal">&lt;s:fragment&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               A non-rendering component useful for enabling/disabling rendering
               of it's children.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
               None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:fragment</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{auction.highBidder&nbsp;ne&nbsp;null}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;Current&nbsp;bid:</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:fragment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28615"/>33.1.3.5. <code class="literal">&lt;s:label&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               "Decorate" a JSF input field with the label.  The label is placed
               inside the HTML <code class="literal">&lt;label&gt;</code> tag, and is 
               associated with the nearest JSF input component.  It is often 
               used with <code class="literal">&lt;s:decorate&gt;</code>.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">style</code> — The control's style
                  </p></li><li><p>
                     <code class="literal">styleClass</code> — The control's style class
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:label</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">styleClass</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;Country:</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{location.country}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">required</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28651"/>33.1.3.6. <code class="literal">&lt;s:message&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               "Decorate" a JSF input field with the validation error message.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><p>
               None.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;afterInvalidField&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&amp;#160;Error:&amp;#160;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:message</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:span</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e28670"/>33.1.4. Seam Text</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28674"/>33.1.4.1. <code class="literal">&lt;s:formattedText&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Outputs <span class="emphasis"><em>Seam Text</em></span>, a rich text markup useful
               for blogs, wikis and other applications that might use rich text.
               See the Seam Text chapter for full usage.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                    <code class="literal">value</code> — an EL expression specifying 
                    the rich text markup to render.
                 </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:formattedText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.text}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p><span class="emphasis"><em>Example</em></span></p><div class="mediaobject" align="center"><img src="images/controls-seamtext.png" align="middle"/></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e28709"/>33.1.5. Form support</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28712"/>33.1.5.1. <code class="literal">&lt;s:token&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
              Produces a random token that is inserted into a hidden form field
              to help to secure JSF form posts against cross-site request
              forgery (XSRF) attacks. Note that the browser must have cookies
              enabled to submit forms that include this component.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">requireSession</code> — indicates
                     whether the session id should be included in the form
                     signature, hence binding the token to the session. This
                     value can be set to false if the "build before restore"
                     mode of Facelets is activated (the default in JSF 2.0).
                     (default: false)
                  </p></li><li><p>
                     <code class="literal">enableCookieNotice</code> — indicates
                     that a JavaScript check should be inserted into the page
                     to verify that cookies are enabled in the browser.  If
                     cookies are not enabled, present a notice to the user that
                     form posts will not work. (default: false)
                  </p></li><li><p>
                     <code class="literal">allowMultiplePosts</code> — indicates
                     whether to allow the same form to be submitted multiple
                     times with the same signature (as long as the view does
                     not change). This is a common need if the form is perform
                     Ajax calls but not rerendering itself or, at the very
                     least, the UIToken component. The preferred approach is to
                     have the UIToken component rerendered on any Ajax call
                     where the UIToken component would be processed.
                     (default: false)
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:token</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enableCookieNotice</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">requireSession</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28748"/>33.1.5.2. <code class="literal">&lt;s:enumItem&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Creates a <code class="literal">SelectItem</code> from an enum value.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">enumValue</code> — the string 
                     representation of the enum value.
                  </p></li><li><p>
                     <code class="literal">label</code> — the label to be used when 
                     rendering the <code class="literal">SelectItem</code>.
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneRadio</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;radioList&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">layout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lineDirection&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{newPayment.paymentFrequency}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;JSF&nbsp;2&nbsp;way&nbsp;&lt;f:converter&nbsp;converterId=&quot;org.jboss.seam.ui.EnumConverter&quot;&nbsp;/&gt;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:convertEnum</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:enumItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enumValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ONCE&quot;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Only&nbsp;Once&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:enumItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enumValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;EVERY_MINUTE&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Every&nbsp;Minute&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:enumItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enumValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;HOURLY&quot;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Every&nbsp;Hour&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:enumItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enumValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DAILY&quot;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Every&nbsp;Day&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:enumItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enumValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;WEEKLY&quot;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Every&nbsp;Week&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneRadio</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28784"/>33.1.5.3. <code class="literal">&lt;s:selectItems&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Creates a <code class="literal">List&lt;SelectItem&gt;</code> from a List, Set, DataModel or Array.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">value</code> — an EL expression 
                     specifying the data that backs the 
                     <code class="literal">List&lt;SelectItem&gt;</code>
                  </p></li><li><p>
                     <code class="literal">var</code>— defines the name of the local
                     variable that holds the current object during iteration
                  </p></li><li><p>
                     <code class="literal">label</code> — the label to be used when 
                     rendering the <code class="literal">SelectItem</code>. Can reference 
                     the <code class="literal">var</code> variable.
                  </p></li><li><p>
                     <code class="literal">itemValue</code> — Value to return to the 
                     server if this option is selected. Optional, by default the
                     <code class="literal">var</code> object is used. Can reference the
                     <code class="literal">var</code> variable.
                  </p></li><li><p>
                     <code class="literal">disabled</code>
                     — if true the <code class="literal">SelectItem</code> will be 
                     rendered disabled. Can reference the <code class="literal">var</code>
                     variable.
                  </p></li><li><p>
                     <code class="literal">noSelectionLabel</code> — specifies the 
                     (optional) label to place at the top of list (if
                     <code class="literal">required="true"</code> is also specified then 
                     selecting this value will cause a validation error).
                  </p></li><li><p>
                     <code class="literal">hideNoSelectionLabel</code> — if true,
                     the <code class="literal">noSelectionLabel</code> will be hidden when
                     a value is selected 
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.age}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">converter</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ageConverter&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{ages}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;age&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">label</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{age}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28874"/>33.1.5.4. <code class="literal">&lt;s:fileUpload&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Renders a file upload control.  This control must be used within
               a form with an encoding type of 
               <code class="literal">multipart/form-data</code>, i.e: 
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">enctype</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;multipart/form-data&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               For multipart requests, the Seam Multipart servlet filter must 
               also be configured in <code class="literal">web.xml</code>:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.servlet.SeamFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Seam&nbsp;Filter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p><span class="emphasis"><em>Configuration</em></span></p><p>
               The following configuration options for multipart requests may be
               configured in components.xml:
            </p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">createTempFiles</code> — if this option 
                     is set to true, uploaded files are streamed to a temporary 
                     file instead of in memory.
                  </p></li><li><p>
                     <code class="literal">maxRequestSize</code> — the maximum size 
                     of a file upload request, in bytes.
                  </p></li></ul></div><p>
               Here's an example:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.seam.web.MultipartFilter&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;createTempFiles&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;maxRequestSize&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1000000</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">data</code> — this value binding receives
                     the binary file data. The receiving field should be 
                     declared as a <code class="literal">byte[]</code> or 
                     <code class="literal">InputStream</code> (required).
                  </p></li><li><p>
                     <code class="literal">contentType</code> — this value binding 
                     receives the file's content type (optional).
                  </p></li><li><p>
                     <code class="literal">fileName</code> — this value binding 
                     receives the filename (optional).
                  </p></li><li><p>
                     <code class="literal">fileSize</code> — this value binding 
                     receives the file size (optional).
                  </p></li><li><p>
                     <code class="literal">accept</code> — a comma-separated list of
                     content types to accept, may not be supported by the 
                     browser.  E.g. <code class="literal">"images/png,images/jpg"</code>,
                     <code class="literal">"images/*"</code>.
                  </p></li><li><p>
                     <code class="literal">style</code> — The control's style
                  </p></li><li><p>
                     <code class="literal">styleClass</code> — The control's style 
                     class
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:fileUpload</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;picture&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">data</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{register.picture}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">accept</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image/png&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">contentType</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{register.pictureContentType}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e28980"/>33.1.6. Other</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e28983"/>33.1.6.1. <code class="literal">&lt;s:cache&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Cache the rendered page fragment using JBoss Cache. Note that
               <code class="literal">&lt;s:cache&gt;</code> actually uses the instance
               of JBoss Cache managed by the built-in 
               <code class="literal">pojoCache</code> component.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">key</code> — the key to cache rendered 
                     content, often a value expression. For example, if we were 
                     caching a page fragment that displays a document, we might 
                     use <code class="literal">key="Document-#{document.id}"</code>.
                  </p></li><li><p>
                     <code class="literal">enabled</code> — a value expression that 
                     determines if the cache should be used.
                  </p></li><li><p>
                     <code class="literal">region</code> — a JBoss Cache node to use
                     (different nodes can have different expiry policies).
                 </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;entry-#{blogEntry.id}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">region</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;pageFragments&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;blogEntry&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">#{blogEntry.title}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h3</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:formattedText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.body}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Posted&nbsp;on&amp;#160;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blogEntry.date}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:convertDateTime</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">timezone</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.timeZone}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">locale</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{blog.locale}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;both&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:outputText</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">]</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">p</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:cache</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e29028"/>33.1.6.2. <code class="literal">&lt;s:resource&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
			A tag that acts a file download provider. It must be alone in the JSF page.
			To be able to use this control, web.xml must be set up as follows.
            </p><p><span class="emphasis"><em>Configuration</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Document&nbsp;Store&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.document.DocumentStoreServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Document&nbsp;Store&nbsp;Servlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/seam/docstore/*</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">data</code> — Data that should be downloaded.
					 May be a java.util.File, an InputStream or a byte array.
                  </p></li><li><p>
                     <code class="literal">fileName</code> — Filename of the file to be served
                  </p></li><li><p>
                     <code class="literal">contentType</code> — content type of the file to be downloaded
                  </p></li><li><p>
                     <code class="literal">disposition</code> — disposition to use. Default is inline
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><p>Here is an example on how to use the tag:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:resource</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://jboss.org/schema/seam/taglib&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">data</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{resources.data}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">contentType</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{resources.contentType}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">fileName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{resources.fileName}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>The bean named <code class="literal">resources</code> is some backing bean that given
			some request parameters servers a specific file, see <code class="literal">s:download</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e29085"/>33.1.6.3. <code class="literal">&lt;s:download&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>Builds a RESTful link to a <code class="literal">&lt;s:resource&gt;</code>.
				Nested <code class="literal">f:param</code> build up the url.
			</p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">src</code> — Resource file serving files.
                  </p></li></ul></div><p><span class="emphasis"><em>Attributes</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:download</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/resources.xhtml&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:param</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fileId&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{someBean.downloadableFileId}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:download</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
				Will produce something like: 
				<code class="literal">http://localhost/resources.seam?fileId=1</code>
			</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e29117"/>33.1.6.4. <code class="literal">&lt;s:graphicImage&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               An extended <code class="literal">&lt;h:graphicImage&gt;</code> that allows
               the image to be created in a Seam Component; further transforms
               can be applied to the image.
            </p><p>
               All attributes for <code class="literal">&lt;h:graphicImage&gt;</code> are 
               supported, as well as:
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">value</code> — image to display.  Can be 
                     a path <code class="literal">String</code> (loaded from the 
                     classpath), a <code class="literal">byte[]</code>, a 
                     <code class="literal">java.io.File</code>, a 
                     <code class="literal">java.io.InputStream</code> or a 
                     <code class="literal">java.net.URL</code>.  Currently supported image
                     formats are <code class="literal">image/png</code>, 
                     <code class="literal">image/jpeg</code>, <code class="literal">image/gif</code> and 
                     <code class="literal">image/bmp</code>.
                  </p></li><li><p>
                     <code class="literal">fileName</code> — if not specified the 
                     served image will have a generated file name. If you want 
                     to name your file, you should specify it here.  This name 
                     should be unique
                  </p></li></ul></div><p><span class="emphasis"><em>Transformations</em></span></p><p>
               To apply a transform to the image, you would nest a tag 
               specifying the transform to apply.  Seam currently supports these
               transforms:
            </p><div class="variablelist"><dl><dt><span class="term">
                     <code class="literal">&lt;s:transformImageSize&gt;</code>
                  </span></dt><dd><div class="itemizedlist"><ul><li><p>
                              <code class="literal">width</code> — new width of the 
                              image
                           </p></li><li><p>
                              <code class="literal">height</code> — new height of the 
                              image
                           </p></li><li><p>
                              <code class="literal">maintainRatio</code> — if
                              <code class="literal">true</code>, and 
                              <span class="emphasis"><em>one</em></span> of
                              <code class="literal">width</code>/<code class="literal">height</code>
                              are specified, the image will be resized with the
                              dimension not specified being calculated to
                              maintain the aspect ratio.
                           </p></li><li><p>
                              <code class="literal">factor</code> — scale the image 
                              by the given factor
                           </p></li></ul></div></dd><dt><span class="term">
                     <code class="literal">&lt;s:transformImageBlur&gt;</code>
                  </span></dt><dd><div class="itemizedlist"><ul><li><p>
                              <code class="literal">radius</code> — perform a 
                              convolution blur with the given radius
                           </p></li></ul></div></dd><dt><span class="term">
                     <code class="literal">&lt;s:transformImageType&gt;</code>
                  </span></dt><dd><div class="itemizedlist"><ul><li><p>
                              <code class="literal">contentType</code> — alter the 
                              type of the image to either 
                              <code class="literal">image/jpeg</code> or
                              <code class="literal">image/png</code>
                           </p></li></ul></div></dd></dl></div><p>
               It's easy to create your own transform - create a 
               <code class="literal">UIComponent</code> which implements 
               <code class="literal">org.jboss.seam.ui.graphicImage.ImageTransform</code>.
               Inside the <code class="literal">applyTransform()</code>method use 
               <code class="literal">image.getBufferedImage()</code> to get the original 
               image and <code class="literal">image.setBufferedImage()</code> to set your
               transformed image.  Transforms are applied in the order specified
               in the view.
            </p><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:graphicImage</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{auction.image&nbsp;ne&nbsp;null}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{auction.image.data}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:transformImageSize</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">width</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;200&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">maintainRatio</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">s:graphicImage</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e29283"/>33.1.6.5. <code class="literal">&lt;s:remote&gt;</code></h4></div></div></div><p><span class="emphasis"><em>Description</em></span></p><p>
               Generates the Javascript stubs required to use Seam Remoting.
            </p><p><span class="emphasis"><em>Attributes</em></span></p><div class="itemizedlist"><ul><li><p>
                     <code class="literal">include</code> — a comma-separated list 
                     of the component names (or fully qualified class names)for 
                     which to generate Seam Remoting Javascript stubs.  See 
                     <a class="xref" href="#remoting" title="Chapter 25. Remoting">Chapter 25, <i>Remoting</i></a> for more details.
                  </p></li></ul></div><p><span class="emphasis"><em>Usage</em></span></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">s:remote</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">include</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;customerAction,accountAction,com.acme.MyBean&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="controls.annotations"/>33.2. Annotations</h2></div></div></div><p>
       Seam also provides annotations to allow you to use Seam components as JSF
       converters and validators:
       
     </p><div class="variablelist"><dl><dt><span class="term">
           <code class="literal">@Converter</code>
         </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;itemConverter&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">BypassInterceptors</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Converter</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ItemConverter</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Converter</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Transactional</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;getAsObject</span><span class="java_separator">(</span><span class="java_type">FacesContext</span><span class="java_plain">&nbsp;context</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">UIComponent</span><span class="java_plain">&nbsp;cmp</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;value</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;entityManager&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">EntityManager</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">Component</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">(</span><span class="java_literal">&quot;entityManager&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">joinTransaction</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Do</span><span class="java_plain">&nbsp;the&nbsp;conversion</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getAsString</span><span class="java_separator">(</span><span class="java_type">FacesContext</span><span class="java_plain">&nbsp;context</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">UIComponent</span><span class="java_plain">&nbsp;cmp</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Do</span><span class="java_plain">&nbsp;the&nbsp;conversion</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{shop.item}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">converter</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;itemConverter&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               Registers the Seam component as a JSF converter.  Shown here is a 
               converter which is able to access the JPA EntityManager inside a 
               JTA transaction, when converting the value back to it's object
               representation.
             </p></dd><dt><span class="term">
           <code class="literal">@Validator</code>
         </span></dt><dd><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;itemValidator&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">BypassInterceptors</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">@org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_plain">faces</span><span class="java_separator">.</span><span class="java_type">Validator</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ItemValidator</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">faces</span><span class="java_separator">.</span><span class="java_plain">validator</span><span class="java_separator">.</span><span class="java_type">Validator</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;validate</span><span class="java_separator">(</span><span class="java_type">FacesContext</span><span class="java_plain">&nbsp;context</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">UIComponent</span><span class="java_plain">&nbsp;cmp</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">ValidatorException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ItemController</span><span class="java_plain">&nbsp;</span><span class="java_type">ItemController</span><span class="java_plain">&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">ItemController</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">Component</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">(</span><span class="java_literal">&quot;itemController&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;valid&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;itemController</span><span class="java_separator">.</span><span class="java_plain">validate</span><span class="java_separator">(</span><span class="java_plain">value</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_operator">!</span><span class="java_plain">valid</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_type">ValidatorException</span><span class="java_separator">(</span><span class="java_literal">&quot;Invalid&nbsp;value&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;value</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{shop.item}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">validator</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;itemValidator&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                 Registers the Seam component as a JSF validator.  Shown here is a 
                 validator which injects another Seam component; the injected 
                 component is used to validate the value.
               </p></dd></dl></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="elenhancements"/>Chapter 34. JBoss EL</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e29346">34.1. Parameterized Expressions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29374">34.1.1. Usage</a></span></dt><dt><span class="section"><a href="#d0e29438">34.1.2. Limitations and Hints</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e29537">34.2. Projection</a></span></dt></dl></div><p>
      Seam uses JBoss EL which provides an extension to the standard Unified 
      Expression Language (EL). JBoss EL provides a number of enhancements that 
      increase the expressiveness and power of EL expressions. 
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29346"/>34.1. Parameterized Expressions</h2></div></div></div><p>
         Standard EL 2.1 does not allow you to use a method with user defined 
         parameters — of course, JSF listener methods (e.g. a 
         <code class="literal">valueChangeListener</code>) take parameters provided by JSF.
         <a class="ulink" href="http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html">Standard EL 2.2</a>,
          which is in Java EE 6, allows it now. So you don't have to use JBoss EL enhancements. 
      </p><p>You can still use JBoss EL instead of standard EL 2.2 from Java EE 6 by 
      setting up <code class="literal">com.sun.faces.expressionFactory</code> in <code class="filename">web.xml</code>:
      </p><pre class="programlisting">&lt;context-param&gt;
    &lt;param-name&gt;com.sun.faces.expressionFactory&lt;/param-name&gt;
    &lt;param-value&gt;org.jboss.el.ExpressionFactoryImpl&lt;/param-value&gt;
&lt;/context-param&gt;</pre><p>
      </p><p> 
         JBoss EL and EL 2.2 removed this restriction. For example: 
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hotelBooking.bookHotel(hotel)}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Book&nbsp;Hotel&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;hotelBooking&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HotelBooking</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_separator">{</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;bookHotel</span><span class="java_separator">(</span><span class="java_type">Hotel</span><span class="java_plain">&nbsp;hotel</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Book</span><span class="java_plain">&nbsp;the&nbsp;hotel</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29374"/>34.1.1. Usage</h3></div></div></div><p>
            Just as in calls to method from Java, parameters are surrounded by 
            parentheses, and separated by commas: 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hotelBooking.bookHotel(hotel,&nbsp;user)}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Book&nbsp;Hotel&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
            The parameters <code class="literal">hotel</code> and <code class="literal">user</code> 
            will be evaluated as value expressions and passed to the 
            <code class="literal">bookHotel()</code> method of the component. 
         </p><p>
            Any value expression may be used as a parameter: 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{hotelBooking.bookHotel(hotel.id,&nbsp;user.username)}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Book&nbsp;Hotel&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            It's important to fully understand how this extension to EL works. 
            When the page is rendered, the parameter <span class="emphasis"><em>names</em></span> 
            are stored (for example, <code class="literal">hotel.id</code> and 
            <code class="literal">user.username</code>), and evaluated (as value 
            expressions) when the page is submitted. You can't pass objects as
            parameters! 
         </p><p>
            You must ensure that the parameters are available not only when the 
            page is rendered, but also when it is submittedIf the arguments can 
            not be resolved when the page is submitted the action method will be
            called with <code class="literal">null</code> arguments! 
         </p><p>
            You can also pass literal strings using single quotes: 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{printer.println('Hello&nbsp;world!')}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Hello&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p> 
            Unified EL also supports value expressions, used to bind a field to 
            a backing bean. Value expressions use JavaBean naming conventions 
            and expect a getter/setter pair. Often JSF expects a value 
            expression where only retrieval (get) is needed (e.g. the 
            <code class="literal">rendered</code> attribute). Many objects, however, don't 
            have appropriately named property accessors or require parameters. 
         </p><p>
            JBoss EL removes this restriction by allowing values to be retrieved
            using the method syntax. For example: 
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.name}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rendered</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{person.name.length()&nbsp;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;5}</span><span class="xml_attribute_value">&quot;&nbsp;/</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You can access the size of a collection in a similar manner: 
         </p><pre class="programlisting">#{searchResults.size()}</pre><p>
            In general any expression of the form #{obj.property} would be 
            identical to the expression #{obj.getProperty()}. 
         </p><p>
            Parameters are also allowed. The following example calls the
            <code class="literal">productsByColorMethod</code> with a literal string 
            argument: 
         </p><pre class="programlisting">#{controller.productsByColor('blue')}</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29438"/>34.1.2. Limitations and Hints</h3></div></div></div><p> 
            When using JBoss EL you should keep the following points in mind: 
         </p><div class="itemizedlist"><ul><li><p>
                  <span class="emphasis"><em>Incompatibility with JSP 2.1</em></span> — 
                  JBoss EL can't currently be used with JSP 2.1 as the compiler 
                  rejects expressions with parameters in. So, if you want to use
                  this extension with JSF 1.2, you will need to use Facelets. 
                  The extension works correctly with JSP 2.0. 
               </p></li><li><p>
                  <span class="emphasis"><em>Use inside iterative components</em></span> — 
                  Components like <code class="literal">&lt;c:forEach /&gt;</code> and 
                  <code class="literal">&lt;ui:repeat /&gt;</code>iterate over a List or 
                  array, exposing each item in the list to nested components. 
                  This works great if you are selecting a row using a 
                  <code class="literal">&lt;h:commandButton /&gt;</code> or 
                  <code class="literal">&lt;h:commandLink /&gt;</code>: 
               </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Factory</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;items&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Item</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getItems</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;entityManager</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;...&quot;</span><span class="java_separator">).</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:dataTable</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{items}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">var</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;item&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandLink</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Select&nbsp;#{item.name}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{itemSelector.select(item})&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:column</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:dataTable</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
                  However if you want to use <code class="literal">&lt;s:link /&gt;</code>
                  or <code class="literal">&lt;s:button /&gt;</code> you 
                  <span class="emphasis"><em>must</em></span> expose the items as a 
                  <code class="literal">DataModel</code>, and use a 
                  <code class="literal">&lt;dataTable /&gt;</code> (or equivalent from a 
                  component set like <code class="literal">&lt;rich:dataTable /&gt;</code>
                  ). Neither <code class="literal">&lt;s:link /&gt;</code> or 
                  <code class="literal">&lt;s:button /&gt;</code> submit the form (and
                  therefore produce a bookmarkable link) so a "magic" parameter
                  is needed to recreate the item when the action method is 
                  called. This magic parameter can only be added when a 
                  data table backed by a <code class="literal">DataModel</code> is used.
               </p></li><li><p>
                  <span class="emphasis"><em>Calling a <code class="literal">MethodExpression</code> from 
                  Java code</em></span> — Normally, when a 
                  <code class="literal">MethodExpression</code> is created, the parameter 
                  types are passed in by JSF. In the case of a method binding, 
                  JSF assumes that there are no parameters to pass. With this
                  extension, we can't know the parameter types until after the 
                  expression has been evaluated. This has two minor 
                  consequences: 
               </p><div class="itemizedlist"><ul><li><p> 
                        When you invoke a <code class="literal">MethodExpression</code> in
                        Java code, parameters you pass may be ignored. 
                        Parameters defined in the expression will take 
                        precedence. 
                     </p></li><li><p>
                        Ordinarily, it is safe to call 
                        <code class="literal">methodExpression.getMethodInfo().getParamTypes()</code>
                        at any time. For an expression with parameters, you must 
                        first invoke the <code class="literal">MethodExpression</code> 
                        before calling <code class="literal">getParamTypes()</code>. 
                     </p></li></ul></div><p>
                  Both of these cases are exceedingly rare and only apply when 
                  you want to invoke the <code class="literal">MethodExpression</code> by 
                  hand in Java code. 
               </p></li></ul></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29537"/>34.2. Projection</h2></div></div></div><p>
         JBoss EL supports a limited projection syntax. A projection expression 
         maps a sub-expression across a multi-valued (list, set, etc...) 
         expression. For instance, the expression: 
      </p><pre class="programlisting">#{company.departments}</pre><p>
         might return a list of departments. If you only need a list of 
         department names, your only option is to iterate over the list to 
         retrieve the values. JBoss EL allows this with a projection expression: 
      </p><pre class="programlisting">#{company.departments.{d|d.name}}</pre><p>
         The subexpression is enclosed in braces. In this example, the 
         expression <code class="literal">d.name</code> is evaluated for each department, 
         using <code class="literal">d</code> as an alias to the department object. The 
         result of this expression will be a list of String values. 
      </p><p>
         Any valid expression can be used in an expression, so it would be 
         perfectly valid to write the following, assuming you had a use for the 
         lengths of all the department names in a company: 
      </p><pre class="programlisting">#{company.departments.{d|d.size()}}</pre><p>
         Projections can be nested. The following expression returns the last 
         names of every employee in every department: 
      </p><pre class="programlisting">#{company.departments.{d|d.employees.{emp|emp.lastName}}}</pre><p> 
         Nested projections can be slightly tricky, however. The following 
         expression looks like it returns a list of all the employees in all the 
         departments:
      </p><pre class="programlisting">#{company.departments.{d|d.employees}}</pre><p>
         However, it actually returns a list containing a list of the employees 
         for each individual department. To combine the values, it is necessary 
         to use a slightly longer expression: 
      </p><pre class="programlisting">#{company.departments.{d|d.employees.{e|e}}}</pre><p> 
         It is important to note that this syntax cannot be parsed by Facelets
         or JSP and thus cannot be used in xhtml or JSP files. We anticipate 
         that the projection syntax will change in future versions of JBoss EL. 
      </p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="ClusteringAndEJBPassivation"/>Chapter 35. Clustering and EJB Passivation</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#d0e29586">35.1. Clustering</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e29600">35.1.1. Programming for clustering</a></span></dt><dt><span class="sect2"><a href="#d0e29630">35.1.2. Deploying a Seam application to a JBoss AS cluster with session replication</a></span></dt><dt><span class="sect2"><a href="#d0e29709">35.1.3. Validating the distributable services of an application running in a JBoss AS cluster </a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e29754">35.2. EJB Passivation and the ManagedEntityInterceptor</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e29769">35.2.1. The friction between passivation and persistence</a></span></dt><dt><span class="sect2"><a href="#d0e29785">35.2.2. Case #1: Surviving EJB passivation</a></span></dt><dt><span class="sect2"><a href="#d0e29802">35.2.3. Case #2: Surviving HTTP session replication</a></span></dt><dt><span class="sect2"><a href="#d0e29810">35.2.4. ManagedEntityInterceptor wrap-up</a></span></dt></dl></dd></dl></div><p>
        <span class="emphasis"><em>Please note that this chapter is still being reviewed. Tread carefully.</em></span>
    </p><p>
        This chapter covers two distinct topics that happen share a common solution in Seam, (web) clustering and EJB
        passivation. Therefore, they are addressed together in this reference manual. Although performance tends to be
        grouped in this category as well, it's kept separate because the focus of this chapter is on the programming
        model and how it's affected by the use of the aforementioned features.
    </p><p>
        In this chapter you will learn how Seam manages the passivation of Seam components and entity instances, how to
        activate this feature, and how this feature is related to clustering. You will also learn how to deploy a Seam
        application into a cluster and verify that HTTP session replication is working properly. Let's start with a
        little background on clustering and see an example of how you deploy a Seam application to a JBoss AS cluster.
    </p><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29586"/>35.1. Clustering</h2></div></div></div><p>
            Clustering (more formally web clustering) allows an application to run on two or more parallel servers
            (i.e., nodes) while providing a uniform view of the application to clients. Load is distributed across the
            servers in such a way that if one or more of the servers fails, the application is still accessible via any
            of the surviving nodes. This topology is crucial for building scalable enterprise applications as
            performance and availability can be improved simply by adding nodes. But it brings up an important question.
            <span class="emphasis"><em>What happens to the state that was on the server that failed?</em></span>
        </p><p>
           Since day one, Seam has always provided support for stateful applications running in a cluster. Up to this
           point, you have learned that Seam provides state management in the form of additional scopes and by governing
           the life cycle of stateful (scoped) components. But state management in Seam goes beyond creating, storing
           and destroying instances. Seam tracks changes to JavaBean components and stores the changes at strategic
           points during the request so that the changes can be restored when the request shifts to a secondary node in
           the cluster. Fortunately, monitoring and replication of stateful EJB components is already handled by the EJB
           server, so this feature of Seam is intended to put stateful JavaBeans on par with their EJB cohorts.
        </p><p>
            But wait, there's more! Seam also offers an incredibly unique feature for clustered applications. In
            addition to monitoring JavaBean components, Seam ensures that managed entity instances (i.e. JPA and
            Hibernate entities) don't become detached during replication. Seam keeps a record of the entities that are
            loaded and automatically loads them on the secondary node. You must, however, be using a Seam-managed
            persistence context to get this feature. More in depth information about this feature is provided in the
            second half of this chapter.
        </p><p>
            Now that you understand what features Seam offers to support a clustered environment, let's look at how you
            program for clustering.
        </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29600"/>35.1.1. Programming for clustering</h3></div></div></div><p>
                Any session- or conversation-scoped mutable JavaBean component that will be used in a clustered
                environment must implement the <code class="literal">org.jboss.seam.core.Mutable</code> interface from the Seam API. As part of the
                contract, the component must maintain a dirty flag that is reported and reset by the
                <code class="literal">clearDirty()</code> method. Seam calls this method to determine if it is necessary to
                replicate the component. This avoids having to use the more cumbersome Servlet API to add and remove the
                session attribute on every change of the object.
            </p><p>
               You also must ensure that all session- and conversation-scoped JavaBean components are Serializable.
               Additional, all fields of a stateful component (EJB or JavaBean) must Serializable unless the field is
               marked transient or set to null in a <code class="literal">@PrePassivate</code> method. You can restore the value
               of a transient or nullified field in a <code class="literal">@PostActivate</code> method.
            </p><p>
               One area where people often get bitten is by using <code class="literal">List.subList</code> to create a list. The
               resulting list is not Serializable. So watch out for situations like that. If hit a
               <code class="literal">java.io.NotSerializableException</code> and cannot locate the culprit at first glance, you
               can put a breakpoint on this exception, run the application server in debug mode and attach a debugger
               (such as Eclipse) to see what deserialization is choking on.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                    Please note that clustering does not work with hot deployable components. But then again, you shouldn't
                    be using hot deployable components in a non-development environment anyway.
                </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29630"/>35.1.2. Deploying a Seam application to a JBoss AS cluster with session replication</h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>This section needs to be updated for JBoss AS 7.x</p></div><p>
                The procedure outlined in this tutorial has been validated with an seam-gen application and the Seam
                booking example.
            </p><p>
                In the tutorial, I assume that the IP addresses of the master and slave servers are 192.168.1.2 and
                192.168.1.3, respectively. I am intentionally not using the mod_jk load balancer so that it's easier to
                validate that both nodes are responding to requests and can share sessions.
            </p><p>
                I'm using the farm deployment method in these instructions, though you could also deploy the application
                normally and allow the two servers to negotiate a master/slave relationship based on startup order.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                    JBoss AS clustering relies on UDP multicasting provided by jGroups. The SELinux configuration that
                    ships with RHEL/Fedora blocks these packets by default. You can allow them to pass by modifying the
                    iptables rules (as root). The following commands apply to an IP address that matches 192.168.1.x.
                </p><pre class="programlisting">/sbin/iptables -I RH-Firewall-1-INPUT 5 -p udp -d 224.0.0.0/4 -j ACCEPT
/sbin/iptables -I RH-Firewall-1-INPUT 9 -p udp -s 192.168.1.0/24 -j ACCEPT
/sbin/iptables -I RH-Firewall-1-INPUT 10 -p tcp -s 192.168.1.0/24 -j ACCEPT
/etc/init.d/iptables save</pre><p>Detailed information can be found on <a class="ulink" href="http://www.jboss.org/community/docs/DOC-11935">this page</a> on the JBoss Wiki.</p></div><div class="itemizedlist"><ul><li><p>Create two instances of JBoss AS (just extract the zip twice)</p></li><li><p>Deploy the JDBC driver to server/all/lib/ on both instances if not using HSQLDB</p></li><li><p>Add <code class="literal">&lt;distributable/&gt;</code> as the first child element in WEB-INF/web.xml</p></li><li><p>Set the <code class="literal">distributable</code> property on
                    <code class="literal">org.jboss.seam.core.init</code> to true to enable the ManagedEntityInterceptor (i.e.,
                    <code class="literal">&lt;core:init distributable="true"/&gt;</code>)</p></li><li><p>Ensure you have two IP addresses available (two computers, two network cards, or two IP
                    addresses bound to the same interface). I'll assume the two IP address are 192.168.1.2 and
                    192.168.1.3</p></li><li><p>Start the master JBoss AS instance on the first IP</p><pre class="programlisting">./bin/run.sh -c all -b 192.168.1.2</pre><p>The log should report that there are 1 cluster members and 0 other members.</p></li><li><p>Verify that the server/all/farm directory is empty in the slave JBoss AS instance</p></li><li><p>Start the slave JBoss AS instance on the second IP</p><pre class="programlisting">./bin/run.sh -c all -b 192.168.1.3</pre><p>The log should report that there are 2 cluster members and 1 other members. It should also
                    show the state being retrieved from the master.</p></li><li><p>Deploy the -ds.xml to server/all/farm of the master instance</p><p>In the log of the master you should see acknowledgement of the deployment. In the log of the
                    slave you should see a corresponding message acknowledging the deployment to the slave.</p></li><li><p>Deploy the application to the server/all/farm directory</p><p>In the log of the master you should see acknowledgement of the deployment. In the log of the
                    slave you should see a corresponding message acknowledging the deployment to the slave. Note that
                    you may have to wait up to 3 minutes for the deployed archive to be transfered.</p></li></ul></div><p>
                You're application is now running in a cluster with HTTP session replication! But, of course, you are
                going to want to validate that the clustering actually works.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29709"/>35.1.3. Validating the distributable services of an application running in a JBoss AS cluster </h3></div></div></div><p>
                It's all well and fine to see the application start successfully on two different JBoss AS servers, but
                seeing is believing. You likely want to validate that the two instances are exchanging HTTP sessions to
                allow the slave to take over when the master instance is stopped.
            </p><p>
                Start off by visiting the application running on the master instance in your browser. That will produce
                the first HTTP session. Now, open up the JBoss AS JMX console on that instance and navigate to the
                following MBean:
            </p><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Category:</em></span> jboss.cache</p></li><li><p><span class="emphasis"><em>Entry:</em></span> service=TomcatClusteringCache</p></li><li><p><span class="emphasis"><em>Method:</em></span> printDetails()</p></li></ul></div><p>
                Invoke the printDetails() method. You will see a tree of active HTTP sessions. Verify that the session
                your browser is using corresponds to one of the sessions in this tree.
            </p><p>
                Now switch over to the slave instance and invoke the same method in the JMX console. You should see an
                identical list (at least underneath this application's context path).
            </p><p>
                So you can see that at least both servers claim to have identical sessions. Now, time to test that the
                data is serializing and deserializing properly.
            </p><p>
                Sign in using using the URL of the master instance. Then, construct a URL for the second instance by
                putting the ;jsessionid=XXXX immediately after the servlet path and changing the IP address. You should
                see that the session has carried over to the other instance. Now kill the master instance and see that
                you can continue to use the application from the slave instance. Remove the deployments from the
                server/all/farm directory and start the instance again. Switch the IP in the URL back to that of the
                master instance and visit the URL. You'll see that the original session is still being used.
            </p><p>
                One way to watch objects passivate and activate is to create a session- or conversation-scoped Seam
                component and implement the appropriate life-cycle methods. You can either use methods from the
                HttpSessionActivationListener interface (Seam automatically registers this interface on all non-EJB
                components):
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;sessionWillPassivate</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">HttpSessionEvent</span><!-- <br/> --><span class="java_plain">&nbsp;e</span><!-- <br/> --><span class="java_separator">);</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;sessionDidActivate</span><span class="java_separator">(</span><span class="java_type">HttpSessionEvent</span><span class="java_plain">&nbsp;e</span><span class="java_separator">);</span></pre><p>
                Or you can simply mark two no-argument public void methods with <code class="literal">@PrePassivate</code> and
                <code class="literal">@PostActivate</code>, respectively. Note that the passivation step occurs at the end of
                every request, while the activation step occurs when a node is called upon.
            </p></div><p>
            Now that you understand the big picture of running Seam in a cluster, it's time to address Seam's most
            mysterious, yet remarkable agent, the ManagedEntityInterceptor.
        </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29754"/>35.2. EJB Passivation and the ManagedEntityInterceptor</h2></div></div></div><p>
            The ManagedEntityInterceptor (MEI) is an optional interceptor in Seam that gets applied to
            conversation-scoped components when enabled. Enabling it is simple. You just set the distributable property
            on the org.jboss.seam.init.core component to true. More simply put, you add (or update) the following
            component declaration in the component descriptor (i.e., components.xml).
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:init</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">distributable</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            Note that this doesn't enable replication of HTTP sessions, but it does prepare Seam to be able to deal with
            passivation of either EJB components or components in the HTTP session.
        </p><p>
            The MEI serves two distinct scenarios (EJB passivation and HTTP session passivation), although to accomplish
            the same overall goal. It ensures that throughout the life of a conversation using at least one extended
            persistence context, the entity instances loaded by the persistence context(s) remain managed (they do not
            become detached prematurely by a passivation event). In short, it ensures the integrity of the extended
            persistence context (and therefore its guarantees).
        </p><p>
            The previous statement implies that there is a challenge that threatens this contract. In fact, there are
            two. One case is when a stateful session bean (SFSB) that hosts an extended persistence context is
            passivated (to save memory or to migrate it to another node in the cluster) and the second is when the HTTP
            session is passivated (to prepare it to be migrated to another node in the cluster).
        </p><p>
            I first want to discuss the general problem of passivation and then look at the two challenges cited
            individually.
        </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29769"/>35.2.1. The friction between passivation and persistence</h3></div></div></div><p>
                The persistence context is where the persistence manager (i.e., JPA EntityManager or Hibernate Session)
                stores entity instances (i.e., objects) it has loaded from the database (via the object-relational
                mappings). Within a persistence context, there is no more than one object per unique database record.
                The persistence context is often referred to as the first-level cache because if the application asks
                for a record by its unique identifier that has already been loaded into the persistence context, a call
                to the database is avoided. But it's about more than just caching.
            </p><p>
                Objects held in the persistence context can be modified, which the persistence manager tracks. When an
                object is modified, it's considered "dirty". The persistence manager will migrate these changes to the
                database using a technique known as write-behind (which basically means only when necessary). Thus, the
                persistence context maintains a set of pending changes to the database.
            </p><p>
                Database-oriented applications do much more than just read from and write to the database. They capture
                transactional bits of information that need to be transferred into the database atomically (at once). It's
                not always possible to capture this information all on one screen. Additionally, the user might need to
                make a judgement call about whether to approve or reject the pending changes.
            </p><p>
                What we are getting at here is that the idea of a transaction from the user's perspective needs to be
                extended. And that is why the extended persistence context fits so perfectly with this requirement. It
                can hold such changes for as long as the application can keep it open and then use the built-in
                capabilities of the persistence manager to push these pending changes to the database without requiring
                the application developer to worry about the low-level details (a simple call to
                <code class="literal">EntityManager#flush()</code> does the trick).
            </p><p>
                The link between the persistence manager and the entity instances is maintained using object references.
                The entity instances are serializable, but the persistence manager (and in turn its persistence context)
                is not. Therefore, the process of serialization works against this design. Serialization can occur
                either when a SFSB or the HTTP session is passivated. In order to sustain the activity in the
                application, the persistence manager and the entity instances it manages must weather serialization
                without losing their relationship. That's the aid that the MEI provides.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29785"/>35.2.2. Case #1: Surviving EJB passivation</h3></div></div></div><p>
                Conversations were initially designed with stateful session beans (SFSBs) in mind, primarily because the
                EJB 3 specification designates SFSBs as hosts of the extended persistence context. Seam introduces a
                complement to the extended persistence context, known as a Seam-managed persistence context, which works
                around a number of limitations in the specification (complex propagation rules and lack of manual
                flushing). Both can be used with a SFSB.
            </p><p>
                A SFSB relies on a client to hold a reference to it in order to keep it active. Seam has provided an
                ideal place for this reference in the conversation context. Thus, for as long as the conversation
                context is active, the SFSB is active. If an EntityManager is injected into that SFSB using the
                annotation @PersistenceContext(EXTENDED), then that EntityManager will be bound to the SFSB and remain
                open throughout its lifetime, the lifetime of the conversation. If an EntityManager is injected using
                @In, then that EntityManager is maintained by Seam and stored directly in the conversation context, thus
                living for the lifetime of the conversation independent of the lifetime of the SFSB.
            </p><p>
                With all of that said, the Java EE container can passivate a SFSB, which means it will serialize the
                object to an area of storage external to the JVM. When this happens depends on the settings of the
                individual SFSB. This process can even be disabled. However, the persistence context is not serialized
                (is this only true of SMPC?). In fact, what happens depends highly on the Java EE container. The spec is
                not very clear about this situation. Many vendors just tell you not to let it happen if you need the
                guarantees of the extended persistence context. Seam's approach is more conservative. Seam basically
                doesn't trust the SFSB with the persistence context or the entity instances. After each invocation of
                the SFSB, Seam moves the reference to entity instance held by the SFSB into the current conversation
                (and therefore into the HTTP session), nullifying those fields on the SFSB. It then restores this
                references at the beginning of the next invocation. Of course, Seam is already storing the persistence
                manager in the conversation. Thus, when the SFSB passivates and later activates, it has absolutely no
                averse affect on the application.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                    If you are using SFSBs in your application that hold references to extended persistence contexts,
                    and those SFSBs can passivate, then you must use the MEI. This requirement holds even if you are
                    using a single instance (not a cluster). However, if you are using clustered SFSB, then this
                    requirement also applies.
                </p></div><p>
                It is possible to disable passivation on a SFSB. See the <a class="ulink" href="http://www.jboss.org/community/docs/DOC-9656">Ejb3DisableSfsbPassivation</a> page on the JBoss
                Wiki for details.
            </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29802"/>35.2.3. Case #2: Surviving HTTP session replication</h3></div></div></div><p>
                Dealing with passivation of a SFSB works by leveraging the HTTP session. But what happens when the HTTP
                session passivates? This happens in a clustered environment with session replication enabled. This case
                is much tricker to deal with and is where a bulk of the MEI infrastructure comes into play. In this
                case, the persistence manager is going to be destroyed because it cannot be serialized. Seam handles
                this deconstruction (hence ensuring that the HTTP session serializes properly). But what happens on the
                other end. Well, when the MEI sticks an entity instance into the conversation, it embeds the instance in
                a wrapper that provides information on how to re-associate the instance with a persistence manager
                post-serialization. So when the application jumps to another node in the cluster (presumably because the
                target node went down) the MEI infrastructure essentially reconstructs the persistence context. The huge
                drawback here is that since the persistence context is being reconstructed (from the database), pending
                changes are dropped. However, what Seam does do is ensure that if the entity instance is versioned, that
                the guarantees of optimistic locking are upheld. (why isn't the dirty state transferred?)
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                    If you are deploying your application in a cluster and using HTTP session replication, you must use the MEI.
                </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29810"/>35.2.4. ManagedEntityInterceptor wrap-up</h3></div></div></div><p>
                The important point of this section is that the MEI is there for a reason. It's there to ensure that the
                extended persistence context can retain intact in the face of passivation (of either a SFSB or the HTTP
                session). This matters because the natural design of Seam applications (and conversational state in
                general) revolve around the state of this resource.
            </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="performance"/>Chapter 36. Performance Tuning</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e29821">36.1. Bypassing Interceptors</a></span></dt></dl></div><p>
    This chapter is an attempt to document in one place all the tips for getting the best performance from
    your Seam application.
  </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29821"/>36.1. Bypassing Interceptors</h2></div></div></div><p>
      For repetitive value bindings such as those found in a JSF dataTable or other iterative control 
      (like <code class="literal">ui:repeat</code>), the full interceptor stack will be invoked for every invocation of 
      the referenced Seam component.  The effect of this can result in a substantial performance hit, especially 
      if the component is accessed many times.  A significant performance gain can be achieved by disabling the 
      interceptor stack for the Seam component being invoked.  To disable interceptors for the component, add the 
      <code class="literal">@BypassInterceptors</code> annotation to the component class.       
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
        It is very important to be aware of the implications of disabling interceptors for a Seam component.
        Features such as bijection, annotated security restrictions, synchronization and others are 
        unavailable for a component marked with <code class="literal">@BypassInterceptors</code>.  While in most cases
        it is possible to compensate for the loss of these features (e.g. instead of injecting a component
        using <code class="literal">@In</code>, you can use <code class="literal">Component.getInstance()</code> instead) it is
        important to be aware of the consequences.
      </p></div><p>
      The following code listing demonstrates a Seam component with its interceptors disabled:
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;foo&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">EVENT</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">BypassInterceptors</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Foo</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getRowActions</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Role</span><span class="java_operator">-</span><span class="java_plain">based&nbsp;security&nbsp;check&nbsp;performed&nbsp;inline&nbsp;instead&nbsp;of&nbsp;using&nbsp;@</span><span class="java_type">Restrict</span><span class="java_plain">&nbsp;or&nbsp;other&nbsp;security&nbsp;annotation</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">checkRole</span><span class="java_separator">(</span><span class="java_literal">&quot;user&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Inline</span><span class="java_plain">&nbsp;code&nbsp;to&nbsp;lookup&nbsp;component&nbsp;instead&nbsp;of&nbsp;using&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Bar</span><span class="java_plain">&nbsp;bar&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Bar</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">Component</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">(</span><span class="java_literal">&quot;bar&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;actions</span><span class="java_separator">;</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;some&nbsp;code&nbsp;here&nbsp;that&nbsp;does&nbsp;something&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;actions</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="testing"/>Chapter 37. Testing Seam applications</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e29861">37.1. Unit testing Seam components</a></span></dt><dt><span class="section"><a href="#d0e29878">37.2. Integration testing Seam components</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e29934">37.2.1. Configuration</a></span></dt><dt><span class="section"><a href="#d0e29948">37.2.2. Using JUnitSeamTest with Arquillian</a></span></dt><dt><span class="section"><a href="#d0e30011">37.2.3. Integration testing Seam application user interactions</a></span></dt></dl></dd></dl></div><p>
	    Most Seam applications will need at least two kinds of automated tests:
	    <span class="emphasis"><em>unit tests</em></span>, which test a particular Seam component
	    in isolation, and scripted <span class="emphasis"><em>integration tests</em></span> which
	    exercise all Java layers of the application (that is, everything except the
	    view pages).
	</p><p>
	   Both kinds of tests are very easy to write.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29861"/>37.1. Unit testing Seam components</h2></div></div></div><p>
		    All Seam components are POJOs. This is a great place to start if you
		    want easy unit testing. And since Seam emphasises the use of bijection 
            for inter-component interactions and access to contextual objects, it's 
            very easy to test a Seam component outside of its normal runtime 
            environment.
		</p><p>
		    Consider the following Seam Component which creates a statement of
            account for a customer:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Scope</span><span class="java_separator">(</span><span class="java_plain">EVENT</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Name</span><span class="java_separator">(</span><span class="java_literal">&quot;statementOfAccount&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">StatementOfAccount</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_separator">(</span><span class="java_plain">create</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_type">EntityManager</span><span class="java_plain">&nbsp;entityManager</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;statementTotal</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Create</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;create</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Invoice</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;invoices&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;entityManager</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">createQuery</span><span class="java_separator">(</span><span class="java_literal">&quot;select&nbsp;invoice&nbsp;from&nbsp;Invoice&nbsp;invoice&nbsp;where&nbsp;invoice.customer&nbsp;=&nbsp;:customer&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;customer&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">getResultList</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;statementTotal&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;calculateTotal</span><span class="java_separator">(</span><span class="java_plain">invoices</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;calculateTotal</span><span class="java_separator">(</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Invoice</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;invoices</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;total&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">0.0</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Invoice</span><span class="java_plain">&nbsp;invoice</span><span class="java_operator">:</span><span class="java_plain">&nbsp;invoices</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;</span><span class="java_operator">+=</span><span class="java_plain">&nbsp;invoice</span><span class="java_separator">.</span><span class="java_plain">getTotal</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;total</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;getter&nbsp;and&nbsp;setter&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;statementTotal</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            We could write a unit test for the calculateTotal method (which tests
            the business logic of the component) as follows:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">StatementOfAccountTest</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Test</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;testCalculateTotal&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Invoice</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;invoices&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;generateTestInvoices</span><span class="java_separator">();</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;A&nbsp;test&nbsp;data&nbsp;generator</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;statementTotal&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">StatementOfAccount</span><span class="java_separator">().</span><span class="java_plain">calculateTotal</span><span class="java_separator">(</span><span class="java_plain">invoices</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;statementTotal&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">123.45</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><p>
            You'll notice we aren't testing retrieving data from or persisting
            data to the database; nor are we testing any functionality 
            provided by Seam. We are just testing the logic of our POJOs. Seam
            components don't usually depend directly upon container infrastructure,
            so most unit testing are as easy as that!
       </p><p>    
            However, if you want to test the entire application, read on.
       </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e29878"/>37.2. Integration testing Seam components</h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>Using JBoss Embedded for integration testing was removed. Seam uses
            Arquillian with JUnit. Right now TestNG is not recommended test framework with Arquillian.</p></div><p>
            Integration testing is slightly more difficult. In this case, we can't eliminate
            the container infrastructure; indeed, that is part of what is being tested! At
            the same time, we don't want to be forced to deploy our application to an
            application server to run the automated tests. We need to be able to reproduce
            just enough of the container infrastructure inside our testing environment to be 
            able to exercise the whole application, without hurting performance too much.
        </p><p>
            The approach taken by Seam is to let you write tests that exercise your
            components while running inside a pruned down container environment (Seam,
            together with the JBoss AS container)
        </p><p>
          Arquillian makes it possible to run integration tests inside a real container, even without <code class="literal">SeamTest</code>.
        </p><div class="example"><a id="d0e29893"/><p class="title"><b>Example 37.1. RegisterTest.java</b></p><div class="example-contents"><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="co" id="registration-test-runwith"><img src="images/seamframework/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">@</span><!-- <br/> --><span class="java_type">RunWith</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">Arquillian</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegisterTest</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="co" id="registration-test-deployment"><img src="images/seamframework/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Deployment</span>
<!--  --><br/><span class="co" id="registration-test-overprotocol"><img src="images/seamframework/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OverProtocol</span><span class="java_separator">(</span><span class="java_literal">&quot;Servlet&nbsp;3.0&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">Archive</span><span class="java_operator">&lt;?&gt;</span><span class="java_plain">&nbsp;createDeployment</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="co" id="registration-test-zipimporter"><img src="images/seamframework/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EnterpriseArchive</span><span class="java_plain">&nbsp;er&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">ShrinkWrap</span><span class="java_separator">.</span><span class="java_plain">create</span><span class="java_separator">(</span><span class="java_type">ZipImporter</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">importFrom</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">File</span><span class="java_separator">(</span><span class="java_literal">&quot;../registration-ear/target/seam-registration.ear&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">as</span><span class="java_separator">(</span><span class="java_type">EnterpriseArchive</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">WebArchive</span><span class="java_plain">&nbsp;web&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;er</span><span class="java_separator">.</span><span class="java_plain">getAsType</span><span class="java_separator">(</span><span class="java_type">WebArchive</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;registration-web.war&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="registration-test-addtestclass"><img src="images/seamframework/docbook/callouts/5.png" alt="(5)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">addClasses</span><span class="java_separator">(</span><span class="java_type">RegisterTest</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;er</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Before</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;before</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="co" id="registration-test-lifecycle"><img src="images/seamframework/docbook/callouts/6.png" alt="(6)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Lifecycle</span><span class="java_separator">.</span><span class="java_plain">beginCall</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">After</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;after</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Lifecycle</span><span class="java_separator">.</span><span class="java_plain">endCall</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setValue</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;valueExpression</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Expressions</span><span class="java_separator">.</span><span class="java_plain">instance</span><span class="java_separator">().</span><span class="java_plain">createValueExpression</span><span class="java_separator">(</span><span class="java_plain">valueExpression</span><span class="java_separator">).</span><span class="java_plain">setValue</span><span class="java_separator">(</span><span class="java_plain">value</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Test</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;testRegisterComponent</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.username}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;1ovthafew&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.name}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Gavin&nbsp;King&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.password}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;secret&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Register</span><span class="java_plain">&nbsp;register&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Register</span><span class="java_separator">)</span><span class="java_type">Component</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">(</span><span class="java_literal">&quot;register&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Assert</span><span class="java_separator">.</span><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_literal">&quot;success&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;register</span><span class="java_separator">.</span><span class="java_plain">register</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The JUnit <code class="literal">@RunWith</code> annotation must be present to run our tests with Arquillian.
                    </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> Since we want to run our test in a real container, we need to specify an archive that gets deployed.
                    </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/3.png" alt="3" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> <code class="literal">@OverProtocol</code> is an Arquillian annotation to specify the protocol used for running the tests.
                        The "Servlet 3.0" protocol is the recommended protocol for running Seam tests.
                    </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/4.png" alt="4" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> ShrinkWrap can be used to create the deployment archive. In this example, the whole EAR is imported, but we could also use
                        the ShrinkWrap API to create a WAR or an EAR from the scratch and put in just the artifacts that we need for the test.
                    </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/5.png" alt="5" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> The test class itself must be added to the web archive.
                    </p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="images/seamframework/docbook/callouts/6.png" alt="6" border="0" height="17px" width="17px"/></p></td><td valign="top" align="left"><p> <code class="literal">Lifecycle.beginCall()</code> is needed to setup Seam contexts.
                    </p></td></tr></table></div></div></div></div><br class="example-break"/><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29934"/>37.2.1. Configuration</h3></div></div></div><p>
            The Arquillian configuration depends on the specific container used. See Arquillian documentation for more information.
          </p><p>
              Assuming you are using Maven as your build tool and want run your tests on JBoss AS 7, you will need to put these dependencies into your <code class="literal">pom.xml</code>:
           </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.arquillian.junit</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">arquillian-junit-container</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">${version.arquillian}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">scope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">test</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">scope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.as</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-as-arquillian-container-managed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">${version.jboss.as7}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">scope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">test</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">scope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            The Arquillian JBoss AS Managed Container will automatically start the application server,
             provided the JBOSS_HOME environment property points to the JBoss AS 7 installation.
          </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e29948"/>37.2.2. Using JUnitSeamTest with Arquillian</h3></div></div></div><p>
            It is also possible to use the simulated JSF environment provided by <code class="literal">SeamTest</code> along with Arquillian. 
            This is useful especially if you are migrating from previous Seam releases and want to keep your existing testsuite mostly
            unchanged.
          </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>SeamTest was primary designated for TestNG integration tests. There are some glitches
          so we recommend to use JUnitSeamTest which is the JUnit variant for SeamTest.            
          </div><p>
            The following changes must be done to run a JUnitSeamTest with Arquillian:
          </p><div class="itemizedlist"><ul><li><p>Create the <code class="literal">@Deployment</code> method.</p></li><li><p>Convert the test to JUnit. A <code class="literal">JUnitSeamTest</code>
                class can now be used instead of the original <code class="literal">SeamTest</code>.</p></li><li><p>Replace the <code class="literal">SeamListener</code> with <code class="literal">org.jboss.seam.mock.MockSeamListener</code> in web.xml.</p></li></ul></div><div class="example"><a id="d0e29985"/><p class="title"><b>Example 37.2. RegisterTest.java</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">RunWith</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">Arquillian</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegisterTest</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">JUnitSeamTest</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Deployment</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OverProtocol</span><span class="java_separator">(</span><span class="java_literal">&quot;Servlet&nbsp;3.0&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">Archive</span><span class="java_operator">&lt;?&gt;</span><span class="java_plain">&nbsp;createDeployment</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EnterpriseArchive</span><span class="java_plain">&nbsp;er&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">ShrinkWrap</span><span class="java_separator">.</span><span class="java_plain">create</span><span class="java_separator">(</span><span class="java_type">ZipImporter</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">importFrom</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">File</span><span class="java_separator">(</span><span class="java_literal">&quot;../registration-ear/target/seam-registration.ear&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">as</span><span class="java_separator">(</span><span class="java_type">EnterpriseArchive</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">WebArchive</span><span class="java_plain">&nbsp;web&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;er</span><span class="java_separator">.</span><span class="java_plain">getAsType</span><span class="java_separator">(</span><span class="java_type">WebArchive</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;registration-web.war&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">addClasses</span><span class="java_separator">(</span><span class="java_type">RegisterTest</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Replacing</span><span class="java_plain">&nbsp;the&nbsp;</span><span class="java_type">SeamListener</span><span class="java_plain">&nbsp;with&nbsp;</span><span class="java_type">MockSeamListener</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">delete</span><span class="java_separator">(</span><span class="java_literal">&quot;/WEB-INF/web.xml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">addAsWebInfResource</span><span class="java_separator">(</span><span class="java_literal">&quot;WEB-INF/mock-web.xml&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;web.xml&quot;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;er</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Test</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;testRegisterComponent</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ComponentTest</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;testComponents</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.username}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;1ovthafew&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.name}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Gavin&nbsp;King&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.password}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;secret&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;invokeMethod</span><span class="java_separator">(</span><span class="java_literal">&quot;#{register.register}&quot;</span><span class="java_separator">).</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;success&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;getValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.username}&quot;</span><span class="java_separator">).</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;1ovthafew&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;getValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.name}&quot;</span><span class="java_separator">).</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;Gavin&nbsp;King&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;getValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.password}&quot;</span><span class="java_separator">).</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;secret&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}.</span><span class="java_plain">run</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><div class="example"><a id="d0e29990"/><p class="title"><b>Example 37.3. mock-web.xml</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web-app</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;3.0&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/javaee&nbsp;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.mock.MockSeamListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">web-app</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e29995"/>37.2.2.1. Using mocks in integration tests</h4></div></div></div><p>
                Occasionally, we need to be able to replace the implementation of some
                Seam component that depends upon resources which are not available in 
                the integration test environment. For example, suppose we have some
                Seam component which is a facade to some payment processing system:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;paymentProcessor&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentProcessor</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;processPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">....</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                For integration tests, we can mock out this component as follows:
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;paymentProcessor&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Install</span><span class="java_separator">(</span><span class="java_plain">precedence</span><span class="java_operator">=</span><span class="java_plain">MOCK</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MockPaymentProcessor</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">PaymentProcessor</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;processPayment</span><span class="java_separator">(</span><span class="java_type">Payment</span><span class="java_plain">&nbsp;payment</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
                Since the <code class="literal">MOCK</code> precedence is higher than the default
                precedence of application components, Seam will install the mock 
                implementation whenever it is in the classpath. When deployed into 
                production, the mock implementation is absent, so the real component
                will be installed.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e30011"/>37.2.3. Integration testing Seam application user interactions</h3></div></div></div><p>
            An even harder problem is emulating user interactions. A third problem is where 
            to put our assertions. Some test frameworks let us test the whole application
            by reproducing user interactions with the web browser. These frameworks have
            their place, but they are not appropriate for use at development time.
        </p><p>
            <code class="literal">SeamTest</code> or <code class="literal">JUnitSeamTest</code> lets you write
             <span class="emphasis"><em>scripted</em></span> tests,
            in a simulated JSF environment. The role of a scripted test is to reproduce 
            the interaction between the view and the Seam components. In other words, you 
            get to pretend you are the JSF implementation!
        </p><p>
            This approach tests everything except the view.
        </p><p>
            Let's consider a JSF view for the component we unit tested above:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Register&nbsp;New&nbsp;User</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">table</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">border</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Username</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.username}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Real&nbsp;Name</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:inputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.name}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Password</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:inputSecret</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{user.password}&quot;</span><span class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">td</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tr</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">table</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:messages</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;submit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Register&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{register.register}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:form</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:view</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">html</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            We want to test the registration functionality of our application (the stuff
            that happens when the user clicks the Register button). We'll reproduce the JSF 
            request lifecycle in an automated JUnit test:
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">RunWith</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">Arquillian</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegisterTest</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">JUnitSeamTest</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Deployment</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">&quot;RegisterTest&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OverProtocol</span><span class="java_separator">(</span><span class="java_literal">&quot;Servlet&nbsp;3.0&quot;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">Archive</span><span class="java_operator">&lt;?&gt;</span><span class="java_plain">&nbsp;createDeployment</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EnterpriseArchive</span><span class="java_plain">&nbsp;er&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">ShrinkWrap</span><span class="java_separator">.</span><span class="java_plain">create</span><span class="java_separator">(</span><span class="java_type">ZipImporter</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;seam-registration.ear&quot;</span><span class="java_separator">).</span><span class="java_plain">importFrom</span><span class="java_separator">(</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">File</span><span class="java_separator">(</span><span class="java_literal">&quot;../registration-ear/target/seam-registration.ear&quot;</span><span class="java_separator">))</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">as</span><span class="java_separator">(</span><span class="java_type">EnterpriseArchive</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">WebArchive</span><span class="java_plain">&nbsp;web&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;er</span><span class="java_separator">.</span><span class="java_plain">getAsType</span><span class="java_separator">(</span><span class="java_type">WebArchive</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;registration-web.war&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">addClasses</span><span class="java_separator">(</span><span class="java_type">RegisterTest</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Install</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">seam</span><span class="java_separator">.</span><span class="java_plain">mock</span><span class="java_separator">.</span><span class="java_type">MockSeamListener</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">delete</span><span class="java_separator">(</span><span class="java_literal">&quot;/WEB-INF/web.xml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web</span><span class="java_separator">.</span><span class="java_plain">addAsWebInfResource</span><span class="java_separator">(</span><span class="java_literal">&quot;web.xml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;er</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Test</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;testLogin</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesRequest</span><span class="java_separator">(</span><span class="java_literal">&quot;/register.xhtml&quot;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processValidations</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validateValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.username}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;1ovthafew&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validateValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.name}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Gavin&nbsp;King&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validateValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.password}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;secret&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;</span><span class="java_operator">!</span><span class="java_plain">isValidationFailure</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;updateModelValues</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.username}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;1ovthafew&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.name}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Gavin&nbsp;King&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{user.password}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;secret&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;invokeApplication</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;invokeMethod</span><span class="java_separator">(</span><span class="java_literal">&quot;#{register.register}&quot;</span><span class="java_separator">).</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;/registered.xhtml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setOutcome</span><span class="java_separator">(</span><span class="java_literal">&quot;/registered.xhtml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;afterRequest</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;isInvokeApplicationComplete</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;</span><span class="java_operator">!</span><span class="java_plain">isRenderResponseBegun</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}.</span><span class="java_plain">run</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            Notice that we've extended <code class="literal">JUnitSeamTest</code>, which provides a 
            Seam environment for our components, and written our test script as an 
            anonymous class that extends <code class="literal">JUnitSeamTest.FacesRequest</code>, 
            which provides an emulated JSF request lifecycle. (There is also a
            <code class="literal">JUnitSeamTest.NonFacesRequest</code> for testing GET requests.)
            We've written our code in methods which are named for the various JSF 
            phases, to emulate the calls that JSF would make to our components. Then 
            we've thrown in various assertions.
        </p><p>
            You'll find plenty of integration tests for the Seam example applications
            which demonstrate more complex cases. There are instructions for running
            these tests using Maven, or using the JUnit plugin for eclipse:
        </p><div class="mediaobject" align="center"><img src="images/plugin-junit.png" align="middle"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e30056"/>37.2.3.1. Configuration</h4></div></div></div><p>
              If you used seam-gen to create your project you are ready to start
              writing tests. Otherwise you'll need to setup the testing
              environment in your favorite build tool (e.g. ant, maven, 
              eclipse).
           </p><p>
            For ant or own build tool which uses jars on local - you can use to get all jars
            by running <code class="literal">ant -f get-arquillian-libs.xml -Dtest.lib.dir=lib/test</code>.  This just copy all Arquillian
            jars for managed JBoss AS 7.1.1 container and copy all jars into defined directory <code class="filename">lib/test</code>
             by using that <code class="literal">test.lib.dir</code> property.                      
           </p><p>
              And, of course you need to put your built project and tests onto
              the classpath as well as jar for your test framework. Don't forget
              to put all the correct configuration files for JPA and Seam onto 
              the classpath as well. Seam asks Arquillian to deploy any 
              resource (jar or directory) which has 
              <code class="literal">seam.properties</code> in it's root. Therefore, if you
              don't assemble a directory structure that resembles a deployable 
              archive containing your built project, you must put a 
              <code class="literal">seam.properties</code> in each resource.
           </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e30080"/>37.2.3.2. Using JUnitSeamTest with another test framework</h4></div></div></div><p>
              Seam provides JUnit support out of the box, but you can also use
              another test framework, if you want.
           </p><p>
              You'll need to provide an implementation of 
              <code class="literal">AbstractSeamTest</code> which does the following:
           </p><div class="itemizedlist"><ul><li><p>
                    Calls <code class="literal">super.begin()</code> before every test
                    method.
                 </p></li><li><p>
                    Calls <code class="literal">super.end()</code> after every test
                    method.
                 </p></li><li><p>
                    Calls <code class="literal">super.setupClass()</code> to setup 
                    integration test environment. This should be called before
                    any test methods are called.
                 </p></li><li><p>
                    Calls <code class="literal">super.cleanupClass()</code> to clean up
                    the integration test environment.
                 </p></li><li><p>
                    Calls <code class="literal">super.startSeam()</code> to start Seam at
                    the start of integration testing.
                 </p></li><li><p>
                    Calls <code class="literal">super.stopSeam()</code> to cleanly shut
                    down Seam at the end of integration testing.
                 </p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e30127"/>37.2.3.3. Integration Testing with Mock Data</h4></div></div></div><p>
            If you want to insert or clean data in your database before each
            test you can use Seam's integration with DBUnit.  To do this, extend 
            <code class="literal">DBUnitSeamTest</code> rather than <code class="literal">SeamTest</code>.
         </p><p>
            You have to provide a dataset for DBUnit.
         </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="caution"><h2>Caution</h2>
            DBUnit supports two formats for dataset files, flat and XML.  Seam's
            <code class="literal">DBUnitSeamTest</code> or <code class="literal">DBJUnitSeamTest</code> assumes the flat format is used, so make sure that 
            your dataset is in this format.
         </div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dataset</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ARTIST</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">dtype</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Band&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Pink&nbsp;Floyd&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">DISC</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Dark&nbsp;Side&nbsp;of&nbsp;the&nbsp;Moon&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">artist_id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dataset</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            In your test class, configure your dataset with overriding
            <code class="literal">prepareDBUnitOperations()</code>:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">protected</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">void</span><!-- <br/> --><span class="java_plain">&nbsp;prepareDBUnitOperations</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;beforeTestOperations</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">DataSetOperation</span><span class="java_separator">(</span><span class="java_literal">&quot;my/datasets/BaseData.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></pre><p>
           <code class="literal">DataSetOperation</code> defaults to <code class="literal">DatabaseOperation.CLEAN_INSERT</code>
           if no other operation is specified as a constructor argument. The 
           above example cleans all tables defined <code class="literal">BaseData.xml</code>, 
           then inserts all rows declared in <code class="literal">BaseData.xml</code> 
           before each <code class="literal">@Test</code> method is invoked.
         </p><p>
           If you require extra cleanup after a test method executes, add 
           operations to <code class="literal">afterTestOperations</code> list.
         </p><p>
           You need to tell DBUnit which datasource you are using. This is accomplished by defining
           a <a class="ulink" href="http://testng.org/doc/documentation-main.html#parameters-testng-xml">test
           parameter</a> named <code class="literal">datasourceJndiName</code> in testng.xml as follows:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">parameter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;datasourceJndiName&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:/seamdiscsDatasource&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            DBUnitSeamTest or DBJUnitSeamTest have support for MySQL and HSQL - you need to tell it
            which database is being used, otherwise it defaults to HSQL:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">parameter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;database&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MYSQL&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            It also allows you to insert binary data into the test data set (n.b.
            this is untested on Windows). You need to tell it where to locate
            these resources on your classpath:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">parameter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;binaryDir&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;images/&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>
            You do not have to configure any of these parameters if you use HSQL and have
            no binary imports. However, unless you specify <code class="literal">datasourceJndiName</code>
            in your test configuration, you will have to call <code class="literal">setDatabaseJndiName()</code>
            before your test runs. If you are not using HSQL or MySQL, you need to override some
            methods. See the Javadoc of <code class="literal">DBUnitSeamTest</code> for more details.
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="testing.mail"/>37.2.3.4. Integration Testing Seam Mail</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="caution"><h2>Caution</h2>
            Warning! This feature is still under development.
          </div><p>
            It's very easy to integration test your Seam Mail:
          </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MailTest</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">extends</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">SeamTest</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Test</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;testSimpleMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesRequest</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;updateModelValues</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{person.firstname}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Pete&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{person.lastname}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Muir&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;#{person.address}&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;test@example.com&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Override</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;invokeApplication</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">MimeMessage</span><span class="java_plain">&nbsp;renderedMessage&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getRenderedMailMessage</span><span class="java_separator">(</span><span class="java_literal">&quot;/simple.xhtml&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;renderedMessage</span><span class="java_separator">.</span><span class="java_plain">getAllRecipients</span><span class="java_separator">().</span><span class="java_plain">length&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">InternetAddress</span><span class="java_plain">&nbsp;to&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">InternetAddress</span><span class="java_separator">)</span><span class="java_plain">&nbsp;renderedMessage</span><span class="java_separator">.</span><span class="java_plain">getAllRecipients</span><span class="java_separator">()[</span><span class="java_literal">0</span><span class="java_separator">];</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;to</span><span class="java_separator">.</span><span class="java_plain">getAddress</span><span class="java_separator">().</span><span class="java_plain">equals</span><span class="java_separator">(</span><span class="java_literal">&quot;test@example.com&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}.</span><span class="java_plain">run</span><span class="java_separator">();</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>
            We create a new <code class="literal">FacesRequest</code> as normal.  Inside 
            the invokeApplication hook we render the message using 
            <code class="literal">getRenderedMailMessage(viewId);</code>, passing the 
            viewId of the message to render.  The method returns the rendered
            message on which you can do your tests. You can of course also use
            any of the standard JSF lifecycle methods.
          </p><p>
            There is no support for rendering standard JSF components so you 
            can't test the content body of the mail message easily.
          </p></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="dependencies"/>Chapter 38. Dependencies</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#jdk_dependencies">38.1. JDK Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#jdk6_dependencies">38.1.1. Oracle's JDK 6 Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e30244">38.2. Project Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e30269">38.2.1. Core</a></span></dt><dt><span class="section"><a href="#d0e30573">38.2.2. RichFaces</a></span></dt><dt><span class="section"><a href="#d0e30695">38.2.3. Seam Mail</a></span></dt><dt><span class="section"><a href="#d0e30799">38.2.4. Seam PDF</a></span></dt><dt><span class="section"><a href="#d0e30921">38.2.5. Seam Microsoft Excel</a></span></dt><dt><span class="section"><a href="#dependencies.rss">38.2.6. Seam RSS support</a></span></dt><dt><span class="section"><a href="#d0e31226">38.2.7. Drools</a></span></dt><dt><span class="section"><a href="#d0e31436">38.2.8. JBPM</a></span></dt><dt><span class="section"><a href="#d0e31491">38.2.9. GWT</a></span></dt><dt><span class="section"><a href="#d0e31549">38.2.10. Spring</a></span></dt><dt><span class="section"><a href="#d0e31607">38.2.11. Groovy</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e31665">38.3. Dependency Management using Maven</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jdk_dependencies"/>38.1. JDK Dependencies</h2></div></div></div><p>
      Seam does not work with JDK 1.4 and requires JDK 5 or above as it uses 
      annotations and other JDK 5.0 features. Seam has been thoroughly tested 
      using Oracle's JDKs and OpenJDKs.  However there are no known issues specific to Seam with
      other JDKs.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="jdk6_dependencies"/>38.1.1. Oracle's JDK 6 Considerations</h3></div></div></div><p>
            Earlier versions of Oracle's JDK 6 contained an incompatible 
            version of JAXB and required overriding it using the "endorsed" 
            directory.  Oracle's JDK6 Update 4 release upgraded to JAXB 2.1 and 
            removed this requirement.  When building, testing, or executing be
            sure to use this version or higher. 
        </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e30244"/>38.2. Project Dependencies</h2></div></div></div><p>
      This section both lists the compile-time and runtime dependencies for Seam.
      Where the type is listed as <code class="literal">ear</code>, the library should be
      included in the /lib directory of your application's ear file. Where the
      type is listed as <code class="literal">war</code>, the library should be placed in 
      the <code class="literal">/WEB-INF/lib</code> directory of your application's war
      file.  The scope of the dependency is either all, runtime or provided (by
      JBoss AS 7.1.x).
    </p><p>
      Up to date version information and complete dependency information is not 
      included in the docs, but is provided in the 
      <code class="literal">/dependency-report.txt</code> which is generated from the 
      Maven POMs stored in <code class="literal">/build</code>. You can generate this file
      by running <code class="literal">ant dependencyReport</code>.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e30269"/>38.2.1. Core</h3></div></div></div><p>
      </p><div class="table"><a id="d0e30274"/><p class="title"><b>Table 38.1. </b></p><div class="table-contents"><table summary="" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">jboss-seam.jar</code></p>
              </td><td align="center">
                <p>all</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>The core Seam library, always required.</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-debug.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Include during development when enabling Seam's debug feature</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-ioc.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required when using Seam with Spring</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-pdf.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required when using Seam's PDF features</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-excel.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required when using Seam's <span class="trademark">Microsoft</span>® <span class="trademark">Excel</span>® features</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-rss.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required when using Seam's RSS generation features</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-remoting.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required when using Seam Remoting</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-ui.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required to use the Seam JSF controls</p>
              </td></tr><tr><td>
                <p><code class="literal">jsf-api.jar</code></p>
              </td><td align="center">
                <p>provided</p>
              </td><td align="center">
                <p/>
              </td><td>
                <p>JSF API</p>
              </td></tr><tr><td>
                <p><code class="literal">jsf-impl.jar</code></p>
              </td><td align="center">
                <p>provided</p>
              </td><td align="center">
                <p/>
              </td><td>
                <p>JSF Reference Implementation</p>
              </td></tr><tr><td>
                <p><code class="literal">urlrewrite.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>URL Rewrite library</p>
              </td></tr><tr><td>
                <p><code class="literal">quartz.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>Required when you wish to use Quartz with Seam's asynchronous features</p>
              </td></tr></tbody></table></div></div><p><br class="table-break"/>
</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e30573"/>38.2.2. RichFaces</h3></div></div></div><div class="table"><a id="d0e30576"/><p class="title"><b>Table 38.2. RichFaces dependencies</b></p><div class="table-contents"><table summary="RichFaces dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">richfaces-core-api.jar</code></p>
              </td><td align="center">
                <p>all</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>
                  Required to use RichFaces.  Provides Core API classes that you may
                  wish to use from your application e.g. to create a tree
                </p>
              </td></tr><tr><td>
                <p><code class="literal">richfaces-core-impl.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required to use RichFaces Core implementations.</p>
              </td></tr><tr><td>
                <p><code class="literal">richfaces-components-ui.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required to use RichFaces.  Provides all the Components UI components.</p>
              </td></tr><tr><td>
                <p><code class="literal">richfaces-components-api.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required to use RichFaces.  Provides all the API for UI components.</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e30695"/>38.2.3. Seam Mail</h3></div></div></div><div class="table"><a id="d0e30698"/><p class="title"><b>Table 38.3. Seam Mail Dependencies</b></p><div class="table-contents"><table summary="Seam Mail Dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">mail.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>Required for outgoing mail support</p>
              </td></tr><tr><td>
                <p><code class="literal">ironjacamar-mail.jar</code></p>
              </td><td align="center">
                <p>compile only</p>
              </td><td align="center">
                <p/>
              </td><td>
                <p>Required for incoming mail support</p>
                <p><code class="filename">ironjacamar-mail.jar</code> should be deployed to the application server
                at runtime</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-mail.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Seam Mail</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e30799"/>38.2.4. Seam PDF</h3></div></div></div><div class="table"><a id="d0e30802"/><p class="title"><b>Table 38.4. Seam PDF Dependencies</b></p><div class="table-contents"><table summary="Seam PDF Dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">itext.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>PDF Library</p>
              </td></tr><tr><td>
                <p><code class="literal">jfreechart.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Charting library</p>
              </td></tr><tr><td>
                <p><code class="literal">jcommon.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Required by JFreeChart</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-pdf.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Seam PDF core library</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e30921"/>38.2.5. Seam <span class="trademark">Microsoft</span>® <span class="trademark">Excel</span>®</h3></div></div></div><div class="table"><a id="d0e30929"/><p class="title"><b>Table 38.5. Seam <span class="trademark">Microsoft</span>® <span class="trademark">Excel</span>® Dependencies</b></p><div class="table-contents"><table summary="Seam Microsoft Excel Dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">jxl.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>JExcelAPI library</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-excel.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Seam <span class="trademark">Microsoft</span>® <span class="trademark">Excel</span>® core library</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="dependencies.rss"/>38.2.6. Seam RSS support</h3></div></div></div><div class="table"><a id="d0e31019"/><p class="title"><b>Table 38.6. Seam RSS Dependencies</b></p><div class="table-contents"><table summary="Seam RSS Dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">yarfraw.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>YARFRAW RSS library</p>
              </td></tr><tr><td>
                <p><code class="literal">JAXB</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>JAXB XML parsing libraries</p>
              </td></tr><tr><td>
                <p><code class="literal">http-client.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Apache HTTP Client libraries</p>
              </td></tr><tr><td>
                <p><code class="literal">commons-io</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Apache commons IO library</p>
              </td></tr><tr><td>
                <p><code class="literal">commons-lang</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Apache commons lang library</p>
              </td></tr><tr><td>
                <p><code class="literal">commons-codec</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Apache commons codec library</p>
              </td></tr><tr><td>
                <p><code class="literal">commons-collections</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Apache commons collections library</p>
              </td></tr><tr><td>
                <p><code class="literal">jboss-seam-rss.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>Seam RSS core library</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e31226"/>38.2.7. Drools</h3></div></div></div><p>
        The Drools libraries can be found in the <code class="literal">lib</code> directory in Seam.
      </p><div class="table"><a id="d0e31234"/><p class="title"><b>Table 38.7. Drools Dependencies</b></p><div class="table-contents"><table summary="Drools Dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">antlr-runtime.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>ANTLR Runtime Library</p>
              </td></tr><tr><td>
                <p><code class="literal">ecj.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>Eclipse Compiler for Java</p>
              </td></tr><tr><td>
                <p><code class="literal">knowledge-api.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p/>
              </td></tr><tr><td>
                <p><code class="literal">drools-compiler.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>Drools compiler</p>
              </td></tr><tr><td>
                <p><code class="literal">drools-core.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p/>
              </td></tr><tr><td>
                <p><code class="literal">drools-decisiontables.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p/>
              </td></tr><tr><td>
                <p><code class="literal">drools-templates.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p/>
              </td></tr><tr><td>
                <p><code class="literal">mvel2.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p/>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e31436"/>38.2.8. JBPM</h3></div></div></div><div class="table"><a id="d0e31439"/><p class="title"><b>Table 38.8. JBPM dependencies</b></p><div class="table-contents"><table summary="JBPM dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">jbpm-jpdl.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p/>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e31491"/>38.2.9. GWT</h3></div></div></div><p>
        These libraries are required if you with to use the Google Web Toolkit (GWT) with your Seam application.
      </p><div class="table"><a id="d0e31496"/><p class="title"><b>Table 38.9. GWT dependencies</b></p><div class="table-contents"><table summary="GWT dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">gwt-servlet.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>war</p>
              </td><td>
                <p>The GWT Servlet libs</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e31549"/>38.2.10. Spring</h3></div></div></div><p>
        These libraries are required if you with to use the Spring Framework with your Seam application.
      </p><div class="table"><a id="d0e31554"/><p class="title"><b>Table 38.10. Spring Framework dependencies</b></p><div class="table-contents"><table summary="Spring Framework dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">spring.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>The Spring Framework library</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e31607"/>38.2.11. Groovy</h3></div></div></div><p>
        These libraries are required if you with to use Groovy with your Seam application.
      </p><div class="table"><a id="d0e31612"/><p class="title"><b>Table 38.11. Groovy dependencies</b></p><div class="table-contents"><table summary="Groovy dependencies" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th align="center">
                <p>Name</p>
              </th><th align="center">
                <p>Scope</p>
              </th><th align="center">
                <p>Type</p>
              </th><th align="center">
                <p>Notes</p>
              </th></tr></thead><tbody><tr><td>
                <p><code class="literal">groovy-all.jar</code></p>
              </td><td align="center">
                <p>runtime</p>
              </td><td align="center">
                <p>ear</p>
              </td><td>
                <p>The Groovy libs</p>
              </td></tr></tbody></table></div></div><br class="table-break"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e31665"/>38.3. Dependency Management using Maven</h2></div></div></div><p>
    We aren't actually going to discuss how to use Maven here, but just run
    over some Seam usage from user/application point of view you could use.
  </p><p>
     Released versions of Seam are available in <a class="ulink" href="http://repository.jboss.org/nexus/content/groups/public">
     http://repository.jboss.org/nexus/content/groups/public</a>.     
   </p><p>
     All the Seam artifacts are available in Maven:
   </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-ui</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-pdf</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-mail</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-debug</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-remoting</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-ioc</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-excel</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-resteasy</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-rss</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam-wicket</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
  
  
    This sample POM will give you Seam, JPA (provided by Hibernate), 
    Hibernate Validator and Hibernate Search:
  </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">project</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://maven.apache.org/POM/4.0.0&nbsp;http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">modelVersion</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">4.0.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">modelVersion</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam.example/groupId&gt;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">my-project</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1.0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">My&nbsp;Seam&nbsp;Project</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">packaging</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jar</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">packaging</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repositories</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repository</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">repository.jboss.org</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">JBoss&nbsp;Public&nbsp;Repository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">http://repository.jboss.org/nexus/content/groups/public</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repository</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repositories</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependencyManagement</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">bom</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">2.3.0.Final</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">pom</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">scope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">import</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">scope</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependencyManagement</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate-validator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate-entitymanager</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate-search</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss-seam</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">project</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div></div></body></html>